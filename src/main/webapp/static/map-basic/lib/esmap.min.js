/*ESMap 2018/09/14 10:40:16*/  
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.THREE=t.THREE||{})}(this,function(t){"use strict";function e(){}function i(t,e){this.x=t||0,this.y=e||0}function n(t,e,r,a,o,s,c,l,h,u){Object.defineProperty(this,"id",{value:Sr++}),this.uuid=wr.generateUUID(),this.name="",this.image=void 0!==t?t:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:n.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:An,this.wrapT=void 0!==a?a:An,this.magFilter=void 0!==o?o:Dn,this.minFilter=void 0!==s?s:In,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:Jn,this.type=void 0!==l?l:On,this.offset=new i(0,0),this.repeat=new i(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:pr,this.version=0,this.onUpdate=null}function r(t,e,i,n){this.x=t||0,this.y=e||0,this.z=i||0,this.w=void 0!==n?n:1}function a(t,e,i){this.uuid=wr.generateUUID(),this.width=t,this.height=e,this.scissor=new r(0,0,t,e),this.scissorTest=!1,this.viewport=new r(0,0,t,e),i=i||{},void 0===i.minFilter&&(i.minFilter=Dn),this.texture=new n(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function o(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._w=void 0!==n?n:1}function s(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}function c(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length}function l(t,e,i,r,a,o,s,c,l,h){t=void 0!==t?t:[],e=void 0!==e?e:_n,n.call(this,t,e,i,r,a,o,s,c,l,h),this.flipY=!1}function h(){this.seq=[],this.map={}}function u(t,e,i){var n=t[0];if(n<=0||n>0)return t;var r=e*i,a=Lr[r];if(void 0===a&&(a=new Float32Array(r),Lr[r]=a),0!==e){n.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=i,t[o].toArray(a,s)}return a}function f(t,e){var i=Ar[e];void 0===i&&(i=new Int32Array(e),Ar[e]=i);for(var n=0;n!==e;++n)i[n]=t.allocTextureUnit();return i}function d(t,e){t.uniform1f(this.addr,e)}function p(t,e){t.uniform1i(this.addr,e)}function m(t,e){void 0===e.x?t.uniform2fv(this.addr,e):t.uniform2f(this.addr,e.x,e.y)}function g(t,e){void 0!==e.x?t.uniform3f(this.addr,e.x,e.y,e.z):void 0!==e.r?t.uniform3f(this.addr,e.r,e.g,e.b):t.uniform3fv(this.addr,e)}function v(t,e){void 0===e.x?t.uniform4fv(this.addr,e):t.uniform4f(this.addr,e.x,e.y,e.z,e.w)}function x(t,e){t.uniformMatrix2fv(this.addr,!1,e.elements||e)}function y(t,e){t.uniformMatrix3fv(this.addr,!1,e.elements||e)}function _(t,e){t.uniformMatrix4fv(this.addr,!1,e.elements||e)}function M(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTexture2D(e||Er,n)}function b(t,e,i){var n=i.allocTextureUnit();t.uniform1i(this.addr,n),i.setTextureCube(e||Tr,n)}function w(t,e){t.uniform2iv(this.addr,e)}function S(t,e){t.uniform3iv(this.addr,e)}function E(t,e){t.uniform4iv(this.addr,e)}function T(t){switch(t){case 5126:return d;case 35664:return m;case 35665:return g;case 35666:return v;case 35674:return x;case 35675:return y;case 35676:return _;case 35678:return M;case 35680:return b;case 5124:case 35670:return p;case 35667:case 35671:return w;case 35668:case 35672:return S;case 35669:case 35673:return E}}function L(t,e){t.uniform1fv(this.addr,e)}function A(t,e){t.uniform1iv(this.addr,e)}function P(t,e){t.uniform2fv(this.addr,u(e,this.size,2))}function C(t,e){t.uniform3fv(this.addr,u(e,this.size,3))}function R(t,e){t.uniform4fv(this.addr,u(e,this.size,4))}function N(t,e){t.uniformMatrix2fv(this.addr,!1,u(e,this.size,4))}function D(t,e){t.uniformMatrix3fv(this.addr,!1,u(e,this.size,9))}function U(t,e){t.uniformMatrix4fv(this.addr,!1,u(e,this.size,16))}function I(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTexture2D(e[a]||Er,r[a])}function O(t,e,i){var n=e.length,r=f(i,n);t.uniform1iv(this.addr,r);for(var a=0;a!==n;++a)i.setTextureCube(e[a]||Tr,r[a])}function z(t){switch(t){case 5126:return L;case 35664:return P;case 35665:return C;case 35666:return R;case 35674:return N;case 35675:return D;case 35676:return U;case 35678:return I;case 35680:return O;case 5124:case 35670:return A;case 35667:case 35671:return w;case 35668:case 35672:return S;case 35669:case 35673:return E}}function F(t,e,i){this.id=t,this.addr=i,this.setValue=T(e.type)}function B(t,e,i){this.id=t,this.addr=i,this.size=e.size,this.setValue=z(e.type)}function G(t){this.id=t,h.call(this)}function V(t,e){t.seq.push(e),t.map[e.id]=e}function k(t,e,i){var n=t.name,r=n.length;for(Pr.lastIndex=0;;){var a=Pr.exec(n),o=Pr.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){V(i,void 0===l?new F(s,t,e):new B(s,t,e));break}var h=i.map,u=h[s];void 0===u&&(u=new G(s),V(i,u)),i=u}}function H(t,e,i){h.call(this),this.renderer=i;for(var n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),r=0;r<n;++r){var a=t.getActiveUniform(e,r),o=a.name;k(a,t.getUniformLocation(e,o),this)}}function W(t,e,i){return void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}function j(t,e){this.min=void 0!==t?t:new i(1/0,1/0),this.max=void 0!==e?e:new i(-1/0,-1/0)}function X(t,e){function n(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),e=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),f=p.createTexture(),d=p.createTexture(),m.bindTexture(p.TEXTURE_2D,f),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),m.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),c={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=r(c),h={vertex:p.getAttribLocation(l,"position"),uv:p.getAttribLocation(l,"uv")},u={renderType:p.getUniformLocation(l,"renderType"),map:p.getUniformLocation(l,"map"),occlusionMap:p.getUniformLocation(l,"occlusionMap"),opacity:p.getUniformLocation(l,"opacity"),color:p.getUniformLocation(l,"color"),scale:p.getUniformLocation(l,"scale"),rotation:p.getUniformLocation(l,"rotation"),screenPosition:p.getUniformLocation(l,"screenPosition")}}function r(e){var i=p.createProgram(),n=p.createShader(p.FRAGMENT_SHADER),r=p.createShader(p.VERTEX_SHADER),a="precision "+t.getPrecision()+" float;\n";return p.shaderSource(n,a+e.fragmentShader),p.shaderSource(r,a+e.vertexShader),p.compileShader(n),p.compileShader(r),p.attachShader(i,n),p.attachShader(i,r),p.linkProgram(i),i}var a,o,c,l,h,u,f,d,p=t.context,m=t.state;this.render=function(r,c,g){if(0!==e.length){var v=new s,x=g.w/g.z,y=.5*g.z,_=.5*g.w,M=16/g.w,b=new i(M*x,M),w=new s(1,1,0),S=new i(1,1),E=new j;E.min.set(g.x,g.y),E.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===l&&n(),p.useProgram(l),m.initAttributes(),m.enableAttribute(h.vertex),m.enableAttribute(h.uv),m.disableUnusedAttributes(),p.uniform1i(u.occlusionMap,0),p.uniform1i(u.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(h.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(h.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),m.disable(p.CULL_FACE),m.setDepthWrite(!1);for(var T=0,L=e.length;T<L;T++){M=16/g.w,b.set(M*x,M);var A=e[T];if(v.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),v.applyMatrix4(c.matrixWorldInverse),v.applyMatrix4(c.projectionMatrix),w.copy(v),S.x=g.x+w.x*y+y-8,S.y=g.y+w.y*_+_-8,!0===E.containsPoint(S)){m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,null),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,S.x,S.y,16,16,0),p.uniform1i(u.renderType,0),p.uniform2f(u.scale,b.x,b.y),p.uniform3f(u.screenPosition,w.x,w.y,w.z),m.disable(p.BLEND),m.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),m.activeTexture(p.TEXTURE0),m.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,S.x,S.y,16,16,0),p.uniform1i(u.renderType,1),m.disable(p.DEPTH_TEST),m.activeTexture(p.TEXTURE1),m.bindTexture(p.TEXTURE_2D,f),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),A.positionScreen.copy(w),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),p.uniform1i(u.renderType,2),m.enable(p.BLEND);for(var P=0,C=A.lensFlares.length;P<C;P++){var R=A.lensFlares[P];R.opacity>.001&&R.scale>.001&&(w.x=R.x,w.y=R.y,w.z=R.z,M=R.size*R.scale/g.w,b.x=M*x,b.y=M,p.uniform3f(u.screenPosition,w.x,w.y,w.z),p.uniform2f(u.scale,b.x,b.y),p.uniform1f(u.rotation,R.rotation),p.uniform1f(u.opacity,R.opacity),p.uniform3f(u.color,R.color.r,R.color.g,R.color.b),m.setBlending(R.blending,R.blendEquation,R.blendSrc,R.blendDst),t.setTexture2D(R.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}m.enable(p.CULL_FACE),m.enable(p.DEPTH_TEST),m.setDepthWrite(!0),t.resetGLState()}}}function Y(t,e){function i(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),e=new Uint16Array([0,1,2,0,2,3]);c=p.createBuffer(),l=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,c),p.bufferData(p.ARRAY_BUFFER,t,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.bufferData(p.ELEMENT_ARRAY_BUFFER,e,p.STATIC_DRAW),h=r(),u={position:p.getAttribLocation(h,"position"),uv:p.getAttribLocation(h,"uv")},f={uvOffset:p.getUniformLocation(h,"uvOffset"),uvScale:p.getUniformLocation(h,"uvScale"),rotation:p.getUniformLocation(h,"rotation"),scale:p.getUniformLocation(h,"scale"),color:p.getUniformLocation(h,"color"),map:p.getUniformLocation(h,"map"),opacity:p.getUniformLocation(h,"opacity"),modelViewMatrix:p.getUniformLocation(h,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(h,"projectionMatrix"),fogType:p.getUniformLocation(h,"fogType"),fogDensity:p.getUniformLocation(h,"fogDensity"),fogNear:p.getUniformLocation(h,"fogNear"),fogFar:p.getUniformLocation(h,"fogFar"),fogColor:p.getUniformLocation(h,"fogColor"),alphaTest:p.getUniformLocation(h,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var a=i.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),d=new n(i),d.needsUpdate=!0}function r(){var e=p.createProgram(),i=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(i,["precision "+t.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+t.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(i),p.compileShader(n),p.attachShader(e,i),p.attachShader(e,n),p.linkProgram(e),e}function a(t,e){return t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:e.id-t.id}var c,l,h,u,f,d,p=t.context,m=t.state,g=new s,v=new o,x=new s;this.render=function(n,r){if(0!==e.length){void 0===h&&i(),p.useProgram(h),m.initAttributes(),m.enableAttribute(u.position),m.enableAttribute(u.uv),m.disableUnusedAttributes(),m.disable(p.CULL_FACE),m.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,c),p.vertexAttribPointer(u.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(u.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,l),p.uniformMatrix4fv(f.projectionMatrix,!1,r.projectionMatrix.elements),m.activeTexture(p.TEXTURE0),p.uniform1i(f.map,0);var o=0,s=0,y=n.fog;y?(p.uniform3f(f.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(p.uniform1f(f.fogNear,y.near),p.uniform1f(f.fogFar,y.far),p.uniform1i(f.fogType,1),o=1,s=1):y.isFogExp2&&(p.uniform1f(f.fogDensity,y.density),p.uniform1i(f.fogType,2),o=2,s=2)):(p.uniform1i(f.fogType,0),o=0,s=0);for(var _=0,M=e.length;_<M;_++){var b=e[_];b.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14]}e.sort(a);for(var w=[],_=0,M=e.length;_<M;_++){var b=e[_],S=b.material;if(!1!==S.visible){p.uniform1f(f.alphaTest,S.alphaTest),p.uniformMatrix4fv(f.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(g,v,x),w[0]=x.x,w[1]=x.y;var E=0;n.fog&&S.fog&&(E=s),o!==E&&(p.uniform1i(f.fogType,E),o=E),null!==S.map?(p.uniform2f(f.uvOffset,S.map.offset.x,S.map.offset.y),p.uniform2f(f.uvScale,S.map.repeat.x,S.map.repeat.y)):(p.uniform2f(f.uvOffset,0,0),p.uniform2f(f.uvScale,1,1)),p.uniform1f(f.opacity,S.opacity),p.uniform3f(f.color,S.color.r,S.color.g,S.color.b),p.uniform1f(f.rotation,S.rotation),p.uniform2fv(f.scale,w),m.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),m.setDepthTest(S.depthTest),m.setDepthWrite(S.depthWrite),S.map?t.setTexture2D(S.map,0):t.setTexture2D(d,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}m.enable(p.CULL_FACE),t.resetGLState()}}}function q(){Object.defineProperty(this,"id",{value:Ir++}),this.uuid=wr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Oi,this.side=Ai,this.shading=Ni,this.vertexColors=Di,this.opacity=1,this.transparent=!1,this.blendSrc=Ji,this.blendDst=Qi,this.blendEquation=Vi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=sn,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Z(t){q.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==t&&(t.attributes,this.setValues(t))}function J(t){q.call(this),this.type="MeshDepthMaterial",this.depthPacking=Mr,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Q(t,e){this.min=void 0!==t?t:new s(1/0,1/0,1/0),this.max=void 0!==e?e:new s(-1/0,-1/0,-1/0)}function K(t,e){this.center=void 0!==t?t:new s,this.radius=void 0!==e?e:0}function $(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length}function tt(t,e){this.normal=void 0!==t?t:new s(1,0,0),this.constant=void 0!==e?e:0}function et(t,e,i,n,r,a){this.planes=[void 0!==t?t:new tt,void 0!==e?e:new tt,void 0!==i?i:new tt,void 0!==n?n:new tt,void 0!==r?r:new tt,void 0!==a?a:new tt]}function it(t,e,n,o){function l(e,i,n,r){var a=e.geometry,o=null,s=S,c=e.customDepthMaterial;if(n&&(s=E,c=e.customDistanceMaterial),c)o=c;else{var l=!1;i.morphTargets&&(a&&a.isBufferGeometry?l=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(l=a.morphTargets&&a.morphTargets.length>0));var h=e.isSkinnedMesh&&i.skinning,u=0;l&&(u|=M),h&&(u|=b),o=s[u]}if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var f=o.uuid,d=i.uuid,p=T[f];void 0===p&&(p={},T[f]=p);var m=p[d];void 0===m&&(m=o.clone(),p[d]=m),o=m}o.visible=i.visible,o.wireframe=i.wireframe;var g=i.side;return F.renderSingleSided&&g==Ci&&(g=Ai),F.renderReverseSided&&(g===Ai?g=Pi:g===Pi&&(g=Ai)),o.side=g,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(r),o}function h(t,e,i){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask)&&(t.isMesh||t.isLine||t.isPoints)&&t.castShadow&&(!1===t.frustumCulled||!0===d.intersectsObject(t))){!0===t.material.visible&&(t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),_.push(t))}for(var n=t.children,r=0,a=n.length;r<a;r++)h(n[r],e,i)}}var u=t.context,f=t.state,d=new et,p=new c,m=e.shadows,g=new i,v=new i(o.maxTextureSize,o.maxTextureSize),x=new s,y=new s,_=[],M=1,b=2,w=1+(M|b),S=new Array(w),E=new Array(w),T={},L=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],A=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],P=[new r,new r,new r,new r,new r,new r],C=new J;C.depthPacking=br,C.clipping=!0;for(var R=Ur.distanceRGBA,N=Cr.clone(R.uniforms),D=0;D!==w;++D){var U=0!=(D&M),I=0!=(D&b),O=C.clone();O.morphTargets=U,O.skinning=I,S[D]=O;var z=new Z({defines:{USE_SHADOWMAP:""},uniforms:N,vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,morphTargets:U,skinning:I,clipping:!0});E[D]=z}var F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ti,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(e,i){if(!1!==F.enabled&&(!1!==F.autoUpdate||!1!==F.needsUpdate)&&0!==m.length){f.buffers.color.setClear(1,1,1,1),f.disable(u.BLEND),f.setDepthTest(!0),f.setScissorTest(!1);for(var r,o,s=0,c=m.length;s<c;s++){var M=m[s],b=M.shadow;if(void 0!==b){var w=b.camera;if(g.copy(b.mapSize),g.min(v),M&&M.isPointLight){r=6,o=!0;var S=g.x,E=g.y;P[0].set(2*S,E,S,E),P[1].set(0,E,S,E),P[2].set(3*S,E,S,E),P[3].set(S,E,S,E),P[4].set(3*S,0,S,E),P[5].set(S,0,S,E),g.x*=4,g.y*=2}else r=1,o=!1;if(null===b.map){var T={minFilter:Cn,magFilter:Cn,format:Jn};b.map=new a(g.x,g.y,T),w.updateProjectionMatrix()}b.isSpotLightShadow&&b.update(M),b&&b.isRectAreaLightShadow&&b.update(M);var C=b.map,R=b.matrix;y.setFromMatrixPosition(M.matrixWorld),w.position.copy(y),t.setRenderTarget(C),t.clear();for(var N=0;N<r;N++){if(o){x.copy(w.position),x.add(L[N]),w.up.copy(A[N]),w.lookAt(x);var D=P[N];f.viewport(D)}else x.setFromMatrixPosition(M.target.matrixWorld),w.lookAt(x);w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(w.projectionMatrix),R.multiply(w.matrixWorldInverse),p.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),d.setFromMatrix(p),_.length=0,h(e,i,w);for(var U=0,I=_.length;U<I;U++){var O=_[U],z=n.update(O),B=O.material;if(B&&B.isMultiMaterial)for(var G=z.groups,V=B.materials,k=0,H=G.length;k<H;k++){var W=G[k],j=V[W.materialIndex];if(!0===j.visible){var X=l(O,j,o,y);t.renderBufferDirect(w,null,z,X,O,W)}}else{var X=l(O,B,o,y);t.renderBufferDirect(w,null,z,X,O,null)}}}}}var Y=t.getClearColor(),q=t.getClearAlpha();t.setClearColor(Y,q),F.needsUpdate=!1}}}function nt(t,e){this.origin=void 0!==t?t:new s,this.direction=void 0!==e?e:new s}function rt(t,e,i,n){this._x=t||0,this._y=e||0,this._z=i||0,this._order=n||rt.DefaultOrder}function at(){this.mask=1}function ot(){function t(){r.setFromEuler(n,!1)}function e(){n.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:Or++}),this.uuid=wr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ot.DefaultUp.clone();var i=new s,n=new rt,r=new o,a=new s(1,1,1);n.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{enumerable:!0,value:i},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:r},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new c},normalMatrix:{value:new $}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function st(t,e){this.start=void 0!==t?t:new s,this.end=void 0!==e?e:new s}function ct(t,e,i){this.a=void 0!==t?t:new s,this.b=void 0!==e?e:new s,this.c=void 0!==i?i:new s}function lt(t,e,i,n,r,a){this.a=t,this.b=e,this.c=i,this.normal=n&&n.isVector3?n:new s,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new W,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function ht(t){q.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ut(t,e,i){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=wr.generateUUID(),this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ft(t,e){ut.call(this,new Uint16Array(t),e)}function dt(t,e){ut.call(this,new Uint32Array(t),e)}function pt(t,e){ut.call(this,new Float32Array(t),e)}function mt(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function gt(t){for(var e=t.length,i=-1/0;e--;)t[e]>i&&(i=t[e]);return i}function vt(){return zr++}function xt(){Object.defineProperty(this,"id",{value:vt()}),this.uuid=wr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function yt(){Object.defineProperty(this,"id",{value:vt()}),this.uuid=wr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function _t(t,e){ot.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new yt,this.material=void 0!==e?e:new ht({color:16777215*Math.random()}),this.drawMode=ur,this.updateMorphTargets()}function Mt(t,e,i,n,r,a){xt.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new bt(t,e,i,n,r,a)),this.mergeVertices()}function bt(t,e,i,n,r,a){function o(t,e,i,n,r,a,o,m,g,v,x){var y,_,M=a/g,b=o/v,w=a/2,S=o/2,E=m/2,T=g+1,L=v+1,A=0,P=0,C=new s;for(_=0;_<L;_++){var R=_*b-S;for(y=0;y<T;y++){var N=y*M-w;C[t]=N*n,C[e]=R*r,C[i]=E,h.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[i]=m>0?1:-1,u.push(C.x,C.y,C.z),f.push(y/g),f.push(1-_/v),A+=1}}for(_=0;_<v;_++)for(y=0;y<g;y++){var D=d+y+T*_,U=d+y+T*(_+1),I=d+(y+1)+T*(_+1),O=d+(y+1)+T*_;l.push(D,U,O),l.push(U,I,O),P+=6}c.addGroup(p,P,x),p+=P,d+=A}yt.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var c=this;n=Math.floor(n)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var l=[],h=[],u=[],f=[],d=0,p=0;o("z","y","x",-1,-1,i,e,t,a,r,0),o("z","y","x",1,-1,i,e,-t,a,r,1),o("x","z","y",1,1,t,i,e,n,a,2),o("x","z","y",1,-1,t,i,-e,n,a,3),o("x","y","z",1,-1,t,e,i,n,r,4),o("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(l),this.addAttribute("position",new pt(h,3)),this.addAttribute("normal",new pt(u,3)),this.addAttribute("uv",new pt(f,2))}function wt(t,e,i,n){xt.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new St(t,e,i,n))}function St(t,e,i,n){yt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};var r,a,o=t/2,s=e/2,c=Math.floor(i)||1,l=Math.floor(n)||1,h=c+1,u=l+1,f=t/c,d=e/l,p=[],m=[],g=[],v=[];for(a=0;a<u;a++){var x=a*d-s;for(r=0;r<h;r++){var y=r*f-o;m.push(y,-x,0),g.push(0,0,1),v.push(r/c),v.push(1-a/l)}}for(a=0;a<l;a++)for(r=0;r<c;r++){var _=r+h*a,M=r+h*(a+1),b=r+1+h*(a+1),w=r+1+h*a;p.push(_,M,w),p.push(M,b,w)}this.setIndex(p),this.addAttribute("position",new pt(m,3)),this.addAttribute("normal",new pt(g,3)),this.addAttribute("uv",new pt(v,2))}function Et(){ot.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c}function Tt(t,e,i,n){Et.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Lt(t,e,i,n,r,a){Et.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function At(t,e,i){function n(t){s=t}function r(i){i.array instanceof Uint32Array&&e.get("OES_element_index_uint")?(c=t.UNSIGNED_INT,l=4):i.array instanceof Uint16Array?(c=t.UNSIGNED_SHORT,l=2):(c=t.UNSIGNED_BYTE,l=1)}function a(e,n){t.drawElements(s,n,c,e*l),i.calls++,i.vertices+=n,s===t.TRIANGLES&&(i.faces+=n/3)}function o(n,r,a){var o=e.get("ANGLE_instanced_arrays");null!==o&&(o.drawElementsInstancedANGLE(s,a,c,r*l,n.maxInstancedCount),i.calls++,i.vertices+=a*n.maxInstancedCount,s===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*a/3))}var s,c,l;return{setMode:n,setIndex:r,render:a,renderInstances:o}}function Pt(t,e,i){function n(t){o=t}function r(e,n){t.drawArrays(o,e,n),i.calls++,i.vertices+=n,o===t.TRIANGLES&&(i.faces+=n/3)}function a(n){var r=e.get("ANGLE_instanced_arrays");if(null!==r){var a=n.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,r.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)):(s=a.count,r.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)),i.calls++,i.vertices+=s*n.maxInstancedCount,o===t.TRIANGLES&&(i.faces+=n.maxInstancedCount*s/3)}}var o;return{setMode:n,render:r,renderInstances:a}}function Ct(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new s,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new s,direction:new s,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new s,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"HemisphereLight":n={direction:new s,skyColor:new W,groundColor:new W};break;case"RectAreaLight":n={color:new W,position:new s,halfWidth:new s,halfHeight:new s}}return t[e.id]=n,n}}}function Rt(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS),t.getShaderInfoLog(n),n}function Nt(t){switch(t){case pr:return["Linear","( value )"];case mr:return["sRGB","( value )"];case vr:return["RGBE","( value )"];case xr:return["RGBM","( value, 7.0 )"];case yr:return["RGBM","( value, 16.0 )"];case _r:return["RGBD","( value, 256.0 )"];case gr:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function Dt(t,e){var i=Nt(e);return"vec4 "+t+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Ut(t,e){var i=Nt(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function It(t,e){var i;switch(e){case gn:i="Linear";break;case vn:i="Reinhard";break;case xn:i="Uncharted2";break;case yn:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function Ot(t,e,i){return t=t||{},
[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Bt).join("\n")}function zt(t){var e=[];for(var i in t){var n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function Ft(t,e,i){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var o=t.getActiveAttrib(e,a),s=o.name;n[s]=t.getAttribLocation(e,s)}return n}function Bt(t){return""!==t}function Gt(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function Vt(t){function e(t,e){var i=Rr[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return Vt(i)}var i=/#include +<([\w\d.]+)>/g;return t.replace(i,e)}function kt(t){function e(t,e,i,n){for(var r="",a=parseInt(e);a<parseInt(i);a++)r+=n.replace(/\[ i \]/g,"[ "+a+" ]");return r}var i=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(i,e)}function Ht(t,e,i,n){var r=t.context,a=i.extensions,o=i.defines,s=i.__webglShader.vertexShader,c=i.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===Ti?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===Li&&(l="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case _n:case Mn:h="ENVMAP_TYPE_CUBE";break;case En:case Tn:h="ENVMAP_TYPE_CUBE_UV";break;case bn:case wn:h="ENVMAP_TYPE_EQUIREC";break;case Sn:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Mn:case wn:u="ENVMAP_MODE_REFRACTION"}switch(i.combine){case fn:f="ENVMAP_BLENDING_MULTIPLY";break;case dn:f="ENVMAP_BLENDING_MIX";break;case pn:f="ENVMAP_BLENDING_ADD"}}var d,p,m=t.gammaFactor>0?t.gammaFactor:1,g=Ot(a,n,t.extensions),v=zt(o),x=r.createProgram();i.isRawShaderMaterial?(d=[v,"\n"].filter(Bt).join("\n"),p=[g,v,"\n"].filter(Bt).join("\n")):(d=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Bt).join("\n"),p=[g,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+i.__webglShader.name,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==mn?"#define TONE_MAPPING":"",n.toneMapping!==mn?Rr.tonemapping_pars_fragment:"",n.toneMapping!==mn?It("toneMapping",n.toneMapping):"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?Rr.encodings_pars_fragment:"",n.mapEncoding?Dt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Dt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Dt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?Ut("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Bt).join("\n")),s=Vt(s,n),s=Gt(s,n),c=Vt(c,n),c=Gt(c,n),i.isShaderMaterial||(s=kt(s),c=kt(c));var y=d+s,_=p+c,M=Rt(r,r.VERTEX_SHADER,y),b=Rt(r,r.FRAGMENT_SHADER,_);r.attachShader(x,M),r.attachShader(x,b),void 0!==i.index0AttributeName?r.bindAttribLocation(x,0,i.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(x,0,"position"),r.linkProgram(x);var w=r.getProgramInfoLog(x),S=r.getShaderInfoLog(M),E=r.getShaderInfoLog(b),T=!0,L=!0;!1===r.getProgramParameter(x,r.LINK_STATUS)?T=!1:""!==w||""!==S&&""!==E||(L=!1),L&&(this.diagnostics={runnable:T,material:i,programLog:w,vertexShader:{log:S,prefix:d},fragmentShader:{log:E,prefix:p}}),r.deleteShader(M),r.deleteShader(b);var A;this.getUniforms=function(){return void 0===A&&(A=new H(r,x,t)),A};var P;return this.getAttributes=function(){return void 0===P&&(P=Ft(r,x)),P},this.destroy=function(){r.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return this.getUniforms()}},attributes:{get:function(){return this.getAttributes()}}}),this.id=Fr++,this.code=e,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=b,this}function Wt(t,e){function i(t){if(e.floatVertexTextures&&t&&t.skeleton&&t.skeleton.useVertexTexture)return 1024;var i=e.maxVertexUniforms,n=Math.floor((i-20)/4),r=n;return void 0!==t&&t&&t.isSkinnedMesh&&(r=Math.min(t.skeleton.bones.length,r),t.skeleton.bones.length),r}function n(t,e){var i;return t?t.isTexture?i=t.encoding:t.isWebGLRenderTarget&&(i=t.texture.encoding):i=pr,i===pr&&e&&(i=gr),i}var r=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(r,o,s,c,l,h){var u=a[r.type],f=i(h),d=t.getPrecision();null!==r.precision&&(d=e.getMaxPrecision(r.precision),r.precision);var p=t.getCurrentRenderTarget();return{shaderID:u,precision:d,supportsVertexTextures:e.vertexTextures,outputEncoding:n(p?p.texture:null,t.gammaOutput),map:!!r.map,mapEncoding:n(r.map,t.gammaInput),envMap:!!r.envMap,envMapMode:r.envMap&&r.envMap.mapping,envMapEncoding:n(r.envMap,t.gammaInput),envMapCubeUV:!!r.envMap&&(r.envMap.mapping===En||r.envMap.mapping===Tn),lightMap:!!r.lightMap,aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:n(r.emissiveMap,t.gammaInput),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,combine:r.combine,vertexColors:r.vertexColors,fog:!!s,useFog:r.fog,fogExp:s&&s.isFogExp2,flatShading:r.shading===Ri,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:e.logarithmicDepthBuffer,skinning:r.skinning,maxBones:f,useVertexTexture:e.floatVertexTextures&&h&&h.skeleton&&h.skeleton.useVertexTexture,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:c,numClipIntersection:l,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&o.shadows.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===Ci,flipSided:r.side===Pi,depthPacking:void 0!==r.depthPacking&&r.depthPacking}},this.getProgramCode=function(t,e){var i=[];if(e.shaderID?i.push(e.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<o.length;r++)i.push(e[o[r]]);return i.join()},this.acquireProgram=function(e,i,n){for(var a,o=0,s=r.length;o<s;o++){var c=r[o];if(c.code===n){a=c,++a.usedTimes;break}}return void 0===a&&(a=new Ht(t,n,e,i),r.push(a)),a},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function jt(t,e,i){function n(t){var r=t.target,s=c[r.id];null!==s.index&&a(s.index),o(s.attributes),r.removeEventListener("dispose",n),delete c[r.id];var l=e.get(r);l.wireframe&&a(l.wireframe),e.delete(r);var h=e.get(s);h.wireframe&&a(h.wireframe),e.delete(s),i.memory.geometries--}function r(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function a(e){var i=r(e);void 0!==i&&(t.deleteBuffer(i),s(e))}function o(t){for(var e in t)a(t[e])}function s(t){t.isInterleavedBufferAttribute?e.delete(t.data):e.delete(t)}var c={};return{get:function(t){var e=t.geometry;if(void 0!==c[e.id])return c[e.id];e.addEventListener("dispose",n);var r;return e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new yt).setFromObject(t)),r=e._bufferGeometry),c[e.id]=r,i.memory.geometries++,r}}}function Xt(t,e,i){function n(e){var i=h.get(e);e.geometry.isGeometry&&i.updateFromObject(e);var n=i.index,a=i.attributes;null!==n&&r(n,t.ELEMENT_ARRAY_BUFFER);for(var o in a)r(a[o],t.ARRAY_BUFFER);var s=i.morphAttributes;for(var o in s)for(var c=s[o],l=0,u=c.length;l<u;l++)r(c[l],t.ARRAY_BUFFER);return i}function r(t,i){var n=t.isInterleavedBufferAttribute?t.data:t,r=e.get(n);void 0===r.__webglBuffer?a(r,n,i):r.version!==n.version&&o(r,n,i)}function a(e,i,n){e.__webglBuffer=t.createBuffer(),t.bindBuffer(n,e.__webglBuffer);var r=i.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW;t.bufferData(n,i.array,r);var a=t.FLOAT,o=i.array;o instanceof Float32Array?a=t.FLOAT:o instanceof Float64Array||(o instanceof Uint16Array?a=t.UNSIGNED_SHORT:o instanceof Int16Array?a=t.SHORT:o instanceof Uint32Array?a=t.UNSIGNED_INT:o instanceof Int32Array?a=t.INT:o instanceof Int8Array?a=t.BYTE:o instanceof Uint8Array&&(a=t.UNSIGNED_BYTE)),e.bytesPerElement=o.BYTES_PER_ELEMENT,e.type=a,e.version=i.version,i.onUploadCallback()}function o(e,i,n){t.bindBuffer(n,e.__webglBuffer),!1===i.dynamic?t.bufferData(n,i.array,t.STATIC_DRAW):-1===i.updateRange.count?t.bufferSubData(n,0,i.array):0===i.updateRange.count||(t.bufferSubData(n,i.updateRange.offset*i.array.BYTES_PER_ELEMENT,i.array.subarray(i.updateRange.offset,i.updateRange.offset+i.updateRange.count)),i.updateRange.count=0),e.version=i.version}function s(t){return t.isInterleavedBufferAttribute?e.get(t.data).__webglBuffer:e.get(t).__webglBuffer}function c(t){return t.isInterleavedBufferAttribute?e.get(t.data):e.get(t)}function l(i){var n=e.get(i);if(void 0!==n.wireframe)return n.wireframe;var a=[],o=i.index,s=i.attributes;if(null!==o)for(var c=o.array,l=0,h=c.length;l<h;l+=3){var u=c[l+0],f=c[l+1],d=c[l+2];a.push(u,f,f,d,d,u)}else for(var c=s.position.array,l=0,h=c.length/3-1;l<h;l+=3){var u=l+0,f=l+1,d=l+2;a.push(u,f,f,d,d,u)}var p=new(gt(a)>65535?dt:ft)(a,1);return r(p,t.ELEMENT_ARRAY_BUFFER),n.wireframe=p,p}var h=new jt(t,e,i);return{getAttributeBuffer:s,getAttributeProperties:c,getWireframeAttribute:l,update:n}}function Yt(t,e,i,n,r,a,o){function s(t,e){if(t.width>e||t.height>e){var i=e/Math.max(t.width,t.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(t.width*i),n.height=Math.floor(t.height*i);return n.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height),n}return t}function c(t){return wr.isPowerOfTwo(t.width)&&wr.isPowerOfTwo(t.height)}function l(t){if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement){var e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");e.width=wr.nearestPowerOfTwo(t.width),e.height=wr.nearestPowerOfTwo(t.height);return e.getContext("2d").drawImage(t,0,0,e.width,e.height),e}return t}function h(t){return t.wrapS!==An||t.wrapT!==An||t.minFilter!==Cn&&t.minFilter!==Dn}function u(e){return e===Cn||e===Rn||e===Nn?t.NEAREST:t.LINEAR}function f(t){var e=t.target;e.removeEventListener("dispose",f),p(e),L.textures--}function d(t){var e=t.target;e.removeEventListener("dispose",d),m(e),L.textures--}function p(e){var i=n.get(e);if(e.image&&i.__image__webglTextureCube)t.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;t.deleteTexture(i.__webglTexture)}n.delete(e)}function m(e){var i=n.get(e),r=n.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var a=0;a<6;a++)t.deleteFramebuffer(i.__webglFramebuffer[a]),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[a]);else t.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer);n.delete(e.texture),n.delete(e)}}function g(e,r){var a=n.get(e);if(e.version>0&&a.__version!==e.version){var o=e.image;if(void 0===o);else if(!1!==o.complete)return void _(a,e,r)}i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_2D,a.__webglTexture)}function v(e,o){var l=n.get(e);if(6===e.image.length)if(e.version>0&&l.__version!==e.version){l.__image__webglTextureCube||(e.addEventListener("dispose",f),l.__image__webglTextureCube=t.createTexture(),L.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var h=e&&e.isCompressedTexture,u=e.image[0]&&e.image[0].isDataTexture,d=[],p=0;p<6;p++)d[p]=h||u?u?e.image[p].image:e.image[p]:s(e.image[p],r.maxCubemapSize);var m=d[0],g=c(m),v=a(e.format),x=a(e.type);y(t.TEXTURE_CUBE_MAP,e,g);for(var p=0;p<6;p++)if(h)for(var _,M=d[p].mipmaps,b=0,w=M.length;b<w;b++)_=M[b],e.format!==Jn&&e.format!==Zn?i.getCompressedTextureFormats().indexOf(v)>-1&&i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,_.width,_.height,0,_.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,_.width,_.height,0,v,x,_.data);else u?i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,d[p].width,d[p].height,0,v,x,d[p].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,v,x,d[p]);e.generateMipmaps&&g&&t.generateMipmap(t.TEXTURE_CUBE_MAP),l.__version=e.version,e.onUpdate&&e.onUpdate(e)}else i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function x(e,r){i.activeTexture(t.TEXTURE0+r),i.bindTexture(t.TEXTURE_CUBE_MAP,n.get(e).__webglTexture)}function y(i,o,s){var c;if(s?(t.texParameteri(i,t.TEXTURE_WRAP_S,a(o.wrapS)),t.texParameteri(i,t.TEXTURE_WRAP_T,a(o.wrapT)),t.texParameteri(i,t.TEXTURE_MAG_FILTER,a(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,a(o.minFilter))):(t.texParameteri(i,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(i,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o.wrapS!==An||o.wrapT,t.texParameteri(i,t.TEXTURE_MAG_FILTER,u(o.magFilter)),t.texParameteri(i,t.TEXTURE_MIN_FILTER,u(o.minFilter)),o.minFilter!==Cn&&o.minFilter),c=e.get("EXT_texture_filter_anisotropic")){if(o.type===kn&&null===e.get("OES_texture_float_linear"))return;if(o.type===Hn&&null===e.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function _(e,n,o){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",f),e.__webglTexture=t.createTexture(),L.textures++),i.activeTexture(t.TEXTURE0+o),i.bindTexture(t.TEXTURE_2D,e.__webglTexture),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,n.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,n.unpackAlignment);var u=s(n.image,r.maxTextureSize);h(n)&&!1===c(u)&&(u=l(u));var d=c(u),p=a(n.format),m=a(n.type);y(t.TEXTURE_2D,n,d);var g,v=n.mipmaps;if(n.isDepthTexture){var x=t.DEPTH_COMPONENT;if(n.type===kn){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");x=t.DEPTH_COMPONENT32F}else A&&(x=t.DEPTH_COMPONENT16);n.format===tr&&x===t.DEPTH_COMPONENT&&n.type!==Bn&&n.type!==Vn&&(n.type=Bn,m=a(n.type)),n.format===er&&(x=t.DEPTH_STENCIL,n.type!==Yn&&(n.type=Yn,m=a(n.type))),i.texImage2D(t.TEXTURE_2D,0,x,u.width,u.height,0,p,m,null)}else if(n.isDataTexture)if(v.length>0&&d){for(var _=0,M=v.length;_<M;_++)g=v[_],i.texImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,p,m,g.data);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,p,u.width,u.height,0,p,m,u.data);else if(n.isCompressedTexture)for(var _=0,M=v.length;_<M;_++)g=v[_],n.format!==Jn&&n.format!==Zn?i.getCompressedTextureFormats().indexOf(p)>-1&&i.compressedTexImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,g.data):i.texImage2D(t.TEXTURE_2D,_,p,g.width,g.height,0,p,m,g.data);else if(v.length>0&&d){for(var _=0,M=v.length;_<M;_++)g=v[_],i.texImage2D(t.TEXTURE_2D,_,p,p,m,g);n.generateMipmaps=!1}else i.texImage2D(t.TEXTURE_2D,0,p,p,m,u);n.generateMipmaps&&d&&t.generateMipmap(t.TEXTURE_2D),e.__version=n.version,n.onUpdate&&n.onUpdate(n)}function M(e,r,o,s){var c=a(r.texture.format),l=a(r.texture.type);i.texImage2D(s,0,c,r.width,r.height,0,c,l,null),t.bindFramebuffer(t.FRAMEBUFFER,e),t.framebufferTexture2D(t.FRAMEBUFFER,o,s,n.get(r.texture).__webglTexture,0),t.bindFramebuffer(t.FRAMEBUFFER,null)}function b(e,i){t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer&&!i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e)):i.depthBuffer&&i.stencilBuffer?(t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e)):t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,i.width,i.height),t.bindRenderbuffer(t.RENDERBUFFER,null)}function w(e,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(t.bindFramebuffer(t.FRAMEBUFFER,e),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),g(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===tr)t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,r,0);else{if(i.depthTexture.format!==er)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,r,0)}}function S(e){var i=n.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");w(i.__webglFramebuffer,e)}else if(r){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=t.createRenderbuffer(),b(i.__webglDepthbuffer[a],e)}else t.bindFramebuffer(t.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=t.createRenderbuffer(),b(i.__webglDepthbuffer,e);t.bindFramebuffer(t.FRAMEBUFFER,null)}function E(e){var r=n.get(e),a=n.get(e.texture);e.addEventListener("dispose",d),a.__webglTexture=t.createTexture(),L.textures++;var o=!0===e.isWebGLRenderTargetCube,s=c(e);if(o){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=t.createFramebuffer()}else r.__webglFramebuffer=t.createFramebuffer();if(o){i.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture),y(t.TEXTURE_CUBE_MAP,e.texture,s);for(var l=0;l<6;l++)M(r.__webglFramebuffer[l],e,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+l);e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_CUBE_MAP),i.bindTexture(t.TEXTURE_CUBE_MAP,null)}else i.bindTexture(t.TEXTURE_2D,a.__webglTexture),y(t.TEXTURE_2D,e.texture,s),M(r.__webglFramebuffer,e,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),e.texture.generateMipmaps&&s&&t.generateMipmap(t.TEXTURE_2D),i.bindTexture(t.TEXTURE_2D,null);e.depthBuffer&&S(e)}function T(e){var r=e.texture;if(r.generateMipmaps&&c(e)&&r.minFilter!==Cn&&r.minFilter!==Dn){var a=e&&e.isWebGLRenderTargetCube?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,o=n.get(r).__webglTexture;i.bindTexture(a,o),t.generateMipmap(a),i.bindTexture(a,null)}}var L=o.memory,A="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext;this.setTexture2D=g,this.setTextureCube=v,this.setTextureCubeDynamic=x,this.setupRenderTarget=E,this.updateRenderTargetMipmap=T}function qt(){var t={};return{get:function(e){var i=e.uuid,n=t[i];return void 0===n&&(n={},t[i]=n),n},delete:function(e){delete t[e.uuid]},clear:function(){t={}}}}function Zt(t,e,i){function n(){var e=!1,i=new r,n=null,a=new r;return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,r,o,s){!0===s&&(e*=o,n*=o,r*=o),i.set(e,n,r,o),!1===a.equals(i)&&(t.clearColor(e,n,r,o),a.copy(i))},reset:function(){e=!1,n=null,a.set(0,0,0,1)}}}function a(){var e=!1,i=null,n=null,r=null;return{setTest:function(e){e?d(t.DEPTH_TEST):p(t.DEPTH_TEST)},setMask:function(n){i===n||e||(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){if(e)switch(e){case rn:t.depthFunc(t.NEVER);break;case an:t.depthFunc(t.ALWAYS);break;case on:t.depthFunc(t.LESS);break;case sn:t.depthFunc(t.LEQUAL);break;case cn:t.depthFunc(t.EQUAL);break;case ln:t.depthFunc(t.GEQUAL);break;case hn:t.depthFunc(t.GREATER);break;case un:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}else t.depthFunc(t.LEQUAL);n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function o(){var e=!1,i=null,n=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){e?d(t.STENCIL_TEST):p(t.STENCIL_TEST)},setMask:function(n){i===n||e||(t.stencilMask(n),i=n)},setFunc:function(e,i,o){n===e&&r===i&&a===o||(t.stencilFunc(e,i,o),n=e,r=i,a=o)},setOp:function(e,i,n){o===e&&s===i&&c===n||(t.stencilOp(e,i,n),o=e,s=i,c=n)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,n=null,r=null,a=null,o=null,s=null,c=null,l=null}}}function s(e,i,n){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(var o=0;o<n;o++)t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,r);return a}function c(){F.setClear(0,0,0,1),B.setClear(1),G.setClear(0),d(t.DEPTH_TEST),_(sn),E(!1),T(wi),d(t.CULL_FACE),d(t.BLEND),g(Oi)}function l(){for(var t=0,e=k.length;t<e;t++)k[t]=0}function h(i){if(k[i]=1,0===H[i]&&(t.enableVertexAttribArray(i),H[i]=1),0!==W[i]){e.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),W[i]=0}}function u(e,i,n){k[e]=1,0===H[e]&&(t.enableVertexAttribArray(e),H[e]=1),W[e]!==i&&(n.vertexAttribDivisorANGLE(e,i),W[e]=i)}function f(){for(var e=0,i=H.length;e!==i;++e)H[e]!==k[e]&&(t.disableVertexAttribArray(e),H[e]=0)}function d(e){!0!==j[e]&&(t.enable(e),j[e]=!0)}function p(e){!1!==j[e]&&(t.disable(e),j[e]=!1)}function m(){if(null===X&&(X=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")))for(var i=t.getParameter(t.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)X.push(i[n]);return X}function g(e,n,r,a,o,s,c,l){e!==Ii?d(t.BLEND):p(t.BLEND),e===Y&&l===tt||(e===zi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE,t.ONE,t.ONE)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)):e===Fi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.ONE_MINUS_SRC_COLOR)):e===Bi?l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA)):(t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ZERO,t.SRC_COLOR)):l?(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)):(t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)),Y=e,tt=l),e===Gi?(o=o||n,s=s||r,c=c||a,n===q&&o===Q||(t.blendEquationSeparate(i(n),i(o)),q=n,Q=o),r===Z&&a===J&&s===K&&c===$||(t.blendFuncSeparate(i(r),i(a),i(s),i(c)),Z=r,J=a,K=s,$=c)):(q=null,Z=null,J=null,Q=null,K=null,$=null)}function v(t){F.setMask(t)}function x(t){B.setTest(t)}function y(t){B.setMask(t)}function _(t){B.setFunc(t)}function M(t){G.setTest(t)}function b(t){G.setMask(t)}function w(t,e,i){G.setFunc(t,e,i)}function S(t,e,i){G.setOp(t,e,i)}function E(e){et!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),et=e)}function T(e){e!==bi?(d(t.CULL_FACE),e!==it&&(e===wi?t.cullFace(t.BACK):e===Si?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):p(t.CULL_FACE),it=e}function L(e){e!==nt&&(lt&&t.lineWidth(e),nt=e)}function A(e,i,n){e?(d(t.POLYGON_OFFSET_FILL),rt===i&&at===n||(t.polygonOffset(i,n),rt=i,at=n)):p(t.POLYGON_OFFSET_FILL)}function P(){return ot}function C(e){ot=e,e?d(t.SCISSOR_TEST):p(t.SCISSOR_TEST)}function R(e){void 0===e&&(e=t.TEXTURE0+st-1),ht!==e&&(t.activeTexture(e),ht=e)}function N(e,i){null===ht&&R();var n=ut[ht];void 0===n&&(n={type:void 0,texture:void 0},ut[ht]=n),n.type===e&&n.texture===i||(t.bindTexture(e,i||pt[e]),n.type=e,n.texture=i)}function D(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}}function U(){try{t.texImage2D.apply(t,arguments)}catch(t){}}function I(e){!1===ft.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),ft.copy(e))}function O(e){!1===dt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),dt.copy(e))}function z(){for(var e=0;e<H.length;e++)1===H[e]&&(t.disableVertexAttribArray(e),H[e]=0);j={},X=null,ht=null,ut={},Y=null,et=null,it=null,F.reset(),B.reset(),G.reset()}var F=new n,B=new a,G=new o,V=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=new Uint8Array(V),H=new Uint8Array(V),W=new Uint8Array(V),j={},X=null,Y=null,q=null,Z=null,J=null,Q=null,K=null,$=null,tt=!1,et=null,it=null,nt=null,rt=null,at=null,ot=null,st=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ct=parseFloat(/^WebGL\ ([0-9])/.exec(t.getParameter(t.VERSION))[1]),lt=parseFloat(ct)>=1,ht=null,ut={},ft=new r,dt=new r,pt={};return pt[t.TEXTURE_2D]=s(t.TEXTURE_2D,t.TEXTURE_2D,1),pt[t.TEXTURE_CUBE_MAP]=s(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:F,depth:B,stencil:G},init:c,initAttributes:l,enableAttribute:h,enableAttributeAndDivisor:u,disableUnusedAttributes:f,enable:d,disable:p,getCompressedTextureFormats:m,setBlending:g,setColorWrite:v,setDepthTest:x,setDepthWrite:y,setDepthFunc:_,setStencilTest:M,setStencilWrite:b,setStencilFunc:w,setStencilOp:S,setFlipSided:E,setCullFace:T,setLineWidth:L,setPolygonOffset:A,getScissorTest:P,setScissorTest:C,activeTexture:R,bindTexture:N,compressedTexImage2D:D,texImage2D:U,scissor:I,viewport:O,reset:z}}function Jt(t,e,i){function n(){if(void 0!==a)return a;var i=e.get("EXT_texture_filter_anisotropic");return a=null!==i?t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==i.precision?i.precision:"highp",s=r(o);s!==o&&(o=s);var c=!0===i.logarithmicDepthBuffer&&!!e.get("EXT_frag_depth"),l=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=t.getParameter(t.MAX_TEXTURE_SIZE),f=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),d=t.getParameter(t.MAX_VERTEX_ATTRIBS),p=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),g=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),v=h>0,x=!!e.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:h,maxTextureSize:u,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:x,floatVertexTextures:v&&x}}function Qt(t){var e={};return{get:function(i){
if(void 0!==e[i])return e[i];var n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=t.getExtension("WEBGL_compressed_texture_etc1");break;default:n=t.getExtension(i)}return e[i]=n,n}}}function Kt(){function t(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function e(t,e,n,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==r||null===o){var h=n+4*a,u=e.matrixWorldInverse;c.getNormalMatrix(u),(null===o||o.length<h)&&(o=new Float32Array(h));for(var f=0,d=n;f!==a;++f,d+=4)s.copy(t[f]).applyMatrix4(u,c),s.normal.toArray(o,d),o[d+3]=s.constant}l.value=o,l.needsUpdate=!0}return i.numPlanes=a,o}var i=this,n=null,r=0,a=!1,o=!1,s=new tt,c=new $,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var s=0!==t.length||i||0!==r||a;return a=i,n=e(t,o,0),r=t.length,s},this.beginShadows=function(){o=!0,e(null)},this.endShadows=function(){o=!1,t()},this.setState=function(i,s,c,h,u,f){if(!a||null===i||0===i.length||o&&!c)o?e(null):t();else{var d=o?0:r,p=4*d,m=u.clippingState||null;l.value=m,m=e(i,h,p,f);for(var g=0;g!==p;++g)m[g]=n[g];u.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function $t(t){function e(){return null===dt?It:1}function i(){ce.init(),ce.scissor(xt.copy(Ot).multiplyScalar(It)),ce.viewport(wt.copy(Ft).multiplyScalar(It)),ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)}function n(){ft=null,vt=null,gt="",mt=-1,ce.reset()}function a(t){t.preventDefault(),n(),i(),le.clear()}function o(t){var e=t.target;e.removeEventListener("dispose",o),l(e)}function l(t){h(t),le.delete(t)}function h(t){var e=le.get(t).program;t.program=void 0,void 0!==e&&fe.releaseProgram(e)}function u(t,e,i,n){var r;if(!i||!i.isInstancedBufferGeometry||null!==(r=oe.get("ANGLE_instanced_arrays"))){void 0===n&&(n=0),ce.initAttributes();var a=i.attributes,o=e.getAttributes(),s=t.defaultAttributeValues;for(var c in o){var l=o[c];if(l>=0){var h=a[c];if(void 0!==h){var u=h.normalized,f=h.itemSize,d=ue.getAttributeProperties(h),p=d.__webglBuffer,m=d.type,g=d.bytesPerElement;if(h.isInterleavedBufferAttribute){var v=h.data,x=v.stride,y=h.offset;v&&v.isInstancedInterleavedBuffer?(ce.enableAttributeAndDivisor(l,v.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=v.meshPerAttribute*v.count)):ce.enableAttribute(l),re.bindBuffer(re.ARRAY_BUFFER,p),re.vertexAttribPointer(l,f,m,u,x*g,(n*x+y)*g)}else h.isInstancedBufferAttribute?(ce.enableAttributeAndDivisor(l,h.meshPerAttribute,r),void 0===i.maxInstancedCount&&(i.maxInstancedCount=h.meshPerAttribute*h.count)):ce.enableAttribute(l),re.bindBuffer(re.ARRAY_BUFFER,p),re.vertexAttribPointer(l,f,m,u,0,n*f*g)}else if(void 0!==s){var _=s[c];if(void 0!==_)switch(_.length){case 2:re.vertexAttrib2fv(l,_);break;case 3:re.vertexAttrib3fv(l,_);break;case 4:re.vertexAttrib4fv(l,_);break;default:re.vertexAttrib1fv(l,_)}}}}ce.disableUnusedAttributes()}}function f(t,e){return Math.abs(e[0])-Math.abs(t[0])}function d(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.material.program&&e.material.program&&t.material.program!==e.material.program?t.material.program.id-e.material.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function p(t,e){return t.object.renderOrder!==e.object.renderOrder?t.object.renderOrder-e.object.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function m(t,e,i,n,r){var a,o;i.transparent?(a=at,o=++ot):(a=nt,o=++rt);var s=a[o];void 0!==s?(s.id=t.id,s.object=t,s.geometry=e,s.material=i,s.z=$t.z,s.group=r):(s={id:t.id,object:t,geometry:e,material:i,z:$t.z,group:r},a.push(s))}function g(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Ht.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),x(Ht)}function v(t){return Ht.center.set(0,0,0),Ht.radius=.7071067811865476,Ht.applyMatrix4(t.matrixWorld),x(Ht)}function x(t){if(!Bt.intersectsSphere(t))return!1;var e=Gt.numPlanes;if(0===e)return!0;var i=ut.clippingPlanes,n=t.center,r=-t.radius,a=0;do{if(i[a].distanceToPoint(n)<r)return!1}while(++a!==e);return!0}function y(t,e){if(!1!==t.visible){if(0!=(t.layers.mask&e.layers.mask))if(t.isLight)tt.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==v(t)||ct.push(t);else if(t.isLensFlare)lt.push(t);else if(t.isImmediateRenderObject)!0===ut.sortObjects&&($t.setFromMatrixPosition(t.matrixWorld),$t.applyMatrix4(jt)),m(t,null,t.material,$t.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===g(t))){var i=t.material;if(!0===i.visible){!0===ut.sortObjects&&($t.setFromMatrixPosition(t.matrixWorld),$t.applyMatrix4(jt));var n=ue.update(t);if(i.isMultiMaterial)for(var r=n.groups,a=i.materials,o=0,s=r.length;o<s;o++){var c=r[o],l=a[c.materialIndex];!0===l.visible&&m(t,n,l,$t.z,c)}else m(t,n,i,$t.z,null)}}for(var h=t.children,o=0,s=h.length;o<s;o++)y(h[o],e)}}function _(t,e,i,n){for(var r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,c=o.geometry,l=void 0===n?o.material:n,h=o.group;if(s.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(ut,e,i,c,l,h),s.isImmediateRenderObject){b(l);var u=w(i,e.fog,l,s);gt="",s.render(function(t){ut.renderBufferImmediate(t,u,l)})}else ut.renderBufferDirect(i,e.fog,c,l,s,h);s.onAfterRender(ut,e,i,c,l,h)}}function M(t,e,i){var n=le.get(t),r=fe.getParameters(t,ie,e,Gt.numPlanes,Gt.numIntersection,i),a=fe.getProgramCode(t,r),s=n.program,c=!0;if(void 0===s)t.addEventListener("dispose",o);else if(s.code!==a)h(t);else{if(void 0!==r.shaderID)return;c=!1}if(c){if(r.shaderID){var l=Ur[r.shaderID];n.__webglShader={name:t.type,uniforms:Cr.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else n.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.__webglShader=n.__webglShader,s=fe.acquireProgram(t,r,a),n.program=s,t.program=s}var u=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<ut.maxMorphTargets;f++)u["morphTarget"+f]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<ut.maxMorphNormals;f++)u["morphNormal"+f]>=0&&t.numSupportedMorphNormals++}var d=n.__webglShader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(n.numClippingPlanes=Gt.numPlanes,n.numIntersection=Gt.numIntersection,d.clippingPlanes=Gt.uniform),n.fog=e,n.lightsHash=ie.hash,t.lights&&(d.ambientLightColor.value=ie.ambient,d.directionalLights.value=ie.directional,d.spotLights.value=ie.spot,d.rectAreaLights.value=ie.rectArea,d.pointLights.value=ie.point,d.hemisphereLights.value=ie.hemi,d.directionalShadowMap.value=ie.directionalShadowMap,d.directionalShadowMatrix.value=ie.directionalShadowMatrix,d.spotShadowMap.value=ie.spotShadowMap,d.spotShadowMatrix.value=ie.spotShadowMatrix,d.pointShadowMap.value=ie.pointShadowMap,d.pointShadowMatrix.value=ie.pointShadowMatrix);var p=n.program.getUniforms(),m=H.seqWithValue(p.seq,d);n.uniformsList=m}function b(t){t.side===Ci?ce.disable(re.CULL_FACE):ce.enable(re.CULL_FACE),ce.setFlipSided(t.side===Pi),!0===t.transparent?ce.setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):ce.setBlending(Ii),ce.setDepthFunc(t.depthFunc),ce.setDepthTest(t.depthTest),ce.setDepthWrite(t.depthWrite),ce.setColorWrite(t.colorWrite),ce.setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function w(t,e,i,n){Et=0;var r=le.get(i);if(Vt&&(kt||t!==vt)){var a=t===vt&&i.id===mt;Gt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,r,a)}!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==e?i.needsUpdate=!0:i.lights&&r.lightsHash!==ie.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===Gt.numPlanes&&r.numIntersection===Gt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(M(i,e,n),i.needsUpdate=!1);var o=!1,s=!1,c=!1,l=r.program,h=l.getUniforms(),u=r.__webglShader.uniforms;if(l.id!==ft&&(re.useProgram(l.program),ft=l.id,o=!0,s=!0,c=!0),i.id!==mt&&(mt=i.id,s=!0),o||t!==vt){if(h.set(re,t,"projectionMatrix"),se.logarithmicDepthBuffer&&h.setValue(re,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==vt&&(vt=t,s=!0,c=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var f=h.map.cameraPosition;void 0!==f&&f.setValue(re,$t.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&h.setValue(re,"viewMatrix",t.matrixWorldInverse),h.set(re,ut,"toneMappingExposure"),h.set(re,ut,"toneMappingWhitePoint")}if(i.skinning){h.setOptional(re,n,"bindMatrix"),h.setOptional(re,n,"bindMatrixInverse");var d=n.skeleton;d&&(se.floatVertexTextures&&d.useVertexTexture?(h.set(re,d,"boneTexture"),h.set(re,d,"boneTextureWidth"),h.set(re,d,"boneTextureHeight")):h.setOptional(re,d,"boneMatrices"))}return s&&(i.lights&&I(u,c),e&&i.fog&&A(u,e),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&S(u,i),i.isLineBasicMaterial?E(u,i):i.isLineDashedMaterial?(E(u,i),T(u,i)):i.isPointsMaterial?L(u,i):i.isMeshLambertMaterial?P(u,i):i.isMeshToonMaterial?R(u,i):i.isMeshPhongMaterial?C(u,i):i.isMeshPhysicalMaterial?D(u,i):i.isMeshStandardMaterial?N(u,i):i.isMeshDepthMaterial?i.displacementMap&&(u.displacementMap.value=i.displacementMap,u.displacementScale.value=i.displacementScale,u.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&U(u,i),void 0!==u.ltcMat&&(u.ltcMat.value=THREE.UniformsLib.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=THREE.UniformsLib.LTC_MAG_TEXTURE),H.upload(re,r.uniformsList,u,ut)),h.set(re,n,"modelViewMatrix"),h.set(re,n,"normalMatrix"),h.setValue(re,"modelMatrix",n.matrixWorld),l}function S(t,e){t.opacity.value=e.opacity,t.diffuse.value=e.color,e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),t.map.value=e.map,t.specularMap.value=e.specularMap,t.alphaMap.value=e.alphaMap,e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity);var i;if(e.map?i=e.map:e.specularMap?i=e.specularMap:e.displacementMap?i=e.displacementMap:e.normalMap?i=e.normalMap:e.bumpMap?i=e.bumpMap:e.roughnessMap?i=e.roughnessMap:e.metalnessMap?i=e.metalnessMap:e.alphaMap?i=e.alphaMap:e.emissiveMap&&(i=e.emissiveMap),void 0!==i){i.isWebGLRenderTarget&&(i=i.texture);var n=i.offset,r=i.repeat;t.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio}function E(t,e){t.diffuse.value=e.color,t.opacity.value=e.opacity}function T(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function L(t,e){if(t.diffuse.value=e.color,t.opacity.value=e.opacity,t.size.value=e.size*It,t.scale.value=.5*Ut,t.map.value=e.map,null!==e.map){var i=e.map.offset,n=e.map.repeat;t.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function A(t,e){t.fogColor.value=e.color,e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function P(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function C(t,e){t.specular.value=e.specular,t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function R(t,e){C(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function N(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function D(t,e){t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness,N(t,e)}function U(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale)),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function I(t,e){t.ambientLightColor.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function O(t){for(var e=0,i=0,n=t.length;i<n;i++){var r=t[i];r.castShadow&&(ie.shadows[e++]=r)}ie.shadows.length=e}function z(t,e){var i,n,r,a,o,s,l,h=0,u=0,f=0,d=e.matrixWorldInverse,p=0,m=0,g=0,v=0,x=0;for(i=0,n=t.length;i<n;i++)if(r=t[i],a=r.color,o=r.intensity,s=r.distance,l=r.shadow&&r.shadow.map?r.shadow.map.texture:null,r.isAmbientLight)h+=a.r*o,u+=a.g*o,f+=a.b*o;else if(r.isDirectionalLight){var y=de.get(r);y.color.copy(r.color).multiplyScalar(r.intensity),y.direction.setFromMatrixPosition(r.matrixWorld),$t.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub($t),y.direction.transformDirection(d),y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.directionalShadowMap[p]=l,ie.directionalShadowMatrix[p]=r.shadow.matrix,ie.directional[p++]=y}else if(r.isSpotLight){var y=de.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(a).multiplyScalar(o),y.distance=s,y.direction.setFromMatrixPosition(r.matrixWorld),$t.setFromMatrixPosition(r.target.matrixWorld),y.direction.sub($t),y.direction.transformDirection(d),y.coneCos=Math.cos(r.angle),y.penumbraCos=Math.cos(r.angle*(1-r.penumbra)),y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.spotShadowMap[g]=l,ie.spotShadowMatrix[g]=r.shadow.matrix,ie.spot[g++]=y}else if(r.isRectAreaLight){var y=de.get(r);y.color.copy(a).multiplyScalar(o/(r.width*r.height)),y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),ee.identity(),te.copy(r.matrixWorld),te.premultiply(d),ee.extractRotation(te),y.halfWidth.set(.5*r.width,0,0),y.halfHeight.set(0,.5*r.height,0),y.halfWidth.applyMatrix4(ee),y.halfHeight.applyMatrix4(ee),ie.rectArea[v++]=y}else if(r.isPointLight){var y=de.get(r);y.position.setFromMatrixPosition(r.matrixWorld),y.position.applyMatrix4(d),y.color.copy(r.color).multiplyScalar(r.intensity),y.distance=r.distance,y.decay=0===r.distance?0:r.decay,y.shadow=r.castShadow,r.castShadow&&(y.shadowBias=r.shadow.bias,y.shadowRadius=r.shadow.radius,y.shadowMapSize=r.shadow.mapSize),ie.pointShadowMap[m]=l,void 0===ie.pointShadowMatrix[m]&&(ie.pointShadowMatrix[m]=new c),$t.setFromMatrixPosition(r.matrixWorld).negate(),ie.pointShadowMatrix[m].identity().setPosition($t),ie.point[m++]=y}else if(r.isHemisphereLight){var y=de.get(r);y.direction.setFromMatrixPosition(r.matrixWorld),y.direction.transformDirection(d),y.direction.normalize(),y.skyColor.copy(r.color).multiplyScalar(o),y.groundColor.copy(r.groundColor).multiplyScalar(o),ie.hemi[x++]=y}ie.ambient[0]=h,ie.ambient[1]=u,ie.ambient[2]=f,ie.directional.length=p,ie.spot.length=g,ie.rectArea.length=v,ie.point.length=m,ie.hemi.length=x,ie.hash=p+","+m+","+g+","+v+","+x+","+ie.shadows.length}function F(){var t=Et;return se.maxTextures,Et+=1,t}function B(t){var e;if(t===Ln)return re.REPEAT;if(t===An)return re.CLAMP_TO_EDGE;if(t===Pn)return re.MIRRORED_REPEAT;if(t===Cn)return re.NEAREST;if(t===Rn)return re.NEAREST_MIPMAP_NEAREST;if(t===Nn)return re.NEAREST_MIPMAP_LINEAR;if(t===Dn)return re.LINEAR;if(t===Un)return re.LINEAR_MIPMAP_NEAREST;if(t===In)return re.LINEAR_MIPMAP_LINEAR;if(t===On)return re.UNSIGNED_BYTE;if(t===Wn)return re.UNSIGNED_SHORT_4_4_4_4;if(t===jn)return re.UNSIGNED_SHORT_5_5_5_1;if(t===Xn)return re.UNSIGNED_SHORT_5_6_5;if(t===zn)return re.BYTE;if(t===Fn)return re.SHORT;if(t===Bn)return re.UNSIGNED_SHORT;if(t===Gn)return re.INT;if(t===Vn)return re.UNSIGNED_INT;if(t===kn)return re.FLOAT;if(t===Hn&&null!==(e=oe.get("OES_texture_half_float")))return e.HALF_FLOAT_OES;if(t===qn)return re.ALPHA;if(t===Zn)return re.RGB;if(t===Jn)return re.RGBA;if(t===Qn)return re.LUMINANCE;if(t===Kn)return re.LUMINANCE_ALPHA;if(t===tr)return re.DEPTH_COMPONENT;if(t===er)return re.DEPTH_STENCIL;if(t===Vi)return re.FUNC_ADD;if(t===ki)return re.FUNC_SUBTRACT;if(t===Hi)return re.FUNC_REVERSE_SUBTRACT;if(t===Xi)return re.ZERO;if(t===Yi)return re.ONE;if(t===qi)return re.SRC_COLOR;if(t===Zi)return re.ONE_MINUS_SRC_COLOR;if(t===Ji)return re.SRC_ALPHA;if(t===Qi)return re.ONE_MINUS_SRC_ALPHA;if(t===Ki)return re.DST_ALPHA;if(t===$i)return re.ONE_MINUS_DST_ALPHA;if(t===tn)return re.DST_COLOR;if(t===en)return re.ONE_MINUS_DST_COLOR;if(t===nn)return re.SRC_ALPHA_SATURATE;if((t===ir||t===nr||t===rr||t===ar)&&null!==(e=oe.get("WEBGL_compressed_texture_s3tc"))){if(t===ir)return e.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===nr)return e.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===rr)return e.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ar)return e.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===or||t===sr||t===cr||t===lr)&&null!==(e=oe.get("WEBGL_compressed_texture_pvrtc"))){if(t===or)return e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===sr)return e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===cr)return e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===lr)return e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===hr&&null!==(e=oe.get("WEBGL_compressed_texture_etc1")))return e.COMPRESSED_RGB_ETC1_WEBGL;if((t===Wi||t===ji)&&null!==(e=oe.get("EXT_blend_minmax"))){if(t===Wi)return e.MIN_EXT;if(t===ji)return e.MAX_EXT}return t===Yn&&null!==(e=oe.get("WEBGL_depth_texture"))?e.UNSIGNED_INT_24_8_WEBGL:0}t=t||{};var G=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),V=void 0!==t.context?t.context:null,k=void 0!==t.alpha&&t.alpha,j=void 0===t.depth||t.depth,q=void 0===t.stencil||t.stencil,J=void 0!==t.antialias&&t.antialias,Q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,$=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,tt=[],nt=[],rt=-1,at=[],ot=-1,st=new Float32Array(8),ct=[],lt=[];this.domElement=G,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=gn,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ut=this,ft=null,dt=null,pt=null,mt=-1,gt="",vt=null,xt=new r,Mt=null,wt=new r,Et=0,Rt=new W(0),Nt=0,Dt=G.width,Ut=G.height,It=1,Ot=new r(0,0,Dt,Ut),zt=!1,Ft=new r(0,0,Dt,Ut),Bt=new et,Gt=new Kt,Vt=!1,kt=!1,Ht=new K,jt=new c,$t=new s,te=new c,ee=new c,ie={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},ne={calls:0,vertices:0,faces:0,points:0};this.info={render:ne,memory:{geometries:0,textures:0},programs:null};var re;try{var ae={alpha:k,depth:j,stencil:q,antialias:J,premultipliedAlpha:Q,preserveDrawingBuffer:$};if(null===(re=V||G.getContext("webgl",ae)||G.getContext("experimental-webgl",ae)))throw null!==G.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===re.getShaderPrecisionFormat&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),G.addEventListener("webglcontextlost",a,!1)}catch(t){}var oe=new Qt(re);oe.get("WEBGL_depth_texture"),oe.get("OES_texture_float"),oe.get("OES_texture_float_linear"),oe.get("OES_texture_half_float"),oe.get("OES_texture_half_float_linear"),oe.get("OES_standard_derivatives"),oe.get("ANGLE_instanced_arrays"),oe.get("OES_element_index_uint")&&(yt.MaxIndex=4294967296);var se=new Jt(re,oe,t),ce=new Zt(re,oe,B),le=new qt,he=new Yt(re,oe,ce,le,se,B,this.info),ue=new Xt(re,le,this.info),fe=new Wt(this,se),de=new Ct;this.info.programs=fe.programs;var pe,me,ge,ve,xe=new Pt(re,oe,ne),ye=new At(re,oe,ne);i(),this.context=re,this.capabilities=se,this.extensions=oe,this.properties=le,this.state=ce;var _e=new it(this,ie,ue,se);this.shadowMap=_e;var Me=new Y(this,ct),be=new X(this,lt);this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){oe.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return se.getMaxAnisotropy()},this.getPrecision=function(){return se.precision},this.getPixelRatio=function(){return It},this.setPixelRatio=function(t){void 0!==t&&(It=t,this.setSize(Ft.z,Ft.w,!1))},this.getSize=function(){return{width:Dt,height:Ut}},this.setSize=function(t,e,i){Dt=t,Ut=e,G.width=t*It,G.height=e*It,!1!==i&&(G.style.width=t+"px",G.style.height=e+"px"),this.setViewport(0,0,t,e)},this.setViewport=function(t,e,i,n){ce.viewport(Ft.set(t,e,i,n))},this.setScissor=function(t,e,i,n){ce.scissor(Ot.set(t,e,i,n))},this.setScissorTest=function(t){ce.setScissorTest(zt=t)},this.getClearColor=function(){return Rt},this.setClearColor=function(t,e){Rt.set(t),Nt=void 0!==e?e:1,ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)},this.getClearAlpha=function(){return Nt},this.setClearAlpha=function(t){Nt=t,ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q)},this.clear=function(t,e,i){var n=0;(void 0===t||t)&&(n|=re.COLOR_BUFFER_BIT),(void 0===e||e)&&(n|=re.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=re.STENCIL_BUFFER_BIT),re.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(t,e,i,n){this.setRenderTarget(t),this.clear(e,i,n)},this.resetGLState=n,this.dispose=function(){at=[],ot=-1,nt=[],rt=-1,G.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(t,e,i){ce.initAttributes();var n=le.get(t);t.hasPositions&&!n.position&&(n.position=re.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=re.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=re.createBuffer()),t.hasColors&&!n.color&&(n.color=re.createBuffer());var r=e.getAttributes();if(t.hasPositions&&(re.bindBuffer(re.ARRAY_BUFFER,n.position),re.bufferData(re.ARRAY_BUFFER,t.positionArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.position),re.vertexAttribPointer(r.position,3,re.FLOAT,!1,0,0)),t.hasNormals){if(re.bindBuffer(re.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&i.shading===Ri)for(var a=0,o=3*t.count;a<o;a+=9){var s=t.normalArray,c=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,h=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=c,s[a+1]=l,s[a+2]=h,s[a+3]=c,s[a+4]=l,s[a+5]=h,s[a+6]=c,s[a+7]=l,s[a+8]=h}re.bufferData(re.ARRAY_BUFFER,t.normalArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.normal),re.vertexAttribPointer(r.normal,3,re.FLOAT,!1,0,0)}t.hasUvs&&i.map&&(re.bindBuffer(re.ARRAY_BUFFER,n.uv),re.bufferData(re.ARRAY_BUFFER,t.uvArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.uv),re.vertexAttribPointer(r.uv,2,re.FLOAT,!1,0,0)),t.hasColors&&i.vertexColors!==Di&&(re.bindBuffer(re.ARRAY_BUFFER,n.color),re.bufferData(re.ARRAY_BUFFER,t.colorArray,re.DYNAMIC_DRAW),ce.enableAttribute(r.color),re.vertexAttribPointer(r.color,3,re.FLOAT,!1,0,0)),ce.disableUnusedAttributes(),re.drawArrays(re.TRIANGLES,0,t.count),t.count=0},this.renderBufferDirect=function(t,i,n,r,a,o){b(r);var s=w(t,i,r,a),c=!1,l=n.id+"_"+s.id+"_"+r.wireframe;l!==gt&&(gt=l,c=!0);var h=a.morphTargetInfluences;if(void 0!==h){for(var d=[],p=0,m=h.length;p<m;p++){var g=h[p];d.push([g,p])}d.sort(f),d.length>8&&(d.length=8);for(var v=n.morphAttributes,p=0,m=d.length;p<m;p++){var g=d[p];if(st[p]=g[0],0!==g[0]){var x=g[1];!0===r.morphTargets&&v.position&&n.addAttribute("morphTarget"+p,v.position[x]),!0===r.morphNormals&&v.normal&&n.addAttribute("morphNormal"+p,v.normal[x])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+p),!0===r.morphNormals&&n.removeAttribute("morphNormal"+p)}for(var p=d.length,y=st.length;p<y;p++)st[p]=0;s.getUniforms().setValue(re,"morphTargetInfluences",st),c=!0}var x=n.index,_=n.attributes.position,M=1;!0===r.wireframe&&(x=ue.getWireframeAttribute(n),M=2);var S;null!==x?(S=ye,S.setIndex(x)):S=xe,c&&(u(r,s,n),null!==x&&re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,ue.getAttributeBuffer(x)));var E=0;null!==x?E=x.count:void 0!==_&&(E=_.count);var T=n.drawRange.start*M,L=n.drawRange.count*M,A=null!==o?o.start*M:0,P=null!==o?o.count*M:1/0,C=Math.max(T,A),R=Math.min(E,T+L,A+P)-1,N=Math.max(0,R-C+1);if(0!==N){if(a.isMesh)if(!0===r.wireframe)ce.setLineWidth(r.wireframeLinewidth*e()),S.setMode(re.LINES);else switch(a.drawMode){case ur:S.setMode(re.TRIANGLES);break;case fr:S.setMode(re.TRIANGLE_STRIP);break;case dr:S.setMode(re.TRIANGLE_FAN)}else if(a.isLine){var D=r.linewidth;void 0===D&&(D=1),ce.setLineWidth(D*e()),a.isLineSegments?S.setMode(re.LINES):S.setMode(re.LINE_STRIP)}else a.isPoints&&S.setMode(re.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&S.renderInstances(n,C,N):S.render(C,N)}},this.render=function(t,e,i,n){if(void 0===e||!0===e.isCamera){gt="",mt=-1,vt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),jt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Bt.setFromMatrix(jt),tt.length=0,rt=-1,ot=-1,ct.length=0,lt.length=0,kt=this.localClippingEnabled,Vt=Gt.init(this.clippingPlanes,kt,e),y(t,e),nt.length=rt+1,at.length=ot+1,!0===ut.sortObjects&&(nt.sort(d),at.sort(p)),Vt&&Gt.beginShadows(),O(tt),_e.render(t,e),z(tt,e),Vt&&Gt.endShadows(),ne.calls=0,ne.vertices=0,ne.faces=0,ne.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var r=t.background;if(null===r?ce.buffers.color.setClear(Rt.r,Rt.g,Rt.b,Nt,Q):r&&r.isColor&&(ce.buffers.color.setClear(r.r,r.g,r.b,1,Q),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),r&&r.isCubeTexture?(void 0===ge&&(ge=new Tt,ve=new _t(new bt(5,5,5),new Z({uniforms:Ur.cube.uniforms,vertexShader:Ur.cube.vertexShader,fragmentShader:Ur.cube.fragmentShader,side:Pi,depthTest:!1,depthWrite:!1,fog:!1}))),ge.projectionMatrix.copy(e.projectionMatrix),ge.matrixWorld.extractRotation(e.matrixWorld),ge.matrixWorldInverse.getInverse(ge.matrixWorld),ve.material.uniforms.tCube.value=r,ve.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,ve.matrixWorld),ue.update(ve),ut.renderBufferDirect(ge,null,ve.geometry,ve.material,ve,null)):r&&r.isTexture&&(void 0===pe&&(pe=new Lt(-1,1,1,-1,0,1),me=new _t(new St(2,2),new ht({depthTest:!1,depthWrite:!1,fog:!1}))),me.material.map=r,ue.update(me),ut.renderBufferDirect(pe,null,me.geometry,me.material,me,null)),t.overrideMaterial){var a=t.overrideMaterial;_(nt,t,e,a),_(at,t,e,a)}else ce.setBlending(Ii),_(nt,t,e),_(at,t,e);Me.render(t,e),be.render(t,e,wt),i&&he.updateRenderTargetMipmap(i),ce.setDepthTest(!0),ce.setDepthWrite(!0),ce.setColorWrite(!0)}},this.setFaceCulling=function(t,e){ce.setCullFace(t),ce.setFlipSided(e===Ei)},this.allocTextureUnit=F,this.setTexture2D=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTarget&&(t||(t=!0),e=e.texture),he.setTexture2D(e,i)}}(),this.setTexture=function(){var t=!1;return function(e,i){t||(t=!0),he.setTexture2D(e,i)}}(),this.setTextureCube=function(){var t=!1;return function(e,i){e&&e.isWebGLRenderTargetCube&&(t||(t=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?he.setTextureCube(e,i):he.setTextureCubeDynamic(e,i)}}(),this.getCurrentRenderTarget=function(){return dt},this.setRenderTarget=function(t){dt=t,t&&void 0===le.get(t).__webglFramebuffer&&he.setupRenderTarget(t);var e,i=t&&t.isWebGLRenderTargetCube;if(t){var n=le.get(t);e=i?n.__webglFramebuffer[t.activeCubeFace]:n.__webglFramebuffer,xt.copy(t.scissor),Mt=t.scissorTest,wt.copy(t.viewport)}else e=null,xt.copy(Ot).multiplyScalar(It),Mt=zt,wt.copy(Ft).multiplyScalar(It);if(pt!==e&&(re.bindFramebuffer(re.FRAMEBUFFER,e),pt=e),ce.scissor(xt),ce.setScissorTest(Mt),ce.viewport(wt),i){var r=le.get(t.texture);re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_CUBE_MAP_POSITIVE_X+t.activeCubeFace,r.__webglTexture,t.activeMipMapLevel)}},this.readRenderTargetPixels=function(t,e,i,n,r,a){if(!1!==(t&&t.isWebGLRenderTarget)){var o=le.get(t).__webglFramebuffer;if(o){var s=!1;o!==pt&&(re.bindFramebuffer(re.FRAMEBUFFER,o),s=!0);try{var c=t.texture,l=c.format,h=c.type;if(l!==Jn&&B(l)!==re.getParameter(re.IMPLEMENTATION_COLOR_READ_FORMAT))return;if(!(h===On||B(h)===re.getParameter(re.IMPLEMENTATION_COLOR_READ_TYPE)||h===kn&&(oe.get("OES_texture_float")||oe.get("WEBGL_color_buffer_float"))||h===Hn&&oe.get("EXT_color_buffer_half_float")))return;re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE&&e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&re.readPixels(e,i,n,r,B(l),B(h),a)}finally{s&&re.bindFramebuffer(re.FRAMEBUFFER,pt)}}}}}function te(){ot.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ee(t){q.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(t)}function ie(t){ot.call(this),this.type="Sprite",this.material=void 0!==t?t:new ee}function ne(t){q.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function re(t,e,i){if(1===i)return new ae(t,e);ot.call(this),this.type="Line",this.geometry=void 0!==t?t:new yt,this.material=void 0!==e?e:new ne({color:16777215*Math.random()})}function ae(t,e){re.call(this,t,e),this.type="LineSegments"}function oe(t,e,i,r,a,o,s,c,l){function h(){requestAnimationFrame(h),t.readyState>=t.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}n.call(this,t,e,i,r,a,o,s,c,l),this.generateMipmaps=!1;var u=this;h()}function se(t,e,i,n,r,a,o){xt.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new ce(t,e,i,n,r,a,o))}function ce(t,e,i,n,r,a,o){yt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:o},t=t||50,e=Math.max(3,Math.floor(e)||8),i=Math.max(2,Math.floor(i)||6),
n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;var c,l,h=a+o,u=0,f=[],d=new s,p=new s,m=[],g=[],v=[],x=[];for(l=0;l<=i;l++){var y=[],_=l/i;for(c=0;c<=e;c++){var M=c/e;d.x=-t*Math.cos(n+M*r)*Math.sin(a+_*o),d.y=t*Math.cos(a+_*o),d.z=t*Math.sin(n+M*r)*Math.sin(a+_*o),g.push(d.x,d.y,d.z),p.set(d.x,d.y,d.z).normalize(),v.push(p.x,p.y,p.z),x.push(M,1-_),y.push(u++)}f.push(y)}for(l=0;l<i;l++)for(c=0;c<e;c++){var b=f[l][c+1],w=f[l][c],S=f[l+1][c],E=f[l+1][c+1];(0!==l||a>0)&&m.push(b,w,E),(l!==i-1||h<Math.PI)&&m.push(w,S,E)}this.setIndex(m),this.addAttribute("position",new pt(g,3)),this.addAttribute("normal",new pt(v,3)),this.addAttribute("uv",new pt(x,2))}function le(t,e){xt.call(this),this.type="ShapeGeometry","object"==typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new he(t,e)),this.mergeVertices()}function he(t,e){function i(t){var i,s,l,h=r.length/3,u=t.extractPoints(e),f=u.shape,d=u.holes;if(!1===Br.isClockWise(f))for(f=f.reverse(),i=0,s=d.length;i<s;i++)l=d[i],!0===Br.isClockWise(l)&&(d[i]=l.reverse());var p=Br.triangulateShape(f,d);for(i=0,s=d.length;i<s;i++)l=d[i],f=f.concat(l);for(i=0,s=f.length;i<s;i++){var m=f[i];r.push(m.x,m.y,0),a.push(0,0,1),o.push(m.x,m.y)}for(i=0,s=p.length;i<s;i++){var g=p[i],v=g[0]+h,x=g[1]+h,y=g[2]+h;n.push(v,x,y),c+=3}}yt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],a=[],o=[],s=0,c=0;if(!1===Array.isArray(t))i(t);else for(var l=0;l<t.length;l++)i(t[l]),this.addGroup(s,c,l),s+=c,c=0;this.setIndex(n),this.addAttribute("position",new pt(r,3)),this.addAttribute("normal",new pt(a,3)),this.addAttribute("uv",new pt(o,2))}function ue(t,e){if(void 0===t)return void(t=[]);xt.call(this),this.type="ExtrudeGeometry",t=Array.isArray(t)?t:[t],this.addShapeList(t,e),this.computeFaceNormals()}function fe(t,e,i,n,r,a,o,s){xt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new de(t,e,i,n,r,a,o,s)),this.mergeVertices()}function de(t,e,n,r,a,o,c,l){function h(n){var a,o,h,v=new i,_=new s,M=0,b=!0===n?t:e,w=!0===n?1:-1;for(o=g,a=1;a<=r;a++)d.push(0,x*w,0),p.push(0,w,0),m.push(.5,.5),g++;for(h=g,a=0;a<=r;a++){var S=a/r,E=S*l+c,T=Math.cos(E),L=Math.sin(E);_.x=b*L,_.y=x*w,_.z=b*T,d.push(_.x,_.y,_.z),p.push(0,w,0),v.x=.5*T+.5,v.y=.5*L*w+.5,m.push(v.x,v.y),g++}for(a=0;a<r;a++){var A=o+a,P=h+a;!0===n?f.push(P,P+1,A):f.push(P+1,P,A),M+=3}u.addGroup(y,M,!0===n?1:2),y+=M}yt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:c,thetaLength:l};var u=this;t=void 0!==t?t:20,e=void 0!==e?e:20,n=void 0!==n?n:100,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI;var f=[],d=[],p=[],m=[],g=0,v=[],x=n/2,y=0;!function(){var i,o,h=new s,_=new s,M=0,b=(e-t)/n;for(o=0;o<=a;o++){var w=[],S=o/a,E=S*(e-t)+t;for(i=0;i<=r;i++){var T=i/r,L=T*l+c,A=Math.sin(L),P=Math.cos(L);_.x=E*A,_.y=-S*n+x,_.z=E*P,d.push(_.x,_.y,_.z),h.set(A,b,P).normalize(),p.push(h.x,h.y,h.z),m.push(T,1-S),w.push(g++)}v.push(w)}for(i=0;i<r;i++)for(o=0;o<a;o++){var C=v[o][i],R=v[o+1][i],N=v[o+1][i+1],D=v[o][i+1];f.push(C,R,D),f.push(R,N,D),M+=6}u.addGroup(y,M,0),y+=M}(),!1===o&&(t>0&&h(!0),e>0&&h(!1)),this.setIndex(f),this.addAttribute("position",new pt(d,3)),this.addAttribute("normal",new pt(p,3)),this.addAttribute("uv",new pt(m,2))}function pe(t,e,i,n){xt.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new me(t,e,i,n))}function me(t,e,n,r){yt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||50,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var a,o,c=[],l=[],h=[],u=[],f=new s,d=new i;for(l.push(0,0,0),h.push(0,0,1),u.push(.5,.5),o=0,a=3;o<=e;o++,a+=3){var p=n+o/e*r;f.x=t*Math.cos(p),f.y=t*Math.sin(p),l.push(f.x,f.y,f.z),h.push(0,0,1),d.x=(l[a]/t+1)/2,d.y=(l[a+1]/t+1)/2,u.push(d.x,d.y)}for(a=1;a<=e;a++)c.push(a,a+1,0);this.setIndex(c),this.addAttribute("position",new pt(l,3)),this.addAttribute("normal",new pt(h,3)),this.addAttribute("uv",new pt(u,2))}function ge(t){this.uuid=wr.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(t)?t:[],this.visible=!0}function ve(t){q.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=fn,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function xe(t,e,i){var n=this,r=!1,a=0,o=0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){o++,!1===r&&void 0!==n.onStart&&n.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==n.onProgress&&n.onProgress(t,a,o),a===o&&(r=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(t){void 0!==n.onError&&n.onError(t)}}function ye(t){this.manager=void 0!==t?t:kr}function _e(t){this.manager=void 0!==t?t:kr}function Me(t){this.manager=void 0!==t?t:kr}function be(t){this.manager=void 0!==t?t:kr}function we(t){this.manager=void 0!==t?t:kr,this.textures={}}function Se(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function Ee(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i}function Te(t,e,i,n){Ee.call(this,t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Le(t,e,i,n){Ee.call(this,t,e,i,n)}function Ae(t,e,i,n){Ee.call(this,t,e,i,n)}function Pe(t,e,i,n){if(void 0===t)throw new Error("track name is undefined");if(void 0===e||0===e.length)throw new Error("no keyframes in track named "+t);this.name=t,this.times=Hr.convertArray(e,this.TimeBufferType),this.values=Hr.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Ce(t,e,i,n){Pe.call(this,t,e,i,n)}function Re(t,e,i,n){Ee.call(this,t,e,i,n)}function Ne(t,e,i,n){Pe.call(this,t,e,i,n)}function De(t,e,i,n){Pe.call(this,t,e,i,n)}function Ue(t,e,i,n){Pe.call(this,t,e,i,n)}function Ie(t,e,i){Pe.call(this,t,e,i)}function Oe(t,e,i,n){Pe.call(this,t,e,i,n)}function ze(t,e,i,n){Pe.apply(this,arguments)}function Fe(t,e,i){this.name=t,this.tracks=i,this.duration=void 0!==e?e:-1,this.uuid=wr.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Be(t){"boolean"==typeof t&&(t=void 0),this.manager=void 0!==t?t:kr,this.withCredentials=!1}function Ge(t,e){ot.call(this),this.type="Light",this.color=new W(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Ve(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new c}function ke(){Ve.call(this,new Lt(-5,5,5,-5,.5,500))}function He(t,e){Ge.call(this,t,e),this.type="DirectionalLight",this.position.copy(ot.DefaultUp),this.updateMatrix(),this.target=new ot,this.shadow=new ke}function We(t,e){Ge.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function je(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function Xe(t,e,i,n){this.ray=new nt(t,e),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function Ye(t,e){return t.distance-e.distance}function qe(t,e,i,n){if(!1!==t.visible&&(t.raycast(e,i),!0===n))for(var r=t.children,a=0,o=r.length;a<o;a++)qe(r[a],e,i,!0)}function Ze(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Je(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new yt;n.addAttribute("position",new pt(e,3)),n.addAttribute("color",new pt(i,3));var r=new ne({vertexColors:Ui});ae.call(this,n,r)}function Qe(){}function Ke(t,e){this.v1=t,this.v2=e}function $e(){this.curves=[],this.autoClose=!1}function ti(t,e,i,n,r,a,o,s){this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function ei(t,e,i,n,r){var a=.5*(n-e),o=.5*(r-i),s=t*t;return(2*i-2*n+a+o)*(t*s)+(-3*i+3*n-2*a-o)*s+a*t+i}function ii(t,e){var i=1-t;return i*i*e}function ni(t,e){return 2*(1-t)*t*e}function ri(t,e){return t*t*e}function ai(t,e,i,n){return ii(t,e)+ni(t,i)+ri(t,n)}function oi(t,e){var i=1-t;return i*i*i*e}function si(t,e){var i=1-t;return 3*i*i*t*e}function ci(t,e){return 3*(1-t)*t*t*e}function li(t,e){return t*t*t*e}function hi(t,e,i,n,r){return oi(t,e)+si(t,i)+ci(t,n)+li(t,r)}function ui(t){this.points=void 0===t?[]:t}function fi(t,e,i,n){this.v0=t,this.v1=e,this.v2=i,this.v3=n}function di(t,e,i){this.v0=t,this.v1=e,this.v2=i}function pi(t){$e.call(this),this.currentPoint=new i,t&&this.fromPoints(t)}function mi(){pi.apply(this,arguments),this.holes=[]}function gi(t,e,i,n,r,a,o){return new lt(t,e,i,r,a,o)}function vi(t){return new ge(t)}function xi(t){return new ie(t)}function yi(t,e,i){return new s(t,e,i)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}(),e.prototype={addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var i=this._listeners,n=i[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,i=e[t.type];if(void 0!==i){t.target=this;var n=[],r=0,a=i.length;for(r=0;r<a;r++)n[r]=i[r];for(r=0;r<a;r++)n[r].call(this,t)}}}};var _i="84",Mi={LEFT:0,MIDDLE:1,RIGHT:2},bi=0,wi=1,Si=2,Ei=0,Ti=1,Li=2,Ai=0,Pi=1,Ci=2,Ri=1,Ni=2,Di=0,Ui=2,Ii=0,Oi=1,zi=2,Fi=3,Bi=4,Gi=5,Vi=100,ki=101,Hi=102,Wi=103,ji=104,Xi=200,Yi=201,qi=202,Zi=203,Ji=204,Qi=205,Ki=206,$i=207,tn=208,en=209,nn=210,rn=0,an=1,on=2,sn=3,cn=4,ln=5,hn=6,un=7,fn=0,dn=1,pn=2,mn=0,gn=1,vn=2,xn=3,yn=4,_n=301,Mn=302,bn=303,wn=304,Sn=305,En=306,Tn=307,Ln=1e3,An=1001,Pn=1002,Cn=1003,Rn=1004,Nn=1005,Dn=1006,Un=1007,In=1008,On=1009,zn=1010,Fn=1011,Bn=1012,Gn=1013,Vn=1014,kn=1015,Hn=1016,Wn=1017,jn=1018,Xn=1019,Yn=1020,qn=1021,Zn=1022,Jn=1023,Qn=1024,Kn=1025,$n=Jn,tr=1026,er=1027,ir=2001,nr=2002,rr=2003,ar=2004,or=2100,sr=2101,cr=2102,lr=2103,hr=2151,ur=0,fr=1,dr=2,pr=3e3,mr=3001,gr=3007,vr=3002,xr=3004,yr=3005,_r=3006,Mr=3200,br=3201,wr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0;return function(){for(var r=0;r<36;r++)8===r||13===r||18===r||23===r?i[r]="-":14===r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19===r?3&t|8:t]);return i.join("")}}(),clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},lerp:function(t,e,i){return(1-i)*t+i*e},smoothstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)},smootherstep:function(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*wr.DEG2RAD},radToDeg:function(t){return t*wr.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}};i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(t){this.x=t},get height(){return this.y},set height(t){this.y=t},set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new i,e=new i),t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*i-a*n+t.x,this.y=r*n+a*i+t.y,this}};var Sr=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,n.prototype={constructor:n,isTexture:!0,set needsUpdate(t){!0===t&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){if(void 0!==t.textures[this.uuid])return t.textures[this.uuid];var e={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=wr.generateUUID()),void 0===t.images[i.uuid]&&(t.images[i.uuid]={uuid:i.uuid,url:function(t){var e;return void 0!==t.toDataURL?e=t:(e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0,t.width,t.height)),e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}(i)}),e.image=i.uuid}return t.textures[this.uuid]=e,e},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300===this.mapping){if(t.multiply(this.repeat),t.add(this.offset),t.x<0||t.x>1)switch(this.wrapS){case Ln:t.x=t.x-Math.floor(t.x);break;case An:t.x=t.x<0?0:1;break;case Pn:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ln:t.y=t.y-Math.floor(t.y);break;case An:t.y=t.y<0?0:1;break;case Pn:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}this.flipY&&(t.y=1-t.y)}}},Object.assign(n.prototype,e.prototype),r.prototype={constructor:r,isVector4:!0,set:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t,this.w*=t):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*e+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*e+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*e+a[7]*i+a[11]*n+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,i,n,r,a=t.elements,o=a[0],s=a[4],c=a[8],l=a[1],h=a[5],u=a[9],f=a[2],d=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-f)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+f)<.1&&Math.abs(u+d)<.1&&Math.abs(o+h+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(o+1)/2,g=(h+1)/2,v=(p+1)/2,x=(s+l)/4,y=(c+f)/4,_=(u+d)/4;return m>g&&m>v?m<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(m),n=x/i,r=y/i):g>v?g<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(g),i=x/n,r=_/n):v<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(v),i=y/r,n=_/r),this.set(i,n,r,e),this}var M=Math.sqrt((d-u)*(d-u)+(c-f)*(c-f)+(l-s)*(l-s));return Math.abs(M)<.001&&(M=1),this.x=(d-u)/M,this.y=(c-f)/M,this.z=(l-s)/M,this.w=Math.acos((o+h+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new r,e=new r),t.set(i,i,i,i),e.set(n,n,n,n),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},a.prototype={constructor:a,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(a.prototype,e.prototype),o.prototype={constructor:o,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!1===(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=Math.cos(t._x/2),n=Math.cos(t._y/2),r=Math.cos(t._z/2),a=Math.sin(t._x/2),o=Math.sin(t._y/2),s=Math.sin(t._z/2),c=t.order;return"XYZ"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r-a*o*s):"YXZ"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r+a*o*s):"ZXY"===c?(this._x=a*n*r-i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r-a*o*s):"ZYX"===c?(this._x=a*n*r-i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r+a*o*s):"YZX"===c?(this._x=a*n*r+i*o*s,this._y=i*o*r+a*n*s,this._z=i*n*s-a*o*r,this._w=i*n*r-a*o*s):"XZY"===c&&(this._x=a*n*r-i*o*s,this._y=i*o*r-a*n*s,this._z=i*n*s+a*o*r,this._w=i*n*r+a*o*s),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,i=t.elements,n=i[0],r=i[4],a=i[8],o=i[1],s=i[5],c=i[9],l=i[2],h=i[6],u=i[10],f=n+s+u;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(h-c)*e,this._y=(a-l)*e,this._z=(o-r)*e):n>s&&n>u?(e=2*Math.sqrt(1+n-s-u),this._w=(h-c)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(a+l)/e):s>u?(e=2*Math.sqrt(1+s-n-u),this._w=(a-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(c+h)/e):(e=2*Math.sqrt(1+u-n-s),this._w=(o-r)/e,this._x=(a+l)/e,this._y=(c+h)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e;return function(i,n){return void 0===t&&(t=new s),e=i.dot(n)+1,e<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var i=t._x,n=t._y,r=t._z,a=t._w,o=e._x,s=e._y,c=e._z,l=e._w;return this._x=i*l+a*o+n*c-r*s,this._y=n*l+a*s+r*o-i*c,this._z=r*l+a*c+i*s-n*o,this._w=a*l-i*o-n*s-r*c,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,r=this._z,a=this._w,o=a*t._w+i*t._x+n*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-e)*c)/s,h=Math.sin(e*c)/s;return this._w=a*l+this._w*h,this._x=i*l+this._x*h,this._y=n*l+this._y*h,this._z=r*l+this._z*h,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},Object.assign(o,{slerp:function(t,e,i,n){return i.copy(t).slerp(e,n)},slerpFlat:function(t,e,i,n,r,a,o){var s=i[n+0],c=i[n+1],l=i[n+2],h=i[n+3],u=r[a+0],f=r[a+1],d=r[a+2],p=r[a+3];if(h!==p||s!==u||c!==f||l!==d){var m=1-o,g=s*u+c*f+l*d+h*p,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){var y=Math.sqrt(x),_=Math.atan2(y,g*v);m=Math.sin(m*_)/y,o=Math.sin(o*_)/y}var M=o*v;if(s=s*m+u*M,c=c*m+f*M,l=l*m+d*M,h=h*m+p*M,m===1-o){var b=1/Math.sqrt(s*s+c*c+l*l+h*h);s*=b,c*=b,l*=b,h*=b}}t[e]=s,t[e+1]=c,t[e+2]=l,t[e+3]=h}}),s.prototype={constructor:s,isVector3:!0,set:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t;return function(e){return e&&e.isEuler,void 0===t&&(t=new o),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t;return function(e,i){return void 0===t&&(t=new o),this.applyQuaternion(t.setFromAxisAngle(e,i))}}(),applyMatrix3:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this},applyMatrix4:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;this.x=r[0]*e+r[4]*i+r[8]*n+r[12],this.y=r[1]*e+r[5]*i+r[9]*n+r[13],this.z=r[2]*e+r[6]*i+r[10]*n+r[14]
;var a=r[3]*e+r[7]*i+r[11]*n+r[15];return this.divideScalar(a)},applyQuaternion:function(t){var e=this.x,i=this.y,n=this.z,r=t.x,a=t.y,o=t.z,s=t.w,c=s*e+a*n-o*i,l=s*i+o*e-r*n,h=s*n+r*i-a*e,u=-r*e-a*i-o*n;return this.x=c*s+u*-r+l*-o-h*-a,this.y=l*s+u*-a+h*-r-c*-o,this.z=h*s+u*-o+c*-a-l*-r,this},project:function(){var t;return function(e){return void 0===t&&(t=new c),t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t;return function(e){return void 0===t&&(t=new c),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t,e;return function(i,n){return void 0===t&&(t=new s,e=new s),t.set(i,i,i),e.set(n,n,n),this.clamp(t,e)}}(),clampLength:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){return this.multiplyScalar(t/this.length())},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)},cross:function(t,e){if(void 0!==e)return this.crossVectors(t,e);var i=this.x,n=this.y,r=this.z;return this.x=n*t.z-r*t.y,this.y=r*t.x-i*t.z,this.z=i*t.y-n*t.x,this},crossVectors:function(t,e){var i=t.x,n=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=n*s-r*o,this.y=r*a-i*s,this.z=i*o-n*a,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new s),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new s),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(wr.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceToManhattan:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){return this.setFromMatrixColumn(t,3)},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this},setFromMatrixColumn:function(t,e){if("number"==typeof t){var i=t;t=e,e=i}return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,i){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},c.prototype={constructor:c,isMatrix4:!0,set:function(t,e,i,n,r,a,o,s,c,l,h,u,f,d,p,m){var g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=h,g[14]=u,g[3]=f,g[7]=d,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(t){return this.elements.set(t.elements),this},copyPosition:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this},extractBasis:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this},extractRotation:function(){var t;return function(e){void 0===t&&(t=new s);var i=this.elements,n=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),a=1/t.setFromMatrixColumn(e,1).length(),o=1/t.setFromMatrixColumn(e,2).length();return i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*a,i[5]=n[5]*a,i[6]=n[6]*a,i[8]=n[8]*o,i[9]=n[9]*o,i[10]=n[10]*o,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler;var e=this.elements,i=t.x,n=t.y,r=t.z,a=Math.cos(i),o=Math.sin(i),s=Math.cos(n),c=Math.sin(n),l=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var u=a*l,f=a*h,d=o*l,p=o*h;e[0]=s*l,e[4]=-s*h,e[8]=c,e[1]=f+d*c,e[5]=u-p*c,e[9]=-o*s,e[2]=p-u*c,e[6]=d+f*c,e[10]=a*s}else if("YXZ"===t.order){var m=s*l,g=s*h,v=c*l,x=c*h;e[0]=m+x*o,e[4]=v*o-g,e[8]=a*c,e[1]=a*h,e[5]=a*l,e[9]=-o,e[2]=g*o-v,e[6]=x+m*o,e[10]=a*s}else if("ZXY"===t.order){var m=s*l,g=s*h,v=c*l,x=c*h;e[0]=m-x*o,e[4]=-a*h,e[8]=v+g*o,e[1]=g+v*o,e[5]=a*l,e[9]=x-m*o,e[2]=-a*c,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var u=a*l,f=a*h,d=o*l,p=o*h;e[0]=s*l,e[4]=d*c-f,e[8]=u*c+p,e[1]=s*h,e[5]=p*c+u,e[9]=f*c-d,e[2]=-c,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var y=a*s,_=a*c,M=o*s,b=o*c;e[0]=s*l,e[4]=b-y*h,e[8]=M*h+_,e[1]=h,e[5]=a*l,e[9]=-o*l,e[2]=-c*l,e[6]=_*h+M,e[10]=y-b*h}else if("XZY"===t.order){var y=a*s,_=a*c,M=o*s,b=o*c;e[0]=s*l,e[4]=-h,e[8]=c*l,e[1]=y*h+b,e[5]=a*l,e[9]=_*h-M,e[2]=M*h-_,e[6]=o*l,e[10]=b*h+y}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z,a=t.w,o=i+i,s=n+n,c=r+r,l=i*o,h=i*s,u=i*c,f=n*s,d=n*c,p=r*c,m=a*o,g=a*s,v=a*c;return e[0]=1-(f+p),e[4]=h-v,e[8]=u+g,e[1]=h+v,e[5]=1-(l+p),e[9]=d-m,e[2]=u-g,e[6]=d+m,e[10]=1-(l+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:function(){var t,e,i;return function(n,r,a){void 0===t&&(t=new s,e=new s,i=new s);var o=this.elements;return i.subVectors(n,r).normalize(),0===i.lengthSq()&&(i.z=1),t.crossVectors(a,i).normalize(),0===t.lengthSq()&&(i.z+=1e-4,t.crossVectors(a,i).normalize()),e.crossVectors(i,t),o[0]=t.x,o[4]=e.x,o[8]=i.x,o[1]=t.y,o[5]=e.y,o[9]=i.y,o[2]=t.z,o[6]=e.z,o[10]=i.z,this}}(),multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var i=t.elements,n=e.elements,r=this.elements,a=i[0],o=i[4],s=i[8],c=i[12],l=i[1],h=i[5],u=i[9],f=i[13],d=i[2],p=i[6],m=i[10],g=i[14],v=i[3],x=i[7],y=i[11],_=i[15],M=n[0],b=n[4],w=n[8],S=n[12],E=n[1],T=n[5],L=n[9],A=n[13],P=n[2],C=n[6],R=n[10],N=n[14],D=n[3],U=n[7],I=n[11],O=n[15];return r[0]=a*M+o*E+s*P+c*D,r[4]=a*b+o*T+s*C+c*U,r[8]=a*w+o*L+s*R+c*I,r[12]=a*S+o*A+s*N+c*O,r[1]=l*M+h*E+u*P+f*D,r[5]=l*b+h*T+u*C+f*U,r[9]=l*w+h*L+u*R+f*I,r[13]=l*S+h*A+u*N+f*O,r[2]=d*M+p*E+m*P+g*D,r[6]=d*b+p*T+m*C+g*U,r[10]=d*w+p*L+m*R+g*I,r[14]=d*S+p*A+m*N+g*O,r[3]=v*M+x*E+y*P+_*D,r[7]=v*b+x*T+y*C+_*U,r[11]=v*w+x*L+y*R+_*I,r[15]=v*S+x*A+y*N+_*O,this},multiplyToArray:function(t,e,i){var n=this.elements;return this.multiplyMatrices(t,e),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],i[9]=n[9],i[10]=n[10],i[11]=n[11],i[12]=n[12],i[13]=n[13],i[14]=n[14],i[15]=n[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new s);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix4(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],a=t[1],o=t[5],s=t[9],c=t[13],l=t[2],h=t[6],u=t[10],f=t[14];return t[3]*(+r*s*h-n*c*h-r*o*u+i*c*u+n*o*f-i*s*f)+t[7]*(+e*s*f-e*c*u+r*a*u-n*a*f+n*c*l-r*s*l)+t[11]*(+e*c*h-e*o*f-r*a*h+i*a*f+r*o*l-i*c*l)+t[15]*(-n*o*l-e*s*h+e*o*u+n*a*h-i*a*u+i*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var i=this.elements,n=t.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],h=n[6],u=n[7],f=n[8],d=n[9],p=n[10],m=n[11],g=n[12],v=n[13],x=n[14],y=n[15],_=d*x*u-v*p*u+v*h*m-l*x*m-d*h*y+l*p*y,M=g*p*u-f*x*u-g*h*m+c*x*m+f*h*y-c*p*y,b=f*v*u-g*d*u+g*l*m-c*v*m-f*l*y+c*d*y,w=g*d*h-f*v*h-g*l*p+c*v*p+f*l*x-c*d*x,S=r*_+a*M+o*b+s*w;if(0===S){var E="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(E);return this.identity()}var T=1/S;return i[0]=_*T,i[1]=(v*p*s-d*x*s-v*o*m+a*x*m+d*o*y-a*p*y)*T,i[2]=(l*x*s-v*h*s+v*o*u-a*x*u-l*o*y+a*h*y)*T,i[3]=(d*h*s-l*p*s-d*o*u+a*p*u+l*o*m-a*h*m)*T,i[4]=M*T,i[5]=(f*x*s-g*p*s+g*o*m-r*x*m-f*o*y+r*p*y)*T,i[6]=(g*h*s-c*x*s-g*o*u+r*x*u+c*o*y-r*h*y)*T,i[7]=(c*p*s-f*h*s+f*o*u-r*p*u-c*o*m+r*h*m)*T,i[8]=b*T,i[9]=(g*d*s-f*v*s-g*a*m+r*v*m+f*a*y-r*d*y)*T,i[10]=(c*v*s-g*l*s+g*a*u-r*v*u-c*a*y+r*l*y)*T,i[11]=(f*l*s-c*d*s-f*a*u+r*d*u+c*a*m-r*l*m)*T,i[12]=w*T,i[13]=(f*v*o-g*d*o+g*a*p-r*v*p-f*a*x+r*d*x)*T,i[14]=(g*l*o-c*v*o-g*a*h+r*v*h+c*a*x-r*l*x)*T,i[15]=(c*d*o-f*l*o+f*a*h-r*d*h-c*a*p+r*l*p)*T,this},scale:function(t){var e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))},makeTranslation:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var i=Math.cos(e),n=Math.sin(e),r=1-i,a=t.x,o=t.y,s=t.z,c=r*a,l=r*o;return this.set(c*a+i,c*o-n*s,c*s+n*o,0,c*o+n*s,l*o+i,l*s-n*a,0,c*s-n*o,l*s+n*a,r*s*s+i,0,0,0,0,1),this},makeScale:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this},decompose:function(){var t,e;return function(i,n,r){void 0===t&&(t=new s,e=new c);var a=this.elements,o=t.set(a[0],a[1],a[2]).length(),l=t.set(a[4],a[5],a[6]).length(),h=t.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),i.x=a[12],i.y=a[13],i.z=a[14],e.elements.set(this.elements);var u=1/o,f=1/l,d=1/h;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=f,e.elements[5]*=f,e.elements[6]*=f,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,n.setFromRotationMatrix(e),r.x=o,r.y=l,r.z=h,this}}(),makePerspective:function(t,e,i,n,r,a){var o=this.elements,s=2*r/(e-t),c=2*r/(i-n),l=(e+t)/(e-t),h=(i+n)/(i-n),u=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,i,n,r,a){var o=this.elements,s=1/(e-t),c=1/(i-n),l=1/(a-r),h=(e+t)*s,u=(i+n)*c,f=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n++)if(e[n]!==i[n])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<16;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},l.prototype=Object.create(n.prototype),l.prototype.constructor=l,l.prototype.isCubeTexture=!0,Object.defineProperty(l.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});var Er=new n,Tr=new l,Lr=[],Ar=[];G.prototype.setValue=function(t,e){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var a=i[n];a.setValue(t,e[a.id])}};var Pr=/([\w\d_]+)(\])?(\[|\.)?/g;H.prototype.setValue=function(t,e,i){var n=this.map[e];void 0!==n&&n.setValue(t,i,this.renderer)},H.prototype.set=function(t,e,i){var n=this.map[i];void 0!==n&&n.setValue(t,e[i],this.renderer)},H.prototype.setOptional=function(t,e,i){var n=e[i];void 0!==n&&this.setValue(t,i,n)},H.upload=function(t,e,i,n){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}},H.seqWithValue=function(t,e){for(var i=[],n=0,r=t.length;n!==r;++n){var a=t[n];a.id in e&&i.push(a)}return i};var Cr={merge:function(t){for(var e={},i=0;i<t.length;i++){var n=this.clone(t[i]);for(var r in n)e[r]=n[r]}return e},clone:function(t){var e={};for(var i in t){e[i]={};for(var n in t[i]){var r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}},Rr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t\t}\n\t\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",
cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\t}\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",
meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};W.prototype={constructor:W,isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,i){return this.r=t,this.g=e,this.b=i,this},setHSL:function(){function t(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}return function(e,i,n){if(e=wr.euclideanModulo(e,1),i=wr.clamp(i,0,1),n=wr.clamp(n,0,1),0===i)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+i):n+i-n*i,a=2*n-r;this.r=t(a,r,e+1/3),this.g=t(a,r,e),this.b=t(a,r,e-1/3)}return this}}(),setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var n,r=i[1],a=i[2];switch(r){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,e(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,e(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return e(n[5]),this.setHSL(o,s,c)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=i[1],h=l.length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(t&&t.length>0){var l=Nr[t];void 0!==l&&this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var i=e>0?1/e:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this},convertGammaToLinear:function(){var t=this.r,e=this.g,i=this.b;return this.r=t*t,this.g=e*e,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){var e,i,n=t||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),c=Math.min(r,a,o),l=(c+s)/2;if(c===s)e=0,i=0;else{var h=s-c;switch(i=l<=.5?h/(s+c):h/(2-s-c),s){case r:e=(a-o)/h+(a<o?6:0);break;case a:e=(o-r)/h+2;break;case o:e=(r-a)/h+4}e/=6}return n.h=e,n.s=i,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,i){var n=this.getHSL();return n.h+=t,n.s+=e,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}};var Nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Dr={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new r(0,0,1,1)}}},Ur={basic:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.fog]),vertexShader:Rr.meshbasic_vert,fragmentShader:Rr.meshbasic_frag},lambert:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.fog,Dr.lights,{emissive:{value:new W(0)}}]),vertexShader:Rr.meshlambert_vert,fragmentShader:Rr.meshlambert_frag},phong:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.gradientmap,Dr.fog,Dr.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:Rr.meshphong_vert,fragmentShader:Rr.meshphong_frag},standard:{uniforms:Cr.merge([Dr.common,Dr.aomap,Dr.lightmap,Dr.emissivemap,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,Dr.roughnessmap,Dr.metalnessmap,Dr.fog,Dr.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},points:{uniforms:Cr.merge([Dr.points,Dr.fog]),vertexShader:Rr.points_vert,fragmentShader:Rr.points_frag},dashed:{uniforms:Cr.merge([Dr.common,Dr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Rr.linedashed_vert,fragmentShader:Rr.linedashed_frag},depth:{uniforms:Cr.merge([Dr.common,Dr.displacementmap]),vertexShader:Rr.depth_vert,fragmentShader:Rr.depth_frag},normal:{uniforms:Cr.merge([Dr.common,Dr.bumpmap,Dr.normalmap,Dr.displacementmap,{opacity:{value:1}}]),vertexShader:Rr.normal_vert,fragmentShader:Rr.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Rr.cube_vert,fragmentShader:Rr.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Rr.equirect_vert,fragmentShader:Rr.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new s}},vertexShader:Rr.distanceRGBA_vert,fragmentShader:Rr.distanceRGBA_frag}};Ur.physical={uniforms:Cr.merge([Ur.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Rr.meshphysical_vert,fragmentShader:Rr.meshphysical_frag},j.prototype={constructor:j,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new i;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new i;return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new i).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new i).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new i;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};var Ir=0;q.prototype={constructor:q,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(t){!0===t&&this.update(),this._needsUpdate=t},setValues:function(t){if(void 0!==t)for(var e in t){var i=t[e];if(void 0!==i){var n=this[e];void 0!==n&&(n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]="overdraw"===e?Number(i):i)}}},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t;i&&(t={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Oi&&(n.blending=this.blending),this.shading!==Ni&&(n.shading=this.shading),this.side!==Ai&&(n.side=this.side),this.vertexColors!==Di&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,i){var r=e(t.textures),a=e(t.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.shading=t.shading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.overdraw=t.overdraw,this.visible=t.visible,this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,i=null;if(null!==e){var n=e.length;i=new Array(n);for(var r=0;r!==n;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(q.prototype,e.prototype),Z.prototype=Object.create(q.prototype),Z.prototype.constructor=Z,Z.prototype.isShaderMaterial=!0,Z.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Cr.clone(t.uniforms),this.defines=t.defines,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},Z.prototype.toJSON=function(t){var e=q.prototype.toJSON.call(this,t);return e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},J.prototype=Object.create(q.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Q.prototype={constructor:Q,isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){
for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.length;s<c;s+=3){var l=t[s],h=t[s+1],u=t[s+2];l<e&&(e=l),h<i&&(i=h),u<n&&(n=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,i=1/0,n=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=t.count;s<c;s++){var l=t.getX(s),h=t.getY(s),u=t.getZ(s);l<e&&(e=l),h<i&&(i=h),u<n&&(n=u),l>r&&(r=l),h>a&&(a=h),u>o&&(o=u)}return this.min.set(e,i,n),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new s;return function(e,i){var n=t.copy(i).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){var e=t||new s;return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){var e=t||new s;return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t=new s;return function(e){var i=this;return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,a=e.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,r=o.length;n<r;n++)t.copy(o[n]),t.applyMatrix4(e.matrixWorld),i.expandByPoint(t)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,r=s.count;n<r;n++)t.fromBufferAttribute(s,n).applyMatrix4(e.matrixWorld),i.expandByPoint(t)}}),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new s).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t;return function(e){return void 0===t&&(t=new s),this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=t.constant&&i>=t.constant},clampPoint:function(t,e){return(e||new s).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new s;return function(e){var i=e||new K;return this.getCenter(i.center),i.radius=.5*this.getSize(t).length(),i}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new s,new s,new s,new s,new s,new s,new s,new s];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},K.prototype={constructor:K,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t;return function(e,i){void 0===t&&(t=new Q);var n=this.center;void 0!==i?n.copy(i):t.setFromPoints(e).getCenter(n);for(var r=0,a=0,o=e.length;a<o;a++)r=Math.max(r,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(this.center.dot(t.normal)-t.constant)<=this.radius},clampPoint:function(t,e){var i=this.center.distanceToSquared(t),n=e||new s;return n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(t){var e=t||new Q;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},$.prototype={constructor:$,isMatrix3:!0,set:function(t,e,i,n,r,a,o,s,c){var l=this.elements;return l[0]=t,l[1]=n,l[2]=o,l[3]=e,l[4]=r,l[5]=s,l[6]=i,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t;return function(e){void 0===t&&(t=new s);for(var i=0,n=e.count;i<n;i++)t.x=e.getX(i),t.y=e.getY(i),t.z=e.getZ(i),t.applyMatrix3(this),e.setXYZ(i,t.x,t.y,t.z);return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],a=t[4],o=t[5],s=t[6],c=t[7],l=t[8];return e*a*l-e*o*c-i*r*l+i*o*s+n*r*c-n*a*s},getInverse:function(t,e){t&&t.isMatrix4;var i=t.elements,n=this.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],h=i[6],u=i[7],f=i[8],d=f*c-l*u,p=l*h-f*s,m=u*s-c*h,g=r*d+a*p+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return this.identity()}var x=1/g;return n[0]=d*x,n[1]=(o*u-f*a)*x,n[2]=(l*a-o*c)*x,n[3]=p*x,n[4]=(f*r-o*h)*x,n[5]=(o*s-l*r)*x,n[6]=m*x,n[7]=(a*h-u*r)*x,n[8]=(c*r-a*s)*x,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t,e){void 0===e&&(e=0);for(var i=0;i<9;i++)this.elements[i]=t[i+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}},tt.prototype={constructor:tt,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new s,e=new s;return function(i,n,r){var a=t.subVectors(r,n).cross(e.subVectors(i,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var i=this.distanceToPoint(t);return(e||new s).copy(this.normal).multiplyScalar(i)},intersectLine:function(){var t=new s;return function(e,i){var n=i||new s,r=e.delta(t),a=this.normal.dot(r);if(0!==a){var o=-(e.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(r).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return(t||new s).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new s,e=new $;return function(i,n){var r=this.coplanarPoint(t).applyMatrix4(i),a=n||e.getNormalMatrix(i),o=this.normal.applyMatrix3(a).normalize();return this.constant=-r.dot(o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},et.prototype={constructor:et,set:function(t,e,i,n,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(n),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,i=0;i<6;i++)e[i].copy(t.planes[i]);return this},setFromMatrix:function(t){var e=this.planes,i=t.elements,n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],c=i[5],l=i[6],h=i[7],u=i[8],f=i[9],d=i[10],p=i[11],m=i[12],g=i[13],v=i[14],x=i[15];return e[0].setComponents(o-n,h-s,p-u,x-m).normalize(),e[1].setComponents(o+n,h+s,p+u,x+m).normalize(),e[2].setComponents(o+r,h+c,p+f,x+g).normalize(),e[3].setComponents(o-r,h-c,p-f,x-g).normalize(),e[4].setComponents(o-a,h-l,p-d,x-v).normalize(),e[5].setComponents(o+a,h+l,p+d,x+v).normalize(),this},intersectsObject:function(){var t=new K;return function(e){var i=e.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),t.copy(i.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new K;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,i=t.center,n=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(i)<n)return!1}return!0},intersectsBox:function(){var t=new s,e=new s;return function(i){for(var n=this.planes,r=0;r<6;r++){var a=n[r];t.x=a.normal.x>0?i.min.x:i.max.x,e.x=a.normal.x>0?i.max.x:i.min.x,t.y=a.normal.y>0?i.min.y:i.max.y,e.y=a.normal.y>0?i.max.y:i.min.y,t.z=a.normal.z>0?i.min.z:i.max.z,e.z=a.normal.z>0?i.max.z:i.min.z;var o=a.distanceToPoint(t),s=a.distanceToPoint(e);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}},nt.prototype={constructor:nt,set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return(e||new s).copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new s;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){var i=e||new s;i.subVectors(t,this.origin);var n=i.dot(this.direction);return n<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new s;return function(e){var i=t.subVectors(e,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(i).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new s,e=new s,i=new s;return function(n,r,a,o){t.copy(n).add(r).multiplyScalar(.5),e.copy(r).sub(n).normalize(),i.copy(this.origin).sub(t);var s,c,l,h,u=.5*n.distanceTo(r),f=-this.direction.dot(e),d=i.dot(this.direction),p=-i.dot(e),m=i.lengthSq(),g=Math.abs(1-f*f);if(g>0)if(s=f*p-d,c=f*d-p,h=u*g,s>=0)if(c>=-h)if(c<=h){var v=1/g;s*=v,c*=v,l=s*(s+f*c+2*d)+c*(f*s+c+2*p)+m}else c=u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;else c=-u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;else c<=-h?(s=Math.max(0,-(-f*u+d)),c=s>0?-u:Math.min(Math.max(-u,-p),u),l=-s*s+c*(c+2*p)+m):c<=h?(s=0,c=Math.min(Math.max(-u,-p),u),l=c*(c+2*p)+m):(s=Math.max(0,-(f*u+d)),c=s>0?u:Math.min(Math.max(-u,-p),u),l=-s*s+c*(c+2*p)+m);else c=f>0?-u:u,s=Math.max(0,-(f*c+d)),l=-s*s+c*(c+2*p)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(e).multiplyScalar(c).add(t),l}}(),intersectSphere:function(){var t=new s;return function(e,i){t.subVectors(e.center,this.origin);var n=t.dot(this.direction),r=t.dot(t)-n*n,a=e.radius*e.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=n-o,c=n+o;return s<0&&c<0?null:s<0?this.at(c,i):this.at(s,i)}}(),intersectsSphere:function(t){return this.distanceToPoint(t.center)<=t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null},intersectPlane:function(t,e){var i=this.distanceToPlane(t);return null===i?null:this.at(i,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var i,n,r,a,o,s,c=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,u=this.origin;return c>=0?(i=(t.min.x-u.x)*c,n=(t.max.x-u.x)*c):(i=(t.max.x-u.x)*c,n=(t.min.x-u.x)*c),l>=0?(r=(t.min.y-u.y)*l,a=(t.max.y-u.y)*l):(r=(t.max.y-u.y)*l,a=(t.min.y-u.y)*l),i>a||r>n?null:((r>i||i!==i)&&(i=r),(a<n||n!==n)&&(n=a),h>=0?(o=(t.min.z-u.z)*h,s=(t.max.z-u.z)*h):(o=(t.max.z-u.z)*h,s=(t.min.z-u.z)*h),i>s||o>n?null:((o>i||i!==i)&&(i=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(i>=0?i:n,e)))},intersectsBox:function(){var t=new s;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new s,e=new s,i=new s,n=new s;return function(r,a,o,s,c){e.subVectors(a,r),i.subVectors(o,r),n.crossVectors(e,i);var l,h=this.direction.dot(n);if(h>0){if(s)return null;l=1}else{if(!(h<0))return null;l=-1,h=-h}t.subVectors(this.origin,r);var u=l*this.direction.dot(i.crossVectors(t,i));if(u<0)return null;var f=l*this.direction.dot(e.cross(t));if(f<0)return null;if(u+f>h)return null;var d=-l*t.dot(n);return d<0?null:this.at(d/h,c)}}(),applyMatrix4:function(t){return this.direction.add(this.origin).applyMatrix4(t),this.origin.applyMatrix4(t),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],rt.DefaultOrder="XYZ",rt.prototype={constructor:rt,isEuler:!0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get order(){return this._order},set order(t){this._order=t,this.onChangeCallback()},set:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,i){var n=wr.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],h=r[9],u=r[2],f=r[6],d=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-n(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-u,a),this._z=0)):"ZXY"===e?(this._x=Math.asin(n(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===e?(this._y=Math.asin(-n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===e&&(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,d),this._y=0)),this._order=e,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,i,n)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}},at.prototype={constructor:at,set:function(t){this.mask=1<<t},enable:function(t){this.mask|=1<<t},toggle:function(t){this.mask^=1<<t},disable:function(t){this.mask&=~(1<<t)},test:function(t){return 0!=(this.mask&t.mask)}};var Or=0;ot.DefaultUp=new s(0,1,0),ot.DefaultMatrixAutoUpdate=!0,ot.prototype={constructor:ot,isObject3D:!0,applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o;return function(e,i){return t.setFromAxisAngle(e,i),this.quaternion.multiply(t),this}}(),rotateX:function(){var t=new s(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new s(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new s(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new s;return function(e,i){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(i)),this}}(),translateX:function(){var t=new s(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new s(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new s(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new c;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new c;return function(e){t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)),this)},remove:function(t){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);var i=this.children.indexOf(t);-1!==i&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(i,1))},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var i=0,n=this.children.length;i<n;i++){var r=this.children[i],a=r.getObjectByProperty(t,e);if(void 0!==a)return a}},getWorldPosition:function(t){var e=t||new s;return this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new s,e=new s;return function(i){var n=i||new o;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldRotation:function(){var t=new o;return function(e){var i=e||new rt;return this.getWorldQuaternion(t),i.setFromQuaternion(t,this.rotation.order,!1)}}(),getWorldScale:function(){var t=new s,e=new o;return function(i){var n=i||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new o;return function(e){var i=e||new s;return this.getWorldQuaternion(t),i.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==t||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,i=0,n=e.length;i<n;i++)e[i].updateMatrixWorld(t)},toJSON:function(t){function e(t){var e=[];for(var i in t){var n=t[i];delete n.metadata,e.push(n)}return e}var i=void 0===t||""===t,n={};i&&(t={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===t.geometries[this.geometry.uuid]&&(t.geometries[this.geometry.uuid]=this.geometry.toJSON(t)),r.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===t.materials[this.material.uuid]&&(t.materials[this.material.uuid]=this.material.toJSON(t)),r.material=this.material.uuid),this.children.length>0){r.children=[];for(var a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object)}if(i){var o=e(t.geometries),s=e(t.materials),c=e(t.textures),l=e(t.images);o.length>0&&(n.geometries=o),s.length>0&&(n.materials=s),c.length>0&&(n.textures=c),l.length>0&&(n.images=l)}return n.object=r,n},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var i=0;i<t.children.length;i++){var n=t.children[i];this.add(n.clone())}return this}},Object.assign(ot.prototype,e.prototype),st.prototype={constructor:st,set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return(t||new s).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return(t||new s).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){var i=e||new s;return this.delta(i).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new s,e=new s;return function(i,n){t.subVectors(i,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),a=e.dot(t),o=a/r;return n&&(o=wr.clamp(o,0,1)),o}}(),closestPointToPoint:function(t,e,i){var n=this.closestPointToPointParameter(t,e),r=i||new s;return this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},ct.normal=function(){var t=new s;return function(e,i,n,r){var a=r||new s;a.subVectors(n,i),t.subVectors(e,i),a.cross(t);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),ct.barycoordFromPoint=function(){var t=new s,e=new s,i=new s;return function(n,r,a,o,c){t.subVectors(o,r),e.subVectors(a,r),i.subVectors(n,r);var l=t.dot(t),h=t.dot(e),u=t.dot(i),f=e.dot(e),d=e.dot(i),p=l*f-h*h,m=c||new s;if(0===p)return m.set(-2,-1,-1);var g=1/p,v=(f*u-h*d)*g,x=(l*d-h*u)*g;return m.set(1-v-x,x,v)}}(),ct.containsPoint=function(){var t=new s;return function(e,i,n,r){var a=ct.barycoordFromPoint(e,i,n,r,t);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),ct.prototype={constructor:ct,set:function(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this},setFromPointsAndIndices:function(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},area:function(){var t=new s,e=new s;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),midpoint:function(t){return(t||new s).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(t){return ct.normal(this.a,this.b,this.c,t)},plane:function(t){return(t||new tt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(t,e){return ct.barycoordFromPoint(t,this.a,this.b,this.c,e)},containsPoint:function(t){return ct.containsPoint(t,this.a,this.b,this.c)},closestPointToPoint:function(){var t,e,i,n;return function(r,a){void 0===t&&(t=new tt,e=[new st,new st,new st],i=new s,n=new s);var o=a||new s,c=1/0;if(t.setFromCoplanarPoints(this.a,this.b,this.c),t.projectPoint(r,i),!0===this.containsPoint(i))o.copy(i);else{e[0].set(this.a,this.b),e[1].set(this.b,this.c),e[2].set(this.c,this.a);for(var l=0;l<e.length;l++){e[l].closestPointToPoint(i,!0,n);var h=i.distanceToSquared(n);h<c&&(c=h,o.copy(n))}}return o}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},lt.prototype={constructor:lt,clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,i=t.vertexNormals.length;e<i;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var e=0,i=t.vertexColors.length;e<i;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}},ht.prototype=Object.create(q.prototype),ht.prototype.constructor=ht,ht.prototype.isMeshBasicMaterial=!0,ht.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},ut.prototype={constructor:ut,isBufferAttribute:!0,set needsUpdate(t){!0===t&&this.version++},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==t?t.length/this.itemSize:0,this.array=t},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,i){t*=this.itemSize,i*=e.itemSize;for(var n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(a=new W),e[i++]=a.r,e[i++]=a.g,e[i++]=a.b}return this},copyIndicesArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];e[i++]=a.a,e[i++]=a.b,e[i++]=a.c}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(o=new i),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,i=0,n=0,r=t.length;n<r;n++){var a=t[n];void 0===a&&(a=new s),e[i++]=a.x,e[i++]=a.y,e[i++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,i=0,n=0,a=t.length;n<a;n++){var o=t[n];void 0===o&&(o=new r),e[i++]=o.x,e[i++]=o.y,e[i++]=o.z,e[i++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this},setXYZ:function(t,e,i,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this},setXYZW:function(t,e,i,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},
ft.prototype=Object.create(ut.prototype),ft.prototype.constructor=ft,dt.prototype=Object.create(ut.prototype),dt.prototype.constructor=dt,pt.prototype=Object.create(ut.prototype),pt.prototype.constructor=pt,Object.assign(mt.prototype,{computeGroups:function(t){for(var e,i=[],n=void 0,r=t.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==e&&(e.count=3*a-e.start,i.push(e)),e={start:3*a,materialIndex:n})}void 0!==e&&(e.count=3*a-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,c=t.morphTargets,l=c.length;if(l>0){e=[];for(var h=0;h<l;h++)e[h]=[];this.morphTargets.position=e}var u,f=t.morphNormals,d=f.length;if(d>0){u=[];for(var h=0;h<d;h++)u[h]=[];this.morphTargets.normal=u}for(var p=t.skinIndices,m=t.skinWeights,g=p.length===r.length,v=m.length===r.length,h=0;h<n.length;h++){var x=n[h];this.vertices.push(r[x.a],r[x.b],r[x.c]);var y=x.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=x.normal;this.normals.push(_,_,_)}var M=x.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var b=x.color;this.colors.push(b,b,b)}if(!0===o){var w=a[0][h];void 0!==w?this.uvs.push(w[0],w[1],w[2]):this.uvs.push(new i,new i,new i)}if(!0===s){var w=a[1][h];void 0!==w?this.uvs2.push(w[0],w[1],w[2]):this.uvs2.push(new i,new i,new i)}for(var S=0;S<l;S++){var E=c[S].vertices;e[S].push(E[x.a],E[x.b],E[x.c])}for(var S=0;S<d;S++){var T=f[S].vertexNormals[h];u[S].push(T.a,T.b,T.c)}g&&this.skinIndices.push(p[x.a],p[x.b],p[x.c]),v&&this.skinWeights.push(m[x.a],m[x.b],m[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var zr=0;xt.prototype={constructor:xt,isGeometry:!0,applyMatrix:function(t){for(var e=(new $).getNormalMatrix(t),i=0,n=this.vertices.length;i<n;i++){this.vertices[i].applyMatrix4(t)}for(var i=0,n=this.faces.length;i<n;i++){var r=this.faces[i];r.normal.applyMatrix3(e).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ot),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,r){var a=void 0!==c?[f[t].clone(),f[e].clone(),f[i].clone()]:[],o=void 0!==l?[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()]:[],s=new lt(t,e,i,a,o,r);n.faces.push(s),void 0!==h&&n.faceVertexUvs[0].push([d[t].clone(),d[e].clone(),d[i].clone()]),void 0!==u&&n.faceVertexUvs[1].push([p[t].clone(),p[e].clone(),p[i].clone()])}var n=this,r=null!==t.index?t.index.array:void 0,a=t.attributes,o=a.position.array,c=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,h=void 0!==a.uv?a.uv.array:void 0,u=void 0!==a.uv2?a.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var f=[],d=[],p=[],m=0,g=0;m<o.length;m+=3,g+=2)n.vertices.push(new s(o[m],o[m+1],o[m+2])),void 0!==c&&f.push(new s(c[m],c[m+1],c[m+2])),void 0!==l&&n.colors.push(new W(l[m],l[m+1],l[m+2])),void 0!==h&&d.push(new i(h[g],h[g+1])),void 0!==u&&p.push(new i(u[g],u[g+1]));if(void 0!==r){var v=t.groups;if(v.length>0)for(var m=0;m<v.length;m++)for(var x=v[m],y=x.start,_=x.count,g=y,M=y+_;g<M;g+=3)e(r[g],r[g+1],r[g+2],x.materialIndex);else for(var m=0;m<r.length;m+=3)e(r[m],r[m+1],r[m+2])}else for(var m=0;m<o.length/3;m+=3)e(m,m+1,m+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,i=0===e?1:1/e,n=new c;return n.set(i,0,0,-i*t.x,0,i,0,-i*t.y,0,0,i,-i*t.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var t=new s,e=new s,i=0,n=this.faces.length;i<n;i++){var r=this.faces[i],a=this.vertices[r.a],o=this.vertices[r.b],c=this.vertices[r.c];t.subVectors(c,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);var e,i,n,r,a,o;for(o=new Array(this.vertices.length),e=0,i=this.vertices.length;e<i;e++)o[e]=new s;if(t){var c,l,h,u=new s,f=new s;for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],c=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c],u.subVectors(h,l),f.subVectors(c,l),u.cross(f),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),n=0,r=this.faces.length;n<r;n++)a=this.faces[n],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(e=0,i=this.vertices.length;e<i;e++)o[e].normalize();for(n=0,r=this.faces.length;n<r;n++){a=this.faces[n];var d=a.vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,i;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){i=this.faces[t];var n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,i,n,r;for(i=0,n=this.faces.length;i<n;i++)for(r=this.faces[i],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var a=new xt;for(a.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var o,c,l=this.morphNormals[t].faceNormals,h=this.morphNormals[t].vertexNormals;for(i=0,n=this.faces.length;i<n;i++)o=new s,c={a:new s,b:new s,c:new s},l.push(o),h.push(c)}var u=this.morphNormals[t];a.vertices=this.morphTargets[t].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,c;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],o=u.faceNormals[i],c=u.vertexNormals[i],o.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var t=0,e=this.vertices,i=0,n=e.length;i<n;i++)i>0&&(t+=e[i].distanceTo(e[i-1])),this.lineDistances[i]=t},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Q),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new K),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,i){if(!1!==(t&&t.isGeometry)){var n,r=this.vertices.length,a=this.vertices,o=t.vertices,s=this.faces,c=t.faces,l=this.faceVertexUvs[0],h=t.faceVertexUvs[0],u=this.colors,f=t.colors;void 0===i&&(i=0),void 0!==e&&(n=(new $).getNormalMatrix(e));for(var d=0,p=o.length;d<p;d++){var m=o[d],g=m.clone();void 0!==e&&g.applyMatrix4(e),a.push(g)}for(var d=0,p=f.length;d<p;d++)u.push(f[d].clone());for(d=0,p=c.length;d<p;d++){var v,x,y,_=c[d],M=_.vertexNormals,b=_.vertexColors;v=new lt(_.a+r,_.b+r,_.c+r),v.normal.copy(_.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var w=0,S=M.length;w<S;w++)x=M[w].clone(),void 0!==n&&x.applyMatrix3(n).normalize(),v.vertexNormals.push(x);v.color.copy(_.color);for(var w=0,S=b.length;w<S;w++)y=b[w],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+i,s.push(v)}for(d=0,p=h.length;d<p;d++){var E=h[d],T=[];if(void 0!==E){for(var w=0,S=E.length;w<S;w++)T.push(E[w].clone());l.push(T)}}}},mergeMesh:function(t){!1!==(t&&t.isMesh)&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){var t,e,i,n,r,a,o,s,c={},l=[],h=[],u=Math.pow(10,4);for(i=0,n=this.vertices.length;i<n;i++)t=this.vertices[i],e=Math.round(t.x*u)+"_"+Math.round(t.y*u)+"_"+Math.round(t.z*u),void 0===c[e]?(c[e]=i,l.push(this.vertices[i]),h[i]=l.length-1):h[i]=h[c[e]];var f=[];for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i],r.a=h[r.a],r.b=h[r.b],r.c=h[r.c],a=[r.a,r.b,r.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){f.push(i);break}}for(i=f.length-1;i>=0;i--){var p=f[i];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,i=e.length,n=0;n<i;n++)e[n]._id=n;e.sort(t);var r,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===i&&(r=[]),s&&s.length===i&&(a=[]);for(var n=0;n<i;n++){var c=e[n]._id;r&&r.push(o[c]),a&&a.push(s[c])}r&&(this.faceVertexUvs[0]=r),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function t(t,e,i){return i?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=u.length/3,u.push(t.x,t.y,t.z),f[e])}function i(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==p[e]?p[e]:(p[e]=d.length,d.push(t.getHex()),p[e])}function n(t){var e=t.x.toString()+t.y.toString();return void 0!==g[e]?g[e]:(g[e]=m.length/2,m.push(t.x,t.y),g[e])}var r={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(var s=[],c=0;c<this.vertices.length;c++){var l=this.vertices[c];s.push(l.x,l.y,l.z)}for(var h=[],u=[],f={},d=[],p={},m=[],g={},c=0;c<this.faces.length;c++){var v=this.faces[c],x=void 0!==this.faceVertexUvs[0][c],y=v.normal.length()>0,_=v.vertexNormals.length>0,M=1!==v.color.r||1!==v.color.g||1!==v.color.b,b=v.vertexColors.length>0,w=0;if(w=t(w,0,0),w=t(w,1,!0),w=t(w,2,!1),w=t(w,3,x),w=t(w,4,y),w=t(w,5,_),w=t(w,6,M),w=t(w,7,b),h.push(w),h.push(v.a,v.b,v.c),h.push(v.materialIndex),x){var S=this.faceVertexUvs[0][c];h.push(n(S[0]),n(S[1]),n(S[2]))}if(y&&h.push(e(v.normal)),_){var E=v.vertexNormals;h.push(e(E[0]),e(E[1]),e(E[2]))}if(M&&h.push(i(v.color)),b){var T=v.vertexColors;h.push(i(T[0]),i(T[1]),i(T[2]))}}return r.data={},r.data.vertices=s,r.data.normals=u,d.length>0&&(r.data.colors=d),m.length>0&&(r.data.uvs=[m]),r.data.faces=h,r},clone:function(){return(new xt).copy(this)},copy:function(t){var e,i,n,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,i=s.length;e<i;e++)this.vertices.push(s[e].clone());var c=t.colors;for(e=0,i=c.length;e<i;e++)this.colors.push(c[e].clone());var l=t.faces;for(e=0,i=l.length;e<i;e++)this.faces.push(l[e].clone());for(e=0,i=t.faceVertexUvs.length;e<i;e++){var h=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),n=0,r=h.length;n<r;n++){var u=h[n],f=[];for(a=0,o=u.length;a<o;a++){var d=u[a];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,i=p.length;e<i;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],n=0,r=p[e].vertices.length;n<r;n++)m.vertices.push(p[e].vertices[n].clone());if(void 0!==p[e].normals)for(m.normals=[],n=0,r=p[e].normals.length;n<r;n++)m.normals.push(p[e].normals[n].clone());this.morphTargets.push(m)}var g=t.morphNormals;for(e=0,i=g.length;e<i;e++){var v={};if(void 0!==g[e].vertexNormals)for(v.vertexNormals=[],n=0,r=g[e].vertexNormals.length;n<r;n++){var x=g[e].vertexNormals[n],y={};y.a=x.a.clone(),y.b=x.b.clone(),y.c=x.c.clone(),v.vertexNormals.push(y)}if(void 0!==g[e].faceNormals)for(v.faceNormals=[],n=0,r=g[e].faceNormals.length;n<r;n++)v.faceNormals.push(g[e].faceNormals[n].clone());this.morphNormals.push(v)}var _=t.skinWeights;for(e=0,i=_.length;e<i;e++)this.skinWeights.push(_[e].clone());var M=t.skinIndices;for(e=0,i=M.length;e<i;e++)this.skinIndices.push(M[e].clone());var b=t.lineDistances;for(e=0,i=b.length;e<i;e++)this.lineDistances.push(b[e]);var w=t.boundingBox;null!==w&&(this.boundingBox=w.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(xt.prototype,e.prototype),yt.prototype={constructor:yt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(gt(t)>65535?dt:ft)(t,1):this.index=t},addAttribute:function(t,e){return!1===(e&&e.isBufferAttribute)&&!1===(e&&e.isInterleavedBufferAttribute)?void this.addAttribute(t,new ut(arguments[1],arguments[2])):"index"===t?void this.setIndex(e):(this.attributes[t]=e,this)},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,i){this.groups.push({start:t,count:e,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){(new $).getNormalMatrix(t).applyToBufferAttribute(i),i.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t;return function(e){return void 0===t&&(t=new c),t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeTranslation(e,i,n),this.applyMatrix(t),this}}(),scale:function(){var t;return function(e,i,n){return void 0===t&&(t=new c),t.makeScale(e,i,n),this.applyMatrix(t),this}}(),lookAt:function(){var t;return function(e){void 0===t&&(t=new ot),t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){this.computeBoundingBox();var t=this.boundingBox.getCenter().negate();return this.translate(t.x,t.y,t.z),t},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var i=new pt(3*e.vertices.length,3),n=new pt(3*e.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(e.vertices)),this.addAttribute("color",n.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new pt(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var i=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(i=void 0,e.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(e);i.verticesNeedUpdate=e.verticesNeedUpdate,i.normalsNeedUpdate=e.normalsNeedUpdate,i.colorsNeedUpdate=e.colorsNeedUpdate,i.uvsNeedUpdate=e.uvsNeedUpdate,i.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=i}var n;return!0===e.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1),!0===e.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1),!0===e.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1),e.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1),e.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1),e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new mt).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new ut(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var i=new Float32Array(3*t.normals.length);this.addAttribute("normal",new ut(i,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var n=new Float32Array(3*t.colors.length);this.addAttribute("color",new ut(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new ut(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new ut(a,2).copyVector2sArray(t.uvs2))}if(t.indices.length>0){var o=gt(t.indices)>65535?Uint32Array:Uint16Array,s=new o(3*t.indices.length);this.setIndex(new ut(s,1).copyIndicesArray(t.indices))}this.groups=t.groups;for(var c in t.morphTargets){for(var l=[],h=t.morphTargets[c],u=0,f=h.length;u<f;u++){var d=h[u],p=new pt(3*d.length,3);l.push(p.copyVector3sArray(d))}this.morphAttributes[c]=l}if(t.skinIndices.length>0){var m=new pt(4*t.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var g=new pt(4*t.skinWeights.length,4);this.addAttribute("skinWeight",g.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Q);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){var t=new Q,e=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new K);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;t.setFromBufferAttribute(i),t.getCenter(n);for(var r=0,a=0,o=i.count;a<o;a++)e.x=i.getX(a),e.y=i.getY(a),e.z=i.getZ(a),r=Math.max(r,n.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,i=this.groups;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new ut(new Float32Array(n.length),3));else for(var r=e.normal.array,a=0,o=r.length;a<o;a++)r[a]=0;var c,l,h,u=e.normal.array,f=new s,d=new s,p=new s,m=new s,g=new s;if(t){var v=t.array;0===i.length&&this.addGroup(0,v.length);for(var x=0,y=i.length;x<y;++x)for(var _=i[x],M=_.start,b=_.count,a=M,o=M+b;a<o;a+=3)c=3*v[a+0],l=3*v[a+1],h=3*v[a+2],f.fromArray(n,c),d.fromArray(n,l),p.fromArray(n,h),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),u[c]+=m.x,u[c+1]+=m.y,u[c+2]+=m.z,u[l]+=m.x,u[l+1]+=m.y,u[l+2]+=m.z,u[h]+=m.x,u[h+1]+=m.y,u[h+2]+=m.z}else for(var a=0,o=n.length;a<o;a+=9)f.fromArray(n,a),d.fromArray(n,a+3),p.fromArray(n,a+6),m.subVectors(p,d),g.subVectors(f,d),m.cross(g),u[a]=m.x,u[a+1]=m.y,u[a+2]=m.z,u[a+3]=m.x,u[a+4]=m.y,u[a+5]=m.z,u[a+6]=m.x,u[a+7]=m.y,u[a+8]=m.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(!1!==(t&&t.isBufferGeometry)){void 0===e&&(e=0);var i=this.attributes;for(var n in i)if(void 0!==t.attributes[n])for(var r=i[n],a=r.array,o=t.attributes[n],s=o.array,c=o.itemSize,l=0,h=c*e;l<s.length;l++,h++)a[h]=s[l];return this}},normalizeNormals:function(){for(var t,e,i,n,r=this.attributes.normal.array,a=0,o=r.length;a<o;a+=3)t=r[a],e=r[a+1],i=r[a+2],n=1/Math.sqrt(t*t+e*e+i*i),r[a]*=n,r[a+1]*=n,r[a+2]*=n},toNonIndexed:function(){if(null===this.index)return this;var t=new yt,e=this.index.array,i=this.attributes;for(var n in i){for(var r=i[n],a=r.array,o=r.itemSize,s=new a.constructor(e.length*o),c=0,l=0,h=0,u=e.length;h<u;h++){c=e[h]*o;for(var f=0;f<o;f++)s[l++]=a[c++]}t.addAttribute(n,new ut(s,o))}return t},toJSON:function(){var t={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};var n=this.index;if(null!==n){var r=Array.prototype.slice.call(n.array);t.data.index={type:n.array.constructor.name,array:r}}var a=this.attributes;for(var i in a){var o=a[i],r=Array.prototype.slice.call(o.array);t.data.attributes[i]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t},clone:function(){return(new yt).copy(this)},copy:function(t){var e,i,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var a=t.attributes;for(e in a){var o=a[e];this.addAttribute(e,o.clone())}var s=t.morphAttributes;for(e in s){var c=[],l=s[e];for(i=0,n=l.length;i<n;i++)c.push(l[i].clone());this.morphAttributes[e]=c}var h=t.groups;for(i=0,n=h.length;i<n;i++){var u=h[i];this.addGroup(u.start,u.count,u.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},yt.MaxIndex=65535,Object.assign(yt.prototype,e.prototype),_t.prototype=Object.assign(Object.create(ot.prototype),{constructor:_t,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return ot.prototype.copy.call(this,t),this.drawMode=t.drawMode,this},updateMorphTargets:function(){var t=this.geometry.morphTargets;if(void 0!==t&&t.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,i=t.length;e<i;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[t[e].name]=e}},raycast:function(){function t(t,e,i,n,r,a,o){return ct.barycoordFromPoint(t,e,i,n,x),r.multiplyScalar(x.x),a.multiplyScalar(x.y),o.multiplyScalar(x.z),r.add(a).add(o),r.clone()}function e(t,e,i,n,r,a,o){var s=t.material;if(null===(s.side===Pi?i.intersectTriangle(a,r,n,!0,o):i.intersectTriangle(n,r,a,s.side!==Ci,o)))return null;_.copy(o),_.applyMatrix4(t.matrixWorld);var c=e.ray.origin.distanceTo(_);return c<e.near||c>e.far?null:{distance:c,point:_.clone(),object:t}}function n(i,n,r,a,o,s,c,f){l.fromBufferAttribute(a,s),h.fromBufferAttribute(a,c),u.fromBufferAttribute(a,f);var d=e(i,n,r,l,h,u,y);return d&&(o&&(m.fromBufferAttribute(o,s),g.fromBufferAttribute(o,c),v.fromBufferAttribute(o,f),d.uv=t(y,l,h,u,m,g,v)),d.face=new lt(s,c,f,ct.normal(l,h,u)),d.faceIndex=s),d}var r=new c,a=new nt,o=new K,l=new s,h=new s,u=new s,f=new s,d=new s,p=new s,m=new i,g=new i,v=new i,x=new s,y=new s,_=new s;return function(i,s){var c=this.geometry,x=this.material,_=this.matrixWorld;if(void 0!==x&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(_),!1!==i.ray.intersectsSphere(o)&&(r.getInverse(_),a.copy(i.ray).applyMatrix4(r),null===c.boundingBox||!1!==a.intersectsBox(c.boundingBox)))){var M;if(c.isBufferGeometry){var b,w,S,E,T,L=c.index,A=c.attributes.position,P=c.attributes.uv;if(null!==L)for(E=0,T=L.count;E<T;E+=3)b=L.getX(E),w=L.getX(E+1),S=L.getX(E+2),(M=n(this,i,a,A,P,b,w,S))&&(M.faceIndex=Math.floor(E/3),s.push(M));else for(E=0,T=A.count;E<T;E+=3)b=E,w=E+1,S=E+2,(M=n(this,i,a,A,P,b,w,S))&&(M.index=b,s.push(M))}else if(c.isGeometry){var C,R,N,D,U=x&&x.isMultiMaterial,I=!0===U?x.materials:null,O=c.vertices,z=c.faces,F=c.faceVertexUvs[0];F.length>0&&(D=F);for(var B=0,G=z.length;B<G;B++){var V=z[B],k=!0===U?I[V.materialIndex]:x;if(void 0!==k){if(C=O[V.a],R=O[V.b],N=O[V.c],!0===k.morphTargets){var H=c.morphTargets,W=this.morphTargetInfluences;l.set(0,0,0),h.set(0,0,0),u.set(0,0,0);for(var j=0,X=H.length;j<X;j++){var Y=W[j];if(0!==Y){var q=H[j].vertices;l.addScaledVector(f.subVectors(q[V.a],C),Y),h.addScaledVector(d.subVectors(q[V.b],R),Y),u.addScaledVector(p.subVectors(q[V.c],N),Y)}}l.add(C),h.add(R),u.add(N),C=l,R=h,N=u}if(M=e(this,i,a,C,R,N,y)){if(D){var Z=D[B];m.copy(Z[0]),g.copy(Z[1]),v.copy(Z[2]),M.uv=t(y,C,R,N,m,g,v)}M.face=V,M.faceIndex=B,s.push(M)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Mt.prototype=Object.create(xt.prototype),Mt.prototype.constructor=Mt,bt.prototype=Object.create(yt.prototype),bt.prototype.constructor=bt,wt.prototype=Object.create(xt.prototype),wt.prototype.constructor=wt,St.prototype=Object.create(yt.prototype),St.prototype.constructor=St,Et.prototype=Object.create(ot.prototype),Et.prototype.constructor=Et,Et.prototype.isCamera=!0,Et.prototype.getWorldDirection=function(){var t=new o;return function(e){var i=e||new s;return this.getWorldQuaternion(t),i.set(0,0,-1).applyQuaternion(t)}}(),Et.prototype.lookAt=function(){var t=new c;return function(e){t.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(t)}}(),Et.prototype.clone=function(){return(new this.constructor).copy(this)},Et.prototype.copy=function(t){return ot.prototype.copy.call(this,t),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this},Tt.prototype=Object.assign(Object.create(Et.prototype),{constructor:Tt,isPerspectiveCamera:!0,copy:function(t){return Et.prototype.copy.call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*wr.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*wr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*wr.RAD2DEG*Math.atan(Math.tan(.5*wr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,i,n,r,a){this.aspect=t/e,this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*wr.DEG2RAD*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/o,e-=a.offsetY*i/s,n*=a.width/o,i*=a.height/s}var c=this.filmOffset;0!==c&&(r+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far)},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Lt.prototype=Object.assign(Object.create(Et.prototype),{constructor:Lt,isOrthographicCamera:!0,copy:function(t){return Et.prototype.copy.call(this,t),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,i,n,r,a){this.view={fullWidth:t,fullHeight:e,offsetX:i,offsetY:n,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,a=i+t,o=n+e,s=n-e;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;r+=h*(this.view.offsetX/c),a=r+h*(this.view.width/c),o-=u*(this.view.offsetY/l),s=o-u*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}});var Fr=0;te.prototype=Object.create(ot.prototype),te.prototype.constructor=te,te.prototype.copy=function(t,e){return ot.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},te.prototype.toJSON=function(t){var e=ot.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},ee.prototype=Object.create(q.prototype),ee.prototype.constructor=ee,ee.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this},ie.prototype=Object.assign(Object.create(ot.prototype),{constructor:ie,isSprite:!0,raycast:function(){var t=new s;return function(e,i){t.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(t);n>this.scale.x*this.scale.y/4||i.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ne.prototype=Object.create(q.prototype),ne.prototype.constructor=ne,ne.prototype.isLineBasicMaterial=!0,ne.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,
this.linecap=t.linecap,this.linejoin=t.linejoin,this},re.prototype=Object.assign(Object.create(ot.prototype),{constructor:re,isLine:!0,raycast:function(){var t=new c,e=new nt,i=new K;return function(n,r){var a=n.linePrecision,o=a*a,c=this.geometry,l=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),i.copy(c.boundingSphere),i.applyMatrix4(l),!1!==n.ray.intersectsSphere(i)){t.getInverse(l),e.copy(n.ray).applyMatrix4(t);var h=new s,u=new s,f=new s,d=new s,p=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var m=c.index,g=c.attributes,v=g.position.array;if(null!==m)for(var x=m.array,y=0,_=x.length-1;y<_;y+=p){var M=x[y],b=x[y+1];h.fromArray(v,3*M),u.fromArray(v,3*b);var w=e.distanceSqToSegment(h,u,d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,_=v.length/3-1;y<_;y+=p){h.fromArray(v,3*y),u.fromArray(v,3*y+3);var w=e.distanceSqToSegment(h,u,d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var E=c.vertices,T=E.length,y=0;y<T-1;y+=p){var w=e.distanceSqToSegment(E[y],E[y+1],d,f);if(!(w>o)){d.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(d);S<n.near||S>n.far||r.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ae.prototype=Object.assign(Object.create(re.prototype),{constructor:ae,isLineSegments:!0}),oe.prototype=Object.create(n.prototype),oe.prototype.constructor=oe,se.prototype=Object.create(xt.prototype),se.prototype.constructor=se,ce.prototype=Object.create(yt.prototype),ce.prototype.constructor=ce;var Br={area:function(t){for(var e=t.length,i=0,n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i},triangulate:function(){function t(t,e,i,n,r,a){var o,s,c,l,h,u,f,d,p;if(s=t[a[e]].x,c=t[a[e]].y,l=t[a[i]].x,h=t[a[i]].y,u=t[a[n]].x,f=t[a[n]].y,(l-s)*(f-c)-(h-c)*(u-s)<=0)return!1;var m,g,v,x,y,_,M,b,w,S,E,T,L,A,P;for(m=u-l,g=f-h,v=s-u,x=c-f,y=l-s,_=h-c,o=0;o<r;o++)if(d=t[a[o]].x,p=t[a[o]].y,!(d===s&&p===c||d===l&&p===h||d===u&&p===f)&&(M=d-s,b=p-c,w=d-l,S=p-h,E=d-u,T=p-f,P=m*S-g*w,L=y*b-_*M,A=v*T-x*E,P>=-Number.EPSILON&&A>=-Number.EPSILON&&L>=-Number.EPSILON))return!1;return!0}return function(e,i){var n=e.length;if(n<3)return null;var r,a,o,s=[],c=[],l=[];if(Br.area(e)>0)for(a=0;a<n;a++)c[a]=a;else for(a=0;a<n;a++)c[a]=n-1-a;var h=n,u=2*h;for(a=h-1;h>2;){if(u--<=0)return i?l:s;if(r=a,h<=r&&(r=0),a=r+1,h<=a&&(a=0),o=a+1,h<=o&&(o=0),t(e,r,a,o,h,c)){var f,d,p,m,g;for(f=c[r],d=c[a],p=c[o],s.push([e[f],e[d],e[p]]),l.push([c[r],c[a],c[o]]),m=a,g=a+1;g<h;m++,g++)c[m]=c[g];h--,u=2*h}}return i?l:s}}(),triangulateShape:function(t,e){function i(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function n(t,e,i){return t.x!==e.x?t.x<e.x?t.x<=i.x&&i.x<=e.x:e.x<=i.x&&i.x<=t.x:t.y<e.y?t.y<=i.y&&i.y<=e.y:e.y<=i.y&&i.y<=t.y}function r(t,e,i,r,a){var o=e.x-t.x,s=e.y-t.y,c=r.x-i.x,l=r.y-i.y,h=t.x-i.x,u=t.y-i.y,f=s*c-o*l,d=s*h-o*u;if(Math.abs(f)>Number.EPSILON){var p;if(f>0){if(d<0||d>f)return[];if((p=l*h-c*u)<0||p>f)return[]}else{if(d>0||d<f)return[];if((p=l*h-c*u)>0||p<f)return[]}if(0===p)return!a||0!==d&&d!==f?[t]:[];if(p===f)return!a||0!==d&&d!==f?[e]:[];if(0===d)return[i];if(d===f)return[r];var m=p/f;return[{x:t.x+m*o,y:t.y+m*s}]}if(0!==d||l*h!=c*u)return[];var g=0===o&&0===s,v=0===c&&0===l;if(g&&v)return t.x!==i.x||t.y!==i.y?[]:[t];if(g)return n(i,r,t)?[t]:[];if(v)return n(t,e,i)?[i]:[];var x,y,_,M,b,w,S,E;return 0!==o?(t.x<e.x?(x=t,_=t.x,y=e,M=e.x):(x=e,_=e.x,y=t,M=t.x),i.x<r.x?(b=i,S=i.x,w=r,E=r.x):(b=r,S=r.x,w=i,E=i.x)):(t.y<e.y?(x=t,_=t.y,y=e,M=e.y):(x=e,_=e.y,y=t,M=t.y),i.y<r.y?(b=i,S=i.y,w=r,E=r.y):(b=r,S=r.y,w=i,E=i.y)),_<=S?M<S?[]:M===S?a?[]:[b]:M<=E?[b,y]:[b,w]:_>E?[]:_===E?a?[]:[x]:M<=E?[x,y]:[x,w]}function a(t,e,i,n){var r=e.x-t.x,a=e.y-t.y,o=i.x-t.x,s=i.y-t.y,c=n.x-t.x,l=n.y-t.y,h=r*s-a*o,u=r*l-a*c;if(Math.abs(h)>Number.EPSILON){var f=c*s-l*o;return h>0?u>=0&&f>=0:u>=0||f>=0}return u>0}i(t),e.forEach(i);for(var o,s,c,l,h,u,f={},d=t.concat(),p=0,m=e.length;p<m;p++)Array.prototype.push.apply(d,e[p]);for(o=0,s=d.length;o<s;o++)h=d[o].x+":"+d[o].y,f[h],f[h]=o;var g=function(t,e){for(var i,n,o,s,c,l,h,u,f,d,p,m=t.concat(),g=[],v=[],x=0,y=e.length;x<y;x++)g.push(x);for(var _=0,M=2*g.length;g.length>0&&!(--M<0);)for(o=_;o<m.length;o++){s=m[o],n=-1;for(var x=0;x<g.length;x++)if(l=g[x],h=s.x+":"+s.y+":"+l,void 0===v[h]){i=e[l];for(var b=0;b<i.length;b++)if(c=i[b],function(t,e){var n=m.length-1,r=t-1;r<0&&(r=n);var o=t+1;o>n&&(o=0);var s=a(m[t],m[r],m[o],i[e]);if(!s)return!1;var c=i.length-1,l=e-1;l<0&&(l=c);var h=e+1;return h>c&&(h=0),!!(s=a(i[e],i[l],i[h],m[t]))}(o,b)&&!function(t,e){var i,n,a;for(i=0;i<m.length;i++)if(n=i+1,n%=m.length,a=r(t,e,m[i],m[n],!0),a.length>0)return!0;return!1}(s,c)&&!function(t,i){var n,a,o,s,c;for(n=0;n<g.length;n++)for(a=e[g[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,c=r(t,i,a[o],a[s],!0),c.length>0)return!0;return!1}(s,c)){n=b,g.splice(x,1),u=m.slice(0,o+1),f=m.slice(o),d=i.slice(n),p=i.slice(0,n+1),m=u.concat(d).concat(p).concat(f),_=o;break}if(n>=0)break;v[h]=!0}if(n>=0)break}return m}(t,e),v=Br.triangulate(g,!1);for(o=0,s=v.length;o<s;o++)for(l=v[o],c=0;c<3;c++)h=l[c].x+":"+l[c].y,void 0!==(u=f[h])&&(l[c]=u);return v.concat()},isClockWise:function(t){return Br.area(t)<0}};le.prototype=Object.create(xt.prototype),le.prototype.constructor=le,he.prototype=Object.create(yt.prototype),he.prototype.constructor=he,ue.prototype=Object.create(xt.prototype),ue.prototype.constructor=ue,ue.prototype.addShapeList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];this.addShape(r,e)}},ue.prototype.addShape=function(t,e){function n(t,e,i){return e.clone().multiplyScalar(i).add(t)}function r(t,e,n){var r,a,o=1,s=t.x-e.x,c=t.y-e.y,l=n.x-t.x,h=n.y-t.y,u=s*s+c*c,f=s*h-c*l;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(l*l+h*h),m=e.x-c/d,g=e.y+s/d,v=n.x-h/p,x=n.y+l/p,y=((v-m)*h-(x-g)*l)/(s*h-c*l);r=m+s*y-t.x,a=g+c*y-t.y;var _=r*r+a*a;if(_<=2)return new i(r,a);o=Math.sqrt(_/2)}else{var M=!1;s>Number.EPSILON?l>Number.EPSILON&&(M=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(M=!0):Math.sign(c)===Math.sign(h)&&(M=!0),M?(r=-c,a=s,o=Math.sqrt(u)):(r=s,a=c,o=Math.sqrt(u/2))}return new i(r/o,a/o)}function a(t,e){var i,n;for(j=t.length;--j>=0;){i=j,n=j-1,n<0&&(n=t.length-1);var r=0,a=M+2*x;for(r=0;r<a;r++){var o=k*r,s=k*(r+1);l(e+i+o,e+n+o,e+n+s,e+i+s,t,r,a,i,n)}}}function o(t,e,i){A.vertices.push(new s(t,e,i))}function c(t,e,i){t+=P,e+=P,i+=P,A.faces.push(new lt(t,e,i,null,null,0));var n=S.generateTopUV(A,t,e,i);A.faceVertexUvs[0].push(n)}function l(t,e,i,n,r,a,o,s,c){t+=P,e+=P,i+=P,n+=P,A.faces.push(new lt(t,e,n,null,null,1)),A.faces.push(new lt(e,i,n,null,null,1));var l=S.generateSideWallUV(A,t,e,i,n);A.faceVertexUvs[0].push([l[0],l[1],l[3]]),A.faceVertexUvs[0].push([l[1],l[2],l[3]])}var h,u,f,d,p,m=void 0!==e.amount?e.amount:100,g=void 0!==e.bevelThickness?e.bevelThickness:6,v=void 0!==e.bevelSize?e.bevelSize:g-2,x=void 0!==e.bevelSegments?e.bevelSegments:3,y=void 0===e.bevelEnabled||e.bevelEnabled,_=void 0!==e.curveSegments?e.curveSegments:12,M=void 0!==e.steps?e.steps:1,b=e.extrudePath,w=!1,S=void 0!==e.UVGenerator?e.UVGenerator:ue.WorldUVGenerator;b&&(h=b.getSpacedPoints(M),w=!0,y=!1,u=void 0!==e.frames?e.frames:b.computeFrenetFrames(M,!1),f=new s,d=new s,p=new s),y||(x=0,g=0,v=0);var E,T,L,A=this,P=this.vertices.length,C=t.extractPoints(_),R=C.shape,N=C.holes,D=!Br.isClockWise(R);if(D){for(R=R.reverse(),T=0,L=N.length;T<L;T++)E=N[T],Br.isClockWise(E)&&(N[T]=E.reverse());D=!1}var U=Br.triangulateShape(R,N),I=R;for(T=0,L=N.length;T<L;T++)E=N[T],R=R.concat(E);for(var O,z,F,B,G,V,k=R.length,H=U.length,W=[],j=0,X=I.length,Y=X-1,q=j+1;j<X;j++,Y++,q++)Y===X&&(Y=0),q===X&&(q=0),W[j]=r(I[j],I[Y],I[q]);var Z,J=[],Q=W.concat();for(T=0,L=N.length;T<L;T++){for(E=N[T],Z=[],j=0,X=E.length,Y=X-1,q=j+1;j<X;j++,Y++,q++)Y===X&&(Y=0),q===X&&(q=0),Z[j]=r(E[j],E[Y],E[q]);J.push(Z),Q=Q.concat(Z)}for(O=0;O<x;O++){for(F=O/x,B=g*Math.cos(F*Math.PI/2),z=v*Math.sin(F*Math.PI/2),j=0,X=I.length;j<X;j++)G=n(I[j],W[j],z),o(G.x,G.y,-B);for(T=0,L=N.length;T<L;T++)for(E=N[T],Z=J[T],j=0,X=E.length;j<X;j++)G=n(E[j],Z[j],z),o(G.x,G.y,-B)}for(z=v,j=0;j<k;j++)G=y?n(R[j],Q[j],z):R[j],w?(d.copy(u.normals[0]).multiplyScalar(G.x),f.copy(u.binormals[0]).multiplyScalar(G.y),p.copy(h[0]).add(d).add(f),o(p.x,p.y,p.z)):o(G.x,G.y,0);var K;for(K=1;K<=M;K++)for(j=0;j<k;j++)G=y?n(R[j],Q[j],z):R[j],w?(d.copy(u.normals[K]).multiplyScalar(G.x),f.copy(u.binormals[K]).multiplyScalar(G.y),p.copy(h[K]).add(d).add(f),o(p.x,p.y,p.z)):o(G.x,G.y,m/M*K);for(O=x-1;O>=0;O--){for(F=O/x,B=g*Math.cos(F*Math.PI/2),z=v*Math.sin(F*Math.PI/2),j=0,X=I.length;j<X;j++)G=n(I[j],W[j],z),o(G.x,G.y,m+B);for(T=0,L=N.length;T<L;T++)for(E=N[T],Z=J[T],j=0,X=E.length;j<X;j++)G=n(E[j],Z[j],z),w?o(G.x,G.y+h[M-1].y,h[M-1].x+B):o(G.x,G.y,m+B)}!function(){if(y){var t=0,e=k*t;for(j=0;j<H;j++)V=U[j],c(V[2]+e,V[1]+e,V[0]+e);for(t=M+2*x,e=k*t,j=0;j<H;j++)V=U[j],c(V[0]+e,V[1]+e,V[2]+e)}else{for(j=0;j<H;j++)V=U[j],c(V[2],V[1],V[0]);for(j=0;j<H;j++)V=U[j],c(V[0]+k*M,V[1]+k*M,V[2]+k*M)}}(),function(){var t=0;for(a(I,t),t+=I.length,T=0,L=N.length;T<L;T++)E=N[T],a(E,t),t+=E.length}()},ue.WorldUVGenerator={generateTopUV:function(t,e,n,r){var a=t.vertices,o=a[e],s=a[n],c=a[r];return[new i(o.x,o.y),new i(s.x,s.y),new i(c.x,c.y)]},generateSideWallUV:function(t,e,n,r,a){var o=t.vertices,s=o[e],c=o[n],l=o[r],h=o[a];return Math.abs(s.y-c.y)<.01?[new i(s.x,1-s.z),new i(c.x,1-c.z),new i(l.x,1-l.z),new i(h.x,1-h.z)]:[new i(s.y,1-s.z),new i(c.y,1-c.z),new i(l.y,1-l.z),new i(h.y,1-h.z)]}},fe.prototype=Object.create(xt.prototype),fe.prototype.constructor=fe,de.prototype=Object.create(yt.prototype),de.prototype.constructor=de,pe.prototype=Object.create(xt.prototype),pe.prototype.constructor=pe,me.prototype=Object.create(yt.prototype),me.prototype.constructor=me,ge.prototype={constructor:ge,isMultiMaterial:!0,toJSON:function(t){for(var e={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},i=this.materials,n=0,r=i.length;n<r;n++){var a=i[n].toJSON(t);delete a.metadata,e.materials.push(a)}return e.visible=this.visible,e},clone:function(){for(var t=new this.constructor,e=0;e<this.materials.length;e++)t.materials.push(this.materials[e].clone());return t.visible=this.visible,t}},ve.prototype=Object.create(q.prototype),ve.prototype.constructor=ve,ve.prototype.isMeshLambertMaterial=!0,ve.prototype.copy=function(t){return q.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};var Gr=Object.freeze({SpriteMaterial:ee,ShaderMaterial:Z,MultiMaterial:ge,MeshLambertMaterial:ve,MeshBasicMaterial:ht,LineBasicMaterial:ne}),Vr={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},kr=new xe;Object.assign(ye.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Vr.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Vr.add(t,this),e&&e(this),r.manager.itemEnd(t)},!1),o.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(t),o.src=t,o},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_e.prototype,{load:function(t,e,i,n){var r=new l,a=new ye(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<t.length;++s)!function(i){a.load(t[i],function(t){r.images[i]=t,6==++o&&(r.needsUpdate=!0,e&&e(r))},void 0,n)}(s);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Me.prototype,{load:function(t,e,i,r){var a=new n,o=new ye(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(i){var n=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);a.format=n?Zn:Jn,a.image=i,a.needsUpdate=!0,void 0!==e&&e(a)},i,r),a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(be.prototype,{load:function(t,e,i,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t);var r=this,a=Vr.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(o);if(s){var c=s[1],l=!!s[2],h=s[3];h=window.decodeURIComponent(h),l&&(h=window.atob(h));try{var u,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":u=new ArrayBuffer(h.length);for(var d=new Uint8Array(u),p=0;p<h.length;p++)d[p]=h.charCodeAt(p);"blob"===f&&(u=new Blob([u],{type:c}));break;case"document":var m=new DOMParser;u=m.parseFromString(h,c);break;case"json":u=JSON.parse(h);break;default:u=h}window.setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0)}catch(e){window.setTimeout(function(){n&&n(e),r.manager.itemError(t)},0)}}else{var g=new XMLHttpRequest;g.open("GET",t,!0),g.addEventListener("load",function(i){var a=i.target.response;Vr.add(t,a),200===this.status?(e&&e(a),r.manager.itemEnd(t)):0===this.status?(e&&e(a),r.manager.itemEnd(t)):(n&&n(i),r.manager.itemError(t))},!1),void 0!==i&&g.addEventListener("progress",function(t){i(t)},!1),g.addEventListener("error",function(e){n&&n(e),r.manager.itemError(t)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),g.send(null)}return r.manager.itemStart(t),g},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),Object.assign(we.prototype,{load:function(t,e,i,n){var r=this;new be(r.manager).load(t,function(t){e(r.parse(JSON.parse(t)))},i,n)},setTextures:function(t){this.textures=t},parse:function(t){function e(t){return n[t],n[t]}var n=this.textures,r=new Gr[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearCoat&&(r.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(r.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.uniforms&&(r.uniforms=t.uniforms),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.vertexColors&&(r.vertexColors=t.vertexColors),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.shading&&(r.shading=t.shading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=e(t.map)),void 0!==t.alphaMap&&(r.alphaMap=e(t.alphaMap),r.transparent=!0),void 0!==t.bumpMap&&(r.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=e(t.normalMap)),void 0!==t.normalScale){var a=t.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new i).fromArray(a)}if(void 0!==t.displacementMap&&(r.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=e(t.specularMap)),void 0!==t.envMap&&(r.envMap=e(t.envMap)),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.lightMap&&(r.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=e(t.gradientMap)),void 0!==t.materials)for(var o=0,s=t.materials.length;o<s;o++)r.materials.push(this.parse(t.materials[o]));return r}}),Se.prototype={constructor:Se,crossOrigin:void 0,extractUrlBase:function(t){var e=t.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(t,e,i){for(var n=[],r=0;r<t.length;++r)n[r]=this.createMaterial(t[r],e,i);return n},createMaterial:function(){var t,e,i,n={NoBlending:Ii,NormalBlending:Oi,AdditiveBlending:zi,SubtractiveBlending:Fi,MultiplyBlending:Bi,CustomBlending:Gi};return function(r,a,o){function s(t,i,n,r,s){var l,h=a+t,u=Se.Handlers.get(h);null!==u?l=u.load(h):(e.setCrossOrigin(o),l=e.load(h)),void 0!==i&&(l.repeat.fromArray(i),1!==i[0]&&(l.wrapS=Ln),1!==i[1]&&(l.wrapT=Ln)),void 0!==n&&l.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(l.wrapS=Ln),"mirror"===r[0]&&(l.wrapS=Pn),"repeat"===r[1]&&(l.wrapT=Ln),"mirror"===r[1]&&(l.wrapT=Pn)),void 0!==s&&(l.anisotropy=s);var f=wr.generateUUID();return c[f]=l,f}void 0===t&&(t=new W),void 0===e&&(e=new Me),void 0===i&&(i=new we);var c={},l={uuid:wr.generateUUID(),type:"MeshLambertMaterial"};for(var h in r){var u=r[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=u;break;case"blending":l.blending=n[u];break;case"colorAmbient":case"mapAmbient":break;case"colorDiffuse":l.color=t.fromArray(u).getHex();break;case"colorSpecular":l.specular=t.fromArray(u).getHex();break;case"colorEmissive":l.emissive=t.fromArray(u).getHex();break;case"specularCoef":l.shininess=u;break;case"shading":"basic"===u.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===u.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===u.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(u,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(u,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(u,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(u,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(u,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=u;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(u,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[u,u];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(u,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(u,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(u,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(u,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Pi;break;case"doubleSided":l.side=Ci;break;case"transparency":l.opacity=u;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[h]=u;break;case"vertexColors":!0===u&&(l.vertexColors=Ui),"face"===u&&(l.vertexColors=1)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),i.setTextures(c),i.parse(l)}}()},Se.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,i=0,n=e.length;i<n;i+=2){var r=e[i],a=e[i+1];if(r.test(t))return a}return null}};var Hr={arraySlice:function(t,e,i){return Hr.isTypedArray(t)?new t.constructor(t.subarray(e,i)):t.slice(e,i)},convertArray:function(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,i){return t[e]-t[i]}for(var i=t.length,n=new Array(i),r=0;r!==i;++r)n[r]=r;return n.sort(e),n},sortedArray:function(t,e,i){for(var n=t.length,r=new t.constructor(n),a=0,o=0;o!==n;++a)for(var s=i[a]*e,c=0;c!==e;++c)r[o++]=t[s+c];return r},flattenJSON:function(t,e,i,n){for(var r=1,a=t[0];void 0!==a&&void 0===a[n];)a=t[r++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{o=a[n],void 0!==o&&(e.push(a.time),i.push.apply(i,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n],void 0!==o&&(e.push(a.time),o.toArray(i,i.length)),a=t[r++]}while(void 0!==a);else do{o=a[n],void 0!==o&&(e.push(a.time),i.push(o)),a=t[r++]}while(void 0!==a)}}};Ee.prototype={constructor:Ee,evaluate:function(t){var e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{var a;i:{n:if(!(t<n)){for(var o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,t,r)}if(i===o)break;if(r=n,n=e[++i],t<n)break e}a=e.length;break i}{if(t>=r)break t;var s=e[1];t<s&&(i=2,r=s);for(var o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,n);if(i===o)break;if(n=r,r=e[--i-1],t>=r)break e}a=i,i=0}}for(;i<a;){var c=i+a>>>1;t<e[c]?a=c:i=c+1}if(n=e[i],void 0===(r=e[i-1]))return this._cachedIndex=0,this.beforeStart_(0,t,n);if(void 0===n)return i=e.length,this._cachedIndex=i,this.afterEnd_(i-1,r,t)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n,a=0;a!==n;++a)e[a]=i[r+a];return e},interpolate_:function(t,e,i,n){throw new Error("call to abstract method")},intervalChanged_:function(t,e,i){}},Object.assign(Ee.prototype,{beforeStart_:Ee.prototype.copySampleValue_,afterEnd_:Ee.prototype.copySampleValue_}),Te.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Te,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(t,e,i){var n=this.parameterPositions,r=t-2,a=t+1,o=n[r],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:r=t,o=2*e-i;break;case 2402:r=n.length-2,o=e+n[r]-n[r+1];break;default:r=t,o=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=t,s=2*i-e;break;case 2402:a=1,s=i+n[1]-n[0];break;default:a=t-1,s=e}var c=.5*(i-e),l=this.valueSize;this._weightPrev=c/(e-o),this._weightNext=c/(s-i),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,f=this._weightNext,d=(i-e)/(n-e),p=d*d,m=p*d,g=-u*m+2*u*p-u*d,v=(1+u)*m+(-1.5-2*u)*p+(-.5+u)*d+1,x=(-1-f)*m+(1.5+f)*p+.5*d,y=f*m-f*p,_=0;_!==o;++_)r[_]=g*a[l+_]+v*a[c+_]+x*a[s+_]+y*a[h+_];return r}}),Le.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Le,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,c=s-o,l=(i-e)/(n-e),h=1-l,u=0;u!==o;++u)r[u]=a[c+u]*h+a[s+u]*l;return r}}),Ae.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Ae,interpolate_:function(t,e,i,n){return this.copySampleValue_(t-1)}});var Wr;Wr={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Ae(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Le(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Te(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0!==e)this.createInterpolant=e;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,i=0,n=e.length;i!==n;++i)e[i]*=t;return this},trim:function(t,e){for(var i=this.times,n=i.length,r=0,a=n-1;r!==n&&i[r]<t;)++r;for(;-1!==a&&i[a]>e;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);var o=this.getValueSize();this.times=Hr.arraySlice(i,r,a),this.values=Hr.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var i=this.times,n=this.values,r=i.length;0===r&&(t=!1);for(var a=null,o=0;o!==r;o++){var s=i[o];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==a&&a>s){t=!1;break}a=s}if(void 0!==n&&Hr.isTypedArray(n))for(var o=0,c=n.length;o!==c;++o){var l=n[o];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=this.times,e=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,a=t.length-1,o=1;o<a;++o){var s=!1,c=t[o];if(c!==t[o+1]&&(1!==o||c!==c[0]))if(n)s=!0;else for(var l=o*i,h=l-i,u=l+i,f=0;f!==i;++f){var d=e[l+f];if(d!==e[h+f]||d!==e[u+f]){s=!0;break}}if(s){if(o!==r){t[r]=t[o];for(var p=o*i,m=r*i,f=0;f!==i;++f)e[m+f]=e[p+f]}++r}}if(a>0){t[r]=t[a];for(var p=a*i,m=r*i,f=0;f!==i;++f)e[m+f]=e[p+f];++r}return r!==t.length&&(this.times=Hr.arraySlice(t,0,r),this.values=Hr.arraySlice(e,0,r*i)),this}},Ce.prototype=Object.assign(Object.create(Wr),{constructor:Ce,ValueTypeName:"vector"}),Re.prototype=Object.assign(Object.create(Ee.prototype),{constructor:Re,interpolate_:function(t,e,i,n){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,c=t*s,l=(i-e)/(n-e),h=c+s;c!==h;c+=4)o.slerpFlat(r,0,a,c-s,a,c,l);return r}}),Ne.prototype=Object.assign(Object.create(Wr),{constructor:Ne,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Re(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),De.prototype=Object.assign(Object.create(Wr),{constructor:De,ValueTypeName:"number"}),Ue.prototype=Object.assign(Object.create(Wr),{constructor:Ue,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ie.prototype=Object.assign(Object.create(Wr),{constructor:Ie,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Oe.prototype=Object.assign(Object.create(Wr),{constructor:Oe,ValueTypeName:"color"}),ze.prototype=Wr,Wr.constructor=ze,Object.assign(ze,{parse:function(t){if(void 0===t.type)throw new Error("track type undefined, can not parse");var e=ze._getTrackTypeForValueTypeName(t.type);if(void 0===t.times){var i=[],n=[];Hr.flattenJSON(t.keys,i,n,"value"),t.times=i,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)},toJSON:function(t){var e,i=t.constructor;if(void 0!==i.toJSON)e=i.toJSON(t);else{e={name:t.name,times:Hr.convertArray(t.times,Array),values:Hr.convertArray(t.values,Array)};var n=t.getInterpolation();n!==t.DefaultInterpolation&&(e.interpolation=n)}return e.type=t.ValueTypeName,e},_getTrackTypeForValueTypeName:function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return De;case"vector":case"vector2":case"vector3":case"vector4":return Ce;case"color":return Oe;case"quaternion":return Ne;case"bool":case"boolean":return Ie;case"string":return Ue}throw new Error("Unsupported typeName: "+t)}}),Fe.prototype={constructor:Fe,resetDuration:function(){for(var t=this.tracks,e=0,i=0,n=t.length;i!==n;++i){var r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},Object.assign(Fe,{parse:function(t){for(var e=[],i=t.tracks,n=1/(t.fps||1),r=0,a=i.length;r!==a;++r)e.push(ze.parse(i[r]).scale(n));return new Fe(t.name,t.duration,e)},toJSON:function(t){for(var e=[],i=t.tracks,n={name:t.name,duration:t.duration,tracks:e},r=0,a=i.length;r!==a;++r)e.push(ze.toJSON(i[r]));return n},
CreateFromMorphTargetSequence:function(t,e,i,n){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],c=[];s.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);var l=Hr.getKeyframeOrder(s);s=Hr.sortedArray(s,1,l),c=Hr.sortedArray(c,1,l),n||0!==s[0]||(s.push(r),c.push(c[0])),a.push(new De(".morphTargetInfluences["+e[o].name+"]",s,c).scale(1/i))}return new Fe(t,-1,a)},findByName:function(t,e){var i=t;if(!Array.isArray(t)){var n=t;i=n.geometry&&n.geometry.animations||n.animations}for(var r=0;r<i.length;r++)if(i[r].name===e)return i[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],c=s.name.match(r);if(c&&c.length>1){var l=c[1],h=n[l];h||(n[l]=h=[]),h.push(s)}}var u=[];for(var l in n)u.push(Fe.CreateFromMorphTargetSequence(l,n[l],e,i));return u},parseAnimation:function(t,e){if(!t)return null;for(var i=function(t,e,i,n,r){if(0!==i.length){var a=[],o=[];Hr.flattenJSON(i,a,o,n),0!==a.length&&r.push(new t(e,a,o))}},n=[],r=t.name||"default",a=t.length||-1,o=t.fps||30,s=t.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var f=0;f<l[u].morphTargets.length;f++)h[l[u].morphTargets[f]]=-1;for(var d in h){for(var p=[],m=[],f=0;f!==l[u].morphTargets.length;++f){var g=l[u];p.push(g.time),m.push(g.morphTarget===d?1:0)}n.push(new De(".morphTargetInfluence["+d+"]",p,m))}a=h.length*(o||1)}else{var v=".bones["+e[c].name+"]";i(Ce,v+".position",l,"pos",n),i(Ne,v+".quaternion",l,"rot",n),i(Ce,v+".scale",l,"scl",n)}}return 0===n.length?null:new Fe(r,a,n)}}),Object.assign(Be.prototype,{load:function(t,e,i,n){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Se.prototype.extractUrlBase(t),o=new be(this.manager);o.setWithCredentials(this.withCredentials),o.load(t,function(t){var i=JSON.parse(t),n=i.metadata;if(void 0!==n){var o=n.type;if(void 0!==o){if("object"===o.toLowerCase())return;if("scene"===o.toLowerCase())return}}var s=r.parse(i,a);e(s.geometry,s.materials)},i,n)},setTexturePath:function(t){this.texturePath=t},parse:function(t,e){var n=new xt,a=void 0!==t.scale?1/t.scale:1;if(function(e){function r(t,e){return t&1<<e}var a,o,c,l,h,u,f,d,p,m,g,v,x,y,_,M,b,w,S,E,T,L,A,P,C,R,N,D=t.faces,U=t.vertices,I=t.normals,O=t.colors,z=0;if(void 0!==t.uvs){for(a=0;a<t.uvs.length;a++)t.uvs[a].length&&z++;for(a=0;a<z;a++)n.faceVertexUvs[a]=[]}for(l=0,h=U.length;l<h;)w=new s,w.x=U[l++]*e,w.y=U[l++]*e,w.z=U[l++]*e,n.vertices.push(w);for(l=0,h=D.length;l<h;)if(m=D[l++],g=r(m,0),v=r(m,1),x=r(m,3),y=r(m,4),_=r(m,5),M=r(m,6),b=r(m,7),g){if(E=new lt,E.a=D[l],E.b=D[l+1],E.c=D[l+3],T=new lt,T.a=D[l+1],T.b=D[l+2],T.c=D[l+3],l+=4,v&&(p=D[l++],E.materialIndex=p,T.materialIndex=p),c=n.faces.length,x)for(a=0;a<z;a++)for(P=t.uvs[a],n.faceVertexUvs[a][c]=[],n.faceVertexUvs[a][c+1]=[],o=0;o<4;o++)d=D[l++],R=P[2*d],N=P[2*d+1],C=new i(R,N),2!==o&&n.faceVertexUvs[a][c].push(C),0!==o&&n.faceVertexUvs[a][c+1].push(C);if(y&&(f=3*D[l++],E.normal.set(I[f++],I[f++],I[f]),T.normal.copy(E.normal)),_)for(a=0;a<4;a++)f=3*D[l++],A=new s(I[f++],I[f++],I[f]),2!==a&&E.vertexNormals.push(A),0!==a&&T.vertexNormals.push(A);if(M&&(u=D[l++],L=O[u],E.color.setHex(L),T.color.setHex(L)),b)for(a=0;a<4;a++)u=D[l++],L=O[u],2!==a&&E.vertexColors.push(new W(L)),0!==a&&T.vertexColors.push(new W(L));n.faces.push(E),n.faces.push(T)}else{if(S=new lt,S.a=D[l++],S.b=D[l++],S.c=D[l++],v&&(p=D[l++],S.materialIndex=p),c=n.faces.length,x)for(a=0;a<z;a++)for(P=t.uvs[a],n.faceVertexUvs[a][c]=[],o=0;o<3;o++)d=D[l++],R=P[2*d],N=P[2*d+1],C=new i(R,N),n.faceVertexUvs[a][c].push(C);if(y&&(f=3*D[l++],S.normal.set(I[f++],I[f++],I[f])),_)for(a=0;a<3;a++)f=3*D[l++],A=new s(I[f++],I[f++],I[f]),S.vertexNormals.push(A);if(M&&(u=D[l++],S.color.setHex(O[u])),b)for(a=0;a<3;a++)u=D[l++],S.vertexColors.push(new W(O[u]));n.faces.push(S)}}(a),function(){var e=void 0!==t.influencesPerVertex?t.influencesPerVertex:2;if(t.skinWeights)for(var i=0,a=t.skinWeights.length;i<a;i+=e){var o=t.skinWeights[i],s=e>1?t.skinWeights[i+1]:0,c=e>2?t.skinWeights[i+2]:0,l=e>3?t.skinWeights[i+3]:0;n.skinWeights.push(new r(o,s,c,l))}if(t.skinIndices)for(var i=0,a=t.skinIndices.length;i<a;i+=e){var h=t.skinIndices[i],u=e>1?t.skinIndices[i+1]:0,f=e>2?t.skinIndices[i+2]:0,d=e>3?t.skinIndices[i+3]:0;n.skinIndices.push(new r(h,u,f,d))}n.bones=t.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||(n.skinIndices.length,n.vertices.length))}(),function(e){if(void 0!==t.morphTargets)for(var i=0,r=t.morphTargets.length;i<r;i++){n.morphTargets[i]={},n.morphTargets[i].name=t.morphTargets[i].name,n.morphTargets[i].vertices=[];for(var a=n.morphTargets[i].vertices,o=t.morphTargets[i].vertices,c=0,l=o.length;c<l;c+=3){var h=new s;h.x=o[c]*e,h.y=o[c+1]*e,h.z=o[c+2]*e,a.push(h)}}if(void 0!==t.morphColors&&t.morphColors.length>0)for(var u=n.faces,f=t.morphColors[0].colors,i=0,r=u.length;i<r;i++)u[i].color.fromArray(f,3*i)}(a),function(){var e=[],i=[];void 0!==t.animation&&i.push(t.animation),void 0!==t.animations&&(t.animations.length?i=i.concat(t.animations):i.push(t.animations));for(var r=0;r<i.length;r++){var a=Fe.parseAnimation(i[r],n.bones);a&&e.push(a)}if(n.morphTargets){var o=Fe.CreateClipsFromMorphTargetSequences(n.morphTargets,10);e=e.concat(o)}e.length>0&&(n.animations=e)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===t.materials||0===t.materials.length)return{geometry:n};var o=Se.prototype.initMaterials(t.materials,e,this.crossOrigin);return{geometry:n,materials:o}}}),Ge.prototype=Object.assign(Object.create(ot.prototype),{constructor:Ge,isLight:!0,copy:function(t){return ot.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=ot.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Object.assign(Ve.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),ke.prototype=Object.assign(Object.create(Ve.prototype),{constructor:ke}),He.prototype=Object.assign(Object.create(Ge.prototype),{constructor:He,isDirectionalLight:!0,copy:function(t){return Ge.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),We.prototype=Object.assign(Object.create(Ge.prototype),{constructor:We,isAmbientLight:!0}),je.prototype.clone=function(){return new je(void 0===this.value.clone?this.value:this.value.clone())},Xe.prototype={constructor:Xe,linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld))},intersectObject:function(t,e){var i=[];return qe(t,this,i,e),i.sort(Ye),i},intersectObjects:function(t,e){var i=[];if(!1===Array.isArray(t))return i;for(var n=0,r=t.length;n<r;n++)qe(t[n],this,i,e);return i.sort(Ye),i}},Ze.prototype={constructor:Ze,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running&&this.start(),this.running){var e=(performance||Date).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},Je.prototype=Object.create(ae.prototype),Je.prototype.constructor=Je,Qe.prototype={constructor:Qe,getPoint:function(t){return null},getPointAt:function(t){var e=this.getUtoTmapping(t);return this.getPoint(e)},getPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return e},getSpacedPoints:function(t){isNaN(t)&&(t=5);for(var e=[],i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(isNaN(t)&&(t=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,i,n=[],r=this.getPoint(0),a=0;for(n.push(0),i=1;i<=t;i++)e=this.getPoint(i/t),a+=e.distanceTo(r),n.push(a),r=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var i,n=this.getLengths(),r=0,a=n.length;i=e||t*n[a-1];for(var o,s=0,c=a-1;s<=c;)if(r=Math.floor(s+(c-s)/2),(o=n[r]-i)<0)s=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(r=c,n[r]===i){var l=r/(a-1);return l}var h=n[r],u=n[r+1],f=u-h,d=(i-h)/f,l=(r+d)/(a-1);return l},getTangent:function(t){var e=t-1e-4,i=t+1e-4;e<0&&(e=0),i>1&&(i=1);var n=this.getPoint(e);return this.getPoint(i).clone().sub(n).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var i,n,r,a=new s,o=[],l=[],h=[],u=new s,f=new c;for(i=0;i<=t;i++)n=i/t,o[i]=this.getTangentAt(n),o[i].normalize();l[0]=new s,h[0]=new s;var d=Number.MAX_VALUE,p=Math.abs(o[0].x),m=Math.abs(o[0].y),g=Math.abs(o[0].z);for(p<=d&&(d=p,a.set(1,0,0)),m<=d&&(d=m,a.set(0,1,0)),g<=d&&a.set(0,0,1),u.crossVectors(o[0],a).normalize(),l[0].crossVectors(o[0],u),h[0].crossVectors(o[0],l[0]),i=1;i<=t;i++)l[i]=l[i-1].clone(),h[i]=h[i-1].clone(),u.crossVectors(o[i-1],o[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(wr.clamp(o[i-1].dot(o[i]),-1,1)),l[i].applyMatrix4(f.makeRotationAxis(u,r))),h[i].crossVectors(o[i],l[i]);if(!0===e)for(r=Math.acos(wr.clamp(l[0].dot(l[t]),-1,1)),r/=t,o[0].dot(u.crossVectors(l[0],l[t]))>0&&(r=-r),i=1;i<=t;i++)l[i].applyMatrix4(f.makeRotationAxis(o[i],r*i)),h[i].crossVectors(o[i],l[i]);return{tangents:o,normals:l,binormals:h}}},Ke.prototype=Object.create(Qe.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isLineCurve=!0,Ke.prototype.getPoint=function(t){if(1===t)return this.v2.clone();var e=this.v2.clone().sub(this.v1);return e.multiplyScalar(t).add(this.v1),e},Ke.prototype.getPointAt=function(t){return this.getPoint(t)},Ke.prototype.getTangent=function(t){return this.v2.clone().sub(this.v1).normalize()},$e.prototype=Object.assign(Object.create(Qe.prototype),{constructor:$e,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ke(e,t))},getPoint:function(t){for(var e=t*this.getLength(),i=this.getCurveLengths(),n=0;n<i.length;){if(i[n]>=e){var r=i[n]-e,a=this.curves[n],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}n++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){isNaN(t)&&(t=40);for(var e=[],i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,i=[],n=0,r=this.curves;n<r.length;n++)for(var a=r[n],o=a&&a.isEllipseCurve?2*t:a&&a.isLineCurve?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];e&&e.equals(l)||(i.push(l),e=l)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new xt,i=0,n=t.length;i<n;i++){var r=t[i];e.vertices.push(new s(r.x,r.y,r.z||0))}return e}}),ti.prototype=Object.create(Qe.prototype),ti.prototype.constructor=ti,ti.prototype.isEllipseCurve=!0,ti.prototype.getPoint=function(t){for(var e=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;n<0;)n+=e;for(;n>e;)n-=e;n<Number.EPSILON&&(n=r?0:e),!0!==this.aClockwise||r||(n===e?n=-e:n-=e);var a=this.aStartAngle+t*n,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=o-this.aX,u=s-this.aY;o=h*c-u*l+this.aX,s=h*l+u*c+this.aY}return new i(o,s)},ui.prototype=Object.create(Qe.prototype),ui.prototype.constructor=ui,ui.prototype.isSplineCurve=!0,ui.prototype.getPoint=function(t){var e=this.points,n=(e.length-1)*t,r=Math.floor(n),a=n-r,o=e[0===r?r:r-1],s=e[r],c=e[r>e.length-2?e.length-1:r+1],l=e[r>e.length-3?e.length-1:r+2];return new i(ei(a,o.x,s.x,c.x,l.x),ei(a,o.y,s.y,c.y,l.y))},fi.prototype=Object.create(Qe.prototype),fi.prototype.constructor=fi,fi.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2,a=this.v3;return new i(hi(t,e.x,n.x,r.x,a.x),hi(t,e.y,n.y,r.y,a.y))},di.prototype=Object.create(Qe.prototype),di.prototype.constructor=di,di.prototype.getPoint=function(t){var e=this.v0,n=this.v1,r=this.v2;return new i(ai(t,e.x,n.x,r.x),ai(t,e.y,n.y,r.y))};var jr=Object.assign(Object.create($e.prototype),{fromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Ke(this.currentPoint.clone(),new i(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,r){var a=new di(this.currentPoint.clone(),new i(t,e),new i(n,r));this.curves.push(a),this.currentPoint.set(n,r)},bezierCurveTo:function(t,e,n,r,a,o){var s=new fi(this.currentPoint.clone(),new i(t,e),new i(n,r),new i(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),i=new ui(e);this.curves.push(i),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,i,n,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+o,e+s,i,n,r,a)},absarc:function(t,e,i,n,r,a){this.absellipse(t,e,i,i,n,r,a)},ellipse:function(t,e,i,n,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(t+c,e+l,i,n,r,a,o,s)},absellipse:function(t,e,i,n,r,a,o,s){var c=new ti(t,e,i,n,r,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var h=c.getPoint(1);this.currentPoint.copy(h)}});pi.prototype=jr,jr.constructor=pi,mi.prototype=Object.assign(Object.create(jr),{constructor:mi,getPointsHoles:function(t){for(var e=[],i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e},extractAllPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},extractPoints:function(t){return this.extractAllPoints(t)}});Object.assign(Q.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),wr.random16=function(){return Math.random()},Object.assign(c.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new s),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(t){return this.applyToVector3Array(t)},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBuffer:function(t,e,i){return this.applyToBufferAttribute(t)},applyToVector3Array:function(t,e,i){},makeFrustum:function(t,e,i,n,r,a){return this.makePerspective(t,e,n,i,r,a)}}),o.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(mi.prototype,{extrude:function(t){return new ue(this,t)},makeGeometry:function(t){return new le(this,t)}}),Object.assign(i.prototype,{fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)}}),Object.assign(s.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,i){return this.fromBufferAttribute(t,e,i)}}),xt.prototype.computeTangents=function(){},Object.assign(ot.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)}}),Object.defineProperties(ot.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Tt.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.assign(yt.prototype,{addIndex:function(t){this.setIndex(t)},addDrawCall:function(t,e,i){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){}}),Object.defineProperties(yt.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(je.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.assign($t.prototype,{supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){}}),Object.defineProperties($t.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(t){this.shadowMap.cullFace=t}}}),Object.defineProperties(a.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}});var Xr={merge:function(t,e,i){var n;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),n=e.matrix,e=e.geometry),t.merge(e,n,i)},center:function(t){return t.center()}},Yr={crossOrigin:void 0,loadTexture:function(t,e,i,n){var r=new Me;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a},loadTextureCube:function(t,e,i,n){var r=new _e;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,i,void 0,n);return e&&(a.mapping=e),a}};t.WebGLRenderTarget=a,t.WebGLRenderer=$t,t.ShaderLib=Ur,t.UniformsUtils=Cr,t.Scene=te,t.Sprite=ie,t.Mesh=_t,t.LineSegments=ae,t.VideoTexture=oe,t.CubeTexture=l,t.Texture=n,t.CubeTextureLoader=_e,t.TextureLoader=Me,t.JSONLoader=Be,t.ImageLoader=ye,t.Loader=Se,t.Cache=Vr,t.DirectionalLight=He,t.AmbientLight=We,t.PerspectiveCamera=Tt,t.OrthographicCamera=Lt,t.Camera=Et,t.Uniform=je,t.BufferGeometry=yt,t.GeometryIdCount=vt,t.Geometry=xt,t.Face3=lt,t.Object3D=ot,t.Raycaster=Xe,t.EventDispatcher=e,t.Clock=Ze,t.Math=wr,t.Plane=tt,t.Sphere=K,t.Matrix4=c,t.Box3=Q,t.Euler=rt,t.Vector3=s,t.Vector2=i,t.Quaternion=o,t.Color=W,t.AxisHelper=Je,t.Shape=mi,t.Path=pi,t.SphereGeometry=se,t.SphereBufferGeometry=ce,t.PlaneGeometry=wt,t.PlaneBufferGeometry=St,t.ShapeGeometry=le,t.ShapeBufferGeometry=he,t.ExtrudeGeometry=ue,t.CylinderGeometry=fe,t.CylinderBufferGeometry=de,t.CircleGeometry=pe,t.CircleBufferGeometry=me,t.BoxGeometry=Mt,t.BoxBufferGeometry=bt,t.SpriteMaterial=ee,t.ShaderMaterial=Z,t.MultiMaterial=ge,t.MeshLambertMaterial=ve,t.MeshBasicMaterial=ht,t.LineBasicMaterial=ne,t.REVISION=_i,t.MOUSE=Mi,t.CullFaceNone=bi,t.CullFaceBack=wi,t.CullFaceFront=Si,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=Ei,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=Ti,t.PCFSoftShadowMap=Li,t.FrontSide=Ai,t.BackSide=Pi,t.DoubleSide=Ci,t.FlatShading=Ri,t.SmoothShading=Ni,t.NoColors=Di,t.FaceColors=1,t.VertexColors=Ui,t.NoBlending=Ii,t.NormalBlending=Oi,t.AdditiveBlending=zi,t.SubtractiveBlending=Fi,t.MultiplyBlending=Bi,t.CustomBlending=Gi,t.AddEquation=Vi,t.SubtractEquation=ki,t.ReverseSubtractEquation=Hi,t.MinEquation=Wi,t.MaxEquation=ji,t.ZeroFactor=Xi,t.OneFactor=Yi,t.SrcColorFactor=qi,t.OneMinusSrcColorFactor=Zi,t.SrcAlphaFactor=Ji,t.OneMinusSrcAlphaFactor=Qi,t.DstAlphaFactor=Ki,t.OneMinusDstAlphaFactor=$i,t.DstColorFactor=tn,t.OneMinusDstColorFactor=en,t.SrcAlphaSaturateFactor=nn,t.NeverDepth=rn,t.AlwaysDepth=an,t.LessDepth=on,t.LessEqualDepth=sn,t.EqualDepth=cn,t.GreaterEqualDepth=ln,t.GreaterDepth=hn,t.NotEqualDepth=un,t.MultiplyOperation=fn,t.MixOperation=dn,t.AddOperation=pn,t.NoToneMapping=mn,t.LinearToneMapping=gn,t.ReinhardToneMapping=vn,t.Uncharted2ToneMapping=xn,t.CineonToneMapping=yn,t.UVMapping=300,t.CubeReflectionMapping=_n,t.CubeRefractionMapping=Mn,t.EquirectangularReflectionMapping=bn,t.EquirectangularRefractionMapping=wn,t.SphericalReflectionMapping=Sn,t.CubeUVReflectionMapping=En,t.CubeUVRefractionMapping=Tn,t.RepeatWrapping=Ln,t.ClampToEdgeWrapping=An,t.MirroredRepeatWrapping=Pn,t.NearestFilter=Cn,t.NearestMipMapNearestFilter=Rn,t.NearestMipMapLinearFilter=Nn,t.LinearFilter=Dn,t.LinearMipMapNearestFilter=Un,t.LinearMipMapLinearFilter=In,t.UnsignedByteType=On,t.ByteType=zn,t.ShortType=Fn,t.UnsignedShortType=Bn,t.IntType=Gn,t.UnsignedIntType=Vn,t.FloatType=kn,t.HalfFloatType=Hn,t.UnsignedShort4444Type=Wn,t.UnsignedShort5551Type=jn,t.UnsignedShort565Type=Xn,t.UnsignedInt248Type=Yn,t.AlphaFormat=qn,t.RGBFormat=Zn,t.RGBAFormat=Jn,t.LuminanceFormat=Qn,t.LuminanceAlphaFormat=Kn,t.RGBEFormat=$n,t.DepthFormat=tr,t.DepthStencilFormat=er,t.RGB_S3TC_DXT1_Format=ir,t.RGBA_S3TC_DXT1_Format=nr,t.RGBA_S3TC_DXT3_Format=rr,t.RGBA_S3TC_DXT5_Format=ar,t.RGB_PVRTC_4BPPV1_Format=or,t.RGB_PVRTC_2BPPV1_Format=sr,t.RGBA_PVRTC_4BPPV1_Format=cr,t.RGBA_PVRTC_2BPPV1_Format=lr,t.RGB_ETC1_Format=hr,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=ur,t.TriangleStripDrawMode=fr,t.TriangleFanDrawMode=dr,t.LinearEncoding=pr,t.sRGBEncoding=mr,t.GammaEncoding=gr,t.RGBEEncoding=vr,t.LogLuvEncoding=3003,t.RGBM7Encoding=xr,t.RGBM16Encoding=yr,t.RGBDEncoding=_r,t.BasicDepthPacking=Mr,t.RGBADepthPacking=br,t.CubeGeometry=Mt,t.Face4=gi,t.LineStrip=0,t.LinePieces=1,t.MeshFaceMaterial=vi,t.Particle=xi,t.Vertex=yi,t.GeometryUtils=Xr,t.ImageUtils=Yr,Object.defineProperty(t,"__esModule",{value:!0})});
var _0x09d6=["Nodes","Lines","NavNodeSet","NavLineSet","Nodes: object expected","Nodes: integer key{k:int32} expected","Lines: object expected","Lines: integer key{k:int32} expected",".NavSet.Nodes: object expected",".NavSet.Lines: object expected","tid","rid","sid","rid: integer expected","sid: integer expected","eid","efnum","rank","bstair","efnum: integer expected","rank: integer expected","length: number expected","direction: string expected","bstair: string expected","Infos","serverurl","bgaudio","bgaudioplay","picscale","msgscale","PicNodeSet","PicClickSet","serverurl: string expected","bgaudio: string expected","picscale: string expected","msgscale: string expected","Infos: object expected","Infos: integer key{k:int32} expected","Infos.",".PicSet.Nodes: object expected",".PicSet.Infos: object expected","idlist1","idlist2","base","url: string expected","base: integer expected","idlist1: array expected","idlist1: integer[] expected","idlist2: array expected",".PicNodeSet.idlist1: array expected",".PicNodeSet.idlist2: array expected","arrays","purl","aurl","msgt","msgc","curl","csize","aurl: string expected","msgt: string expected","Z: number expected","csize: string expected","getLength","areaToAreas","areaPoints","layerPoints","layerPToP","crossScheme","fnums","navdata","nearbyLine","calculateCrossAreaPoints","calculateAreaRelation","getLinePoint","calculativeCrossLayerLine","getAreaFormId","initCrossScheme","canGoAreas","getCanRunPoint1","getCanRunPoint2","pointIdListAdd","getSameId","calculatePath","opposite","getArrayMinus","updataOneTime","getOptimutic","getNumber","result","preprocess","getNearestNode","请重新选点","calculateAreaStartEnd","getShortestPath","walkPath","convertToCoor","navidata","findLine","findAllPath","起点与终点不能相同","endPoint","costDistance","updateNewShortestPathList","sort","getNaviResult2","getShortestPath2","updateNewShortestPathList2","compare","startData","endData","startMarker","endMarker","_locMarker","startMarkerLayer","endMarkerLayer","naviDescriptions","naviDescriptionsData","moveTimer","is_end_","count","locationMarkerUrl","image/pointer.png","locationMarkerSize","_groupsPoints","mode_","outcome","lineObj","clearNaviLines","_needDrawLines_","image/start.png","image/end.png","addLayer","_isEnd_","_getNaviResult","noMarker","_createMarker","navicore","ESNaviCore","getNaviResult","无法到达!请重新选点","_getFloorsPoints","_naviDescriptions","_naviResult","navidistance","startmarker","navLine","clearMarkers","clearLocationMarker","_drawlineByResults","_drawLines","combinePoints","_drawLinesByFloor","autoClearNaviLine","linesVisible","naviInfos","played","relDesc",",感谢使用","方继续直行","您已到达目的地附近","到达目的地","cur","deviateCount","reRouting","drawNaviLine","surDistance","remain","backcount","arrivalCount","walking","distanceToNext","index","_preGid","walkingfunction","audioPlay","broadcast","isSimulating","_index","directionAssert","relAngle","combineAsset","relField","_boo","getLadderType","下行到达","向 前 直行 "," 米 ","直行 ","absDesc","_tailLen","继续直行","右前方继续直行","右后转","左后转","左前方继续直行"," 到达目的地","endDirection","乘梯 ","startFloor","_groupPointsIndex","changeTiltAngle","_viewID","inTime","changeFloorTiltAngle","getPosition","_changeFnumIng","scaleAnimate","_scaleLevelToID","_moveTo","minScale","crossFloor","followGap","_toPos","_toRot","_animID","_analyse","_allLen","vvs","_getTransformByLength","_gpsData","_gps","_animateFun","pause","onstartNavi","NAVI","_locMarkerToStartPoint","isMultiFloors","_animate","8px Arial","flipY","addPoint","renderText","clearRect","RGBAFormat","WebGLRenderTarget","renderTarget2","writeBuffer","readBuffer","passes","CopyShader","needsSwap","stencilFunc","NOTEQUAL","copyPass","swapBuffers","MaskPass","ClearMaskPass","Pass","state","buffers","setMask","setLocked","stencil","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","setTest","overrideMaterial","clearColor","getClearColor","getClearAlpha","clearAlpha","tDiffuse","ShaderMaterial","uniforms","UniformsUtils","defines","vertexShader","fragmentShader","quad","frustumCulled","textureID","varying vec2 vUv;","uniform sampler2D tDiffuse;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","build","BufferWriter","Reader","BufferReader","configure","Service","rpcImpl must be a function","responseDelimited","rpcCall","request must be specified","already ended","rpcImpl","requestDelimited","zero","fromString","low","high","utf8Write","byteLength","getElementsByTagName","head","createElement","script","type","utf-8","src","appendChild","undefined",".hot-update.json","open","GET","timeout","send","readyState","status"," timed out.","Manifest request to "," failed.","parse","prepare","call","hot","active","indexOf","children","push","prototype","hasOwnProperty","defineProperty","_selfAccepted","function","object","length","_acceptedDependencies","_selfDeclined","_disposeHandlers","splice","idle","check() is only allowed in idle status","check","slice","pop","Aborted because of self decline: ","parents","_declinedDependencies","Aborted because of declined dependency: "," in ","ready","apply() is only allowed in ready status","ignoreUnaccepted","abort","Aborted because "," is not accepted","apply","module","errorHandler","fail","exports","webpackHotUpdate","f48d0783b0146067ac49","/dist/","keys","message","captureStackTrace","stack","toString","name","asPromise","EventEmitter","float","inquire","utf8","LongBits","global","freeze","emptyObject","isNode","process","node","isInteger","number","floor","isString","string","isObject","isset","isArray","buffer","Buffer","_Buffer_from","_Buffer_allocUnsafe","newBuffer","Array","Long","dcodeIO","long","key2Re","key32Re","key64Re","longToHash","from","toHash","zeroHash","longFromHash","fromHash","fromBits","toNumber","merge","lcFirst","charAt","toLowerCase","substring","newError","ProtocolError","oneOfGetter","oneOfSetter","toJSONOptions","_configure","allocUnsafe","test","__esModule","symbol","iterator","constructor","enumerable","configurable","value","writable","fns","add","fire","shift","Option","FullScreen","webkitCancelFullScreen","_hasWebkitFullScreen","_hasMozFullScreen","webkitIsFullScreen","body","mozRequestFullScreen","mozCancelFullScreen","Callbacks","eachObject","startWith","endWith","default","use strict","url","data","POST","async","isArrayBuffer","_isComplete","_status","_responseData","_completeCallbacks","_successCallbacks","_httpServer","_initHttpServer","onreadystatechange","_httpStateChange","bind",".loc","responseType","arraybuffer","X-Requested-With","XMLHttpRequest","setRequestHeader","Content-type","application/x-www-form-urlencoded","Connection","complete","success","_errorCallbacks","error","get","getJSON","ActiveXObject","Microsoft.XMLHTTP","judgeStatus","_successCallback","file:","location","protocol","responseText","_httpStatus","_errorCallback","map","manager","enabled","component","append","forEach","mapPicker","start","components","_invokeFunction","update","remove","removeComponent","parent","Cannot call a class as a function","key","isElement","element","attr","style","nodeType","tagName","getAttribute","setAttribute","addEvent","index out of range: "," + ","buf","pos","len","invalid varint encoding","illegal buffer","create","isBuffer","_slice","subarray","uint32","int32","sint32","fixed32","sfixed32","readFloatLE","double","readDoubleLE","bytes","read","skip","skipType"," at offset ","toLong","zzDecode","tail","next","states","base64","alloc","pool","_push","fromNumber","uint64","int64","sint64","zzEncode","bool","fixed64","sfixed64","writeFloatLE","writeDoubleLE","set","decode","write","fork","reset","ldelim","finish","fromCharCode","join","invalid encoding","_listeners","off","emit","ctx","writeFloatBE","readFloatBE","round","log","LN2","pow","readDoubleBE","writeDoubleBE","quire","replace","charCodeAt","__lastPhi","lastSelectStore","__selectMaterialAnimId","lastSelectModelStore","__time","__cnt","__allTime","deltaTime","immediateDeltaTime","__moveToId","rotateTo","abs","sign","ESUtil","getValues","time","duration","rotateAngle","_rotateToID","Tween","work","callback","mapView","container_","removeChild","options","Evento","ESMapView","init","OrbitControls","camera","canvas_","minPolarAngle","controls","maxPolarAngle","panorama","ESFrameLimit","DEFAULT","mapPickHighLight","ESMapTheme","mapScene","ESMapScene","mapTheme","mapService","zonTempObj","ESMapService","compass_","ESMapCompass","sceneOrtho","addEventListener","controlsChange_","currentCamera_","fullSceen_","requireUpdateCollide_","location_","focusFnum_","floorCenter_","scaler_","ESMapScaler","controlstart","end","controlend","setValidRange_","validRange_","scaleLevels_","scaleLevel_","floorNums_","timer","Clock","visibleNoFloorNums_","loader","_selectModelAlpha","matList","animatque","enableCollide","ESMap","instance","layerAlias","ESLayer","ESLayerType","FLOOR_BASE","MODEL_LABEL","MODEL_POI","TEXT_MARKER","IMAGE_MARKER","ESPolygonMarker","update_","openMap","__isNewScene","sceneId_","scene","getO3dScene","clear","openMap_","navigateTo","navigateFromTo","drawNavigation","clearLineMarkById","lineManager","clearAllLineMark","drawLineMark","visible","objects_","datas_","datas","o3d_","type_","UserPOI","height","position","offsetHeight","visibleFloorNumsChanged","visibleFloorNums","navigateStyle_","smooth","segments","points","ESMapSceneUtil","buildCurvePoints","fnum","ESLine","change3dColor","geometry","material","materials","Color","ESMapUtil","needsUpdate","hexToRgb","concat","color","floorNums","getFloor","_type_","MODEL3D","changeModelColor","layers","MODEL","MODEL_BASE","brothers","colorRGB2Hex","MeshLambertMaterial","MultiMaterial","clone","selectModelMat","faceRange","_materialIndex","faces","materialIndex","groupsNeedUpdate","_analyseRawPoints","layerLocalHeight","Vector3","sceneX_","offset","sceneZ_","pointList","toSceneCoord","getFloorHeight","scaleLevelTo","constraint","setScaleLevelLimit","Math","clamp","maxScaleLevel_","initScaleLevel","ceil","scaleLevelIn","scaleLevelOut","maxScaleLevel","zoomIn_","zoomOut_","setBackgroundColor","setModelSelectColor","emissive","opacity","prepare_","queryThemeV2","themeID","themeName","clearColor_","storeSelect","selectNull","mergeModels","muti","material_","storeModelSelected","selectModelNull","_canPicked","pickFilterFunction","_mats","pickerModels_","intersects","FloorNum","faceIndex","modelSelectedEffect","ESElement","flash","label","mapCoord","point","hitCoord","mapClickNode","keepPress_","sourceData","mapKeepPress","Model3D","pickerNone_","ESNodeType","NONE","scaleLevelChanged","queryScene","setScene","maptime","getTime","info","ESInfo","EXPIRED","setOriginCameraPosition","__isChangeTheme","minScaleLevel_","minScaleLevel","scaleLevel","defaultScaleLevel","Firstscale","listFloors","floornum","all","visibleFloors","focusFloor","loadPoiIDList","IsMapLoading","asyncLoadFloors","loadFloor","mapSceneData","floors","loadComplete_",".png","Facility","Tid","image","initPoiMateriaByData","floors_","queryFloor","putFloor","focusFloorNum","forEachFloor","createMaterial_","meta_","theme_","userData","addModel","getO3dFloor","focusAlphaMode","restoreFloorAlpha","setFloorAlpha","_start_","display","_stop_","updateCountDown_","panRange","sqrt","maxX","minX","maxY","minY","viewMode","plane_","PlaneGeometry","MeshBasicMaterial","rotation","_haveUpdate","updateSize","updateText","loadComplete","viewMode_","controlchange","updateDirection","getAzimuthalAngle","frameLimit","immediateUpdate","updateCollide","getDelta","render","forceUpdate","tryResize_","resize","updateHUD","box3_","getSize","Elevation","copy","target","defaultControlsPose","DEG2RAD","split","defaultAngle","defaultTiltAngle","_alwaysShowLabelAndPOI","focusFloor_","o3dFloors_","sub","notMove","fadeTo","focusAnimateTime","updateShadowPostion","focusAlpha","addLocationMarker","removeLocationMarker","dispose","dumpScene","renderer","loadqueue","meshStore","domElement","esmap","Cache","THREE","coordScreenToMap","Raycaster","setFromCamera","updateMatrixWorld","ESMapCoord","coordMapToScreen","project","w_2_","project_","setFromMatrixPosition","h_2_","addPopInfoWin","ESPopInfoWindow","popMarkers_","removePopInfoWin","close","removeAllPopInfoWins","lineStyle","lineWidth","alpha","dash","size","gap","minX_","minY_","maxY_","mapDataSrc","mapThemeSrc","getCurrentScaleLevel","setScaleLevelValue","scaleLevelValue","getScaleRate","compassOffset","options_","spriteBg_","spritePt_","compassSize","scale","center","RAD2DEG","mapOriginCoord","zoom","left","right","top","bottom","updateProjectionMatrix","__viewModeAnimating","normalize","multiplyScalar","mode","cameraTop","getPolarAngle","viewModeAnimateMode","viewModeAnimateTime","viewModeChanged","themeName_","themeID_","themeList_","typeID","LINE","linewidth","FLOOR","floorColor_","floorOpacity_","ESFloorManager","data_","floorStyleBase","wrapS","wrapT","RepeatWrapping","imagesize","repeat","RoomStyle","toColor","LABEL","updateStyle","labelStyle_","style_","ELEMENT","modelImage","floorLoaded","isNaviAnimating","focusFloorNumChanged","visibleFloorNums_","ESLocationMarker","setClearColor","showCompass","showScaler","shadowEnabled","shadowLight","lightAngleX","shadowAngleX","lightAngleY","shadowAngleY","floorNames","FloorBarName","tiltAngle","naviData","navs","width","IsThemeLoading","ESControlOptions","padding_","allLayer","showBtnCount","expandLayers_","expand","positon_","change_","inited","selectedColor","#1E82FA","defaultColor","#666666","2px","querySelector","touchPointX","touchPointY","touchEndPointX","touchEndPointY","top_","right_","imgURL_","imgURL",".floor-btns-wrap","div","class","floor-btns-wrap","absolute","backgroundColor","white","boxShadow","defaultShadow_","defaultRadius_","cursor","pointer","fontSize","fontWeight","bold","textTransform","uppercase","innerText","arrow-btns-wrap","borderRadius","onmousewheel","scroll","MozMousePixelScroll","touchstart","touchmove","touchend","canvas","insertBefore","createLayers","none","arrow-floors-wrap arrow-top-btn","18px","background","url(","arrow1.png) no-repeat 50% 50%","onclick","arrow-floors-wrap arrow-down-btn","down","hidden","changeScrollState","setPosition_","click",".arrow-btns-wrap","block","controlPositionListener","defaultPadding_","left_","innerHTML","NameEn","toUpperCase","hrEl","onChange","querySelectorAll",".arrow-btns-wrap > label",".arrow-btns-wrap>label[class*='active']","dataset","triggerClick","touches","pageX","pageY","preventDefault","event","scrollTop","changedTouches","wheelDelta","detail","createLayerButton_","floors-layer-btn layer-btn-default","data-floornum","inline-block","lineHeight","0.8em","margin","addClass","removeClass","triggerChange_","1px","borderTop","60%","0 20%","alpha(opacity=100, finishopacity=0, style=3)","changeMapVisibleFloors_","changeFocusFloor","changeActiveStyle_","clientHeight",".arrow-floors-wrap.arrow-top-btn","backgroundImage","arrow4.png)","disabled","arrow2.png)","arrow3.png)","arrow1.png)","className","hasClass","createEvent","dispatchEvent","roundRect","beginPath","moveTo","arcTo","_enabled","isPC","composer","EffectComposer","originSize","RenderPass","ShaderPass","renderToScreen","composerOrtho","addPass","setScale","renderOrtho","reSize","renderTarget1","setSize","getPlatform","assign","EScontrolSize","Map_CONTROL_NORMAL","ESControlOffset","image/wedgets/","this hasn't been initialised - super() hasn't been called","Super expression must either be null or a function, not ","setPrototypeOf","__proto__","getPrototypeOf","Object3D","alias","es3dmarker","opts_","map_","createMarker_","convert","getValue","degToRad","angle","id_","height_","spritify_","spritify","callback_","model","scale_","showLevel","_update_","animate","ESMapLabel","stop","stopFlash","fadeOut","fadeIn","rotate","jump","delete","radToDeg","url_","name_","ESNode","defineProperties","o3d","FACILITY","stopJump","forceVisible_","oid","Typeid","coord_","localToWorld","isShowSlots","warn","Only ESLayer acceptable!","getOrCreateLayerByName","getLayersByNames","imageMarker","textMarker","polygonMarker","POLYGON_MARKER","storeImage","STORE_IMAGE","boardMarker","BOARD_MARKER","getLayersByTypes","getObjectsByAlias","removeLayer","removeLayersByTypes","exitInArray","removeLayersByNames","applyHeatMap","renderToMap","removeHeatMap","traverse","traverse_","floorAlias","Alias","floorDesc","floorHeight","floorName","Name_en","alwaysShow","stopMoveTo","fade","../image/user.png","size_","ESMapPoi3","up_","XYZ","initY_","ESMapPoi2","depthWrite","setUrl","boxCollision_","ESMapBoxCollision","requireCollide_","addMarker","addUserPOI","addUserLabel","load3dmarker","boardMark","updateScreenSize","_init_","show3D","angle_","checkType","请使用图层类型对应的标注！","removeAll","esline","ESComponent","componentsManager","ind_","fixedWidth","_colorToStr","normal","lineMode","ESLineMode","arrow","lineType","esarrow","PLANE","dashArray","getDashArrayByLineType","textureLength","reduce","stringify","naviMap","ESNaviMap","Texture","minFilter","NearestFilter","ESMapNavLineGeometry","notCenter","billboard","baseRepeatX","uvBaseLen","transparent","depthTest","Mesh","renderOrder","ESRenderOrder","lineObject","_updateMaterialByNaviMap","removed","_update","_visibleFloorNumsChanged","transparentLine","transparentObj","FULL","ESLineType","DOT_DASH","CENTER","DASH","DOUBLE_DOT_DASH","TRI_DOT_DASH","ARROW","ESARROW","materialInfo","side","naviLineAnimation","noAnimate","speed","version","setRadius","_billboard","pathVertices","dot","_upVec","quaternion","LOCATION_MARKER","mapLoaded","direction","notAddImageHeight","zOffset","getNearestAngle","mapPicker_","controls_","enableMapPan_","enableMapIncline_","enableMapPinch_","enableMapSingleTap_","enableMapPan","enableMapRotate","enableMapRotate_","enableGestureIncline","enableMapZoom","enableZoom","enableMapSingleTap","sprite_","sceneOrtho_","margin_horiz","margin_verti","visible_","img","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAiCAYAAABV9lfvAAAACXBIWXMAADXUAAA11AFeZeUIAABDQmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMTEgNzkuMTU4MzI1LCAyMDE1LzA5LzEwLTAxOjEwOjIwICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE3LTAzLTAzVDA5OjU5OjU1KzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTctMDYtMDVUMTY6NDU6MzQrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE3LTA2LTA1VDE2OjQ1OjM0KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8cGhvdG9zaG9wOkNvbG9yTW9kZT4zPC9waG90b3Nob3A6Q29sb3JNb2RlPgogICAgICAgICA8cGhvdG9zaG9wOlRleHRMYXllcnM+CiAgICAgICAgICAgIDxyZGY6QmFnPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHBob3Rvc2hvcDpMYXllck5hbWU+RVNNYXA8L3Bob3Rvc2hvcDpMYXllck5hbWU+CiAgICAgICAgICAgICAgICAgIDxwaG90b3Nob3A6TGF5ZXJUZXh0PkVTTWFwPC9waG90b3Nob3A6TGF5ZXJUZXh0PgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6QmFnPgogICAgICAgICA8L3Bob3Rvc2hvcDpUZXh0TGF5ZXJzPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjg5NDVkN2RlLTlmNTMtYTM0MS05NGZkLTI2MTAwZWIwNmUyNzwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjRhYWMyMGY1LTQ5Y2ItMTFlNy05YzdjLWYxMGY3NmFmYTFmODwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjA2NzU3ZGY4LTUxZTItMDI0OC04MWJmLTYwYjE5ZTJmNmU1NzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDowNjc1N2RmOC01MWUyLTAyNDgtODFiZi02MGIxOWUyZjZlNTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTctMDMtMDNUMDk6NTk6NTUrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNvbnZlcnRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6cGFyYW1ldGVycz5mcm9tIGltYWdlL3BuZyB0byBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wPC9zdEV2dDpwYXJhbWV0ZXJzPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpmZDZmNWJkOC1jYWNhLTI5NGMtODZhZi01Yzc5YTljM2RkZDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTctMDMtMDNUMTA6MjU6MTgrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE1IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6YjExZGY1YmQtZWJhNS05NzRkLTliY2UtOWMyZTBjM2E1YTVjPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE3LTA2LTA1VDE2OjQ1OjM0KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjg5NDVkN2RlLTlmNTMtYTM0MS05NGZkLTI2MTAwZWIwNmUyNzwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNy0wNi0wNVQxNjo0NTozNCswODowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDx4bXBNTTpEZXJpdmVkRnJvbSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgIDxzdFJlZjppbnN0YW5jZUlEPnhtcC5paWQ6YjExZGY1YmQtZWJhNS05NzRkLTliY2UtOWMyZTBjM2E1YTVjPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD5hZG9iZTpkb2NpZDpwaG90b3Nob3A6OWIyNDcyMzYtZmZiOC0xMWU2LWFmYmQtY2Y0YzUyMjdkODZiPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6MDY3NTdkZjgtNTFlMi0wMjQ4LTgxYmYtNjBiMTllMmY2ZTU3PC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjM1MDAwMDAvMTAwMDA8L3RpZmY6WFJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOllSZXNvbHV0aW9uPjM1MDAwMDAvMTAwMDA8L3RpZmY6WVJlc29sdXRpb24+CiAgICAgICAgIDx0aWZmOlJlc29sdXRpb25Vbml0PjI8L3RpZmY6UmVzb2x1dGlvblVuaXQ+CiAgICAgICAgIDxleGlmOkNvbG9yU3BhY2U+NjU1MzU8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjEwOTwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj4zNDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+7N2UCQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAOaUlEQVR42uxbe3RU5bX/7e/7zjkzIZlMCIHyDi+vXsGOt1areC9Bl1Xa2xpqvQ+TFQEpD28lvBEQE16hASIBKe9CQMCy2iXQu5ResWVoxdLqklGpq2qFKAKRipm853HO+e4fc2Y4OZwJQb3eJc1e66yZOdnnfOfbv2/v/dv7OyEpJbrkqyWsywRfPRH2H9+599sAACICY2wMY0wjxg7EolEwxp72eLw/VjUVqqK+r6jKW6qq/U7T1BdVTfuzpmnwaBooJwf+tii+u2MvujU2IurxuA5MEsiNRLHpH4fg8NB85BODqiqQUoJzjpaWFrQ0t4Bzbl0AcM7BGQfjDIwxcM7BGAfnDETU7v5SSjDG4PNlgzEGCWldm9BnjIEYA2cMRCylzzmHoihQVTVxf+veUkpImbCNaZqIRiJJO0GaEoZpwDAM6LqOeDwGwzBSR+KBANM0YZhG4tMwIE1pfddhGGbK9q2tLYjH42CMwTTN1LH1Z9svB82SwSDaTUS3gwic819lZGQsME3zMWL0MWdsKed8COd8COOskIgBwGEA1RJ4gb6g1fTTjZu6XKoz4ZGIQEQrGdHtyVUEyO8zzk9qmjZXCL4MRMQ4ezax6hMrU3BxDyP2PAFHdcELWnyZZHIOap8v8wAMBaB2mf2LBC0RMl5nLBE+mAUcEQFElYzxdyEx0jCMhwC6S+N8OVPEtHBO9rr6nj0uNPbsMVIqym0D3/mr9DY1QxfiFgCPAzgEoBbAe9bnTpPoHkU34NUNGERdSHzWnMYZA4AKIrqTGBtDjIGRBR4RGLFhjNHLhmH8MhqNPBgX7EhuG3Dvn0KA4LO9utG739nzI3qdObdNF7wgrqpDHN4Gk6h3hmGU5LRGSmKClZzJ8DyjGQbARdqHLCkuCgC4v91qY5fymhACnAsIIT6oXreuxq5XsXxZQBHK/UKIAi4EhODgXAQ5Y28wxoITJk4MJ3V3bN8+HVJmm1Im88jOyVOm1KZ7rsVlZdN1Q882dB26bsAw9J1Va6prv1TQrAwOEH2HEa1lRNMs77MOAuMcjLEfQiLWHIuXCzNWccefTiD3zNnFcX/2/FZNRSTDC0OIVHiUCR6BTMNAVjQuGxWx/r8HfO3NF/v3HnPel1nWIxrbKL2sqoPnvB9AeSfmU2MdWPTEQr8ilP1CEQUueslzIQA3286vcei9YUWGy2TZ0iWFTv2qNdWLv3RPa2MJFqURgRNKQbSPiJYyorsSoZJAoCRrUvymXN7s1R4q++5dc3548p2V//zuaU0jNrPZBphBhGxd/zQrbuw4pyl/+W2fvIuH++T1ONkzd3w243f0MSQ4Z6sZY/8ppSwA0NyBka8ktQAwf948v1DEEQAB63zYAsh5vxQgNTt2uI3xdQAH0oy1xm3sLx20DNOEKSWaVQWNigJSxCsklLuF4A9xzst8przOHzcSoBEDOENOTL+xITPjhQ2jvrXizQF9ZxW+/taqvhfrX/gkK+vmmGDv94zGN0WJtq3K/1r4eHf/9y5kZy7ycfHNoXETqsLAFQVCVWJCiJekaehSAhKXFfz5yS+7du/pTAIstQFWM2fevPFOhW1bthSkG8MmAbeb/6SiYpyL/v8PaBWnzkEC+FQRqFcVtCkCESHQoip7o4qy93T37H99L6/7T/Oi8QFZRgI8k3HkRGPI1s35fxyWP/Evg/o/+O8vv/pPo0Jv3wPTeKkpM0POuek6HM3xrRgk8fgg3YTKAKEo4IqAqmlQFOXhaCT6c0CCcwFDN9OBFurkvKYnvyxY+MR4N4WJkyYFHacGOgDIdwNt1cpKP4Ayhx4AtLvf1MmT/YZpBEzD8Jum6TdNs7Zm1zPBKz14SXFRclw/gNCu3XtCHYKWH4mBAFzfGgWXZiK/SQkTNICk+W+feLQLhwb3v/XwdYP+46wvs7p3awSalABjEAT0a2jKa8rKDO4ruONbZ3v3PDysoRlHOPAHbmJEJJqraZ4EabAIgapp0FR1RSQS+Xk0GhmjKOohIgnGuH0Sdo+4ImhzZs0MCKH4P8PqL3DkxnIA+Rs3bPBPffTRsMOLk0AdsC2QN5IKP3700SNuIb2kuCgMYMau3XtqbOdOWCAFrflNd1wTBDB21+49YVfK3yA4woLjgipwXlNx3qM9cN7r2X/Bq52qy/Cu8hjmzpI33zlYduT48dHvfzi4IcO77aIvK8UuwTly2iLwxWLHfx8YXr7rvtG4OGokbsvOQTyuLyHGEoBxAVVTIYT4Xmtb24JoNHpECPECES0CTIu6uIaoqw1B+RXLl+1fVVkZ6IRuwEFALjv/VFWV32bUGkeIrAWA0mmP+R050+5dfgA7LG9y3j9g3dst/5Z1zB4TMhbACgD/AJsJmxSBJjXrtv4NzcdLX35t+x8/PLfoV98YUXM2L3dfz9ZIX0YEyTgEgLym5jJqbhnr8Xin5t04/BWt9vRHn3x84W6P5vmNoiogYgPaWtvOGIbxVyHEkEQ9yJYQ4V0p5b40Yau8pLio3IXyl2/cvGUxAKyqeio0f968kM0YhQAK11RVhbkQQSH4Uc5FzeQpU8I2EuK3DJoMc7UOowZtXpbUWwzgSFJp5erVIRswYwEEt2zdFgaACeMe9gPYbwOzEEC1VcrYZXzSC0uKiwqta5LhfkZHDeMVAJ5LAtau+AZAUuJiNy8+zuo24dYPz50tO/jiiJHvnR5S7+u2ishWlBMD5/wmPR4/ZprG6mHDhikDBw36rWka/6Lr+gg9Hu8hpRlRFDEk0UNkYJyBc76RpxqO6cmAQz5wTt6ZYyxjJmn66W1btgTSefMjEyeGHAwS66qr821eVv7Eoidr3XLt2nVP167fsOHAxs2bU4tie83OsON5wi7jLraHzV279xyw39eeJpye9oDVwehQSEqYRDiXnYU+9eFb7g29venYiOvn1mdnPturufUpSbyAWAI4xhgMw5gVi8XG9uvf/7+6d+/+67q6OsRi0ZcUVdUSOgSyinhiLAsEcjFoGEB1mkdqB9CKysoQgNFLyssD1uoeZX36bQCWWR6RLjQGrWuSwJRZ14UBrF22dIlrri2d9pjf0I1SwzAKLSIC0zRr0zDNgVfI12G3707Qll9VD0xK1GX7PvW3tGLioSAOjbzlRDTbNzojGpssiZYTo1xiVidcYrBhGoe698gd1dDY8LtYLNaDJwt24gngGAMBxQB0G5NKGjq0a/eeqypenywvD1nGqAaAdWvXltmK9EKnNzmMlzRswfqnn84HMM76Xf34ggXhZUuXXJZrZ82Y7rdCZqCjcmLX7j1BF/LjBprfdk0oXXgcdLU1g2RsTqumLrzz7Xcw9blDiF/4G6KaZ7OqasMYY9usJjRUVYXgovL0qVMnmxoaX/V4tK8n8lICMCtHbSJi+7gQbpMN4fPL2jSkxm0cOxlJUfw5c+ctdvGSo7aCO2AjKqNth9s8kuPW2tmhg/pfNnenpx1zDNAJ1CRMomVQtR+Qrn+jrq4OqqGjn89fn5mV+SNVUZ/jQqwnYOfZj84sCYfDr3u93puTRIIuNaZrAZoqSUJVUxsBozrIW59FCtOE1OSKD49/5JGwi6HG2ciHax6cO3u236YX2rh5c6o+nDDu4ctYZklxkd8OmsuzPpxmsV0GWimANztrAZMIXt1A99bI6yd65j6yacSwcVGvZ6hSH37iXHMLsrJ8yMrKOtQts9uQ+k/r/Y0NDbUZGRkDma2fmcx7xOhuWJuMth5zvmP1FaRpGIc3bt4Smj5tWpmiiA+EUIIrKitThlhVWekXQozjQtip806rSZxv20BNAfWjSZOCmze129OrnTlrVo1brq34SWXt3NmzXVttEyeM9zsoe8gFdH9JcZE/6W3WPMttXljTEWhvASgCsOdKgBlE6BmJQjWMZb8Y0n/R9hsGT+SMb+0bjUFq2gNEVN3a0vz7tra2CL/IhhPRM94Mr6+9h1lsk9EkAKdAgBACLS3Nbqt5TQePE7QiREHSaxY9sRCKUCAUAUUoTv3xto5IIB2hsQwcsDHSZBurXa518ZbA1MmTTximEbZ1N5xEx8leT5cUF4UsXTv5GtvhfpolewHcCuAPrtGQEtS/X3NrU1hVbn8ycMOi9TcOPZBlmFv7RKIwE9vz1zPGNimK+mdFVd4XQjmoqpqPrK39FGCcgXH2PIi2IrFnB6EoaGpsvBq6bzdcfif0Rk+eMqUmDQn5IA3LC06bPj3YUQ5cuXp1rYPdJpmr83zYJScGLbAKHHls9BXbWDZ5FcAdAB4E8CSA4Unv8sV1+KKx/3klL+e+dTcMHn4us1tTflskUyGCyfmlvbcUM7z0naydguQ5xliYHCuJAIhLZVpn82stAFSvWzdozqyZAWviAx1ghKaVlrqRmZ02IuH8+wwrn7hR9tFOD6taUz2jdNpjB225+I1t23ccsHLaQQdzDNiY4WgrJKaus+q0dCXXpQRy/rqb0umN04mW94zG+nApZ/4sv8+aZ/P7zvcQVfSO6wDnyX22di/eMJZ4JcH+m3FmFd4MROxOi/ykRNNUhMNhrFxdhWtZSoqLpK2UufnzbYKm2Vz06fov6zT1+jVD+//tWF5O3YCY3isTgMk5OLHk+yXtD0YpD0uERZvnEatwAgYApiEhuHKtA5b/ebZ0Ov3eY3Ys3vx8r9zXDvXqPnRoa+SiV0pISr0/0h4o65NRe8CIEjmNMXoNwEJXgiMNKIrANS6fq/7s/MuqRFCkRG4s/hsQ3QiiMUQ4SmQHx3aAWWDaPCyR0z4C8O1EG9rlkBJMXPPv0I5yKcz/D0ADwKW81BSU+DWICghUBMJJJ2jMDUxGz4HoJgD1HRfs+HuQoMuOwhea0zqSvQTaC+D7RHQfQN8kot4g0oiojYg+IqJjRLQfwCupt3z+jsXqoX7ml4Co6x8wvnrS9Q8YXaB1SRdoXdIF2rUi/zsAQIExlhCr7cUAAAAASUVORK5CYII=","LinearFilter","Sprite","SpriteMaterial","clientWidth","boundingSphere","computeBoundingSphere","ESElementType","MODEL_IMAGE","PlaneBufferGeometry","DoubleSide","XZY","model3D","params","_id","coord","setX","setZ","canPicked","_height","removeModels","line","vertices","radius","sin","rectangle","startPoint","_normalizePoints","ShapeGeometry","Shape","_createLine","rotateX","getWorldPosition","intersectObject","marginTop_","marginTop","2px 2px 3px rgba(0,0,0, 0.3)","6px","screenCoord_","screenCoord","mapCoord_","IsScreenCoord","padding","contentHeight_","content","<span>气泡marker</span>","content_","<div style='overflow:auto;height:","px;'>","</div>","borderStyle_","borderStyle","1px solid rgba(0,0,0,.2)","borderColor","rgba(0,0,0,.2)","255,255,255","_tryInit","es-control-popmarker","rgba(","border","span","es-control-popmarker-bot","overflow","borderWidth","20px","solid dashed dashed"," transparent transparent","-40px","es-control-popmarker-top","-39px","input","button","10px","8px","0 0 #eee","24px","webkitAppearance","bindCloseClick_","insertAdjacentHTML","beforeend","getBoundingClientRect","getMapCoord_","getMapCoord_Z","getScreenCoord_","popDiv_","created","hide","closeCallBack","fontsize","fillcolor","0,0,0","strokecolor","模拟文本","unspritify_","unspritify","slotsLevel","ESMapPoi4","setfontsize","setfillcolor","setfontstrokecolor","once","points_","holes_","MULTIPOLYGON(((","GLEN1","hasHoles","GData","config","getDeviceWH","getDeviceDPI","maxSize","getPixXY","max","gradient","rgb(0,0,255)","rgb(0,255,0)","yellow","rgb(255,0,0)","getContext","renderShadow","boundVal","shadowColor","rgba(0, 0, 0, ","shadowOffsetX","shadowBlur","arc","closePath","fill","colorize","getImageData","getPalette","putImageData","floorBase","_hasHeatMap","disposeHeatMap","uuid","matInfos","modelBase","_color","antitrans_","fillStyle","fillRect","cachePoint","clearPoints","addPoints","randomPoints","random","JSONLoader","load","setTexturePath","rects_","collision_","materialPt_","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjRCMjc1MTQ0M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjRCMjc1MTQ1M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NEIyNzUxNDIzQ0IzMTFFODg3NkJENkFDQjVCOUI5OTciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NEIyNzUxNDMzQ0IzMTFFODg3NkJENkFDQjVCOUI5OTciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4Bj/RUAAATkElEQVR42pRbT2xex3Gf/fiJ/yKKlEhbov5YduvGdgoURe1DhSY9G+3Bl7aH/IFdo4kLBIiLJI2AXpL0UrR2CiSXQmgQJSjqQ3Qo2qBteisQ2G6BKocAjmPFbizHEmWLIk3RIinK30xmdmdmZ9/7KMkf8fje27dv3+7s7sxvfjubfvBvPwBKAAmI/+TMN/wjItDLnCoPk93zNSWCRPoMLK+/kEtL5b1jnPEUnx/h5w/zex/l1COcZZ6PuZyLYJMzbvDlFc5zgfP+jK9f5VJf5jyXktYnn5PViGtMep30ebJva53kGZUM3pxEEH9DAsylkjYME5kIytessZKCoY1UPkGcmFKyG3v+KB+fZCH8Aac/TF4RynkoCCrfJ5gTYfCD45zwmKVrYT/jq//g8wsIdF4yJxVwrUfJS9YIvbc6Nv9NalqHYS1A5UredyU9QSgIXKr1PlnDpTef4es/5cSPQeiFIsQUGlX7KEGT3Py0Dg/zWYT4Rb79Kaec5fMZvt/0V+q/0D9VzLX8IHj9+gBBe4XKWe6JyGVG/qwUKqMAqX6TUxaQ6Kuc500eDc9x1o8VIaNLPN8jad+g/4fQ5vJ5anox/8morH3IZdNzXNSbfP9VTl+wukH4lrchlkkUxo2NRIIB5AaVB6hCMIHEwmWogzZMC+CBQE/x+eec8DVEOOQfaRqdL0rZWKSHWK5xVA4pmxC98bXyWL6X82taqY1862vl2/QUl5hQOw+BfJTrXelYKVO+Ecvhi0GdS1Z5lX0jwXCNuWIPcoE/4sLO8rEkhZp0iWqD5Q8JvGEYe5yPG1s38mEVovweeuPzGWMdSBvgxxKfzvLxI37w666HYv5Oe6qAizCGRJ2J1/1RUP8l6x/z+dt8c6B5s1cMNY3tZ2PVv7mZr2ZnZ6tC2PPNoFL6Vf49Pn7MT/6Mj3PRGsUyZDykTqUH1JFWK73aq6Kr+fw8H9/n4wBBJ5/n3yO99wzg/fffz8cd37u740CuG4DUMXWf90dGOYZA0QZU5dT5TfIj0b6f7Ak29bt4jEIvtrpTuDTeMQeMswDjy7r9iIUv8TvL/I5Yo907VXeIjiayXhv3uUk+/pWPx3sVTKoTYexI7c2k9p5ga2urDE1ULBFAFZF1yZjSvJppbNOodNQhPp6IQhgnjDoCaGzVJc93uo3vZv/QvcQ/abw03K6zHgi4YW9R7vW8l/dxrftnbvdGHQFdhVd+f8PHp+486nr4Iuq0zk07/O16ZmZmXLY9vpb2+FDvW1L3S3yc3qsstwIZOTVTgP6Ix/jpfo0q7KwYvFMRClq3gZK1/Bs3blQB8PXS0qIOeYgOh/op4TsByHRhuYtFoZ9i2q9w3v/jl89VWJ9aHZCiH4C5Zb/GKd92zRlgZLnEgL0NsKTOlDBBYRlUuSWkgm4FsMXXeTZwud4JJlOx+wqj3UHTshzGk2lZqyYFc5oT/5HrcZ5v/r84UeQO4DADi1SkRgWzS47v8dW8VSYrx1w51Xnq2KSufVbpotYkFeOpTlSpqJQ54hzb29suALkmHBWvzfwEF0QBP+6daF2Ko4bVxIgE5X2k6MCaNp3nenyPE36fzK3EMtoGBkPRbTE+yfcfL4gLFfcX1IQRq1OBtKhQuiA4yorNkBYSVuSmcFbStre2XQGaFdja3nE8UASIjtYolG9p0OAWbPIY7DUorvX4OCc/RY4HSvl5BPhwI1jg09+1/lTHFbQp0czVOL2p43U1U9q1ft8q3IDp6ameIdhLz1fdNT4zxbpVbPq3XIV/4Vffs7QBWk8VqTzLArkHK+ZXJ4XqNVAYDYrNod6j4/gWt9sokVET57/9JK2+g+03Qhk9fwApjEAM76KmhzIJ7+HrZ33Uiy9QtF+Wzn6e/19IhE4plAlfFFCZz8khZRWuskUihFT4BASdpxCBkipRfh7nf6MHzON0pwWcpSKlpEjNT3LdlUJvp8bd9X7XeqljxG2Evxc+QYb8ENHHyJ9zjkN1SKXArtRh14CeVCEeNewMjXWOsqw5/87OzlgBjEYYTN0Yt4raM0Ur0DhRfe8pPJE2PsPn5yVxqCZMRPs5CPa8mKsKjCjqBVUYpJrezVKEo/5qavgZafxoNBoDlYtgpqemgxEtTFIKzaumPzWCjw6rI4Ae/tC6JHiGn35DbgoOIDrFN7/ROCVOJqJ/wGm91h4WXNBRgAZeSEcJ0giuXbsGG+9twF4u+FtvvQXz8/OwuLgEE4OBu68GqLJJdSlQoOZSwAOVAiOdmgV/qKkv/suDfHWKR9tLBQeIj9/1XJTHc4k6cUoNAVxJ1YD6GvBNsL6+Du+++y588MEHwTtMsG/fvmwCZUTYCJBjdXUVDh8+DAcPHgSqkKqn7aMwvP2V3dWGp9ayVGL3T/ibLw2xgInHtavqUHJXzyGZo7+CRYJuSO1sNbFJ2SuXV7IAssnhXj3EjTqwMM9DfQYGKkl5f5tN48bGdc67Brdu3YK33347W4ajR5e5ToNCqaWWtk+xcRGE2SShODKoQavS5pR1ANJxvnnY+pCC9gRHXZXWSnWA9Hxd6tjgy5cve+P3798Px44dg+FwH0CgR62w6enpfCwuHoJLly5lB2ltbS3X5+jRoz6tovNGHcPfVYI9pUgNyHiITyfEGfrdyMOaqcpNTVTNmgowTAql0ccwGPxbX1vPcz6r3UOHYHl5ucxjxKq1MDonRRATEwM4ceIErKysZAFIGVNTU1wGT4cwrFPDoZkW9BZAMIhhEaXqDXXgTrEZxN8ey8YnwwfQ8vuN+TMlV5WmICGZ0ytXVnLvSc/LfCanojtkPVGnJ0uBhw8fgd2bN2GTR8KVK1dg7sAcK8aJihF6/jfu2fe9xZGKJH9rwD3ySFaEaLTxCEZjMXiL9x35BcRmfsBVVmIyj+W3fGTZ8T42KE7yjhoUF6lrkf6R5fKulHX13dU+O4yG/UcBbUbUiH6mMaiSv/uITIGTpMs9iSrN1cgwBdbINWtfyiLUmzd3YI2HrTRYtPjEcKKsAzSjhcYDqTCEy3SYyGZRpsHa2jWYm5vj6TAJaZDG4P86betUT77AssfvpOCA5Tx8DGb6FEhhaUnnnWGArOEpN1YQ3M4Wn3e2swmLXt78gfnSU6nqlg7/3RCy0ECeorhFAFevXuVv3YQLF17LlkSU5cwMH9MzMDM7m3VEqquktTT7XjDn0C6gLYkOmIPQuz24qdc7XAFprB3dxvbIRP7oJPeWLXC44kxhEdUUSopLYuBr1ELQSOOc2tapZHR6/JZQavHIQqk2PV9jWHZTWe0XKDzXMCy5Z29mlzU2+I4LKF0qeXKyVJjMXmDD5HSX3mMfNFMOylTY3d297ffuJJRZHSmgI7vwAmmuOEOpIKekbm1BZlgUlx4fVgBSho+QFJ0zAzB1NAQWLAM4Ra8+h5uy7vKXe9zqnombkdPv1CFFN/k8VypSumZqeio7JfPzB32xJMPU7S0eGXc3KqTHnO8naOCs6YQyJlNQtKmjFwr6lLJu963Y29LTZQpMs75I1WxawzEGfsAmI0HcJAlOiH6/m3Xz+CCzNTM8hBYWDqrZ5amyU5Tglhw6ZWJFheycyXx/J3KD2mWM1CBQCISnuMlbjfdojbWGyiFKUeBytCpSBmpjk1FnyjkGjuL94YhohfMcjSExjqLUUzYy0t1j/cYkS3mSP77A5q66tNvwi1+8mXvtGiO5o1zB1CHsu8sPvmiZKDgy5Y1ralJFp9z/wAOs+afLFOogz7p8H2BxSlWvp04bykurAoQulvmFSiRiS3bqvVNPHb1g5Gcug++nRCDzC7nXxAPcvblbwRK2lFchY/WbUIGLlSdIUMqQssQcZs4QrF41XwVjem+oExWcAfp3UYWlwOyicIKvOqKzF3LmkSKuwAn21uc5bUQBNVK+X1xazENV3N+LF9/MCkjSMSO/Us7IGjtSwXIjR1KOBkzIO/KulCFlLS0u5fqNsHJ/GOthHaV1HoW6RxRalKF3xKuyPP4Tb7iFmDjZiF4ghrPR3YhB6qFHxaFZZg9O0sUbFKIjC8EgKEbIq+VZz2QLQvzOL/nd93IZ4hJPDAe1F53IRR8J5BrfRmMZCaVuoMLAQvbmUZLz/WTIPfNydek6oQkYfH1fRCXX2NQLjKtLU4vsAUoAxDX2C955551sRU6ePJlJkEhcdS3ErQ92uecvwsbGRi51cXGRPcFFh9MBkzdcY5eRpw5fHheAQ6DY/wgU/iWnvMbj7CGIjIotQYUwtNTxvVPE3QHjkCrO+44fz0N69dpqHgnXr1+He5aW4CD7/LMzH2kWv2+wFVlbX4PVq6uu9aXx97FrXFzoAGRTYRMy4ZGCi9tA4MobOiuZmuX2CwnTW0qKwg+5JQ/1V57pdvRCu+ZP0HF1y+++k/fB7EdmM8MjXt1l9vPlEEwvo0GmhaRHMzgcDuE4C2+JhVXjjmgMr9HS86T+O411hHuBGP9JBQjll87x+88SmJmoPJdzfU4sVo7eHI+UbCG0jpTYW8LyLLAWF40uptGY4S47XBihRbj33nsz/M09n2qcYYrMrq9HgENtc+CcAIXqa3i9bF0B4FyJD8DsGLzE77/Ow+nBilCDnya0GLasX/EgjdIK/GGuCFT+0Lg87vHDR47AARbEK6+8MhbR3X//AxngJFVeHlaji58tx4PNqgV1o0ahAiLAGiKr64nc1vSSCGmoml+Sz/D/5yIeqYzreO6/tyBBFOjoqkFtjT/jhKkp9+rir7i5U2p+U89/6HJ9qRuTHNYtE3SCPiA1Cp1TzkgUFZYRgKY+zrCk/4ofHnTiA6vDlgg6DaeOU5faFalUR1EK8cGitGSod9cHJY0MfaqCc//AqXmtaYKKTktUIjQRxL34IooIe52vzpCyP0PyENLEThF+U6I+e8tjYQkqjWHkxvdSVI6pIeQFv1uMoP1yiAxioEdIBddRZA1XWUcDNgHSNDa8Sn2Rb3HBmzYthmZilJT4Jnfk5znhnvGBioUh7i7f1VWXMaYyLrGr2ZyVxnYENjszC0gUBKwhO2ncEmMM544hL3SbuKX87yr/+5ZCmVz20HCzDrT3+PI0V+47JpQm/ohU+TiTU2OLCDq9RZXpSTHWAMSbm+0JQCiugt6Sx/igj4KwaEP1uxCDut0atXHjiRrYdZrv14wDlc8MSAlQg4sMK7/L6S9ChLvBiXHWFQx6gq/FV3gMGuGhON1cy+xzIUzPFLrKfAq5FifKWWGPMYhlWKQ6tbjfYhIgOEWogdotZH6R6/dd1LLs/WF1I8MWBKIn+fp8ktia3kRIzZJ0/ynUcHvqAhBq5rwpQrkuMqI6z2mcLqE9eP7OuqEh1Pq5Da7XkxTX1TVvP1i6lPUGv/BZPn/ftW3cfZC6Tn1kdDsmdI/IP7H3JgC59pCXEA5Xl75bNreuUneneFjRaxvFbUlv9OJ1Ug6RoYY7KyMin8/J5oQSkBQWLQBrMBN1Q1W0DPO/LdS9WQwp19brbgHUU3Qa3nZmWKQIwZ2DspEqF1Dr/DyfzlUvVM9a/6Ht5Ehh2FQDgqczW5TSp5IrKGi8Mgoh7mUd0Xwp9GUuY2JCOF/m9FsTqK5xhNhQ9xilGOqSKh70dYBUPVbSD3HqP7NAvpLCXick8gDPjANiEEII/zQqTEp8mjMvcsLjBMEr0zGYQgV8ATLFzQnBtVCFJZeTjPoE/UlFJoX7B2wWMAt4s6ajeuEah6Sd1tpcTUO1BkQ/REpPlwKxQmqqgErSB+XFsJXEFFGNudvluyf4+gWP4rPdHDodsl5FbFkj3y1CDYNj21eSor88FYxNAtPeRphAiE2ESmeZcHuEjDNTL/D1E5ywC7Yw01iYSsx4kFT1mUk/EBcQJOScPs3nFe7JL1lvxICLqksxIDLsBDZT4f1VCU2z7XfSMg86dD/AoTbV6C8nOtWM9YOjMwL8Br/yl7Jnoi6IYd2r5qG7paxsBlPTkKRmKMw90LhlSl/mq//ldIkjPuBNJuoHIoFpbzJdVoOrsyBIA6LqpgOKC6eUgo6p0QvZMdXQXne8SmOu8/+8ZcYaSimEy0DHPJZoC5kCtg2OfIjZEhnZ5iedGoUPZD8a6VHO9SI1GhrrBiXdKRaDG6EJrCy4aHq6cPql7Br2hmgbnSrHhxpJErf1oQZb8N+LnPY7IJYLwxY9MucqLN9rKC6qtRpQ2C2W6em8o436zAuYacqQ8XV+7xN8+TSbvtXa7MjSajlEvoENw7Y6OctS99TUvqKAA4okMJI2TK1AbFqcsvD6LLynOekTfH4DjdCFsEfI4pxDGrg5h7JtDiniavSGdLefxY2pmuFsDq9D+jonrtkHzM76tjWEpjwLZOhHidQgZxM8Omtc0SV/j/E8/TXKtwHP5lKJoN23WPc9YrASXpaO8onHHnvsDquMd9wPI2Gf/83HP3BWcTROVG/yrsu429+rGswt22D+S7/94TdahQxDWzOzLu7G+rWx+1U5Wcha2NW9yZfP5xBUSI/yk8/wkz/k+we97MDytFsRO/uQ23jQ1znl3/ninzjhfEVTnTJTDO6kdm9z4GwgjOa8aYoqDdNwbJXoDP45prqTPAY3UbOiKM/Py05vTvkLTj/Giaf42W/yKw/x449yRY7wFJBV1lnOe0u2EHL6On9znc8XWFu/xuW/wj7By/zsEvkGjO4O8OoQxH0M7j5TCkE3VHkjC5jg618JMAD1kaihzbRwnwAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAA9RWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIgogICAgICAgICAgICB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIgogICAgICAgICAgICB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE4LTA0LTEzVDE3OjUxOjE3KzA4OjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTgtMDQtMTNUMTg6MjY6NTkrMDg6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE4LTA0LTEzVDE4OjI2OjU5KzA4OjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjE3YzU2N2NiLWM4YzMtNTM0My05OTQ0LTVmMGVkY2NmMzI4ZTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDozNjU5NDIwNTNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4MzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDozNjU5NDIwMjNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4Mzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDozNjU5NDIwMzNGMDAxMUU4OEQ0N0UwNDZGQzdDODc4Mzwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjM2NTk0MjA1M0YwMDExRTg4RDQ3RTA0NkZDN0M4NzgzPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpiZGY3MGExNy1hNWVkLWVmNDEtYmY3MS0yYzc5OTFmNmE3MDQ8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTgtMDQtMTNUMTc6NTM6MTgrMDg6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6MTdjNTY3Y2ItYzhjMy01MzQzLTk5NDQtNWYwZWRjY2YzMjhlPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE4LTA0LTEzVDE4OjI2OjU5KzA4OjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgICAgPHBob3Rvc2hvcDpDb2xvck1vZGU+MzwvcGhvdG9zaG9wOkNvbG9yTW9kZT4KICAgICAgICAgPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4KICAgICAgICAgICAgPHJkZjpCYWc+CiAgICAgICAgICAgICAgIDxyZGY6bGk+eG1wLmRpZDo0MTNiNGUwNS04ZDAyLThiNGEtYWE4Zi1hYWVhMTJjOWI1MzE8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT54bXAuZGlkOjRCMjc1MTQ1M0NCMzExRTg4NzZCRDZBQ0I1QjlCOTk3PC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGk+eG1wLmRpZDo0QzQ2QTgyQTNDQjMxMUU4OEQ1NDgwMUYxQUY4RkNDNzwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpPnhtcC5kaWQ6OTQyMUI4QjMzQ0IzMTFFODkzRjZGRjlGM0U3ODBDM0M8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaT54bXAuZGlkOkMwMEIwRTdDM0NCMzExRTg5QTVFQUM0Njc0OUYzMkMwPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkJhZz4KICAgICAgICAgPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjY1NTM1PC9leGlmOkNvbG9yU3BhY2U+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFhEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWURpbWVuc2lvbj42NDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+WZs/LgAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAEvklEQVR42uSbzWsbRxjGn9ldaWVbyKsqq9YfmEaOVFNyyakXmxwLRddCIaeAwX+SS0tL/wcdSiklPtnQs/thR05aE7cJsuMPrWNJq5m3B72rDpGcW2fL7IKRpRlrPb993nned3ZWEBGyfHj/5ZcLIfS3DgCdNgFAdDOY+Lu5Qs4OAG8N3uVXCUABoFarZbcCEiHw4HMA8gBiAANWAGUBgH6uOb76V6yEMre9TguAY+g8xAqY5UEXWRV1APfSVIBjaPDEAy4CqAAoAcgrpeoMIRMhQAB8HnwPwLkQos4hYT0A0ibDGQ6DMyLKDADdCgv8e4mIGuwK1gNwNQB5VkHgOM5qlhQgOBQ8AHO1Wm1FCBFw23tpWaHpSdBjBcyura1VtLZ7xZn8z+OOBusTxyCAROo+gJnFxcWVpCGO449YIdYmQpIH6PCrF4bh0rhRykZaabHJTFBqV1lUKpVw/E84Tt12BQjtXC4AUS6X72gAVm2vBfSqkACI+fn58tgjXTc1ACZdwOUJMFetVgu+7xe0hZNy+/mfFQCnNidCM2yBfqPRCN/uUJwrNmwHMMvrAd7KykppSp/GB9XKrq15QB7/rgi5CwsL5WkA0nACx7ACCgDcarUaTHTwvFQWRhxD58jxTwGAU6lUJgGMnMBaBeR58B4ANwiCCQCe59UM27KxSdDVLNAJw3BGt0AtGQq+/+HHOwBe2gjA1yywfFvHu7XVxlq99tImF0iyvwJDEMvLy8GtV8NzjVeFjiGVeQwhv7S0dCsA3/frNgJIQsAFIMIwLEkpsbOzg+3tbTz64nN8/dWXGA6HcB3XuBWaCIHkPB4AGYZhaW9vD1EUYWtrC5ubm/j911/w3bffIJfP32VQVilA8FqABCCCIAj29/fRbDZRKpVQLBbRbDbx5MlP8H3/Q9sUQBjdCE2Ww9z48WOBKJrs2e3i5rNPAcOrxCYAxADeJAq4ILr8uNNBq9VCFEWIogitVgsbSmFI9Mw0ABN5gALQZwh0qtTVJycn1d3dXWwfHCDneVhXCo9GAI5szAQVq+AaQK9DdHmfCBvHx9g4Psb6gwfjjj2iNgwvjpq6O9znuSD+S6mLd/Q9fL6+DhsBSA6B/sm7ARzYGAIEYMhh0G9LeX5bx2spn9paDscY7QkYdJSKekT9KRPFBVJYEzQVAgrADUOgC6LLCQBE7Uouh0ouZ6UCJE+EEYDBqVJXUxRwpGD+XrlnEECPIfQ7UxRARMbj3yQA4hDo3maFjhCHaQAwFQKKneANgN6L6VZ4aLMCFCdCPQA3R1JO7AZ5HcfjNHjBQgD6PBB3lIr6RD1fiALHx/n9vb0zPV5sCwFdBX0A8oLoXLPAp0hpg4RnGECyUWp4SXT6PqtdCNF+9fBhGuM3fiNimCRG50SvtM9TsUDTCtDrgsGpUidaDtDOAoAk0ZMABn8r9UfS4KaUA6ShAMkT4fVvUr7QPs+EApKiqA/g6pmUJzSqABVSfGAiLQV0AXTV6MoPkeJheq+w4mSoy5Vhm6FkBgBxPRBj9NzQYZYAJBYYMYxrMfJ/ygoA8JXv8qD7NAoBlSUFJPcHFIB4kGINkCYApVniGVI+0kiFJf4HT4yOZ+asPz3uIOPHPwMAX8PDjLFTmrgAAAAASUVORK5CYII=","nextPowerOfTwo","lw_","materialBg_","lh_","container","setGeoPoint","noWebGL","<h5>您的浏览器目前不支持WebGL!<h5><h5>为更好的浏览，建议您下载 &nbsp;谷歌浏览器</h5>","width_","force","_isAnimating","times","delay","flashId","action","easeInOutQuad","MAX_VALUE","getAlias","followAngle","animating","applyMatrix4","cross","angleTo","PerspectiveCamera","followPosition","slerp","lookAt","multiply","Matrix4","makeRotationFromEuler","Euler","Quaternion","setFromRotationMatrix","isOver","animateEnd","rotateY","_stop","enabledUpdateSize","originPosition","ShowLevel","showLevel_","getPerspectiveScale","meterperpixel","setY","UserLabel","_lastScale","fontface",'"Microsoft Yahei","微软雅黑",Tahoma,Arial',"scaleRatio_","borderThickness","rgba(150,150,150,1)","px ","context","font","measureText","textspace","imagespace","fontstyleid","fontStyleThemeDic","platesize","platecolor","imagealign","pivot_","originPivot","texture","drawImage","iconPivot","pivottype","imageSmoothingEnabled","strokeStyle","stroke","strokeText","fillText","text","anisotropy","getMaxAnisotropy","generateMipmaps","external","makeTextSprite_","toRgba","setname","linear","_jumpID","_moveToID","_initY","ease","kill","_rotateID","_isFading","out","fade3dOut","fade3dIn","pivot","pivotOffset","meterperpixel_","vertex","yScale","cos","perimeter","_uvs","_up_","distanceTo","_rings","Vector2","Face3","faceVertexUvs","uvsNeedUpdate","divideScalar","crossVectors","makeBasis","setPosition","verticesNeedUpdate","data/","data/theme/","dataUrlPrefix","themeUrlPrefix","scalerOffet","scalerWidth","scalerBgColor","scalerColor","#fff","callbackByFloor","focusAnimateMode","mergeModelLines","minViewDistance","shadowSize","shadowAlpha","controlsScaleThreshold","showBase","loadModel3D","loadPoi","loadLabel","onlineServer","token","editMode","modelLines","isRandom","raycaster_","compassRaycaster_","mouse_","models_","enabled_","staped","dom_","init_","mousedown","mousedown_","mousemove","mouseup","mouseup_","mousemove_","addModelBase","ModelBase","clickCompass","cameraOrtho","compassAngle","removeObject","addPOI","POI","addLabel","Label","addModel3D","isVisible","traverseAncestors","isPickedObject","objectIntersects_","isPickedModel","over_","onOver","auto","onLeave","modelIntersects_","istaped","getPick_","curMouse","levelFrom","dTime","levelTo","cameraTo","cameraFrom","scale_offset","clientY","ESMapPoi","_setGeneralProperties","ESappendMapPoi__","loadTexture","doubleSided","locationMarker","rotateZ","mapId_","userFloors_","maxX_","mapTheme_","loadManager","o3dScene_","encode64","logotoken","Remark","ABC","Hash","share","DefaultCenX","DefaultCenY","calcSceneBox3","calcInitCamera","floorTempData","setFloorLabelVisible","setFloorPoiVisible","maxV","minV","asyncBuidExtents","then","asyncBuildPOIs","asyncBuildLabels","asyncBuildExternalModels","asyncBuidModels","modelLine","Promise","floorBaseLayers","HeightSpan","floorBases","/imagelogo/","createGeometry_","ESMapConfiguration","EXTENT_EPSILON_Y","addFloor","loadLayerComplete","extent","asyncWaitTime","modellayers","models","MODEL_LINE","MODEL_LIFT","RoomHigh","RoomLogo","modelText","RModel","CenX","/model/",".js","bclick","getModelMaterial","RColor","ESModelMesh","ESModel","shape","createPointsGeometry","strokeColor_","strokeWidth","LineBasicMaterial","castShadow","resolve","poiLayer","poilayers","ESFacility","facility","labellayers","Height","ESLabel","asyncBuildPolygons","modelbaselayer","ESModelImage","getModelTheme","LineSegments","polygon","mapFloorSpan","liftlayers","lifts","collideLabel_","lineTo","holes","Path","ExtrudeGeometry","POSITIVE_INFINITY","NEGATIVE_INFINITY","min","Box3","lerp",".esmap","map/mapdata!getmap.action?bids=","&token=","&t=","?t=","ESMapSet","versionCheck","VERS_ERR","WELL","bid","domain","Wi1zW29wWi5DWA==","TjY3SDQOTS4x","_convertFullData","tempFlipX_","styleid","_convertFloorFromSourceData",".theme","toParams_","the visibleFloors ","ARRAY_REQUIRED","or 'all'","DefaultFnum","defaultFloornum","FloorHigh","getOutLineList","Outline","Rooms","CenY","FsId","RMO","RoomLogoSize","RLSize","RMS","RMR","Labels","FSId","/imagelabel/","Lifts","_convertToSceneFloor","convertGeo2Geometry_","ESMapLogo","materialList_","defaultTheme_","modelOpacity_","color_","cloneObj","getFontTheme","typeid","defaultMaterial","getPoiMaterialByType","magFilter","clearcolor","roomstyle","selectedColor_","floorstyle","baseheight","fontstyle","labelSelectedStyle_",",1)","getMapScene","getControlsInfo","toFixed","setControlsInfo","userAgent","Android","iPhone","SymbianOS","iPad","iPod","MicroMessenger","getAudioToken","https://www.esmap.cn/escopeloc","/audio/baiduaudio!getToken.action?bids=","&tk=","AUDIO_TOKEN","playAudio","audioToken","lan=zh&tex=","&ctp=1&cuid=esmap&tok=","&vol=9&per=0&spd=5&pit=5","invoke","getNetworkType","play","audio","ended","getSpriteScale","getOrthoCameraSizeByPerspectiveCamera","[object Array]","_merged","lastAlpha","Geometry","updateMatrix","matrix","receiveShadow","fov","aspect","tan","callAllLayerByAlias","getDatasByAlias","getModelLabelObject","done","includes","return","BufferGeometry","positions","addAttribute","BufferAttribute","indexes","setIndex","QRSTUVWXYZabcdefghijklmnopqrstuvABCDEFGHIJKLMNOPwxyz0123456789+/=","getRouteAngle","screen","deviceXDPI","deviceYDPI","DIV","width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:99;visibility:hidden","offsetWidth","parentNode","search","types","ALL","keyword","MapUtil","getMapCoordDistance","distance","TextureLoader","crossOrigin","WebGLRenderer","highp","sortObjects","ESMapError","setPixelRatio","devicePixelRatio","autoClear","shadowMap","PCFSoftShadowMap","setClearAlpha","Scene","OrthographicCamera","rotationAutoUpdate","ESComposerRender","AmbientLight","ambientLight","mainLight","DirectionalLight","shadow","near","far","bias","_shadowAngleX","_shadowAngleY","secondLight","shadowDirection","applyEuler","YZX","clearDepth","mouseSelected_","selected_","defaultMaterial_","selectedMaterial_","setDefaultTheme_","setSelectedTheme_","#33cc61","#4a82d2","#F4FEFB","_doColor","_drawNormal","_drawArrow","_drawGodArrow","godColor","godEdgeColor","_setMaterialInfo","arrowHeightPercent","arrowWidthPercent","arrowPercent","godHeightPercent","godEdgePercent","#ffffff","shadowOffsetY","godArrowPercent","godArrowWidthPercent","godArrowXScale","godArrowColor","maxDistance","minZoom","maxZoom","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","EPS","rotateUp","elements","panLeft","panUp","initDistance_","initTop_","getDistance","rawLevel","_scaleToId","checkScaleLevel","__lastScaleLevel","dollyIn","orthoLimitSize","begin_","phi","theta","move_","end_","pushPhi_","setFromUnitVectors","inverse","atan2","forcePhi","forceTheta","applyQuaternion","distanceToSquared","pan","autoRotateSpeed","zoomSpeed","mouseButtons","ORBIT","enableRotate","ROTATE","clientX","ZOOM","DOLLY","PAN","rotateLeft","rotateSpeed","subVectors","dollyOut","enablePan","removeEventListener","stopPropagation","enableKeys","keyCode","keyPanSpeed","BOTTOM","LEFT","RIGHT","TOUCH_PAN","TOUCH_ROTATE_DOLLY","controlsRotateThreshold","enableGestureRotate","autoRotate","MOUSE","MIDDLE","target0","position0","zoom0","change","notChangeCompass","minDistance","mousewheel","keydown","contextmenu","EventDispatcher",".layers-wrap","btn-floors-wrap","layer.png","layers-wrap","btn-floors-wrap arrow-top-btn","onmousedown","btn-floors-wrap arrow-down-btn","checkBtn","layers.png","onmouseup","ontouchstart",".btn-floors-wrap","changeFloorsSelect",".layer-btn img","createLayerlabel_",".layers-wrap > label","layer-floors-wrap layer-btn-default","textAlign",".layers-wrap>label[class*='active']","1px solid rgba(153, 153, 153, 0.45)","filter","fNums",".btn-floors-wrap.arrow-down-btn",".btn-floors-wrap.arrow-top-btn","MouseEvents","initEvent","margin_","init2D_","initFloors","initFloors_","expand_","expanded","tool-wrap","zIndex","white url(","less.png) no-repeat 50% 50%","more.png) no-repeat 50% 50%","createTool_","tools-wrap","to-3d-view-btn","2D.png) no-repeat 50% 50%","3D.png) no-repeat 50% 50%","groups.png) no-repeat 50% 50%","group.png) no-repeat 50% 50%",".tool-wrap",".tools-wrap","getElementsByClassName","controlViewMode","ESViewMode","MODE_3D","tool-floor-btn","2D.png) no-repeat","MODE_2D","controlFloor","group.png) no-repeat","groups.png) no-repeat","IsAllFloors","easeInQuad","easeOutQuad","easeOutBack","pingPongLinear","now","_getValue","old","delta","_setValue","obj","actionArrayProps","bounce","transformTo","DistanceofTwoPts","calcProjPoint","zoom-wrap","zoomin.png","zoom-out-btn",".zoom-wrap","scalelevel","1.0.2","callbacks","ESHeatMap","ESDirection","modelLift","externalModel","poi","This map has already expired,please grab the latest version!","Please provide the corresponding token!","Token is not correct","this domain is forbidden","cannot get audio token","data type must be an array","plane","circle","dotDash","doubleDotDash","raw","small","onerror","JSONModelLoader","ESMapOptions","ESMapPicker","ESComponentsManager","ComponentsManager","ESScreenCoord","ESMapGestureController","ESImageMarker","ESTextMarker","ESButtonFloorsControl","ESScrollFloorsControl","ESToolControl","ESZoomControl","ESNavigation","ESNaviResult","ESPopMarker","gestureController_","moveToAnimateMode","gestureController","fullScreenAvaliable","available","fullScreen","activated","request","canel","queue","markerQueue","checkO1","ES3DMARKERNUM_ERR","attributeCount","lastIndexOf","loadExist","examinEnd","moveTo2","self","depth","setAlpha","modelLoadComplete","alphaMap","map-container","box","11px","100%","5px","-1px","3px","7px","#000","barBox","barBoxer","textBox","&nbsp;米","Writer","roots","nameEn","Brief","address","BuildingHigh","Tel","FirstRotateAngleY","FirstRotateAngleZ","emptyArray","panos","other1","other2","encode","Type","adcode","FirstRotateAngleX","DefaultCenZ","ScaleLevel","FloorSet","NavSet","PicSet","encodeDelimited","verify","version: integer expected","Hash: string expected","_id: integer expected","Type: integer expected","name: string expected","nameEn: string expected","address: string expected","Tel: string expected","FirstRotateAngleX: number expected","FirstRotateAngleY: number expected","FirstRotateAngleZ: number expected","Firstscale: number expected","DefaultFnum: integer expected","DefaultCenX: number expected","DefaultCenY: number expected","DefaultCenZ: number expected","x: number expected","y: number expected","z: number expected","minX: number expected","minY: number expected","maxX: number expected","maxY: number expected","ScaleLevel: string expected","Remark: string expected","floors: array expected","floors.","navs.","panos.","styleid: string expected","token: string expected","logotoken: string expected","other1: string expected","o1: integer expected","other2: string expected","fromObject",".ESMapSet.floors: object expected",".ESMapSet.navs: object expected",".ESMapSet.panos: array expected",".ESMapSet.panos: object expected","toObject","defaults","toJSON","util","floornumtext","POISet","LiftSet","RoomSet","decodeDelimited","object expected","floornum: integer expected","floornumtext: integer expected","NameEn: string expected","AS: number expected","Height: integer expected","Elevation: integer expected","Rooms: object expected","Rooms: integer key{k:int32} expected","Rooms.","Facility: object expected","Facility: integer key{k:int32} expected","Facility.","Lifts: object expected","Lifts.","image: string expected","imagesize: string expected",".FloorSet.Rooms: object expected",".FloorSet.Facility: object expected",".FloorSet.Labels: object expected",".FloorSet.Lifts: object expected","objects","PointID","ShopID","Tid: integer expected","RL: string expected","BC: integer expected","RC: string expected","RH: number expected","RM: string expected","RMS: string expected","RMR: string expected","RS: integer expected","SL: integer expected","CenX: number expected","CenY: number expected","Outline: string expected","PointID: integer expected","ShopID: integer expected","FS: integer expected","FC: string expected","X: number expected","Y: number expected","SH: number expected","h: number expected","F1: integer expected","F2: integer expected","ST: integer expected","LT: integer expected","LM: string expected","LS: string expected","LR: string expected","LO: string expected","X1: number expected","X2: number expected","Y1: number expected","Y2: number expected","O1: string expected","O2: string expected"];
!function(x,d){var _=function(d){for(;--d;)x.push(x.shift())};_(++d)}(_0x09d6,300);var _0x609d=function(x,d){x-=0;var _=_0x09d6[x];return _};!function(x){function d(x){var d=document[_0x609d("0x0")](_0x609d("0x1"))[0],_=document[_0x609d("0x2")](_0x609d("0x3"));_[_0x609d("0x4")]="text/javascript",_.charset=_0x609d("0x5"),_[_0x609d("0x6")]=C.p+""+x+"."+h+".hot-update.js",d[_0x609d("0x7")](_)}function _(x){if(_0x609d("0x8")==typeof XMLHttpRequest)return x(new Error("No browser support"));try{var d=new XMLHttpRequest,_=C.p+""+h+_0x609d("0x9");d[_0x609d("0xa")](_0x609d("0xb"),_,!0),d[_0x609d("0xc")]=1e4,d[_0x609d("0xd")](null)}catch(d){return x(d)}d.onreadystatechange=function(){if(4===d[_0x609d("0xe")])if(0===d[_0x609d("0xf")])x(new Error("Manifest request to "+_+_0x609d("0x10")));else if(404===d[_0x609d("0xf")])x();else if(200!==d[_0x609d("0xf")]&&304!==d[_0x609d("0xf")])x(new Error(_0x609d("0x11")+_+_0x609d("0x12")));else{try{var e=JSON[_0x609d("0x13")](d.responseText)}catch(d){return void x(d)}x(null,e)}}}function e(x){function d(x,d){"ready"===m&&i(_0x609d("0x14")),w++,C.e(x,function(){function _(){w--,_0x609d("0x14")===m&&(E[x]||r(x),0===w&&0===y&&A())}try{d[_0x609d("0x15")](null,e)}finally{_()}})}var _=T[x];if(!_)return C;var e=function(d){return _[_0x609d("0x16")][_0x609d("0x17")]?T[d]?(T[d].parents[_0x609d("0x18")](x)<0&&T[d].parents.push(x),_[_0x609d("0x19")].indexOf(d)<0&&_[_0x609d("0x19")][_0x609d("0x1a")](d)):p=[x]:p=[],C(d)};for(var t in C)Object[_0x609d("0x1b")][_0x609d("0x1c")].call(C,t)&&(s?Object[_0x609d("0x1d")](e,t,function(x){return{configurable:!0,enumerable:!0,get:function(){return C[x]},set:function(d){C[x]=d}}}(t)):e[t]=C[t]);return s?Object[_0x609d("0x1d")](e,"e",{enumerable:!0,value:d}):e.e=d,e}function t(x){var d={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],active:!0,accept:function(x,_){if(_0x609d("0x8")==typeof x)d[_0x609d("0x1e")]=!0;else if(_0x609d("0x1f")==typeof x)d[_0x609d("0x1e")]=x;else if(_0x609d("0x20")==typeof x)for(var e=0;e<x[_0x609d("0x21")];e++)d._acceptedDependencies[x[e]]=_;else d[_0x609d("0x22")][x]=_},decline:function(x){if(_0x609d("0x8")==typeof x)d[_0x609d("0x23")]=!0;else if("number"==typeof x)d._declinedDependencies[x]=!0;else for(var _=0;_<x[_0x609d("0x21")];_++)d._declinedDependencies[x[_]]=!0},dispose:function(x){d[_0x609d("0x24")][_0x609d("0x1a")](x)},addDisposeHandler:function(x){d[_0x609d("0x24")][_0x609d("0x1a")](x)},removeDisposeHandler:function(x){var _=d._disposeHandlers[_0x609d("0x18")](x);_>=0&&d[_0x609d("0x24")].splice(_,1)},check:g,apply:I,status:function(x){return x?void v[_0x609d("0x1a")](x):m},addStatusHandler:function(x){v.push(x)},removeStatusHandler:function(x){var d=v[_0x609d("0x18")](x);d>=0&&v[_0x609d("0x25")](d,1)},data:b[x]};return d}function i(x){m=x;for(var d=0;d<v[_0x609d("0x21")];d++)v[d].call(null,x)}function n(x){var d=+x+""===x;return d?+x:x}function g(x,d){if(_0x609d("0x26")!==m)throw new Error(_0x609d("0x27"));_0x609d("0x1f")==typeof x?(l=!1,d=x):(l=x,d=d||function(x){if(x)throw x}),i(_0x609d("0x28")),_(function(x,_){if(x)return d(x);if(!_)return i(_0x609d("0x26")),void d(null,null);k={},S={},E={};for(var e=0;e<_.c[_0x609d("0x21")];e++)S[_.c[e]]=!0;f=_.h,i("prepare"),c=d,u={};var t=0;r(t),"prepare"===m&&0===w&&0===y&&A()})}function a(x,d){if(S[x]&&k[x]){k[x]=!1;for(var _ in d)Object.prototype[_0x609d("0x1c")][_0x609d("0x15")](d,_)&&(u[_]=d[_]);0===--y&&0===w&&A()}}function r(x){S[x]?(k[x]=!0,y++,d(x)):E[x]=!0}function A(){i("ready");var x=c;if(c=null,x)if(l)I(l,x);else{var d=[];for(var _ in u)Object[_0x609d("0x1b")][_0x609d("0x1c")][_0x609d("0x15")](u,_)&&d[_0x609d("0x1a")](n(_));x(null,d)}}function I(d,_){function e(x){for(var d=[x],_={},e=d[_0x609d("0x29")]();e.length>0;){var i=e[_0x609d("0x2a")](),x=T[i];if(x&&!x[_0x609d("0x16")]._selfAccepted){if(x[_0x609d("0x16")][_0x609d("0x23")])return new Error(_0x609d("0x2b")+i);if(0===i)return;for(var n=0;n<x[_0x609d("0x2c")][_0x609d("0x21")];n++){var g=x.parents[n],a=T[g];if(a[_0x609d("0x16")][_0x609d("0x2d")][i])return new Error(_0x609d("0x2e")+i+_0x609d("0x2f")+g);d[_0x609d("0x18")](g)>=0||(a[_0x609d("0x16")][_0x609d("0x22")][i]?(_[g]||(_[g]=[]),t(_[g],[i])):(delete _[g],d[_0x609d("0x1a")](g),e[_0x609d("0x1a")](g)))}}}return[d,_]}function t(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];x[_0x609d("0x18")](e)<0&&x[_0x609d("0x1a")](e)}}if(_0x609d("0x30")!==m)throw new Error(_0x609d("0x31"));_0x609d("0x1f")==typeof d?(_=d,d={}):d&&"object"==typeof d?_=_||function(x){if(x)throw x}:(d={},_=_||function(x){if(x)throw x});var g={},a=[],r={};for(var A in u)if(Object[_0x609d("0x1b")][_0x609d("0x1c")][_0x609d("0x15")](u,A)){var I=n(A),o=e(I);if(!o){if(d[_0x609d("0x32")])continue;return i(_0x609d("0x33")),_(new Error(_0x609d("0x34")+I+_0x609d("0x35")))}if(o instanceof Error)return i(_0x609d("0x33")),_(o);r[I]=u[I],t(a,o[0]);for(var I in o[1])Object[_0x609d("0x1b")][_0x609d("0x1c")][_0x609d("0x15")](o[1],I)&&(g[I]||(g[I]=[]),t(g[I],o[1][I]))}for(var s=[],c=0;c<a[_0x609d("0x21")];c++){var I=a[c];T[I]&&T[I][_0x609d("0x16")]._selfAccepted&&s[_0x609d("0x1a")]({module:I,errorHandler:T[I][_0x609d("0x16")]._selfAccepted})}i("dispose");for(var l=a[_0x609d("0x29")]();l[_0x609d("0x21")]>0;){var I=l[_0x609d("0x2a")](),v=T[I];if(v){for(var y={},w=v.hot._disposeHandlers,E=0;E<w[_0x609d("0x21")];E++){var k=w[E];k(y)}b[I]=y,v[_0x609d("0x16")][_0x609d("0x17")]=!1,delete T[I];for(var E=0;E<v.children.length;E++){var S=T[v.children[E]];if(S){var R=S[_0x609d("0x2c")].indexOf(I);R>=0&&S.parents[_0x609d("0x25")](R,1)}}}}for(var I in g)if(Object.prototype[_0x609d("0x1c")][_0x609d("0x15")](g,I))for(var v=T[I],O=g[I],E=0;E<O[_0x609d("0x21")];E++){var M=O[E],R=v.children.indexOf(M);R>=0&&v[_0x609d("0x19")][_0x609d("0x25")](R,1)}i(_0x609d("0x36")),h=f;for(var I in r)Object[_0x609d("0x1b")][_0x609d("0x1c")][_0x609d("0x15")](r,I)&&(x[I]=r[I]);var L=null;for(var I in g)if(Object[_0x609d("0x1b")][_0x609d("0x1c")].call(g,I)){for(var v=T[I],O=g[I],P=[],c=0;c<O.length;c++){var M=O[c],k=v[_0x609d("0x16")][_0x609d("0x22")][M];P[_0x609d("0x18")](k)>=0||P.push(k)}for(var c=0;c<P.length;c++){var k=P[c];try{k(g)}catch(x){L||(L=x)}}}for(var c=0;c<s.length;c++){var j=s[c],I=j[_0x609d("0x37")];p=[I];try{C(I)}catch(x){if(_0x609d("0x1f")==typeof j[_0x609d("0x38")])try{j[_0x609d("0x38")](x)}catch(x){L||(L=x)}else L||(L=x)}}return L?(i(_0x609d("0x39")),_(L)):(i(_0x609d("0x26")),void _(null,a))}function C(d){if(T[d])return T[d][_0x609d("0x3a")];var _=T[d]={exports:{},id:d,loaded:!1,hot:t(d),parents:p,children:[]};return x[d].call(_[_0x609d("0x3a")],_,_.exports,e(d)),_.loaded=!0,_.exports}var o=this[_0x609d("0x3b")];this[_0x609d("0x3b")]=function(x,d){a(x,d),o&&o(x,d)};var s=!1;try{Object.defineProperty({},"x",{get:function(){}}),s=!0}catch(x){}var c,u,f,l=!0,h=_0x609d("0x3c"),b={},p=[],v=[],m=_0x609d("0x26"),y=0,w=0,E={},k={},S={},T={};return C.m=x,C.c=T,C.p=_0x609d("0x3d"),C.h=function(){return h},e(0)(0)}([function(x,d,_){x[_0x609d("0x3a")]=_(70)},function(x,d,_){(function(x){function e(x,d,_){for(var e=Object[_0x609d("0x3e")](d),t=0;t<e[_0x609d("0x21")];++t)void 0!==x[e[t]]&&_||(x[e[t]]=d[e[t]]);return x}function t(x){function d(x,_){return this instanceof d?(Object.defineProperty(this,_0x609d("0x3f"),{get:function(){return x}}),Error[_0x609d("0x40")]?Error[_0x609d("0x40")](this,d):Object[_0x609d("0x1d")](this,_0x609d("0x41"),{value:(new Error)[_0x609d("0x41")]||""}),void(_&&e(this,_))):new d(x,_)}return(d[_0x609d("0x1b")]=Object.create(Error[_0x609d("0x1b")])).constructor=d,Object[_0x609d("0x1d")](d.prototype,"name",{get:function(){return x}}),d[_0x609d("0x1b")][_0x609d("0x42")]=function(){return this[_0x609d("0x43")]+": "+this[_0x609d("0x3f")]},d}var i=d;i[_0x609d("0x44")]=_(8),i.base64=_(9),i[_0x609d("0x45")]=_(10),i[_0x609d("0x46")]=_(11),i[_0x609d("0x47")]=_(12),i[_0x609d("0x48")]=_(14),i.pool=_(13),i[_0x609d("0x49")]=_(89),i[_0x609d("0x4a")]="undefined"!=typeof window&&window||_0x609d("0x8")!=typeof x&&x||_0x609d("0x8")!=typeof self&&self||this,i.emptyArray=Object[_0x609d("0x4b")]?Object[_0x609d("0x4b")]([]):[],i[_0x609d("0x4c")]=Object[_0x609d("0x4b")]?Object.freeze({}):{},i[_0x609d("0x4d")]=Boolean(i.global[_0x609d("0x4e")]&&i[_0x609d("0x4a")][_0x609d("0x4e")].versions&&i.global.process.versions[_0x609d("0x4f")]),i[_0x609d("0x50")]=Number[_0x609d("0x50")]||function(x){return _0x609d("0x51")==typeof x&&isFinite(x)&&Math[_0x609d("0x52")](x)===x},i[_0x609d("0x53")]=function(x){return _0x609d("0x54")==typeof x||x instanceof String},i[_0x609d("0x55")]=function(x){return x&&_0x609d("0x20")==typeof x},i[_0x609d("0x56")]=i.isSet=function(x,d){var _=x[d];return!(null==_||!x[_0x609d("0x1c")](d))&&(_0x609d("0x20")!=typeof _||(Array[_0x609d("0x57")](_)?_[_0x609d("0x21")]:Object[_0x609d("0x3e")](_)[_0x609d("0x21")])>0)},i.Buffer=function(){try{var x=i[_0x609d("0x47")](_0x609d("0x58"))[_0x609d("0x59")];return x[_0x609d("0x1b")].utf8Write?x:null}catch(x){return null}}(),i[_0x609d("0x5a")]=null,i[_0x609d("0x5b")]=null,i[_0x609d("0x5c")]=function(x){return"number"==typeof x?i.Buffer?i[_0x609d("0x5b")](x):new(i[_0x609d("0x5d")])(x):i.Buffer?i._Buffer_from(x):_0x609d("0x8")==typeof Uint8Array?x:new Uint8Array(x)},i[_0x609d("0x5d")]="undefined"!=typeof Uint8Array?Uint8Array:Array,i[_0x609d("0x5e")]=i[_0x609d("0x4a")][_0x609d("0x5f")]&&i[_0x609d("0x4a")][_0x609d("0x5f")][_0x609d("0x5e")]||i[_0x609d("0x4a")][_0x609d("0x5e")]||i[_0x609d("0x47")](_0x609d("0x60")),i[_0x609d("0x61")]=/^true|false|0|1$/,i[_0x609d("0x62")]=/^-?(?:0|[1-9][0-9]*)$/,i[_0x609d("0x63")]=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i[_0x609d("0x64")]=function(x){return x?i[_0x609d("0x49")][_0x609d("0x65")](x)[_0x609d("0x66")]():i.LongBits[_0x609d("0x67")]},i[_0x609d("0x68")]=function(x,d){var _=i[_0x609d("0x49")][_0x609d("0x69")](x);return i[_0x609d("0x5e")]?i[_0x609d("0x5e")][_0x609d("0x6a")](_.lo,_.hi,d):_[_0x609d("0x6b")](Boolean(d))},i[_0x609d("0x6c")]=e,i[_0x609d("0x6d")]=function(x){return x[_0x609d("0x6e")](0)[_0x609d("0x6f")]()+x[_0x609d("0x70")](1)},i[_0x609d("0x71")]=t,i.ProtocolError=t(_0x609d("0x72")),i[_0x609d("0x73")]=function(x){for(var d={},_=0;_<x[_0x609d("0x21")];++_)d[x[_]]=1;return function(){for(var x=Object.keys(this),_=x[_0x609d("0x21")]-1;_>-1;--_)if(1===d[x[_]]&&void 0!==this[x[_]]&&null!==this[x[_]])return x[_]}},i[_0x609d("0x74")]=function(x){return function(d){for(var _=0;_<x.length;++_)x[_]!==d&&delete this[x[_]]}},i[_0x609d("0x75")]={longs:String,enums:String,bytes:String,json:!0},i[_0x609d("0x76")]=function(){var x=i[_0x609d("0x59")];return x?(i[_0x609d("0x5a")]=x.from!==Uint8Array[_0x609d("0x65")]&&x[_0x609d("0x65")]||function(d,_){return new x(d,_)},void(i[_0x609d("0x5b")]=x[_0x609d("0x77")]||function(d){return new x(d)})):void(i._Buffer_from=i[_0x609d("0x5b")]=null)}})[_0x609d("0x15")](d,function(){return this}())},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function e(x){var d=_0x609d("0x8")==typeof x?_0x609d("0x8"):a(x);return null!=x&&(_0x609d("0x20")==d||_0x609d("0x1f")==d)}function t(x,d){if(x)for(var _ in x){var e=d(x[_],_,x);if(e===!1)break}}function i(x,d){var _=new RegExp("^"+d);return _[_0x609d("0x78")](x)}function n(x,d){var _=new RegExp(d+"$");return _.test(x)}function g(x){if(!x)return x;var d={};for(var _ in x)d[_]=x[_];return d}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var a="function"==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol[_0x609d("0x1b")]?"symbol":typeof x},r=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),A=function(){function x(){_(this,x),this[_0x609d("0x81")]=[]}return r(x,[{key:_0x609d("0x82"),value:function(x){this[_0x609d("0x81")][_0x609d("0x1a")](x)}},{key:"remove",value:function(x){this[_0x609d("0x81")][_0x609d("0x25")](fns[_0x609d("0x18")](x),1)}},{key:_0x609d("0x83"),value:function(){for(var x=arguments;this[_0x609d("0x81")][_0x609d("0x21")]>0;){var d=this.fns[_0x609d("0x84")]()[_0x609d("0x36")](this,x);d&&(x=d)}}},{key:"empty",value:function(){this[_0x609d("0x81")]=[]}}]),x}(),I=function x(){_(this,x)};I[_0x609d("0x85")]={getValue:function(x,d,_){return x&&x[_0x609d("0x1c")](d)?x[d]:_},getValues:function(x,d,_){for(var e,t=1;t<arguments[_0x609d("0x21")]-1;t++)if(e=x[arguments[t]],void 0!==e)return e;return arguments[arguments[_0x609d("0x21")]-1]}},I.id=10001,I[_0x609d("0x86")]={get"_hasWebkitFullScreen"(){return _0x609d("0x87")in document},get"_hasMozFullScreen"(){return"mozCancelFullScreen"in document},get"available"(){return this[_0x609d("0x88")]||this[_0x609d("0x89")]},get"activated"(){return this._hasWebkitFullScreen?document[_0x609d("0x8a")]:!!this[_0x609d("0x89")]&&document.mozFullScreen},request:function(x){x=x||document[_0x609d("0x8b")],this[_0x609d("0x88")]?x.webkitRequestFullScreen():this[_0x609d("0x89")]&&x[_0x609d("0x8c")]()},cancel:function(){this[_0x609d("0x88")]?document[_0x609d("0x87")]():this[_0x609d("0x89")]&&document[_0x609d("0x8d")]()}},I[_0x609d("0x8e")]=A,I.isObject=e,I[_0x609d("0x8f")]=t,I[_0x609d("0x90")]=i,I[_0x609d("0x91")]=n,I.cloneObj=g,d[_0x609d("0x92")]=I},function(x,d,_){function e(x){return x&&x.__esModule?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=_(2),g=e(n),a=function(){function x(d){t(this,x),this[_0x609d("0x94")]=d.url;var _=this[_0x609d("0x94")],e=d[_0x609d("0x95")];this.type=d.type||_0x609d(e?"0x96":"0xb");var i=this[_0x609d("0x4")],n=void 0==d[_0x609d("0x97")]||d[_0x609d("0x97")];this[_0x609d("0x98")]=d.isArrayBuffer||!1,this[_0x609d("0x99")]=!1,this[_0x609d("0x9a")],this[_0x609d("0x9b")],this._httpStatus,this[_0x609d("0x9c")]=new(g.default[_0x609d("0x8e")]),this[_0x609d("0x9d")]=new(g[_0x609d("0x92")][_0x609d("0x8e")]),this._errorCallbacks=new(g.default[_0x609d("0x8e")]),this[_0x609d("0x9e")],this[_0x609d("0x9f")](),this[_0x609d("0x9e")][_0x609d("0xa")](i,_,n),this._httpServer[_0x609d("0xa0")]=this[_0x609d("0xa1")][_0x609d("0xa2")](this),_0x609d("0xb")==i&&(this[_0x609d("0x98")]||this[_0x609d("0x94")][_0x609d("0x18")](_0x609d("0xa3"))>0)&&this.isArrayBuffer&&(this[_0x609d("0x9e")][_0x609d("0xa4")]=_0x609d("0xa5")),_0x609d("0x96")===i&&(this._httpServer.setRequestHeader(_0x609d("0xa6"),_0x609d("0xa7")),this[_0x609d("0x9e")][_0x609d("0xa8")](_0x609d("0xa9"),_0x609d("0xaa")),this[_0x609d("0x9e")][_0x609d("0xa8")](_0x609d("0xab"),"close")),this._httpServer[_0x609d("0xd")](e)}return i(x,[{key:_0x609d("0xac"),value:function(x){return this._completeCallbacks[_0x609d("0x82")](x),this[_0x609d("0x99")]&&this._completeCallbacks[_0x609d("0x83")](this[_0x609d("0x9b")],this[_0x609d("0x9a")]),this}},{key:"success",value:function(x){return this._successCallbacks[_0x609d("0x82")](x),this._isComplete&&_0x609d("0xad")===this._status&&this[_0x609d("0x9d")][_0x609d("0x83")](this[_0x609d("0x9b")]),this}},{key:"error",value:function(x){return this[_0x609d("0xae")][_0x609d("0x82")](x),this[_0x609d("0x99")]&&_0x609d("0xaf")===this[_0x609d("0x9a")]&&this[_0x609d("0xae")].fire(this[_0x609d("0x9b")]),this}}],[{key:_0x609d("0xb0"),value:function(d,_){return new x({url:d,isArrayBuffer:_})}},{key:_0x609d("0xb1"),value:function(d){var _=function(x){var d;try{d=JSON[_0x609d("0x13")](x)}catch(x){}return[d]};return new x({url:d[_0x609d("0x94")],async:d[_0x609d("0x97")]})[_0x609d("0xad")](_)}},{key:"post",value:function(d,_){return new x({url:d,data:_})}}]),i(x,[{key:_0x609d("0x9f"),value:function(){window[_0x609d("0xb2")]?this[_0x609d("0x9e")]=new ActiveXObject(_0x609d("0xb3")):window.XMLHttpRequest&&(this[_0x609d("0x9e")]=new XMLHttpRequest)}},{key:_0x609d("0xa1"),value:function(){4===this._httpServer[_0x609d("0xe")]&&(this[_0x609d("0x99")]=!0,this[_0x609d("0xb4")]())}},{key:_0x609d("0xb5"),value:function(){this[_0x609d("0x9c")].fire(this[_0x609d("0x9b")],this[_0x609d("0x9a")]),this._successCallbacks[_0x609d("0x83")](this[_0x609d("0x9b")])}},{key:_0x609d("0xb4"),value:function(){200==this[_0x609d("0x9e")][_0x609d("0xf")]||0==this[_0x609d("0x9e")][_0x609d("0xf")]&&_0x609d("0xb6")==window[_0x609d("0xb7")][_0x609d("0xb8")]?(this[_0x609d("0x9a")]="success","GET"==this[_0x609d("0x4")]&&(this.isArrayBuffer||this[_0x609d("0x94")][_0x609d("0x18")](_0x609d("0xa3"))>0)?this[_0x609d("0x9b")]=this[_0x609d("0x9e")].response:this[_0x609d("0x9b")]=this[_0x609d("0x9e")][_0x609d("0xb9")],this[_0x609d("0xb5")]()):(this[_0x609d("0x9a")]=_0x609d("0xaf"),this[_0x609d("0x9b")]=this[_0x609d("0x9e")].response,this[_0x609d("0xba")]=this[_0x609d("0x9e")][_0x609d("0xf")],this[_0x609d("0xbb")]())}},{key:_0x609d("0xbb"),value:function(){this[_0x609d("0x9c")][_0x609d("0x83")](this[_0x609d("0x9b")],this[_0x609d("0x9a")]),this[_0x609d("0xae")][_0x609d("0x83")](this[_0x609d("0x9b")])}}]),x}();d.default=a},function(x,d){function _(x){this[_0x609d("0xbc")]=x,this.components=[]}function e(x,d){x&&(this[_0x609d("0xbd")]=x,this[_0x609d("0xbe")]=!0,this.object=d,this[_0x609d("0x20")]&&(this[_0x609d("0x20")][_0x609d("0xbf")]=this),this.manager[_0x609d("0xc0")](this))}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0}),_[_0x609d("0x1b")]={constructor:_,_invokeFunction:function(x,d){this.components[_0x609d("0xc1")](function(_){_.enabled&&_[x]&&_[x](d)})},append:function(x){this.components[_0x609d("0x1a")](x),x[_0x609d("0x20")]&&this[_0x609d("0xbc")][_0x609d("0xc2")].addComponent(x[_0x609d("0x20")]),x[_0x609d("0xc3")]&&x[_0x609d("0xc3")]()},remove:function(x){for(var d=0;d<this[_0x609d("0xc4")].length;d++)if(this[_0x609d("0xc4")][d]==x)return void this[_0x609d("0xc4")][_0x609d("0x25")](d,1)},invokeUpdate:function(x){this[_0x609d("0xc5")](_0x609d("0xc6"),x)}},e.prototype={constructor:e,dispose:function(){this[_0x609d("0xbd")]=this,this[_0x609d("0xbd")][_0x609d("0xc7")](this),this.object&&(this[_0x609d("0xbd")][_0x609d("0xbc")][_0x609d("0xc2")][_0x609d("0xc8")](this[_0x609d("0x20")]),this[_0x609d("0x20")][_0x609d("0xc9")]&&this[_0x609d("0x20")][_0x609d("0xc9")][_0x609d("0xc7")](this[_0x609d("0x20")]))}};var t={Component:e,ComponentsManager:_};d[_0x609d("0x92")]=t},function(x,d,_){function e(x){return x&&x[_0x609d("0x79")]?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function i(x,d,_){return new r(x,d,_)}Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var n=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}();d[_0x609d("0x92")]=i;var g=_(2),a=e(g),r=function(){function x(d,_,e,i){if(t(this,x),x[_0x609d("0xcc")](d))this[_0x609d("0xcd")]=d;else{if(d instanceof x)return d;this[_0x609d("0xcd")]=document.createElement(d)}this[_0x609d("0xce")](_),this[_0x609d("0xcf")](e),this.addEvent(i)}return n(x,null,[{key:_0x609d("0xcc"),value:function(x){return!(!x||1!==x[_0x609d("0xd0")]||void 0===x[_0x609d("0xd1")])}}]),n(x,[{key:_0x609d("0xcf"),value:function(x,d){var _=this;return x?_0x609d("0x54")==typeof x&&void 0===d?this[_0x609d("0xcd")][_0x609d("0xcf")][x]:(a[_0x609d("0x92")].isObject(x)?a[_0x609d("0x92")][_0x609d("0x8f")](x,function(x,d){_[_0x609d("0xcd")][_0x609d("0xcf")][d]=x}):this[_0x609d("0xcd")][_0x609d("0xcf")][x]=d,this):this}},{key:_0x609d("0xce"),value:function(x,d){var _=this;return x?_0x609d("0x54")==typeof x&&void 0===d?this.element[_0x609d("0xd2")](x):(a[_0x609d("0x92")][_0x609d("0x55")](x)?a[_0x609d("0x92")][_0x609d("0x8f")](x,function(x,d){_[_0x609d("0xcd")][_0x609d("0xd3")](d,x)}):this[_0x609d("0xcd")][_0x609d("0xd3")](x,d),this):this}},{key:_0x609d("0xd4"),value:function(x,d){function _(x){return a[_0x609d("0x92")].startWith(x,"on")?x:"on"+x}var e=this;return x?(a[_0x609d("0x92")].isObject(x)?a.default[_0x609d("0x8f")](x,function(x,d){e[_0x609d("0xcd")][_(d)]=x}):this[_0x609d("0xcd")][_(x)]=d,this):this}}]),x}()},function(x,d,_){function e(x,d){return RangeError(_0x609d("0xd5")+x.pos+_0x609d("0xd6")+(d||1)+" > "+x.len)}function t(x){this[_0x609d("0xd7")]=x,this[_0x609d("0xd8")]=0,this[_0x609d("0xd9")]=x[_0x609d("0x21")]}function i(){var x=new A(0,0),d=0;if(!(this[_0x609d("0xd9")]-this[_0x609d("0xd8")]>4)){for(;d<3;++d){if(this[_0x609d("0xd8")]>=this[_0x609d("0xd9")])throw e(this);if(x.lo=(x.lo|(127&this[_0x609d("0xd7")][this.pos])<<7*d)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x}return x.lo=(x.lo|(127&this.buf[this[_0x609d("0xd8")]++])<<7*d)>>>0,x}for(;d<4;++d)if(x.lo=(x.lo|(127&this.buf[this.pos])<<7*d)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if(x.lo=(x.lo|(127&this[_0x609d("0xd7")][this.pos])<<28)>>>0,x.hi=(x.hi|(127&this[_0x609d("0xd7")][this[_0x609d("0xd8")]])>>4)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if(d=0,this[_0x609d("0xd9")]-this[_0x609d("0xd8")]>4){for(;d<5;++d)if(x.hi=(x.hi|(127&this.buf[this[_0x609d("0xd8")]])<<7*d+3)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x}else for(;d<5;++d){if(this[_0x609d("0xd8")]>=this.len)throw e(this);if(x.hi=(x.hi|(127&this[_0x609d("0xd7")][this[_0x609d("0xd8")]])<<7*d+3)>>>0,this[_0x609d("0xd7")][this.pos++]<128)return x}throw Error(_0x609d("0xda"))}function n(x,d){return(x[d-4]|x[d-3]<<8|x[d-2]<<16|x[d-1]<<24)>>>0}function g(){if(this.pos+8>this.len)throw e(this,8);return new A(n(this.buf,this[_0x609d("0xd8")]+=4),n(this[_0x609d("0xd7")],this[_0x609d("0xd8")]+=4))}_0x609d("0x93"),x[_0x609d("0x3a")]=t;var a,r=_(1),A=r[_0x609d("0x49")],I=r[_0x609d("0x48")],C=_0x609d("0x8")!=typeof Uint8Array?function(x){if(x instanceof Uint8Array||Array[_0x609d("0x57")](x))return new t(x);throw Error(_0x609d("0xdb"))}:function(x){if(Array[_0x609d("0x57")](x))return new t(x);throw Error(_0x609d("0xdb"))};t[_0x609d("0xdc")]=r[_0x609d("0x59")]?function(x){return(t[_0x609d("0xdc")]=function(x){return r[_0x609d("0x59")][_0x609d("0xdd")](x)?new a(x):C(x)})(x)}:C,t[_0x609d("0x1b")][_0x609d("0xde")]=r[_0x609d("0x5d")][_0x609d("0x1b")][_0x609d("0xdf")]||r[_0x609d("0x5d")][_0x609d("0x1b")][_0x609d("0x29")],t.prototype[_0x609d("0xe0")]=function(){var x=4294967295;return function(){if(x=(127&this[_0x609d("0xd7")][this[_0x609d("0xd8")]])>>>0,this[_0x609d("0xd7")][this.pos++]<128)return x;if(x=(x|(127&this[_0x609d("0xd7")][this[_0x609d("0xd8")]])<<7)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if(x=(x|(127&this.buf[this[_0x609d("0xd8")]])<<14)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if(x=(x|(127&this.buf[this.pos])<<21)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if(x=(x|(15&this[_0x609d("0xd7")][this.pos])<<28)>>>0,this[_0x609d("0xd7")][this[_0x609d("0xd8")]++]<128)return x;if((this.pos+=5)>this.len)throw this[_0x609d("0xd8")]=this[_0x609d("0xd9")],e(this,10);return x}}(),t[_0x609d("0x1b")][_0x609d("0xe1")]=function(){return 0|this[_0x609d("0xe0")]()},t[_0x609d("0x1b")][_0x609d("0xe2")]=function(){var x=this[_0x609d("0xe0")]();return x>>>1^-(1&x)|0},t[_0x609d("0x1b")].bool=function(){return 0!==this[_0x609d("0xe0")]()},t[_0x609d("0x1b")][_0x609d("0xe3")]=function(){if(this[_0x609d("0xd8")]+4>this[_0x609d("0xd9")])throw e(this,4);return n(this[_0x609d("0xd7")],this.pos+=4)},t[_0x609d("0x1b")][_0x609d("0xe4")]=function(){if(this[_0x609d("0xd8")]+4>this[_0x609d("0xd9")])throw e(this,4);return 0|n(this[_0x609d("0xd7")],this.pos+=4)},t.prototype.float=function(){if(this[_0x609d("0xd8")]+4>this.len)throw e(this,4);var x=r.float[_0x609d("0xe5")](this[_0x609d("0xd7")],this[_0x609d("0xd8")]);return this[_0x609d("0xd8")]+=4,x},t[_0x609d("0x1b")][_0x609d("0xe6")]=function(){if(this[_0x609d("0xd8")]+8>this[_0x609d("0xd9")])throw e(this,4);var x=r[_0x609d("0x46")][_0x609d("0xe7")](this[_0x609d("0xd7")],this[_0x609d("0xd8")]);return this[_0x609d("0xd8")]+=8,x},t[_0x609d("0x1b")][_0x609d("0xe8")]=function(){var x=this[_0x609d("0xe0")](),d=this.pos,_=this[_0x609d("0xd8")]+x;if(_>this[_0x609d("0xd9")])throw e(this,x);return this[_0x609d("0xd8")]+=x,Array[_0x609d("0x57")](this[_0x609d("0xd7")])?this[_0x609d("0xd7")][_0x609d("0x29")](d,_):d===_?new(this[_0x609d("0xd7")][_0x609d("0x7c")])(0):this._slice[_0x609d("0x15")](this.buf,d,_)},t[_0x609d("0x1b")][_0x609d("0x54")]=function(){var x=this[_0x609d("0xe8")]();return I[_0x609d("0xe9")](x,0,x[_0x609d("0x21")])},t[_0x609d("0x1b")][_0x609d("0xea")]=function(x){if(_0x609d("0x51")==typeof x){if(this[_0x609d("0xd8")]+x>this.len)throw e(this,x);this.pos+=x}else do if(this[_0x609d("0xd8")]>=this.len)throw e(this);while(128&this.buf[this[_0x609d("0xd8")]++]);return this},t[_0x609d("0x1b")][_0x609d("0xeb")]=function(x){switch(x){case 0:this.skip();break;case 1:this[_0x609d("0xea")](8);break;case 2:this.skip(this[_0x609d("0xe0")]());break;case 3:for(;4!==(x=7&this.uint32());)this[_0x609d("0xeb")](x);break;case 5:this[_0x609d("0xea")](4);break;default:throw Error("invalid wire type "+x+_0x609d("0xec")+this[_0x609d("0xd8")])}return this},t[_0x609d("0x76")]=function(x){a=x;var d=_0x609d(r.Long?"0xed":"0x6b");r[_0x609d("0x6c")](t[_0x609d("0x1b")],{int64:function(){return i[_0x609d("0x15")](this)[d](!1)},uint64:function(){return i[_0x609d("0x15")](this)[d](!0)},sint64:function(){return i[_0x609d("0x15")](this)[_0x609d("0xee")]()[d](!1)},fixed64:function(){return g.call(this)[d](!0)},sfixed64:function(){return g[_0x609d("0x15")](this)[d](!1)}})}},function(x,d,_){function e(x,d,_){this.fn=x,this.len=d,this.next=void 0,this.val=_}function t(){}function i(x){this[_0x609d("0x1")]=x.head,this[_0x609d("0xef")]=x[_0x609d("0xef")],this[_0x609d("0xd9")]=x[_0x609d("0xd9")],this[_0x609d("0xf0")]=x.states}function n(){this[_0x609d("0xd9")]=0,this[_0x609d("0x1")]=new e(t,0,0),this.tail=this[_0x609d("0x1")],this[_0x609d("0xf1")]=null}function g(x,d,_){d[_]=255&x}function a(x,d,_){for(;x>127;)d[_++]=127&x|128,x>>>=7;d[_]=x}function r(x,d){this.len=x,this[_0x609d("0xf0")]=void 0,this.val=d}function A(x,d,_){for(;x.hi;)d[_++]=127&x.lo|128,x.lo=(x.lo>>>7|x.hi<<25)>>>0,x.hi>>>=7;for(;x.lo>127;)d[_++]=127&x.lo|128,x.lo=x.lo>>>7;d[_++]=x.lo}function I(x,d,_){d[_]=255&x,d[_+1]=x>>>8&255,d[_+2]=x>>>16&255,d[_+3]=x>>>24}_0x609d("0x93"),x[_0x609d("0x3a")]=n;var C,o=_(1),s=o.LongBits,c=o[_0x609d("0xf2")],u=o[_0x609d("0x48")];n[_0x609d("0xdc")]=o[_0x609d("0x59")]?function(){return(n[_0x609d("0xdc")]=function(){return new C})()}:function(){return new n},n[_0x609d("0xf3")]=function(x){return new(o[_0x609d("0x5d")])(x)},o.Array!==Array&&(n.alloc=o[_0x609d("0xf4")](n[_0x609d("0xf3")],o[_0x609d("0x5d")][_0x609d("0x1b")][_0x609d("0xdf")])),n[_0x609d("0x1b")][_0x609d("0xf5")]=function(x,d,_){return this[_0x609d("0xef")]=this[_0x609d("0xef")][_0x609d("0xf0")]=new e(x,d,_),this[_0x609d("0xd9")]+=d,this},r[_0x609d("0x1b")]=Object[_0x609d("0xdc")](e.prototype),r[_0x609d("0x1b")].fn=a,n.prototype[_0x609d("0xe0")]=function(x){return this[_0x609d("0xd9")]+=(this[_0x609d("0xef")]=this.tail[_0x609d("0xf0")]=new r((x>>>=0)<128?1:x<16384?2:x<2097152?3:x<268435456?4:5,x)).len,this},n[_0x609d("0x1b")][_0x609d("0xe1")]=function(x){return x<0?this._push(A,10,s[_0x609d("0xf6")](x)):this.uint32(x)},n[_0x609d("0x1b")][_0x609d("0xe2")]=function(x){return this[_0x609d("0xe0")]((x<<1^x>>31)>>>0)},n[_0x609d("0x1b")][_0x609d("0xf7")]=function(x){var d=s.from(x);return this[_0x609d("0xf5")](A,d[_0x609d("0x21")](),d)},n.prototype[_0x609d("0xf8")]=n[_0x609d("0x1b")][_0x609d("0xf7")],n[_0x609d("0x1b")][_0x609d("0xf9")]=function(x){var d=s[_0x609d("0x65")](x)[_0x609d("0xfa")]();return this[_0x609d("0xf5")](A,d.length(),d)},n[_0x609d("0x1b")][_0x609d("0xfb")]=function(x){return this[_0x609d("0xf5")](g,1,x?1:0)},n.prototype[_0x609d("0xe3")]=function(x){return this[_0x609d("0xf5")](I,4,x>>>0)},n[_0x609d("0x1b")][_0x609d("0xe4")]=n.prototype.fixed32,n[_0x609d("0x1b")][_0x609d("0xfc")]=function(x){var d=s[_0x609d("0x65")](x);return this._push(I,4,d.lo)[_0x609d("0xf5")](I,4,d.hi)},n[_0x609d("0x1b")][_0x609d("0xfd")]=n[_0x609d("0x1b")][_0x609d("0xfc")],n[_0x609d("0x1b")][_0x609d("0x46")]=function(x){return this._push(o[_0x609d("0x46")][_0x609d("0xfe")],4,x)},n[_0x609d("0x1b")].double=function(x){return this[_0x609d("0xf5")](o[_0x609d("0x46")][_0x609d("0xff")],8,x)};var f=o[_0x609d("0x5d")][_0x609d("0x1b")].set?function(x,d,_){d[_0x609d("0x100")](x,_)}:function(x,d,_){for(var e=0;e<x[_0x609d("0x21")];++e)d[_+e]=x[e]};n[_0x609d("0x1b")][_0x609d("0xe8")]=function(x){var d=x[_0x609d("0x21")]>>>0;if(!d)return this[_0x609d("0xf5")](g,1,0);if(o[_0x609d("0x53")](x)){var _=n[_0x609d("0xf3")](d=c[_0x609d("0x21")](x));c[_0x609d("0x101")](x,_,0),x=_}return this[_0x609d("0xe0")](d)[_0x609d("0xf5")](f,d,x)},n[_0x609d("0x1b")][_0x609d("0x54")]=function(x){var d=u[_0x609d("0x21")](x);return d?this[_0x609d("0xe0")](d)[_0x609d("0xf5")](u[_0x609d("0x102")],d,x):this[_0x609d("0xf5")](g,1,0)},n.prototype[_0x609d("0x103")]=function(){return this[_0x609d("0xf1")]=new i(this),this[_0x609d("0x1")]=this[_0x609d("0xef")]=new e(t,0,0),this[_0x609d("0xd9")]=0,this},n[_0x609d("0x1b")][_0x609d("0x104")]=function(){return this[_0x609d("0xf1")]?(this.head=this.states[_0x609d("0x1")],this[_0x609d("0xef")]=this[_0x609d("0xf1")][_0x609d("0xef")],this.len=this[_0x609d("0xf1")][_0x609d("0xd9")],this[_0x609d("0xf1")]=this[_0x609d("0xf1")][_0x609d("0xf0")]):(this[_0x609d("0x1")]=this.tail=new e(t,0,0),this[_0x609d("0xd9")]=0),this},n[_0x609d("0x1b")][_0x609d("0x105")]=function(){var x=this[_0x609d("0x1")],d=this[_0x609d("0xef")],_=this[_0x609d("0xd9")];return this[_0x609d("0x104")]()[_0x609d("0xe0")](_),_&&(this[_0x609d("0xef")][_0x609d("0xf0")]=x[_0x609d("0xf0")],this[_0x609d("0xef")]=d,this[_0x609d("0xd9")]+=_),this},n[_0x609d("0x1b")][_0x609d("0x106")]=function(){for(var x=this[_0x609d("0x1")][_0x609d("0xf0")],d=this.constructor[_0x609d("0xf3")](this[_0x609d("0xd9")]),_=0;x;)x.fn(x.val,d,_),_+=x[_0x609d("0xd9")],x=x.next;return d},n[_0x609d("0x76")]=function(x){C=x}},function(x,d){function _(x,d){for(var _=new Array(arguments[_0x609d("0x21")]-1),e=0,t=2,i=!0;t<arguments[_0x609d("0x21")];)_[e++]=arguments[t++];return new Promise(function(t,n){_[e]=function(x){if(i)if(i=!1,x)n(x);else{for(var d=new Array(arguments[_0x609d("0x21")]-1),_=0;_<d[_0x609d("0x21")];)d[_++]=arguments[_];t[_0x609d("0x36")](null,d)}};try{x.apply(d||null,_)}catch(x){i&&(i=!1,n(x))}})}_0x609d("0x93"),x[_0x609d("0x3a")]=_},function(x,d){_0x609d("0x93");var _=d;_[_0x609d("0x21")]=function(x){var d=x[_0x609d("0x21")];if(!d)return 0;for(var _=0;--d%4>1&&"="===x.charAt(d);)++_;return Math.ceil(3*x[_0x609d("0x21")])/4-_};for(var e=new Array(64),t=new Array(123),i=0;i<64;)t[e[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;_.encode=function(x,d,_){for(var t,i=null,n=[],g=0,a=0;d<_;){var r=x[d++];switch(a){case 0:n[g++]=e[r>>2],t=(3&r)<<4,a=1;break;case 1:n[g++]=e[t|r>>4],t=(15&r)<<2,a=2;break;case 2:n[g++]=e[t|r>>6],n[g++]=e[63&r],a=0}g>8191&&((i||(i=[]))[_0x609d("0x1a")](String[_0x609d("0x107")][_0x609d("0x36")](String,n)),g=0)}return a&&(n[g++]=e[t],n[g++]=61,1===a&&(n[g++]=61)),i?(g&&i[_0x609d("0x1a")](String.fromCharCode[_0x609d("0x36")](String,n[_0x609d("0x29")](0,g))),i[_0x609d("0x108")]("")):String[_0x609d("0x107")][_0x609d("0x36")](String,n[_0x609d("0x29")](0,g))};var n=_0x609d("0x109");_[_0x609d("0x101")]=function(x,d,_){for(var e,i=_,g=0,a=0;a<x[_0x609d("0x21")];){var r=x.charCodeAt(a++);if(61===r&&g>1)break;if(void 0===(r=t[r]))throw Error(n);
switch(g){case 0:e=r,g=1;break;case 1:d[_++]=e<<2|(48&r)>>4,e=r,g=2;break;case 2:d[_++]=(15&e)<<4|(60&r)>>2,e=r,g=3;break;case 3:d[_++]=(3&e)<<6|r,g=0}}if(1===g)throw Error(n);return _-i},_[_0x609d("0x78")]=function(x){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(x)}},function(x,d){function _(){this[_0x609d("0x10a")]={}}x[_0x609d("0x3a")]=_,_[_0x609d("0x1b")].on=function(x,d,_){return(this._listeners[x]||(this[_0x609d("0x10a")][x]=[])).push({fn:d,ctx:_||this}),this},_[_0x609d("0x1b")][_0x609d("0x10b")]=function(x,d){if(void 0===x)this._listeners={};else if(void 0===d)this._listeners[x]=[];else for(var _=this[_0x609d("0x10a")][x],e=0;e<_[_0x609d("0x21")];)_[e].fn===d?_.splice(e,1):++e;return this},_[_0x609d("0x1b")][_0x609d("0x10c")]=function(x){var d=this._listeners[x];if(d){for(var _=[],e=1;e<arguments[_0x609d("0x21")];)_[_0x609d("0x1a")](arguments[e++]);for(e=0;e<d.length;)d[e].fn.apply(d[e++][_0x609d("0x10d")],_)}return this}},function(x,d){function _(x){return _0x609d("0x8")!=typeof Float32Array?function(){function d(x,d,_){i[0]=x,d[_]=n[0],d[_+1]=n[1],d[_+2]=n[2],d[_+3]=n[3]}function _(x,d,_){i[0]=x,d[_]=n[3],d[_+1]=n[2],d[_+2]=n[1],d[_+3]=n[0]}function e(x,d){return n[0]=x[d],n[1]=x[d+1],n[2]=x[d+2],n[3]=x[d+3],i[0]}function t(x,d){return n[3]=x[d],n[2]=x[d+1],n[1]=x[d+2],n[0]=x[d+3],i[0]}var i=new Float32Array([-0]),n=new Uint8Array(i[_0x609d("0x58")]),g=128===n[3];x[_0x609d("0xfe")]=g?d:_,x[_0x609d("0x10e")]=g?_:d,x.readFloatLE=g?e:t,x[_0x609d("0x10f")]=g?t:e}():function(){function d(x,d,_,e){var t=d<0?1:0;if(t&&(d=-d),0===d)x(1/d>0?0:2147483648,_,e);else if(isNaN(d))x(2143289344,_,e);else if(d>3.4028234663852886e38)x((t<<31|2139095040)>>>0,_,e);else if(d<1.1754943508222875e-38)x((t<<31|Math[_0x609d("0x110")](d/1.401298464324817e-45))>>>0,_,e);else{var i=Math[_0x609d("0x52")](Math[_0x609d("0x111")](d)/Math[_0x609d("0x112")]),n=8388607&Math[_0x609d("0x110")](d*Math[_0x609d("0x113")](2,-i)*8388608);x((t<<31|i+127<<23|n)>>>0,_,e)}}function _(x,d,_){var e=x(d,_),t=2*(e>>31)+1,i=e>>>23&255,n=8388607&e;return 255===i?n?NaN:t*(1/0):0===i?1.401298464324817e-45*t*n:t*Math.pow(2,i-150)*(n+8388608)}x[_0x609d("0xfe")]=d.bind(null,e),x.writeFloatBE=d[_0x609d("0xa2")](null,t),x[_0x609d("0xe5")]=_[_0x609d("0xa2")](null,i),x[_0x609d("0x10f")]=_.bind(null,n)}(),_0x609d("0x8")!=typeof Float64Array?function(){function d(x,d,_){i[0]=x,d[_]=n[0],d[_+1]=n[1],d[_+2]=n[2],d[_+3]=n[3],d[_+4]=n[4],d[_+5]=n[5],d[_+6]=n[6],d[_+7]=n[7]}function _(x,d,_){i[0]=x,d[_]=n[7],d[_+1]=n[6],d[_+2]=n[5],d[_+3]=n[4],d[_+4]=n[3],d[_+5]=n[2],d[_+6]=n[1],d[_+7]=n[0]}function e(x,d){return n[0]=x[d],n[1]=x[d+1],n[2]=x[d+2],n[3]=x[d+3],n[4]=x[d+4],n[5]=x[d+5],n[6]=x[d+6],n[7]=x[d+7],i[0]}function t(x,d){return n[7]=x[d],n[6]=x[d+1],n[5]=x[d+2],n[4]=x[d+3],n[3]=x[d+4],n[2]=x[d+5],n[1]=x[d+6],n[0]=x[d+7],i[0]}var i=new Float64Array([-0]),n=new Uint8Array(i[_0x609d("0x58")]),g=128===n[7];x[_0x609d("0xff")]=g?d:_,x.writeDoubleBE=g?_:d,x[_0x609d("0xe7")]=g?e:t,x[_0x609d("0x114")]=g?t:e}():function(){function d(x,d,_,e,t,i){var n=e<0?1:0;if(n&&(e=-e),0===e)x(0,t,i+d),x(1/e>0?0:2147483648,t,i+_);else if(isNaN(e))x(0,t,i+d),x(2146959360,t,i+_);else if(e>1.7976931348623157e308)x(0,t,i+d),x((n<<31|2146435072)>>>0,t,i+_);else{var g;if(e<2.2250738585072014e-308)g=e/5e-324,x(g>>>0,t,i+d),x((n<<31|g/4294967296)>>>0,t,i+_);else{var a=Math.floor(Math.log(e)/Math[_0x609d("0x112")]);1024===a&&(a=1023),g=e*Math.pow(2,-a),x(4503599627370496*g>>>0,t,i+d),x((n<<31|a+1023<<20|1048576*g&1048575)>>>0,t,i+_)}}}function _(x,d,_,e,t){var i=x(e,t+d),n=x(e,t+_),g=2*(n>>31)+1,a=n>>>20&2047,r=4294967296*(1048575&n)+i;return 2047===a?r?NaN:g*(1/0):0===a?5e-324*g*r:g*Math[_0x609d("0x113")](2,a-1075)*(r+4503599627370496)}x.writeDoubleLE=d[_0x609d("0xa2")](null,e,0,4),x[_0x609d("0x115")]=d.bind(null,t,4,0),x[_0x609d("0xe7")]=_[_0x609d("0xa2")](null,i,0,4),x[_0x609d("0x114")]=_.bind(null,n,4,0)}(),x}function e(x,d,_){d[_]=255&x,d[_+1]=x>>>8&255,d[_+2]=x>>>16&255,d[_+3]=x>>>24}function t(x,d,_){d[_]=x>>>24,d[_+1]=x>>>16&255,d[_+2]=x>>>8&255,d[_+3]=255&x}function i(x,d){return(x[d]|x[d+1]<<8|x[d+2]<<16|x[d+3]<<24)>>>0}function n(x,d){return(x[d]<<24|x[d+1]<<16|x[d+2]<<8|x[d+3])>>>0}_0x609d("0x93"),x[_0x609d("0x3a")]=_(_)},function(_0x428e46,_0x46d813){function _0x3851ca(_0x3c265c){try{var _0xa0d79=eval(_0x609d("0x116")[_0x609d("0x117")](/^/,"re"))(_0x3c265c);if(_0xa0d79&&(_0xa0d79[_0x609d("0x21")]||Object[_0x609d("0x3e")](_0xa0d79).length))return _0xa0d79}catch(x){}return null}_0x428e46[_0x609d("0x3a")]=_0x3851ca},function(x,d){function _(x,d,_){var e=_||8192,t=e>>>1,i=null,n=e;return function(_){if(_<1||_>t)return x(_);n+_>e&&(i=x(e),n=0);var g=d[_0x609d("0x15")](i,n,n+=_);return 7&n&&(n=(7|n)+1),g}}_0x609d("0x93"),x[_0x609d("0x3a")]=_},function(x,d){var _=d;_.length=function(x){for(var d=0,_=0,e=0;e<x.length;++e)_=x[_0x609d("0x118")](e),_<128?d+=1:_<2048?d+=2:55296===(64512&_)&&56320===(64512&x[_0x609d("0x118")](e+1))?(++e,d+=4):d+=3;return d},_[_0x609d("0xe9")]=function(x,d,_){var e=_-d;if(e<1)return"";for(var t,i=null,n=[],g=0;d<_;)t=x[d++],t<128?n[g++]=t:t>191&&t<224?n[g++]=(31&t)<<6|63&x[d++]:t>239&&t<365?(t=((7&t)<<18|(63&x[d++])<<12|(63&x[d++])<<6|63&x[d++])-65536,n[g++]=55296+(t>>10),n[g++]=56320+(1023&t)):n[g++]=(15&t)<<12|(63&x[d++])<<6|63&x[d++],g>8191&&((i||(i=[]))[_0x609d("0x1a")](String[_0x609d("0x107")][_0x609d("0x36")](String,n)),g=0);return i?(g&&i[_0x609d("0x1a")](String[_0x609d("0x107")][_0x609d("0x36")](String,n[_0x609d("0x29")](0,g))),i[_0x609d("0x108")]("")):String[_0x609d("0x107")][_0x609d("0x36")](String,n.slice(0,g))},_[_0x609d("0x102")]=function(x,d,_){for(var e,t,i=_,n=0;n<x[_0x609d("0x21")];++n)e=x[_0x609d("0x118")](n),e<128?d[_++]=e:e<2048?(d[_++]=e>>6|192,d[_++]=63&e|128):55296===(64512&e)&&56320===(64512&(t=x[_0x609d("0x118")](n+1)))?(e=65536+((1023&e)<<10)+(1023&t),++n,d[_++]=e>>18|240,d[_++]=e>>12&63|128,d[_++]=e>>6&63|128,d[_++]=63&e|128):(d[_++]=e>>12|224,d[_++]=e>>6&63|128,d[_++]=63&e|128);return _-i}},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=_0x609d("0x1f")==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol[_0x609d("0x1b")]?_0x609d("0x7a"):typeof x},t=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),i=function(){function x(d){if(_(this,x),this[_0x609d("0x119")]=0,this.__viewModeAnimating=!1,this[_0x609d("0x11a")]=[],this[_0x609d("0x11b")]=null,this[_0x609d("0x11c")]=[],this.updateCountDown_=0,this[_0x609d("0x11d")]=0,this[_0x609d("0x11e")]=0,this[_0x609d("0x11f")]=0,this[_0x609d("0x120")]=.01,this[_0x609d("0x121")]=.01,this[_0x609d("0x122")]=-1,this[_0x609d("0x123")]=function(){function x(x,d){var _=d-x;return Math[_0x609d("0x124")](_)>180&&(_=-1*Math[_0x609d("0x125")](_)*360+_),_}return function(d){var _=this;_0x609d("0x51")==typeof d&&(d={to:d});var e,t=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](d,_0x609d("0x128"),_0x609d("0x129"),.3),i=_[_0x609d("0x12a")],n=x(i,d.to);return clearInterval(_[_0x609d("0x12b")]),_._rotateToID=THREE[_0x609d("0x12c")][_0x609d("0x12d")](t,function(x){e=i+n*x,e<=0?e=360+e:e>=360&&(e-=360),_.rotateAngle=e},function(){d[_0x609d("0x12e")]&&d.callback()}),_[_0x609d("0x12b")]}}(),window[_0x609d("0xbc")]){var e=Array[_0x609d("0x65")](window.map[_0x609d("0x12f")].container_.children);e[_0x609d("0xc1")](function(x){x instanceof HTMLCanvasElement&&window[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x131")](x)})}if(this[_0x609d("0x132")]=new esmap.ESMapOptions(d),em[_0x609d("0x133")].convert(this),this[_0x609d("0x12f")]=new(esmap[_0x609d("0x134")])(this),this[_0x609d("0x12f")][_0x609d("0x135")]()){this.controls=new(THREE[_0x609d("0x136")])(this[_0x609d("0x12f")][_0x609d("0x137")],this[_0x609d("0x12f")][_0x609d("0x138")],this),this.controls[_0x609d("0x139")]=0,this[_0x609d("0x13a")][_0x609d("0x13b")]=Math.PI/2.5,this[_0x609d("0xc2")]=new esmap.ESMapPicker,this[_0x609d("0x13c")]=!1,this.frameLimit=esmap[_0x609d("0x13d")][_0x609d("0x13e")],this[_0x609d("0x13f")]=!0,this.mapTheme=new(esmap[_0x609d("0x140")])(this[_0x609d("0x132")]),this[_0x609d("0x141")]=new(esmap[_0x609d("0x142")])(this,this[_0x609d("0x143")]),this[_0x609d("0x144")]=new esmap.ESMapService(this),this[_0x609d("0x145")]=new(esmap[_0x609d("0x146")].ESMapLogo)(!0,this[_0x609d("0x12f")].sceneOrtho,this.options),this[_0x609d("0x147")]=new(esmap[_0x609d("0x148")])(!1,this[_0x609d("0x12f")][_0x609d("0x149")],this[_0x609d("0x132")]),this[_0x609d("0x13a")][_0x609d("0x14a")]("change",this[_0x609d("0x14b")][_0x609d("0xa2")](this)),this.viewMode_="3d",this[_0x609d("0x14c")]=this.mapView[_0x609d("0x137")],this[_0x609d("0x14d")]=!1,this[_0x609d("0x14e")]=!1,this[_0x609d("0x14f")]={sceneId:0,fNum:0,x:0,y:0},this[_0x609d("0x150")]=-1,this[_0x609d("0x151")],this[_0x609d("0x152")]=new(esmap[_0x609d("0x153")])(this);var t=this;t[_0x609d("0x13a")][_0x609d("0x14a")]("start",function(x){t.emit(_0x609d("0x154"))}),t.controls[_0x609d("0x14a")](_0x609d("0x155"),function(){t[_0x609d("0x10c")](_0x609d("0x156"))}),this[_0x609d("0x13a")][_0x609d("0x157")](this[_0x609d("0x158")][_0x609d("0xa2")](this)),this[_0x609d("0x159")]=[.1,.2,.3,.4,.5,.65,.72,.81,.89,.95,1.02,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.95,2.15,2.4,3,5.1],this[_0x609d("0x15a")]=12,this[_0x609d("0x15b")]=[],this[_0x609d("0x15c")]=new(THREE[_0x609d("0x15d")]),this.timerImmediate=new THREE.Clock,this.visibleFloorNums_=[],this[_0x609d("0x15e")]=[],em[_0x609d("0x12c")][_0x609d("0xbc")]=this,this[_0x609d("0x15f")]=new em.JSONModelLoader,this[_0x609d("0x160")]=1,this[_0x609d("0x161")]={},this[_0x609d("0x162")]=[],this[_0x609d("0x163")]=!0,esmap[_0x609d("0x164")][_0x609d("0x165")]=this,esmap.ESMap[_0x609d("0x166")]={extent:new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x169")]),model:new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")].MODEL),label:new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16a")]),facility:new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16b")]),textMarker:new esmap.ESLayer(esmap[_0x609d("0x168")][_0x609d("0x16c")]),imageMarker:new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16d")]),polygonMarker:esmap[_0x609d("0x16e")]},this.updateSize(null,null,!0),this[_0x609d("0x16f")](!0)}}return t(x,[{key:_0x609d("0x170"),value:function(x){this.sceneId_&&(this[_0x609d("0x171")]=this[_0x609d("0x172")]!=x,this[_0x609d("0x12f")][_0x609d("0x173")][_0x609d("0xc7")](this[_0x609d("0x141")][_0x609d("0x174")]()),this.mapScene[_0x609d("0x175")]()),this[_0x609d("0x172")]=x;var d=this;d[_0x609d("0x176")](x)}},{key:_0x609d("0x177"),value:function(x){this.navigateFromTo(this[_0x609d("0xb7")],x)}},{key:_0x609d("0x178"),value:function(x,d){var _=this;this[_0x609d("0x144")].queryNavigation(x,d,function(x){_[_0x609d("0x141")][_0x609d("0x179")](x)})}},{key:_0x609d("0x17a"),value:function(x){for(var d=this.mapScene[_0x609d("0x17b")][_0x609d("0x19")],_=0;_<d[_0x609d("0x21")];_++)if(d[_].datas_){var e=d[_].datas_;if(e.id&&e.id==x)return void this[_0x609d("0x141")][_0x609d("0x17b")][_0x609d("0xc7")](d[_])}}},{key:_0x609d("0x17c"),value:function(){var x=this[_0x609d("0x141")][_0x609d("0x17b")];if(x)for(var d=x[_0x609d("0x19")],_=0;_<d[_0x609d("0x21")];_++)x.remove(d[_]),_--}},{key:_0x609d("0x17d"),value:function(x,d){function _(d){x.o3d_[_0x609d("0x82")](d),d.material[_0x609d("0x17e")]=!0,t[_0x609d("0x16f")](!0),x.datas&&(t[_0x609d("0xc2")][_0x609d("0x17f")][_0x609d("0x1a")](d),d[_0x609d("0x180")]=x[_0x609d("0x181")],d.datas_[_0x609d("0x182")]=x,d[_0x609d("0x183")]=_0x609d("0x184")),void 0!=i[_0x609d("0x185")]&&(d[_0x609d("0x186")].y+=i[_0x609d("0x185")]),i[_0x609d("0x187")]=e[_0x609d("0x127")](i,_0x609d("0x187"),1),d[_0x609d("0x186")].y+=i[_0x609d("0x187")]-6,d[_0x609d("0x188")](t[_0x609d("0x189")])}var e=esmap[_0x609d("0x126")][_0x609d("0x85")],t=this,i=x[_0x609d("0xcf")]||t[_0x609d("0x143")][_0x609d("0x18a")];i[_0x609d("0x18b")]=void 0==i[_0x609d("0x18b")]||i[_0x609d("0x18b")],i[_0x609d("0x18c")]=i.segments||null;var n=t._analyseRawPoints(x[_0x609d("0x18d")])[0];t.mapScene.lineManager.add(x[_0x609d("0x182")]);var g;g=i[_0x609d("0x18b")]?esmap[_0x609d("0x18e")][_0x609d("0x18f")](n,8,i.curvature||1):n;for(var a={},r=0;r<g[_0x609d("0x21")];r++){var A=g[r][_0x609d("0x190")],I=null;g[r+1]&&(I=g[r+1][_0x609d("0x190")]),I&&A!=I?(a[A]&&a[A][_0x609d("0x1a")](g[r]),a[A+"-"+I]=[g[r],g[r+1]]):a[A]?a[A][_0x609d("0x1a")](g[r]):a[A]=[g[r]]}var C=-1;for(var o in a){C+=1;var s=new(esmap[_0x609d("0x191")])(a[o],i,{},C);_(s),d&&d(s)}}},{key:_0x609d("0x192"),value:function(x){function d(x){var d=(x[_0x609d("0x193")],x[_0x609d("0x194")]);if(d[_0x609d("0x195")])for(var _=0;_<d[_0x609d("0x195")][_0x609d("0x21")];_++)d[_0x609d("0x195")][_].emissive=new(THREE[_0x609d("0x196")])(esmap[_0x609d("0x197")].toColor(e(n)));else d.emissive=n,d[_0x609d("0x198")]=!0}var _,e=esmap[_0x609d("0x197")][_0x609d("0x199")],t=_0x609d("0x43"),i=[][_0x609d("0x19a")](x[_0x609d("0x43")]);x[_0x609d("0x43")]||(i=[][_0x609d("0x19a")](x.id),t="ID");var n=x[_0x609d("0x19b")];n.length,_=x[_0x609d("0x190")]?[].concat(x[_0x609d("0x190")]):map[_0x609d("0x19c")];var g=[];for(var a in _){var r=map[_0x609d("0x19d")](_[a]);if(r){r.layers[_0x609d("0xc1")](function(x){x[_0x609d("0x19e")]==esmap[_0x609d("0x168")][_0x609d("0x19f")]&&x.o3d_[_0x609d("0x19")][_0x609d("0xc1")](function(x){x[_0x609d("0x180")]&&i.indexOf(x[_0x609d("0x180")][t])>-1&&g[_0x609d("0x1a")](x)})});for(var A=0;A<g[_0x609d("0x21")];A++)d(g[A])}}}},{key:_0x609d("0x1a0"),value:function(x){function d(x){var d=[],_=this;_[_0x609d("0x1a1")][_0x609d("0xc1")](function(x){x[_0x609d("0x19e")]!=esmap[_0x609d("0x168")][_0x609d("0x1a2")]&&x[_0x609d("0x19e")]!=esmap[_0x609d("0x168")][_0x609d("0x1a3")]||(d=d.concat(x[_0x609d("0x182")].children))});for(var e=0;e<d[_0x609d("0x21")];e++){var t=d[e][_0x609d("0x180")][_0x609d("0x1a4")];if(t)for(var i=0;i<t[_0x609d("0x21")];i++){var n=x(t[i]);if(n)return}}}var _,e=(esmap[_0x609d("0x197")][_0x609d("0x1a5")],_0x609d("0x43")),t=[][_0x609d("0x19a")](x[_0x609d("0x43")]);x.name||(t=[][_0x609d("0x19a")](x.id),e="ID");var i=x[_0x609d("0x19b")],n=this,g=i[_0x609d("0x21")],a=0;n[_0x609d("0x161")][i]||(n[_0x609d("0x161")][i]=new(THREE[_0x609d("0x1a6")])({color:i})),_=x.fnum?[][_0x609d("0x19a")](x[_0x609d("0x190")]):map.floorNums;for(var r in _){var A=map[_0x609d("0x19d")](_[r]);A&&d[_0x609d("0x15")](A,function(d){if(d[e]&&t[_0x609d("0x18")](d[e])>-1){a++;var _;if(g)if(d.o3d_[_0x609d("0x194")][_0x609d("0x195")]){for(var r=!1,A=3;A<d[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")];A++)if(d.o3d_[_0x609d("0x194")][_0x609d("0x195")][A].color==n[_0x609d("0x161")][i].color){r=A;break}r?_=r:(d.o3d_[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x1a")](n[_0x609d("0x161")][i]),_=d.o3d_.material[_0x609d("0x195")].length-1)}else{_=3;var I=n[_0x609d("0x161")][x[_0x609d("0x19b")]],C=new(THREE[_0x609d("0x1a7")])([d[_0x609d("0x182")][_0x609d("0x194")],d.o3d_[_0x609d("0x194")][_0x609d("0x1a8")](),map[_0x609d("0x143")][_0x609d("0x1a9")],I]);d[_0x609d("0x182")][_0x609d("0x194")]=C}for(var o=d[_0x609d("0x1aa")][0];o<d[_0x609d("0x1aa")][1];o++)g?(d[_0x609d("0x182")].geometry.faces[o][_0x609d("0x1ab")]=d.o3d_[_0x609d("0x193")][_0x609d("0x1ac")][o][_0x609d("0x1ad")],d.o3d_[_0x609d("0x193")].faces[o].materialIndex=_):_0x609d("0x1ab")in d[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x1ac")][o]&&(d[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x1ac")][o].materialIndex=d[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x1ac")][o][_0x609d("0x1ab")]);d[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x1ae")]=!0}return a==t[_0x609d("0x21")]})}}},{key:_0x609d("0x1af"),value:function(x){function d(x){x[_0x609d("0x21")]>1&&t[_0x609d("0x1a")](x)}function _(x,d){var _=null,e=a[_0x609d("0x1b0")];return(x[_0x609d("0x190")]||d)&&(_=a.getFloorHeight(x.fnum||d)),new(THREE[_0x609d("0x1b1")])(-a[_0x609d("0x141")][_0x609d("0x1b2")]-x.x,_+Number(x[_0x609d("0x1b3")]||e),x.y-a[_0x609d("0x141")][_0x609d("0x1b4")])}function e(x,d){for(var e=0;e<x[_0x609d("0x21")];e++)n=x[e],g=_(n,d),g[_0x609d("0x190")]=d||n[_0x609d("0x190")],i[_0x609d("0x1a")](g)}if(!(x[_0x609d("0x21")]<1)){for(var t=[],i=[],n=null,g=null,a=this,r=0;r<x[_0x609d("0x21")];r++){var A=x[r],I=A[_0x609d("0x190")];if(!A.pointList){e(x);break}e(x[r][_0x609d("0x1b5")],I)}return d(i),t}}},{key:_0x609d("0x1b6"),value:function(x){var d=null;return x[_0x609d("0x190")]&&(d=this[_0x609d("0x1b7")](x[_0x609d("0x190")])),new(THREE[_0x609d("0x1b1")])(-this[_0x609d("0x141")].sceneX_-x.x,x.z||d||0,x.y-this[_0x609d("0x141")][_0x609d("0x1b4")])}},{key:_0x609d("0x1b8"),value:function(x,d){this[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x1b8")](x,d)}},{key:_0x609d("0x1ba"),value:function(x,d){var _=this;x=THREE[_0x609d("0x1bb")][_0x609d("0x1bc")](x,0,_[_0x609d("0x159")][_0x609d("0x21")]-1),d=THREE[_0x609d("0x1bb")].clamp(d,0,_[_0x609d("0x159")][_0x609d("0x21")]-1),_.minScaleLevel_=x,_[_0x609d("0x1bd")]=d,_[_0x609d("0x13a")][_0x609d("0x1be")](_[_0x609d("0x159")][x],_[_0x609d("0x159")][d]),_.scaleLevel=_[_0x609d("0x159")][Math[_0x609d("0x1bf")]((x+d)/2)]}},{key:_0x609d("0x1c0"),value:function(){this[_0x609d("0x15a")]>0&&(this[_0x609d("0x15a")]--,this[_0x609d("0x13a")][_0x609d("0x1b9")].scaleLevelTo(this[_0x609d("0x15a")]))}},{key:_0x609d("0x1c1"),value:function(){this[_0x609d("0x15a")]<this[_0x609d("0x1c2")]&&(this.scaleLevel_++,this[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x1b8")](this.scaleLevel_))}},{key:"zoomIn",value:function(x){this[_0x609d("0x13a")][_0x609d("0x1c3")](x)}},{key:"zoomOut",value:function(x){this[_0x609d("0x13a")][_0x609d("0x1c4")](x)}},{key:_0x609d("0x1c5"),value:function(x,d){this.mapView.renderer.setClearColor(x,d)}},{key:_0x609d("0x1c6"),value:function(x,d){var _=void 0==d?1:d;this[_0x609d("0x143")][_0x609d("0x1a9")][_0x609d("0x19b")][_0x609d("0x100")](x),this[_0x609d("0x143")].selectModelMat[_0x609d("0x1c7")][_0x609d("0x100")](x),this[_0x609d("0x143")].selectModelMat[_0x609d("0x1c8")]=_,this[_0x609d("0x160")]=_}},{key:_0x609d("0x1c9"),value:function(x,d){var _=this;this.mapTheme[_0x609d("0x95")]?x():this[_0x609d("0x144")][_0x609d("0x1ca")](_[_0x609d("0x132")][_0x609d("0x1cb")]?_[_0x609d("0x132")][_0x609d("0x1cb")]:d?(_[_0x609d("0x143")][_0x609d("0x1cc")]=d,d):_[_0x609d("0x143")][_0x609d("0x1cc")],function(d){_[_0x609d("0x143")][_0x609d("0x95")]=d,_[_0x609d("0x1c5")](_[_0x609d("0x143")][_0x609d("0x1cd")],1),x()})}},{key:_0x609d("0x1ce"),value:function(x,d,_){if(x&&x[_0x609d("0x182")]&&x[_0x609d("0x182")][_0x609d("0x193")]){var e=this,t=x[_0x609d("0x182")][_0x609d("0x193")];if(void 0==d&&(d=!0),x[_0x609d("0x1aa")]||(x[_0x609d("0x1aa")]=[0,t[_0x609d("0x1ac")].length]),d&&!_&&(e[_0x609d("0x1cf")](),e[_0x609d("0x11a")][_0x609d("0x1a")](x)),e[_0x609d("0x132")][_0x609d("0x1d0")]){void 0==d&&(d=!0),x[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x195")]?d&&(x[_0x609d("0x182")][_0x609d("0x194")].materials[_0x609d("0x1a")](map[_0x609d("0x143")][_0x609d("0x1a9")]),x[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x1d1")]=!0):d&&(x[_0x609d("0x182")][_0x609d("0x194")]=new(THREE[_0x609d("0x1a7")])([x[_0x609d("0x182")][_0x609d("0x194")],x[_0x609d("0x182")][_0x609d("0x194")].clone(),map[_0x609d("0x143")].selectModelMat]));for(var i=x.faceRange[0];i<x.faceRange[1];i++)d?(t.faces[i][_0x609d("0x1ab")]=t[_0x609d("0x1ac")][i][_0x609d("0x1ad")],t[_0x609d("0x1ac")][i].materialIndex=2):(t.faces[i][_0x609d("0x1ad")]=t[_0x609d("0x1ac")][i][_0x609d("0x1ab")],delete t[_0x609d("0x1ac")][i][_0x609d("0x1ab")]);t[_0x609d("0x1ae")]=!0,!d&&x[_0x609d("0x182")][_0x609d("0x194")].materials&&x[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")]<=3&&!x[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x1d1")]&&(x.o3d_[_0x609d("0x194")]=x[_0x609d("0x182")].material[_0x609d("0x195")][0])}else d&&(x[_0x609d("0x182")][_0x609d("0x1d2")]=x[_0x609d("0x182")][_0x609d("0x194")],x.o3d_.material=e[_0x609d("0x143")][_0x609d("0x1a9")]),!d&&(x[_0x609d("0x182")][_0x609d("0x194")]=x[_0x609d("0x182")][_0x609d("0x1d2")])}}},{key:_0x609d("0x1d3"),value:function(x,d,_){var e=this,t=(x[_0x609d("0x193")],x[_0x609d("0x194")]);if(void 0==d&&(d=!0),d&&!_&&(e[_0x609d("0x1d4")](),e[_0x609d("0x11c")][_0x609d("0x1a")](x)),t[_0x609d("0x195")])for(var i=0;i<t[_0x609d("0x195")][_0x609d("0x21")];i++)d&&(t[_0x609d("0x195")][i][_0x609d("0x1c7")]=new(THREE[_0x609d("0x196")])(255,0,0)),!d&&(t[_0x609d("0x195")][i][_0x609d("0x1c7")]=new(THREE[_0x609d("0x196")])(0,0,0));else d&&(t[_0x609d("0x1c7")]=new THREE.Color(255,0,0)),!d&&(t[_0x609d("0x1c7")]=new THREE.Color(0,0,0)),t[_0x609d("0x198")]=!0}},{key:_0x609d("0x1d4"),value:function(){var x=this;x[_0x609d("0x11c")].forEach(function(d){x[_0x609d("0x1d3")](d,!1)}),x[_0x609d("0x11c")][_0x609d("0x21")]=0}},{key:_0x609d("0x1cf"),value:function(){var x=this;x[_0x609d("0x11a")][_0x609d("0xc1")](function(d){x.storeSelect(d,!1)}),x[_0x609d("0x11a")][_0x609d("0x21")]=0}},{key:_0x609d("0x1d5"),value:function(x){return!this[_0x609d("0x1d6")]||this[_0x609d("0x1d6")](x)}},{key:_0x609d("0x176"),value:function(x){var d=this;esmap.ESMapPoi[_0x609d("0x1d7")]={},this[_0x609d("0xc2")]&&(this[_0x609d("0xc2")].init_||(this[_0x609d("0xc2")].on(_0x609d("0x1d8"),function(x){d[_0x609d("0x1d4")]();for(var _=0;_<x[_0x609d("0x1d9")][_0x609d("0x21")];_++){var e=x.intersects[_][_0x609d("0x20")],t=void 0!=e?e:void 0;if(t){var i=(e[_0x609d("0x180")][_0x609d("0x1da")],null),n=e[_0x609d("0x180")][_0x609d("0x1a4")];if(n){for(var g=x[_0x609d("0x1d9")][_][_0x609d("0x1db")],a=0;a<n[_0x609d("0x21")];a++)if(g<n[a][_0x609d("0x1aa")][1]){d[_0x609d("0x132")][_0x609d("0x1dc")]&&d[_0x609d("0x1d5")](n[a])&&!_&&d[_0x609d("0x1ce")](n[a]),i=n[a];break}}else i=e[_0x609d("0x180")],!_&&d[_0x609d("0x1ce")](i);i instanceof esmap[_0x609d("0x1dd")]&&d[_0x609d("0x132")][_0x609d("0x1dc")]&&d[_0x609d("0x1d5")](i)&&!_&&i[_0x609d("0x1de")]();var r=esmap[_0x609d("0x197")].getModelLabelObject(d,i);void 0!=r&&(i[_0x609d("0x1df")]=r.datas_,i[_0x609d("0x1df")][_0x609d("0x1e0")]);var A=x.intersects[_][_0x609d("0x1e1")];i[_0x609d("0x1e2")]={x:-A.x-d[_0x609d("0x141")][_0x609d("0x1b2")],y:A.z+d.mapScene.sceneZ_},d[_0x609d("0x10c")](_0x609d("0x1e3"),i)}}}),this[_0x609d("0xc2")].on(_0x609d("0x1e4"),function(x){if(0!=x[_0x609d("0x1d9")][_0x609d("0x21")]){var _=x[_0x609d("0x1d9")][0][_0x609d("0x20")],e=_[_0x609d("0x180")],t=e[_0x609d("0x1e0")]||{x:0,y:0,z:0},i=x[_0x609d("0x1d9")][0][_0x609d("0x1e1")];e.x=t.x,e.y=t.y,e.z=t.z,e[_0x609d("0x1e2")]={x:-i.x-d[_0x609d("0x141")][_0x609d("0x1b2")],y:i.z+d.mapScene[_0x609d("0x1b4")]};var n=d[_0x609d("0x144")][_0x609d("0x1e5")].o1||0;n<=1&&(e={}),d[_0x609d("0x10c")](_0x609d("0x1e6"),e)}}),this[_0x609d("0xc2")].on("pickerObjects_",function(x){d[_0x609d("0x1cf")]();for(var _=0;_<x[_0x609d("0x1d9")][_0x609d("0x21")];_++){var e=x[_0x609d("0x1d9")][_],t=e[_0x609d("0x20")],i=void 0!=t?t:void 0;if(i){var n=t[_0x609d("0x180")];_0x609d("0x1e7")==t[_0x609d("0x183")]&&!_&&d[_0x609d("0x1d3")](t);var g=x[_0x609d("0x1d9")][_][_0x609d("0x1e1")];n[_0x609d("0x1e2")]={x:-g.x-d[_0x609d("0x141")][_0x609d("0x1b2")],y:g.z+d[_0x609d("0x141")][_0x609d("0x1b4")]},d[_0x609d("0x10c")](_0x609d("0x1e3"),n)}}}),this[_0x609d("0xc2")].on(_0x609d("0x1e8"),function(x){d[_0x609d("0x1cf")](),d.selectModelNull(),d[_0x609d("0x10c")]("mapClickNode",{target:null,mouse:x,nodeType:esmap[_0x609d("0x1e9")][_0x609d("0x1ea")]})})),this[_0x609d("0xc2")].start(this,this[_0x609d("0x12f")][_0x609d("0x138")]));var _=this.sl();this[_0x609d("0x13a")][_0x609d("0x1b9")].on(_0x609d("0x1eb"),function(x){d[_0x609d("0x10c")](_0x609d("0x1eb"),{level:x,scale:d[_0x609d("0x159")][x]})}),35988889==_&&this[_0x609d("0x144")][_0x609d("0x1ec")](x,function(x){d[_0x609d("0x159")]=JSON[_0x609d("0x13")]("["+x.ScaleLevel+"]"),d[_0x609d("0x141")][_0x609d("0x1ed")](x,d[_0x609d("0x172")]);var _=d[_0x609d("0x141")][_0x609d("0x174")](),e=x[_0x609d("0x1ee")]<32503514?x[_0x609d("0x1ee")]:x.maptime/1e3;if((new Date)[_0x609d("0x1ef")]()>1e6*e)return void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")][_0x609d("0x1f2")]);d[_0x609d("0x12f")][_0x609d("0x173")][_0x609d("0x82")](_),d[_0x609d("0x19c")]=[],d[_0x609d("0x150")]=-1;var t=d[_0x609d("0x1f3")](d[_0x609d("0x171")]||d[_0x609d("0x150")]==-1?1:d.focusFnum_);d[_0x609d("0x1f4")]||(d[_0x609d("0x1f5")]=d[_0x609d("0x132")][_0x609d("0x1f6")],d[_0x609d("0x1bd")]=d[_0x609d("0x132")][_0x609d("0x1c2")]?d[_0x609d("0x132")][_0x609d("0x1c2")]>=d.scaleLevels_[_0x609d("0x21")]?d[_0x609d("0x159")].length-1:d[_0x609d("0x132")][_0x609d("0x1c2")]:d[_0x609d("0x159")][_0x609d("0x21")]-1,d[_0x609d("0x13a")][_0x609d("0x1be")](d[_0x609d("0x159")][0],d.scaleLevels_[d[_0x609d("0x1bd")]],!0),t||(d[_0x609d("0x1f7")]=null==d[_0x609d("0x132")][_0x609d("0x1f8")]?x[_0x609d("0x1f9")]:d.options[_0x609d("0x1f8")]),d[_0x609d("0x1f7")]>=d[_0x609d("0x159")].length||d[_0x609d("0x1f7")]<0),d[_0x609d("0x1fa")].sort(function(x,d){return parseInt(x[_0x609d("0x1fb")])-parseInt(d[_0x609d("0x1fb")])});var i=d[_0x609d("0x1fa")].map(function(x){return x[_0x609d("0x1fb")]});d.fNums=i,(_0x609d("0x1fc")==d[_0x609d("0x132")][_0x609d("0x1fd")]||0==d[_0x609d("0x132")][_0x609d("0x1fd")])&&(d.options[_0x609d("0x1fd")]=i[_0x609d("0x29")]());var n=i[_0x609d("0x29")](),g=d[_0x609d("0x132")][_0x609d("0x1fe")];1!=g&&i[_0x609d("0x18")](g)>-1&&(n[0]=n[_0x609d("0x25")](g-1,1,n[0])[0]),d[_0x609d("0x1ff")](n),d._start_();var a=0;d.asyncLoadFloors(a,n,function(){esmap[_0x609d("0x164")][_0x609d("0x200")]=!1})},function(x){esmap[_0x609d("0x164")].IsMapLoading=!1})}},{key:_0x609d("0x201"),value:function(x,d,_){var e=this;x==d.length?(x=0,void(_&&_())):e[_0x609d("0x19c")][_0x609d("0x18")](d[x])>-1?(x++,e[_0x609d("0x201")](x,d,_)):setTimeout(function(){e[_0x609d("0x202")](d[x],function(){d[x]>=e[_0x609d("0x141")][_0x609d("0x203")][_0x609d("0x204")][_0x609d("0x21")]&&e[_0x609d("0x205")](d[x]),x++,e[_0x609d("0x201")](x,d,_)})},0)}},{key:_0x609d("0x1ff"),value:function(x){for(var d=this,_={},e=0;e<x[_0x609d("0x21")];e++){var t=x[e];if(t<=d[_0x609d("0x141")][_0x609d("0x203")].floors.length){var i=d[_0x609d("0x141")][_0x609d("0x203")][_0x609d("0x204")][t-1];if(!i)continue;var n=i.image;n&&!_[n[_0x609d("0x117")](_0x609d("0x206"),"")]&&(_[n[_0x609d("0x117")](_0x609d("0x206"),"")]=1);var g=i[_0x609d("0x207")];if(g[_0x609d("0x21")]!={})for(var a in g){var r=g[a][_0x609d("0x208")]||g[a].Typeid;void 0!=g[a][_0x609d("0x209")]&&""!=g[a][_0x609d("0x209")]&&void 0!=g[a].w&&(r=g[a][_0x609d("0x209")]),_[r]||(_[r]=1)}}}d[_0x609d("0x143")][_0x609d("0x20a")](_,32)}},{key:"stopAllAnimate",value:function(){for(var x=0;x<this[_0x609d("0x162")][_0x609d("0x21")];x++)this.off(_0x609d("0xc6"),this[_0x609d("0x162")][x]);this[_0x609d("0x162")]=[]}},{key:"loadFloor",value:function(x,d){var _=this;x>_[_0x609d("0x141")][_0x609d("0x203")][_0x609d("0x204")][_0x609d("0x21")]||(_[_0x609d("0x141")][_0x609d("0x20b")][x]=_[_0x609d("0x141")][_0x609d("0x203")].floors[x-1],_[_0x609d("0x144")][_0x609d("0x20c")](_[_0x609d("0x172")],x,function(e){function t(){d&&d(x)}_[_0x609d("0x19c")].push(x),_[_0x609d("0x141")][_0x609d("0x20d")](x,e),x==_[_0x609d("0x132")][_0x609d("0x1fe")]&&(_[_0x609d("0x20e")]={floornum:_[_0x609d("0x132")][_0x609d("0x1fe")],time:0}),_[_0x609d("0x141")][_0x609d("0x20f")](x,function(d){d.datas_[_0x609d("0xd0")]==esmap[_0x609d("0x1e9")][_0x609d("0x1a2")]&&(d[_0x609d("0x194")]=_[_0x609d("0x210")](d[_0x609d("0x211")][_0x609d("0x212")]),d[_0x609d("0x213")]={sid:_[_0x609d("0x172")],fnum:x},_[_0x609d("0xc2")][_0x609d("0x214")](d))},t[_0x609d("0xa2")](_),function(){var d=_[_0x609d("0x141")][_0x609d("0x215")](x);d[_0x609d("0x17e")]=_.visibleFloorNums_[_0x609d("0x18")](x)>-1,d[_0x609d("0x17e")]&&_[_0x609d("0x132")][_0x609d("0x216")]&&(x==_[_0x609d("0x150")]?esmap[_0x609d("0x197")][_0x609d("0x217")](x):esmap[_0x609d("0x197")][_0x609d("0x218")](x,_[_0x609d("0x132")].focusAlpha))})}))}},{key:_0x609d("0x219"),value:function(x){var d=document.getElementsByClassName("loading");0!=d[_0x609d("0x21")]&&(d[0][_0x609d("0xcf")][_0x609d("0x21a")]="none"),this[_0x609d("0x14e")]=!0,this[_0x609d("0x1f4")]=!1,this[_0x609d("0x21b")]=!1,this[_0x609d("0x21c")]=0,this[_0x609d("0x21d")]=Math[_0x609d("0x21e")](Math[_0x609d("0x113")]((this[_0x609d("0x21f")]-this[_0x609d("0x220")])/2,2)+Math[_0x609d("0x113")]((this[_0x609d("0x221")]-this[_0x609d("0x222")])/2,2)),this[_0x609d("0x13a")][_0x609d("0x157")](this.validRange_[_0x609d("0xa2")](this)),this[_0x609d("0x223")]={mode:this[_0x609d("0x132")][_0x609d("0x223")],time:0},this[_0x609d("0x224")]=new THREE.Mesh(new(THREE[_0x609d("0x225")])(1e4,1e4,4,4),new(THREE[_0x609d("0x226")])({color:6724044,visible:!1})),this[_0x609d("0x141")].o3dScene_[_0x609d("0x82")](this[_0x609d("0x224")]),this[_0x609d("0x224")][_0x609d("0x227")].x=-Math.PI/2,x||(this[_0x609d("0x189")]=this[_0x609d("0x132")][_0x609d("0x1fd")]),this[_0x609d("0x10c")](_0x609d("0xc3")),this[_0x609d("0x228")]||(this._haveUpdate=!0,this[_0x609d("0x16f")]())}},{key:"loadComplete_",value:function(x){var d=this;d[_0x609d("0x229")](),d[_0x609d("0x152")][_0x609d("0x22a")](),d[_0x609d("0x10c")](_0x609d("0x22b"),{})}},{key:"controlsChange_",value:function(){var x=0;"3d"==this[_0x609d("0x22c")]&&(x=Math.PI),this[_0x609d("0x10c")](_0x609d("0x22d")),this.compass_[_0x609d("0x22e")](-this.controls[_0x609d("0x22f")]()-x),this[_0x609d("0x14e")]=!0}},{key:_0x609d("0x16f"),value:function(x){x?this[_0x609d("0x21c")]=0:(this.up=requestAnimationFrame(this[_0x609d("0x16f")][_0x609d("0xa2")](this,x)),0==this[_0x609d("0x21c")]&&(this[_0x609d("0x21c")]=this[_0x609d("0x230")],this.requireUpdateCollide_=!0),this[_0x609d("0x121")]=this.timerImmediate.getDelta(),this[_0x609d("0x10c")](_0x609d("0x231"),this[_0x609d("0x121")]),this[_0x609d("0x21c")]--,(this[_0x609d("0x14e")]||this.panorama)&&(this[_0x609d("0x14e")]=!1,this.updateSize(null,null,!1),this[_0x609d("0x11d")]=(new Date)[_0x609d("0x1ef")](),this[_0x609d("0x141")][_0x609d("0x232")](this.mapView),this.__time=(new Date)[_0x609d("0x1ef")]()-this[_0x609d("0x11d")],this.__allTime+=this[_0x609d("0x11d")],this[_0x609d("0x11e")]+=1,5==this[_0x609d("0x11e")]&&(this[_0x609d("0x11e")]=0,this[_0x609d("0x11f")]=0),this[_0x609d("0x120")]=this[_0x609d("0x15c")][_0x609d("0x233")](),this[_0x609d("0x10c")](_0x609d("0xc6"),this[_0x609d("0x120")]),this[_0x609d("0x12f")][_0x609d("0x234")](this[_0x609d("0x22c")])))}},{key:_0x609d("0x235"),value:function(){this.update_(!0)}},{key:_0x609d("0x229"),value:function(x,d,_){if(void 0==_&&(_=!0),void 0==x){var e=this[_0x609d("0x12f")][_0x609d("0x236")](_);if(!e)return;x=e.w,d=e.h}this[_0x609d("0x12f")][_0x609d("0x237")](x,d),this.zonTempObj[_0x609d("0x238")](x,d),this[_0x609d("0x147")][_0x609d("0x238")](x,d),_&&(this[_0x609d("0x14e")]=!0)}},{key:_0x609d("0x158"),value:function(x,d){return!0}},{key:_0x609d("0x1f3"),value:function(x,d){var _,t=this[_0x609d("0x132")].defaultCenter,i=this.mapScene[_0x609d("0x239")][_0x609d("0x23a")](),n=this[_0x609d("0x141")][_0x609d("0x203")][_0x609d("0x204")][x-1][_0x609d("0x23b")],g=.75*i.x+n,a=t?new(THREE[_0x609d("0x1b1")])(-(this[_0x609d("0x141")][_0x609d("0x1b2")]+t.x),n,t.y-this[_0x609d("0x141")].sceneZ_):new(THREE[_0x609d("0x1b1")])(0,n,0);if(_=d?new(THREE[_0x609d("0x1b1")])(d.x,g,d.z):new(THREE[_0x609d("0x1b1")])(i.x,g,-i.x),this[_0x609d("0x12f")].camera[_0x609d("0x186")][_0x609d("0x23c")](_),this.floorCenter_=a,this[_0x609d("0x13a")][_0x609d("0x23d")][_0x609d("0x23c")](a),this[_0x609d("0x132")][_0x609d("0x23e")]){var r=this[_0x609d("0x132")][_0x609d("0x23e")],A=0;switch(_0x609d("0x8")==typeof r?_0x609d("0x8"):e(r)){case"string":switch(r){case"n":A=Math.PI;break;case"s":A=0;break;case"w":A=-Math.PI/2;break;case"e":A=Math.PI/2;
break;case"ne":A=.75*Math.PI;break;case"nw":A=1.25*Math.PI;break;case"se":A=Math.PI/4;break;case"sw":A=-Math.PI/4;break;default:A=0}this[_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:A});break;case _0x609d("0x51"):this.controls.update({forceTheta:r*THREE[_0x609d("0x1bb")][_0x609d("0x23f")]});break;case _0x609d("0x20"):var I=this[_0x609d("0x132")][_0x609d("0x23e")][_0x609d("0x23d")][_0x609d("0x240")](","),C=this[_0x609d("0x132")][_0x609d("0x23e")][_0x609d("0x186")].split(","),o=new(THREE[_0x609d("0x1b1")])(parseFloat(I[0]),parseFloat(I[1]),parseFloat(I[2])),s=new(THREE[_0x609d("0x1b1")])(parseFloat(C[0]),parseFloat(C[1]),parseFloat(C[2]));return this[_0x609d("0x13a")][_0x609d("0x23d")][_0x609d("0x23c")](o),this[_0x609d("0x13a")][_0x609d("0x20")][_0x609d("0x186")].copy(s),this[_0x609d("0x13a")][_0x609d("0xc6")](),!0}}if(this[_0x609d("0x132")][_0x609d("0x241")]){var x=this.options.defaultAngle*Math.PI/180;this[_0x609d("0x13a")].update({forceTheta:x})}return null!=this[_0x609d("0x132")][_0x609d("0x242")]&&(this.tiltAngle=this[_0x609d("0x132")][_0x609d("0x242")]),this[_0x609d("0x21c")]=0,!1}},{key:_0x609d("0x243"),value:function(x,d){}},{key:"sl",value:function(){for(var x=this[_0x609d("0x12f")].sceneOrtho[_0x609d("0x19")][0],d=x[_0x609d("0x194")][_0x609d("0xbc")].image?x.material[_0x609d("0xbc")][_0x609d("0x209")][_0x609d("0x6")]:"",_=d.length,e=0,t=0;t<_;t++)e+=d[t][_0x609d("0x118")]();return parseInt(e,16)}},{key:_0x609d("0x244"),value:function(x,d){var _=this;_[_0x609d("0x150")]=x,d=d||{};var e=this[_0x609d("0x141")].mapSceneData[_0x609d("0x204")];for(var t in e){var i=e[t],n=this[_0x609d("0x141")][_0x609d("0x245")][i[_0x609d("0x1fb")]];if(i[_0x609d("0x1fb")]==x){var g=new(THREE[_0x609d("0x1b1")]);g.y=i.Elevation,esmap[_0x609d("0x197")][_0x609d("0x217")](x);var a=this[_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")].clone(),r=this.controls.target[_0x609d("0x1a8")](),A=a.y-r.y;g.x=r.x,g.z=r.z;var I=g[_0x609d("0x1a8")]()[_0x609d("0x246")](r),C=g.y+A-a.y;_[_0x609d("0x132")].focusAlphaMode&&_[_0x609d("0x243")](i[_0x609d("0x1fb")],!0),d[_0x609d("0x247")]||(clearInterval(this[_0x609d("0x122")]),this[_0x609d("0x122")]=em[_0x609d("0x12c")][_0x609d("0x248")](void 0==d.time?this.options.focusAnimateMode?this[_0x609d("0x132")][_0x609d("0x249")]:0:d[_0x609d("0x128")],function(x){_[_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")].y=a.y+C*x,_.controls[_0x609d("0x23d")].y=r.y+I.y*x,_[_0x609d("0x13a")][_0x609d("0xc6")]()},null,function(){_[_0x609d("0x12f")][_0x609d("0x24a")](),d[_0x609d("0x12e")]&&d.callback(x)}),this.floorCenter_=g)}else n&&n[_0x609d("0x17e")]&&this[_0x609d("0x132")][_0x609d("0x216")]&&esmap[_0x609d("0x197")].setFloorAlpha(i[_0x609d("0x1fb")],this[_0x609d("0x132")][_0x609d("0x24b")]),_[_0x609d("0x243")](i[_0x609d("0x1fb")],!1)}}},{key:_0x609d("0x24c"),value:function(x){this[_0x609d("0x12f")][_0x609d("0x173")].add(x[_0x609d("0x182")]),this[_0x609d("0xc2")].addUserPOI(x[_0x609d("0x182")])}},{key:_0x609d("0x24d"),value:function(x){x[_0x609d("0x24e")]()}},{key:"getModelByName",value:function(x){return this[_0x609d("0x141")].getO3dScene().getObjectByName(x)}},{key:_0x609d("0x24f"),value:function(){function x(d){if(null!==d){d[_0x609d("0x180")]&&d[_0x609d("0x180")][_0x609d("0x182")]&&(d[_0x609d("0x180")].o3d_=void 0,d[_0x609d("0x180")]=void 0);for(var _=0;_<d[_0x609d("0x19")][_0x609d("0x21")];_++)x(d[_0x609d("0x19")][_]);d.geometry&&(d[_0x609d("0x193")][_0x609d("0x24e")](),d[_0x609d("0x193")]=void 0),d[_0x609d("0x194")]&&(d[_0x609d("0x194")][_0x609d("0x195")]?d[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0xc1")](function(x){x[_0x609d("0xbc")]&&(x[_0x609d("0xbc")][_0x609d("0x24e")](),x.map=void 0),x[_0x609d("0x24e")](),x=void 0}):(d[_0x609d("0x194")][_0x609d("0x24e")](),d[_0x609d("0x194")]=void 0))}d=void 0}var d=this;cancelAnimationFrame(d.up);var _=this[_0x609d("0x12f")][_0x609d("0x173")],e=this[_0x609d("0x12f")][_0x609d("0x250")];for(var t in d[_0x609d("0x141")][_0x609d("0x251")][_0x609d("0x252")]){var i=d[_0x609d("0x141")][_0x609d("0x251")].meshStore[t];x(i)}x(_),e[_0x609d("0x253")]=void 0,window[_0x609d("0xbc")]=void 0,window[_0x609d("0x254")]=void 0,THREE[_0x609d("0x255")][_0x609d("0x175")](),window.em=void 0,window[_0x609d("0x256")]=void 0}},{key:_0x609d("0x1b7"),value:function(x){return this[_0x609d("0x141")][_0x609d("0x215")](x)[_0x609d("0x186")].y}},{key:_0x609d("0x257"),value:function(x,d,_){var e=this[_0x609d("0x14c")]||this[_0x609d("0x12f")][_0x609d("0x137")],t=null;t=new(THREE[_0x609d("0x1b1")])(x/this.mapView.w_*2-1,1-d/this[_0x609d("0x12f")].h_*2,.5);var i=new(THREE[_0x609d("0x258")]);i[_0x609d("0x259")](t,e),this[_0x609d("0x224")][_0x609d("0x186")].y=_,this.plane_[_0x609d("0x25a")](),this[_0x609d("0x235")]();var n=i.intersectObject(this[_0x609d("0x224")]);if(n[_0x609d("0x21")]>0){var g=n[0][_0x609d("0x1e1")];return new(esmap[_0x609d("0x25b")])(-g.x-this[_0x609d("0x141")][_0x609d("0x1b2")],g.z+this[_0x609d("0x141")][_0x609d("0x1b4")],_)}return null}},{key:"changeFocusFloor",value:function(x){var d=this;d[_0x609d("0x189")]=[x],d[_0x609d("0x20e")]=x}},{key:_0x609d("0x25c"),value:function(x,d,_){var e=this.currentCamera_,t=new(THREE[_0x609d("0x1b1")])(-x-this.mapScene[_0x609d("0x1b2")],_,d-this[_0x609d("0x141")][_0x609d("0x1b4")]);t[_0x609d("0x25d")](e);var i=this[_0x609d("0x12f")][_0x609d("0x25e")],n=this.mapView.h_2_;return new esmap.ESScreenCoord(t.x*i+i,n-t.y*n)}},{key:_0x609d("0x25f"),value:function(x){var d=new THREE.Vector3;d[_0x609d("0x260")](x.matrixWorld),d[_0x609d("0x25d")](this[_0x609d("0x14c")]);var _=d.x*this.mapView[_0x609d("0x25e")],e=d.y*this.mapView[_0x609d("0x261")];return{x:_+this.mapView[_0x609d("0x25e")],y:-e+this[_0x609d("0x12f")][_0x609d("0x261")]}}},{key:_0x609d("0x262"),value:function(x){var d=new(esmap[_0x609d("0x263")])(this,x);return this[_0x609d("0x264")][_0x609d("0x1a")](d),d}},{key:_0x609d("0x265"),value:function(x){x&&x[_0x609d("0x266")]()}},{key:_0x609d("0x267"),value:function(){for(var x=0,d=this[_0x609d("0x264")][_0x609d("0x21")];x<d;x++)this[_0x609d("0x264")][x][_0x609d("0x266")]();this[_0x609d("0x264")]=[]}},{key:_0x609d("0x268"),set:function(x){x[_0x609d("0x1c")](_0x609d("0x19b"))&&(this[_0x609d("0x143")][_0x609d("0x18a")][_0x609d("0x19b")]=x[_0x609d("0x19b")]),x[_0x609d("0x1c")](_0x609d("0x269"))&&(this[_0x609d("0x143")].navigateStyle_[_0x609d("0x269")]=x[_0x609d("0x269")]),x.hasOwnProperty(_0x609d("0x26a"))&&(this[_0x609d("0x143")][_0x609d("0x18a")][_0x609d("0x26a")]=x.alpha),x[_0x609d("0x1c")](_0x609d("0x26a"))&&(this[_0x609d("0x143")][_0x609d("0x18a")][_0x609d("0x26a")]=x[_0x609d("0x26a")]),x[_0x609d("0x1c")](_0x609d("0x26b"))&&x[_0x609d("0x26b")][_0x609d("0x1c")]("size")&&(this[_0x609d("0x143")][_0x609d("0x18a")][_0x609d("0x26b")].size=x[_0x609d("0x26b")][_0x609d("0x26c")]),x.hasOwnProperty(_0x609d("0x26b"))&&x[_0x609d("0x26b")][_0x609d("0x1c")](_0x609d("0x26d"))&&(this[_0x609d("0x143")][_0x609d("0x18a")].dash[_0x609d("0x26d")]=x[_0x609d("0x26b")][_0x609d("0x26d")])},get:function(){return this[_0x609d("0x143")][_0x609d("0x18a")]}},{key:_0x609d("0x220"),get:function(){return this[_0x609d("0x141")][_0x609d("0x26e")]}},{key:_0x609d("0x21f"),get:function(){return this[_0x609d("0x141")].maxX_}},{key:_0x609d("0x222"),get:function(){return this[_0x609d("0x141")][_0x609d("0x26f")]}},{key:_0x609d("0x221"),get:function(){return this[_0x609d("0x141")][_0x609d("0x270")]}},{key:_0x609d("0x271"),set:function(x){this.options[_0x609d("0x271")]=x}},{key:_0x609d("0x272"),set:function(x){this[_0x609d("0x132")][_0x609d("0x272")]=x}},{key:_0x609d("0x1f7"),get:function(){return this.controls[_0x609d("0x1b9")][_0x609d("0x273")]()},set:function(x){this.scaleLevel_=Math.ceil(x),this[_0x609d("0x13a")][_0x609d("0x274")](this[_0x609d("0x159")][this[_0x609d("0x15a")]])}},{key:_0x609d("0x1f6"),get:function(){return this[_0x609d("0x1f5")]},set:function(x){this[_0x609d("0x1ba")](x,this[_0x609d("0x1bd")])}},{key:_0x609d("0x1c2"),get:function(){return this.maxScaleLevel_},set:function(x){this[_0x609d("0x1ba")](this.minScaleLevel_,x)}},{key:_0x609d("0x275"),get:function(){return this[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x276")]()},set:function(x){this.controls[_0x609d("0x1b9")][_0x609d("0x274")](x)}},{key:_0x609d("0x277"),get:function(){return this.compass_[_0x609d("0x278")][_0x609d("0x277")]},set:function(x){var d=this[_0x609d("0x147")][_0x609d("0x278")][_0x609d("0x277")];this[_0x609d("0x147")][_0x609d("0x279")][_0x609d("0x186")].x=this[_0x609d("0x147")].spriteBg_[_0x609d("0x186")].x-d[0]+x[0],this[_0x609d("0x147")][_0x609d("0x279")][_0x609d("0x186")].y=this[_0x609d("0x147")][_0x609d("0x279")][_0x609d("0x186")].y+d[1]-x[1],this[_0x609d("0x147")][_0x609d("0x27a")].position.x=this[_0x609d("0x147")][_0x609d("0x27a")][_0x609d("0x186")].x-d[0]+x[0],this.compass_.spritePt_[_0x609d("0x186")].y=this[_0x609d("0x147")][_0x609d("0x27a")][_0x609d("0x186")].y+d[1]-x[1],this[_0x609d("0x147")][_0x609d("0x278")][_0x609d("0x277")]=x}},{key:_0x609d("0x27b"),get:function(){return this.compass_[_0x609d("0x279")].scale.x},set:function(x){this.compass_.spriteBg_.scale.x=x,this[_0x609d("0x147")][_0x609d("0x279")][_0x609d("0x27c")].y=x,this[_0x609d("0x147")].spritePt_[_0x609d("0x27c")].x=x,this[_0x609d("0x147")][_0x609d("0x27a")][_0x609d("0x27c")].y=x}},{key:_0x609d("0x27d"),get:function(){return{x:-this[_0x609d("0x141")].sceneX_,y:this[_0x609d("0x141")][_0x609d("0x1b4")]}}},{key:_0x609d("0x13b"),get:function(){return this[_0x609d("0x13a")][_0x609d("0x13b")]*THREE[_0x609d("0x1bb")][_0x609d("0x27e")]},set:function(x){this[_0x609d("0x13a")][_0x609d("0x13b")]=x*THREE.Math.DEG2RAD,this[_0x609d("0x13a")][_0x609d("0xc6")]()}},{key:_0x609d("0x27f"),get:function(){return new(THREE[_0x609d("0x1b1")])(this[_0x609d("0x141")][_0x609d("0x1b2")],0,this[_0x609d("0x141")].sceneZ_)}},{key:_0x609d("0x223"),set:function(x){function d(d){var _=esmap.ESMapUtil.getOrthoCameraSizeByPerspectiveCamera(g,d[_0x609d("0x13a")]);a[_0x609d("0x280")]=1,a[_0x609d("0x281")]=-_[_0x609d("0x282")],a[_0x609d("0x282")]=_[_0x609d("0x282")],a[_0x609d("0x283")]=_[_0x609d("0x283")],a[_0x609d("0x284")]=-_[_0x609d("0x283")],a[_0x609d("0x285")](),x&&(d[_0x609d("0x22c")]=x),d[_0x609d("0x286")]=!1}function _(d){var _=a[_0x609d("0x280")],e=d[_0x609d("0x13a")][_0x609d("0x23d")].distanceTo(g[_0x609d("0x186")]),t=g[_0x609d("0x186")][_0x609d("0x1a8")]()[_0x609d("0x246")](d[_0x609d("0x13a")][_0x609d("0x23d")])[_0x609d("0x287")]();g[_0x609d("0x186")][_0x609d("0x23c")](d[_0x609d("0x13a")][_0x609d("0x23d")][_0x609d("0x1a8")]()[_0x609d("0x82")](t[_0x609d("0x288")](e/_))),g[_0x609d("0x285")](),d[_0x609d("0x22c")]=x}if(!this[_0x609d("0x286")]){var t=null,i=null;if(_0x609d("0x20")==("undefined"==typeof x?_0x609d("0x8"):e(x))&&(t=x[_0x609d("0x128")],i=x[_0x609d("0x12e")],x=x[_0x609d("0x289")]),x!=this[_0x609d("0x22c")]){var n=this;n[_0x609d("0x286")]=!0;var g=this[_0x609d("0x12f")][_0x609d("0x137")],a=this[_0x609d("0x12f")][_0x609d("0x28a")];"3d"==this[_0x609d("0x22c")]?(n[_0x609d("0x119")]=n.controls[_0x609d("0x1b9")][_0x609d("0x28b")](),em[_0x609d("0x12c")].fadeTo(void 0!=t?t:n[_0x609d("0x132")][_0x609d("0x28c")]?n.options[_0x609d("0x28d")]:0,function(x){n[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0xc6")]({forcePhi:n[_0x609d("0x119")]-n[_0x609d("0x119")]*x}),n[_0x609d("0x14e")]=!0},null,function(){n[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x20")]=n[_0x609d("0x12f")].cameraTop,n[_0x609d("0x13a")].minPolarAngle=0,n[_0x609d("0x13a")].maxPolarAngle=0,n[_0x609d("0x14c")]=n[_0x609d("0x12f")].cameraTop,n[_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:n[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x22f")]()+Math.PI,notChangeCompass:!0}),d(n),i&&i(n[_0x609d("0x22c")]),n[_0x609d("0x10c")](_0x609d("0x28e"),n[_0x609d("0x22c")])})):(n[_0x609d("0x13a")][_0x609d("0x1b9")].object=n[_0x609d("0x12f")][_0x609d("0x137")],n[_0x609d("0x13a")][_0x609d("0x139")]=0,n[_0x609d("0x13a")].maxPolarAngle=Math.PI/2.5,n[_0x609d("0x14c")]=n.mapView[_0x609d("0x137")],n[_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:n[_0x609d("0x13a")].constraint[_0x609d("0x22f")]()+Math.PI,notChangeCompass:!0}),em[_0x609d("0x12c")].fadeTo(void 0!=t?t:n.options[_0x609d("0x28c")]?n.options[_0x609d("0x28d")]:0,function(x){n[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0xc6")]({forcePhi:n[_0x609d("0x119")]*x}),n[_0x609d("0x14e")]=!0},null,function(){i&&i(n[_0x609d("0x22c")]),n[_0x609d("0x286")]=!1}),_(n),n.emit("viewModeChanged",n[_0x609d("0x22c")])),this[_0x609d("0x21c")]=0}}},get:function(){return this.viewMode_}},{key:"themeName",set:function(x){var d=this;if(x!=this[_0x609d("0x143")][_0x609d("0x28f")]){if(d[_0x609d("0x143")][_0x609d("0x28f")]=x,!d[_0x609d("0x172")])return;d[_0x609d("0x143")][_0x609d("0x290")]=x,d[_0x609d("0x144")][_0x609d("0x1ca")](x,function(x){d[_0x609d("0x143")][_0x609d("0x95")]=x,d.setBackgroundColor(d[_0x609d("0x143")][_0x609d("0x1cd")],1);var _=d[_0x609d("0x143")][_0x609d("0x291")];d[_0x609d("0x141")].o3dScene_.traverse(function(x){if(x.datas_){var e=_[x[_0x609d("0x180")][_0x609d("0x292")]];switch(x[_0x609d("0x180")][_0x609d("0xd0")]){case esmap.ESNodeType[_0x609d("0x293")]:if(!e)return;x[_0x609d("0x194")][_0x609d("0x19b")]=new(THREE[_0x609d("0x196")])(e.strokeColor_),x[_0x609d("0x194")][_0x609d("0x294")]=e.strokewidth;break;case esmap[_0x609d("0x1e9")][_0x609d("0x295")]:var t=d[_0x609d("0x143")][_0x609d("0x296")],i=d[_0x609d("0x143")][_0x609d("0x297")];if(x[_0x609d("0xc9")][_0x609d("0xc9")]&&x[_0x609d("0xc9")][_0x609d("0xc9")][_0x609d("0x180")]instanceof esmap[_0x609d("0x298")]){var n=x[_0x609d("0xc9")][_0x609d("0xc9")][_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x1fb")],g=d[_0x609d("0x143")][_0x609d("0x29a")][n]||d[_0x609d("0x143")][_0x609d("0x29a")][0];if(g)if(t=g[_0x609d("0x19b")],i=g[_0x609d("0x1c8")],g.image){var a=x[_0x609d("0x194")],r=new THREE.MultiMaterial([a,a[_0x609d("0x1a8")]()]),A=r[_0x609d("0x195")][0],I=r[_0x609d("0x195")][1];I[_0x609d("0x19b")]=new(THREE[_0x609d("0x196")])(t),I[_0x609d("0x1c8")]=i;var C=d[_0x609d("0x143")].themeList_[g.image[_0x609d("0x117")](_0x609d("0x206"),"")][_0x609d("0x1d2")][_0x609d("0xbc")];C[_0x609d("0x29b")]=C[_0x609d("0x29c")]=THREE[_0x609d("0x29d")];var o=(d[_0x609d("0x21f")]-d[_0x609d("0x220")])/(d[_0x609d("0x221")]-d[_0x609d("0x222")]),s=g[_0x609d("0x29e")][_0x609d("0x240")](",");C[_0x609d("0x29f")].set(s[0]*o,s[1]),A[_0x609d("0xbc")]=C,A[_0x609d("0x19b")][_0x609d("0x100")](16777215),C.needsUpdate=!0,A.needsUpdate=!0,x.material=r}else x[_0x609d("0x194")][_0x609d("0x195")]?(x[_0x609d("0x194")][_0x609d("0x195")][0][_0x609d("0xbc")].dispose(),x.material.materials[0][_0x609d("0xbc")]=void 0,x[_0x609d("0x194")]=x[_0x609d("0x194")][_0x609d("0x195")][1],x[_0x609d("0x194")][_0x609d("0x19b")]=new THREE.Color(t),x[_0x609d("0x194")][_0x609d("0x1c8")]=i):(x[_0x609d("0x194")][_0x609d("0x19b")]=new THREE.Color(t),x[_0x609d("0x194")][_0x609d("0x1c8")]=i)}break;case esmap.ESNodeType[_0x609d("0x1a2")]:if(e=_[x.datas_[_0x609d("0x299")][_0x609d("0x2a0")]],!e)return;var c=e[_0x609d("0x19b")];if(_0x609d("0x54")==typeof c&&(c=esmap[_0x609d("0x197")][_0x609d("0x2a1")](e[_0x609d("0x19b")])),x.material[_0x609d("0x19b")])x[_0x609d("0x194")][_0x609d("0x19b")]=new THREE.Color(c),x.material[_0x609d("0x1c8")]=e.alpha||1,x.material[_0x609d("0x198")]=!0;else for(var u=x.material[_0x609d("0x195")],f=0;f<u[_0x609d("0x21")]-1;f++)u[f][_0x609d("0x19b")]=new(THREE[_0x609d("0x196")])(c),u[f].opacity=e[_0x609d("0x26a")]||1,u[f][_0x609d("0x198")]=!0;break;case esmap[_0x609d("0x1e9")].FACILITY:if(!e)return;x.material[_0x609d("0xbc")]=e.material_.map,x[_0x609d("0x194")][_0x609d("0x1c8")]=e[_0x609d("0x26a")]||1;break;case esmap[_0x609d("0x1e9")][_0x609d("0x2a2")]:x[_0x609d("0x2a3")](d[_0x609d("0x143")][_0x609d("0x2a4")]);break;case esmap[_0x609d("0x1e9")][_0x609d("0x16c")]:x[_0x609d("0x2a3")](x[_0x609d("0x180")][_0x609d("0x2a5")]);break;case esmap.ESNodeType[_0x609d("0x2a6")]:_0x609d("0x2a7")==x._type_&&x[_0x609d("0x180")][_0x609d("0x2a3")]()}}}),d[_0x609d("0x20e")]=d[_0x609d("0x150")]})}},get:function(){return this[_0x609d("0x143")][_0x609d("0x28f")]}},{key:_0x609d("0x1fa"),get:function(){return this[_0x609d("0x141")][_0x609d("0x203")][_0x609d("0x204")]}},{key:_0x609d("0x20e"),set:function(x){function d(e){e==x&&(t[_0x609d("0x10b")](_0x609d("0x2a8"),d),t[_0x609d("0x244")](x,_),t[_0x609d("0x10c")]("focusFloorNumChanged",x))}if(!this[_0x609d("0x2a9")]){var _=null,t=this;_0x609d("0x20")==("undefined"==typeof x?_0x609d("0x8"):e(x))&&(_=x,x=void 0==x.floornum?x[_0x609d("0x190")]:x.floornum),this[_0x609d("0x141")][_0x609d("0x245")][x]?(this[_0x609d("0x244")](x,_),this[_0x609d("0x10c")](_0x609d("0x2aa"),x)):this.on(_0x609d("0x2a8"),d)}},get:function(){return this[_0x609d("0x150")]}},{key:_0x609d("0x189"),get:function(){return this.visibleFloorNums_},set:function(x){if(x[_0x609d("0x21")]>0){this[_0x609d("0x2ab")]=x,this[_0x609d("0x12f")][_0x609d("0x173")][_0x609d("0x19")][_0x609d("0xc1")](function(d){d[_0x609d("0x180")]instanceof esmap[_0x609d("0x2ac")]&&x[_0x609d("0x18")](d[_0x609d("0x180")][_0x609d("0x1fb")])>-1&&(d[_0x609d("0x180")][_0x609d("0x17e")]=!0)});for(var d in this[_0x609d("0x141")][_0x609d("0x245")]){var _=this[_0x609d("0x141")][_0x609d("0x245")][d];_.visible=x[_0x609d("0x18")](_[_0x609d("0x211")][_0x609d("0x1fb")])>=0}this.emit(_0x609d("0x188"),x)}}},{key:"backgroundColor",set:function(x){this[_0x609d("0x12f")].renderer[_0x609d("0x2ad")](parseInt(x))}},{key:_0x609d("0x2ae"),set:function(x){x!=this[_0x609d("0x147")][_0x609d("0x17e")]&&(this[_0x609d("0x147")].visible=x,x&&this[_0x609d("0x147")][_0x609d("0x22e")](this[_0x609d("0x13a")][_0x609d("0x22f")]()))},get:function(){return this[_0x609d("0x147")][_0x609d("0x17e")]}},{key:_0x609d("0x2af"),set:function(x){x!=this.scaler_[_0x609d("0x17e")]&&(this[_0x609d("0x152")].visible=x)},get:function(){return this[_0x609d("0x152")][_0x609d("0x17e")]}},{key:_0x609d("0xb7"),get:function(){return this[_0x609d("0x14f")]}},{key:_0x609d("0x2b0"),get:function(){return this.mapView[_0x609d("0x2b1")].castShadow},set:function(x){this[_0x609d("0x12f")][_0x609d("0x2b1")].castShadow=x}},{key:_0x609d("0x2b2"),get:function(){return this[_0x609d("0x12f")][_0x609d("0x2b3")]},set:function(x){this[_0x609d("0x12f")][_0x609d("0x2b3")]=x}},{key:_0x609d("0x2b4"),get:function(){return this[_0x609d("0x12f")][_0x609d("0x2b5")]},set:function(x){this[_0x609d("0x12f")][_0x609d("0x2b5")]=x}},{key:_0x609d("0x2b6"),get:function(){return this.mapService[_0x609d("0x1e5")][_0x609d("0x2b7")][_0x609d("0x240")](",")||null}},{key:"floorNums",get:function(){return this[_0x609d("0x15b")]},set:function(x){this[_0x609d("0x15b")]=x}},{key:_0x609d("0x2b8"),get:function(){return this[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x28b")]()*THREE[_0x609d("0x1bb")][_0x609d("0x27e")]},set:function(x){x=x*Math.PI/180,x<this[_0x609d("0x13a")].minPolarAngle&&(x=this[_0x609d("0x13a")][_0x609d("0x139")]),x>this[_0x609d("0x13a")][_0x609d("0x13b")]&&(x=this[_0x609d("0x13a")][_0x609d("0x13b")]),this[_0x609d("0x13a")].update({forcePhi:x}),this.updateCountDown_=0}},{key:_0x609d("0x12a"),get:function(){var x=this[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x22f")]();return("3d"==this[_0x609d("0x223")]?x:x+Math.PI)*THREE.Math[_0x609d("0x27e")]},set:function(x){x=-x*THREE[_0x609d("0x1bb")][_0x609d("0x23f")],this[_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:-x+("3d"==this[_0x609d("0x223")]?0:Math.PI)}),this[_0x609d("0x21c")]=0}},{key:_0x609d("0x2b9"),get:function(){return this[_0x609d("0x144")][_0x609d("0x1e5")][_0x609d("0x2ba")]}},{key:_0x609d("0x2bb"),get:function(){return this[_0x609d("0x12f")].w_}},{key:_0x609d("0x185"),get:function(){return this[_0x609d("0x12f")].h_}}]),x}();i.tempFlipX_=!0,i[_0x609d("0x200")]=!1,i[_0x609d("0x2bc")]=!1,d[_0x609d("0x92")]=i},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x278")]=new(esmap[_0x609d("0x2bd")])(e),"normal"==this[_0x609d("0x278")].size?(this.w_=42,this.h_=42,this[_0x609d("0x2be")]=10):(this.w_=32,this.h_=32,this[_0x609d("0x2be")]=8),this.x_=this.options_.offset.x,this.y_=this[_0x609d("0x278")].offset.y,this[_0x609d("0x2bf")]=!!this.options_[_0x609d("0x2bf")]&&this.options_.allLayer,this[_0x609d("0x2c0")]=this[_0x609d("0x278")][_0x609d("0x2c0")]?this[_0x609d("0x278")][_0x609d("0x2c0")]:5,this[_0x609d("0x2c1")]=!!this.options_[_0x609d("0x2c2")]&&this[_0x609d("0x278")][_0x609d("0x2c2")],this[_0x609d("0x2c3")]=this[_0x609d("0x278")].position?this[_0x609d("0x278")][_0x609d("0x186")]:2,this[_0x609d("0x2c4")]=null,this[_0x609d("0x2c5")]=!1,this[_0x609d("0x2c6")]=_0x609d("0x2c7"),this[_0x609d("0x2c8")]=_0x609d("0x2c9"),this.defaultShadow_="2px 2px 3px rgba(0,0,0, 0.3)",this.defaultRadius_=_0x609d("0x2ca"),this.$=function(x){return document[_0x609d("0x2cb")](x)},this[_0x609d("0x2cc")],this[_0x609d("0x2cd")],this[_0x609d("0x2ce")],this[_0x609d("0x2cf")],this[_0x609d("0xbc")]=d,this.left_=10,this[_0x609d("0x2d0")]=20,this[_0x609d("0x2d1")]=10,this.defaultPadding_=10,this[_0x609d("0x2d2")]=this[_0x609d("0x278")][_0x609d("0x2d3")],d&&this[_0x609d("0x135")](d)}return e(x,[{key:"init",value:function(x){var d=this.$(_0x609d("0x2d4"));d&&x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x131")](d);var _=this.$(".arrow-btns-wrap");_&&x[_0x609d("0x12f")][_0x609d("0x130")].removeChild(_);var e=document.createElement(_0x609d("0x2d5"));e[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x2d7")),e[_0x609d("0xcf")].width=this.w_+"px",e[_0x609d("0xcf")][_0x609d("0x185")]=this.h_+"px",e[_0x609d("0xcf")][_0x609d("0x186")]=_0x609d("0x2d8"),e[_0x609d("0xcf")][_0x609d("0x2d9")]=_0x609d("0x2da"),e[_0x609d("0xcf")][_0x609d("0x2db")]=this[_0x609d("0x2dc")],e[_0x609d("0xcf")].borderRadius=this[_0x609d("0x2dd")],e[_0x609d("0xcf")].textAlign=_0x609d("0x27d"),e[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),e[_0x609d("0xcf")][_0x609d("0x2e0")]="0.8em",e[_0x609d("0xcf")][_0x609d("0x2e1")]=_0x609d("0x2e2"),e.style[_0x609d("0x2e3")]=_0x609d("0x2e4"),e[_0x609d("0xcf")].lineHeight=this.h_+"px",e[_0x609d("0xcf")].color=this[_0x609d("0x2c6")],e[_0x609d("0x2e5")]="F1";var t=document[_0x609d("0x2")]("div");t[_0x609d("0xd3")]("class",_0x609d("0x2e6")),t.style[_0x609d("0x186")]=_0x609d("0x2d8"),t[_0x609d("0xcf")][_0x609d("0x2d9")]=_0x609d("0x2da"),t[_0x609d("0xcf")][_0x609d("0x2db")]=this[_0x609d("0x2dc")],t.style[_0x609d("0x2e7")]=this[_0x609d("0x2dd")],t[_0x609d("0x2e8")]=this[_0x609d("0x2e9")][_0x609d("0xa2")](this),t.addEventListener(_0x609d("0x2ea"),this[_0x609d("0x2e9")][_0x609d("0xa2")](this),!1),t.addEventListener(_0x609d("0x2eb"),this[_0x609d("0x2eb")][_0x609d("0xa2")](this),!1),t[_0x609d("0x14a")](_0x609d("0x2ec"),this[_0x609d("0x2ec")][_0x609d("0xa2")](this),!1),t[_0x609d("0x14a")](_0x609d("0x2ed"),this[_0x609d("0x2ed")][_0x609d("0xa2")](this),!1);var i=x[_0x609d("0x12f")][_0x609d("0x130")].getElementsByTagName(_0x609d("0x2ee"))[0];if(x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x2ef")](e,i),x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x2ef")](t,i),this[_0x609d("0x2f0")](x[_0x609d("0x1fa")],x.focusFloorNum),t.style[_0x609d("0x21a")]=_0x609d("0x2f1"),this.showBtnCount<x[_0x609d("0x1fa")].length){var n=document[_0x609d("0x2")]("div");n[_0x609d("0xd3")]("class",_0x609d("0x2f2")),n[_0x609d("0xcf")][_0x609d("0x185")]=_0x609d("0x2f3"),n[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2f1"),n[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x2f6"),n[_0x609d("0xcf")].cursor=_0x609d("0x2df"),n[_0x609d("0x2f7")]=this.up[_0x609d("0xa2")](this);var g=document[_0x609d("0x2")](_0x609d("0x2d5"));g[_0x609d("0xd3")]("class",_0x609d("0x2f8")),g[_0x609d("0xcf")].height="18px",g[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x2f6"),g[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),g[_0x609d("0xcf")][_0x609d("0x21a")]="none",g[_0x609d("0x2f7")]=this[_0x609d("0x2f9")][_0x609d("0xa2")](this),t.appendChild(n,t),t[_0x609d("0x7")](g),t[_0x609d("0xcf")].overflow=_0x609d("0x2fa"),t[_0x609d("0xcf")][_0x609d("0x185")]=this[_0x609d("0x2c0")]*(this.h_+1)+"px",this[_0x609d("0x2fb")](x[_0x609d("0x1fa")].length-x[_0x609d("0x20e")])}else this.showBtnCount=x[_0x609d("0x1fa")][_0x609d("0x21")],t[_0x609d("0xcf")][_0x609d("0x185")]=this[_0x609d("0x2c0")]*(this.h_+1)+"px";this.setPosition_(e),this[_0x609d("0x2fc")](t,this.showBtnCount*(this.h_+2)),this.controlPositionListener();var a=this;e[_0x609d("0x14a")](_0x609d("0x2fd"),function(d){var _=a.$(_0x609d("0x2fe"));_0x609d("0x2f1")==_[_0x609d("0xcf")].display?(_[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2ff"),a[_0x609d("0x2fb")](x[_0x609d("0x1fa")][_0x609d("0x21")]-x[_0x609d("0x20e")]),a[_0x609d("0x2c1")]=!0):(_[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2f1"),a[_0x609d("0x2c1")]=!1)},!1)}},{key:_0x609d("0x300"),value:function(){if(this[_0x609d("0xbc")]){var x=this;this.map.on(_0x609d("0xc6"),function(){var d=x.$(_0x609d("0x2d4")),_=x.$(_0x609d("0x2fe"));x.setPosition_(d),x[_0x609d("0x2fc")](_,x[_0x609d("0x2c0")]*(x.h_+2))})}}},{key:_0x609d("0x2fc"),value:function(x,d){switch(this.positon_){case 1:d?x[_0x609d("0xcf")][_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.h_+this[_0x609d("0x301")]+this.y_+"px":x[_0x609d("0xcf")][_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.y_+"px",x.style[_0x609d("0x281")]=this[_0x609d("0x302")]+this.x_+"px";break;case 2:var _=this[_0x609d("0xbc")].mapView[_0x609d("0x130")][_0x609d("0x187")]-this.h_-60;d&&(_=_-d-this[_0x609d("0x301")]),x[_0x609d("0xcf")][_0x609d("0x283")]=_-this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x281")]=this.left_+this.x_+"px";break;case 3:d?x[_0x609d("0xcf")][_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.h_+this[_0x609d("0x301")]+this.y_+"px":x[_0x609d("0xcf")][_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.y_+"px",x.style[_0x609d("0x282")]=this[_0x609d("0x2d1")]+this.x_+"px";break;case 4:var e=this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")].offsetHeight-this.h_-60;d&&(e=e-d-this[_0x609d("0x301")]),x.style[_0x609d("0x283")]=e-this.y_+"px",x[_0x609d("0xcf")].right=this.right_+this.x_+"px"}}},{key:_0x609d("0x2f0"),value:function(x,d){this.$(".arrow-btns-wrap")[_0x609d("0x303")]="";for(var _=x.length-1;_>=0;_--){var e=x[_];this.$(_0x609d("0x2fe"))[_0x609d("0x7")](this.createLayerButton_(e[_0x609d("0x1fb")],e[_0x609d("0x304")][_0x609d("0x305")](),d==e[_0x609d("0x1fb")])),_>0&&this.$(_0x609d("0x2fe"))[_0x609d("0x7")](this[_0x609d("0x306")]())}this[_0x609d("0x2c5")]=!0}},{key:_0x609d("0x307"),value:function(x){this[_0x609d("0x2c4")]=x}},{key:"up",value:function(){var x=document[_0x609d("0x308")](_0x609d("0x309"))[_0x609d("0x21")],d=x-parseInt(this.$(_0x609d("0x30a"))[_0x609d("0x30b")][_0x609d("0x1fb")]);if(0!=d){var _=d-1;this[_0x609d("0x30c")](document[_0x609d("0x308")](".arrow-btns-wrap > label")[_]),this[_0x609d("0x2fb")](_)}}},{key:_0x609d("0x2f9"),value:function(){var x=document[_0x609d("0x308")](_0x609d("0x309"))[_0x609d("0x21")],d=x-parseInt(this.$(".arrow-btns-wrap>label[class*='active']").dataset[_0x609d("0x1fb")]);if(d+1!=x){var _=d+1;this.triggerClick(document[_0x609d("0x308")](_0x609d("0x309"))[_]),this[_0x609d("0x2fb")](_)}}},{key:"touchstart",value:function(x){x.preventDefault(),this.touchPointX=x[_0x609d("0x30d")][0][_0x609d("0x30e")],this[_0x609d("0x2cd")]=x[_0x609d("0x30d")][0][_0x609d("0x30f")]}},{key:_0x609d("0x2ec"),value:function(x){x[_0x609d("0x310")](),this[_0x609d("0x2ce")]=x.touches[0].pageX,this[_0x609d("0x2cf")]=x[_0x609d("0x30d")][0][_0x609d("0x30f")]}},{key:_0x609d("0x2ed"),value:function(x){var x=x||window[_0x609d("0x311")],d=null,_=this.$(_0x609d("0x2fe"))[_0x609d("0x312")];x.changedTouches[_0x609d("0x21")]>0&&(this[_0x609d("0x2ce")]=x[_0x609d("0x313")][0][_0x609d("0x30e")],this[_0x609d("0x2cf")]=x[_0x609d("0x313")][0][_0x609d("0x30f")]),d=x[_0x609d("0x23d")];var e=this[_0x609d("0x2cf")]-this[_0x609d("0x2cd")];e>0&&e>this.h_?_-=e:e<0&&-e>this.h_?_+=-e:0==e&&d&&this[_0x609d("0x30c")](d),this.$(".arrow-btns-wrap")[_0x609d("0x312")]=_,this.touchPointX=this[_0x609d("0x2ce")],this[_0x609d("0x2cd")]=this[_0x609d("0x2cf")]}},{key:_0x609d("0x2e9"),value:function(x){x=x||window[_0x609d("0x311")];var d=this.$(_0x609d("0x2fe"))[_0x609d("0x312")];x[_0x609d("0x314")]?(x[_0x609d("0x314")]>0&&(d-=x.wheelDelta),x[_0x609d("0x314")]<0&&(d+=-x[_0x609d("0x314")])):x[_0x609d("0x315")]&&(x[_0x609d("0x315")]>0&&(d-=x[_0x609d("0x315")]),x[_0x609d("0x315")]<0&&(d+=-x[_0x609d("0x315")])),this.$(_0x609d("0x2fe")).scrollTop=d}},{key:_0x609d("0x316"),value:function(x,d,_){var e=this,t=document[_0x609d("0x2")](_0x609d("0x1df"));if(t.setAttribute(_0x609d("0x2d6"),_0x609d("0x317")),t[_0x609d("0xd3")](_0x609d("0x318"),x),t.style[_0x609d("0x21a")]=_0x609d("0x319"),t[_0x609d("0xcf")].textAlign=_0x609d("0x27d"),t[_0x609d("0xcf")][_0x609d("0x2bb")]=e.w_+"px",t[_0x609d("0xcf")][_0x609d("0x185")]=e.h_+"px",t[_0x609d("0xcf")][_0x609d("0x31a")]=this.h_+"px",t[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),t[_0x609d("0xcf")][_0x609d("0x2e0")]=_0x609d("0x31b"),t[_0x609d("0xcf")][_0x609d("0x2e1")]=_0x609d("0x2e2"),t[_0x609d("0xcf")][_0x609d("0x31c")]=0,t[_0x609d("0xcf")][_0x609d("0x19b")]=e[_0x609d("0x2c8")],_){this[_0x609d("0x31d")](t,_0x609d("0x17"));var i=e.$(".floor-btns-wrap");i[_0x609d("0x2e5")]=d}t[_0x609d("0x2f7")]=function(){var x=e.$(_0x609d("0x30a"));if(x[_0x609d("0x2e5")]!==this[_0x609d("0x2e5")]){e[_0x609d("0x31e")](x,_0x609d("0x17")),e[_0x609d("0x31d")](this,_0x609d("0x17"));var d=e.$(_0x609d("0x2d4"));d[_0x609d("0x2e5")]=this.innerText,e[_0x609d("0x31f")]()}};var n=document[_0x609d("0x2")]("span");return n[_0x609d("0x2e5")]=d,t[_0x609d("0x7")](n),t}},{key:_0x609d("0x306"),value:function(){var x=document[_0x609d("0x2")]("hr");return x[_0x609d("0xcf")][_0x609d("0x185")]=_0x609d("0x320"),x[_0x609d("0xcf")].border=_0x609d("0x2f1"),x[_0x609d("0xcf")][_0x609d("0x321")]="1px solid rgba(153, 153, 153, 0.45)",x[_0x609d("0xcf")][_0x609d("0x2bb")]=_0x609d("0x322"),x[_0x609d("0xcf")][_0x609d("0x31c")]=_0x609d("0x323"),x[_0x609d("0xcf")].filter=_0x609d("0x324"),x}},{key:_0x609d("0x31f"),value:function(x){var d=[],x=this.$(_0x609d("0x30a"));x&&d[_0x609d("0x1a")](parseInt(x[_0x609d("0x30b")][_0x609d("0x1fb")])),this[_0x609d("0x325")](d),null!==this.change_&&this[_0x609d("0x2c4")](d,this[_0x609d("0x2bf")])}},{key:_0x609d("0x326"),value:function(x,d){d&&(this[_0x609d("0x2bf")]=d);var _=this.map[_0x609d("0x19c")][_0x609d("0x21")]-x;this[_0x609d("0x30c")](document[_0x609d("0x308")](".arrow-btns-wrap > label")[_]),this[_0x609d("0x2fb")](_)}},{key:_0x609d("0x325"),value:function(x){this[_0x609d("0xbc")]&&(this[_0x609d("0x2bf")]?this.map.visibleFloorNums=this[_0x609d("0xbc")][_0x609d("0x19c")]:this.map[_0x609d("0x189")]=x,this[_0x609d("0xbc")][_0x609d("0x20e")]=x[0])}},{key:_0x609d("0x327"),value:function(x){for(var d=this.$(_0x609d("0x2d4")),_=document[_0x609d("0x308")](_0x609d("0x309")),e=0,t=_[_0x609d("0x21")];e<t;e++){var i=_[e];if(e==x){d[_0x609d("0xcf")][_0x609d("0x19b")]=this[_0x609d("0x2c6")],d[_0x609d("0x2e5")]=i[_0x609d("0x2e5")];break}}}},{key:_0x609d("0x2fb"),value:function(x){this[_0x609d("0x327")](x);var d=this.$(".arrow-btns-wrap > label")[_0x609d("0x328")],_=document[_0x609d("0x308")](".arrow-btns-wrap > label")[_0x609d("0x21")];if(_-this[_0x609d("0x2c0")]>x){var e=x*(d+2),t=this.$(_0x609d("0x2fe"))[_0x609d("0x312")];e<t&&(this.$(".arrow-btns-wrap")[_0x609d("0x312")]=e)}if(this[_0x609d("0x2c0")]<=x){var e=(x-this[_0x609d("0x2c0")]+1)*(d+2),t=this.$(".arrow-btns-wrap")[_0x609d("0x312")];e>t&&(this.$(".arrow-btns-wrap")[_0x609d("0x312")]=e)}}},{key:"checkBtn",value:function(){var x=this.$(_0x609d("0x30a")).dataset[_0x609d("0x1fb")]-1,d=document[_0x609d("0x308")](".arrow-btns-wrap > label")[_0x609d("0x21")],_=this.$(".arrow-floors-wrap.arrow-down-btn"),e=this.$(_0x609d("0x329"));
_&&(0==x?(this[_0x609d("0x31d")](_,"disabled"),_[_0x609d("0xcf")][_0x609d("0x32a")]="url("+this.imgURL_+_0x609d("0x32b")):(this[_0x609d("0x31e")](_,_0x609d("0x32c")),_.style.backgroundImage=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32d"))),e&&(x==d-1?(this[_0x609d("0x31d")](e,_0x609d("0x32c")),e[_0x609d("0xcf")][_0x609d("0x32a")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32e")):(this[_0x609d("0x31e")](e,_0x609d("0x32c")),e[_0x609d("0xcf")][_0x609d("0x32a")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32f")))}},{key:_0x609d("0x31d"),value:function(x,d){var _=x[_0x609d("0x330")],e=""!=_?" ":"",t=_+e+d;x[_0x609d("0x330")]=t}},{key:_0x609d("0x31e"),value:function(x,d){var _=" "+x[_0x609d("0x330")]+" ";_=_.replace(/(\s+)/gi," ");var e=_[_0x609d("0x117")](" "+d+" "," ");e=e.replace(/(^\s+)|(\s+$)/g,""),x[_0x609d("0x330")]=e}},{key:_0x609d("0x331"),value:function(x,d){var _=x[_0x609d("0x330")],e=_[_0x609d("0x240")](/\s+/),t=0;for(t in e)if(e[t]==d)return!0;return!1}},{key:"triggerClick",value:function(x){if(x)if(document[_0x609d("0x1fc")])x[_0x609d("0x2fd")]();else{var d=document[_0x609d("0x332")]("MouseEvents");d.initEvent(_0x609d("0x2fd"),!0,!0),x[_0x609d("0x333")](d)}}}]),x}();d[_0x609d("0x92")]=t},function(x,d){_0x609d("0x93"),CanvasRenderingContext2D[_0x609d("0x1b")][_0x609d("0x334")]=function(x,d,_,e,t){return this[_0x609d("0x335")](),this[_0x609d("0x336")](x+t,d),this[_0x609d("0x337")](x+_,d,x+_,d+e,t),this.arcTo(x+_,d+e,x,d+e,t),this[_0x609d("0x337")](x,d+e,x,d,t),this[_0x609d("0x337")](x,d,x+_,d,t),this.closePath(),this}},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d){_(this,x),this.map=d;var e=esmap[_0x609d("0x197")].getPlatform();this[_0x609d("0x338")]=e[_0x609d("0x339")],this[_0x609d("0x33a")]=new(THREE[_0x609d("0x33b")])(d[_0x609d("0x12f")][_0x609d("0x250")]),this.composerOrtho=new(THREE[_0x609d("0x33b")])(d[_0x609d("0x12f")][_0x609d("0x250")]),this.scale=(e[_0x609d("0x339")],2),this[_0x609d("0x33c")]={width:d[_0x609d("0x12f")].w_,height:d[_0x609d("0x12f")].h_};var t=new(THREE[_0x609d("0x33d")])(d[_0x609d("0x12f")].scene,d[_0x609d("0x12f")][_0x609d("0x137")]),i=new(THREE[_0x609d("0x33e")])(THREE.CopyShader);i[_0x609d("0x33f")]=!0,this[_0x609d("0x33a")].addPass(t),this[_0x609d("0x33a")].addPass(i);var n=new(THREE[_0x609d("0x33d")])(d[_0x609d("0x12f")][_0x609d("0x173")],d.mapView[_0x609d("0x28a")]),g=new(THREE[_0x609d("0x33e")])(THREE.CopyShader);g[_0x609d("0x33f")]=!0,this[_0x609d("0x340")][_0x609d("0x341")](n),this[_0x609d("0x340")][_0x609d("0x341")](g),this[_0x609d("0x342")](this[_0x609d("0x27c")])}return e(x,[{key:_0x609d("0x234"),value:function(){this[_0x609d("0xbe")]?this[_0x609d("0x33a")][_0x609d("0x234")](this.map[_0x609d("0x15c")][_0x609d("0x233")]()):this[_0x609d("0xbc")][_0x609d("0x12f")].renderer.render(this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x173")],this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x137")])}},{key:_0x609d("0x343"),value:function(){this[_0x609d("0xbe")]?this[_0x609d("0x340")][_0x609d("0x234")](this[_0x609d("0xbc")][_0x609d("0x15c")][_0x609d("0x233")]()):this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x250")][_0x609d("0x234")](this.map[_0x609d("0x12f")][_0x609d("0x173")],this[_0x609d("0xbc")].mapView[_0x609d("0x28a")])}},{key:"setScale",value:function(x){this[_0x609d("0x27c")]=x,this[_0x609d("0x26c")]={width:this[_0x609d("0x33c")][_0x609d("0x2bb")]*this[_0x609d("0x27c")],height:this.originSize.height*this[_0x609d("0x27c")]}}},{key:_0x609d("0x344"),value:function(x,d){this[_0x609d("0x33c")][_0x609d("0x2bb")]=x,this[_0x609d("0x33c")][_0x609d("0x185")]=d,this[_0x609d("0x342")](this.scale)}},{key:"size",get:function(){return{width:this[_0x609d("0x33a")][_0x609d("0x345")][_0x609d("0x2bb")],height:this[_0x609d("0x33a")][_0x609d("0x345")][_0x609d("0x185")]}},set:function(x){this[_0x609d("0x33a")][_0x609d("0x346")](x[_0x609d("0x2bb")],x[_0x609d("0x185")]),this[_0x609d("0x340")][_0x609d("0x346")](x[_0x609d("0x2bb")],x[_0x609d("0x185")])}},{key:_0x609d("0xbe"),get:function(){return this[_0x609d("0x338")]},set:function(x){this[_0x609d("0x338")]=x}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function x(d,e){_(this,x),this.x=d?d:0,this.y=e?e:0};d[_0x609d("0x92")]=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var e=function x(d){_(this,x);var e=esmap.ESMapUtil[_0x609d("0x347")]()[_0x609d("0x339")];Object[_0x609d("0x348")](this,d),this[_0x609d("0x26c")]=d&&d[_0x609d("0x26c")]?d[_0x609d("0x26c")]:e?esmap[_0x609d("0x349")][_0x609d("0x34a")]:esmap[_0x609d("0x349")].Map_CONTROL_SMALL,this[_0x609d("0x186")]=d&&d[_0x609d("0x186")]?d.position:null,this[_0x609d("0x2bf")]=d&&d.allLayer?d[_0x609d("0x2bf")]:null,this[_0x609d("0x1b3")]=d&&d.offset?d[_0x609d("0x1b3")]:e?new(esmap[_0x609d("0x34b")])(0,0):new(esmap[_0x609d("0x34b")])(-6,-12),this[_0x609d("0x2d3")]=d&&d[_0x609d("0x2d3")]?d[_0x609d("0x2d3")]:_0x609d("0x34c")};d[_0x609d("0x92")]=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&"function"!=typeof d?x:d}function t(x,d){if("function"!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object.create(d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x){var t;return _(this,d),t=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")].MODEL3D,{},new(THREE[_0x609d("0x352")]))),t[_0x609d("0x353")]=_0x609d("0x354"),t[_0x609d("0x355")]=x||{},t[_0x609d("0x356")]=esmap.ESMap[_0x609d("0x165")],t[_0x609d("0x357")](),t}return t(d,x),i(d,[{key:_0x609d("0x357"),value:function(){var x=this,d=esmap[_0x609d("0x164")][_0x609d("0x165")],_=(d[_0x609d("0x141")],esmap.ESUtil[_0x609d("0x85")]);em[_0x609d("0x133")][_0x609d("0x358")](x),x.x_=-d[_0x609d("0x141")][_0x609d("0x1b2")]-_[_0x609d("0x359")](x[_0x609d("0x355")],"x",d.center.x),x.y_=_[_0x609d("0x359")](x[_0x609d("0x355")],"y",d[_0x609d("0x27d")].y)-d[_0x609d("0x141")][_0x609d("0x1b4")],x.angle_={x:0,y:THREE.Math[_0x609d("0x35a")](_[_0x609d("0x359")](x.opts_,_0x609d("0x35b"),0)),z:0},x.name_=_[_0x609d("0x359")](x[_0x609d("0x355")],_0x609d("0x43"),null),x[_0x609d("0x35c")]=_[_0x609d("0x359")](x.opts_,"id",esmap[_0x609d("0x126")].id++),x[_0x609d("0x35d")]=_.getValue(x[_0x609d("0x355")],_0x609d("0x185"),0),x[_0x609d("0x35e")]=_[_0x609d("0x359")](x[_0x609d("0x355")],_0x609d("0x35f"),!0),x[_0x609d("0x360")]=_.getValue(x[_0x609d("0x355")],_0x609d("0x12e"),null);var e=_.getValue(x[_0x609d("0x355")],"size",1);x.url_=_.getValue(x.opts_,_0x609d("0x94"),_0x609d("0x361"));var t=e instanceof Object?{x:e.x||1,y:e.y||1,z:e.z||1}:{x:e,y:e,z:e};x[_0x609d("0x362")]=t,x.showLevel_=_[_0x609d("0x359")](x[_0x609d("0x355")],_0x609d("0x363"),20),this[_0x609d("0x364")]=this._update[_0x609d("0xa2")](this),d.on(_0x609d("0xc6"),this[_0x609d("0x364")])}},{key:_0x609d("0x365"),value:function(x){esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x365")][_0x609d("0x15")](this,x)}},{key:_0x609d("0x82"),value:function(x){this[_0x609d("0x182")][_0x609d("0x82")](x)}},{key:_0x609d("0x367"),value:function(){this[_0x609d("0x182")][_0x609d("0x367")]()}},{key:_0x609d("0x1de"),value:function(x){this[_0x609d("0x182")][_0x609d("0x1de")](x)}},{key:_0x609d("0x368"),value:function(){this[_0x609d("0x182")].stopFlash()}},{key:_0x609d("0x369"),value:function(x){this.o3d_[_0x609d("0x369")](x)}},{key:_0x609d("0x36a"),value:function(x){this[_0x609d("0x182")][_0x609d("0x36a")](x)}},{key:_0x609d("0x336"),value:function(x){this[_0x609d("0x182")].moveTo(x)}},{key:_0x609d("0x36b"),value:function(x){this.o3d_.rotate(x)}},{key:_0x609d("0x36c"),value:function(x){this[_0x609d("0x182")][_0x609d("0x36c")](x)}},{key:_0x609d("0x36d"),value:function(){var x=this;x[_0x609d("0xc9")]&&x[_0x609d("0xc9")][_0x609d("0xc7")](x),x[_0x609d("0x24e")]&&x[_0x609d("0x24e")]()}},{key:_0x609d("0x35b"),get:function(){return THREE[_0x609d("0x1bb")][_0x609d("0x36e")](this[_0x609d("0x182")][_0x609d("0x227")].y)},set:function(x){var d={x:0,y:THREE[_0x609d("0x1bb")][_0x609d("0x35a")](x),z:0};this[_0x609d("0x182")][_0x609d("0x227")][_0x609d("0x100")](d.x,d.y,d.z)}},{key:"url",get:function(){return this[_0x609d("0x355")][_0x609d("0x36f")]},set:function(x){this.opts_[_0x609d("0x36f")]=x}},{key:_0x609d("0x17e"),get:function(){return this[_0x609d("0x182")][_0x609d("0x17e")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x17e")]=x}},{key:"ID",get:function(){return this[_0x609d("0x35c")]}},{key:"name",get:function(){return this[_0x609d("0x370")]},set:function(x){this.name_=x}},{key:"x",get:function(){return this[_0x609d("0x355")].x},set:function(x){this.x_=x}},{key:"y",get:function(){return this[_0x609d("0x355")].y},set:function(x){this.y_=x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n,Object[_0x609d("0x372")](n[_0x609d("0x1b")],{_update:{value:function(x){this[_0x609d("0x182")].updateScreenSize&&this[_0x609d("0x182")].updateScreenSize()}}})},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x[_0x609d("0x1b")]=Object.create(d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(x){function d(x){_(this,d),x=x||{};var t=x.data,i=e(this,(d[_0x609d("0x350")]||Object.getPrototypeOf(d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x2a6")],t,x[_0x609d("0x373")]||new(THREE[_0x609d("0x352")]),x[_0x609d("0x173")]||esmap[_0x609d("0x164")][_0x609d("0x165")][_0x609d("0x141")]));return i.params=x,t&&void 0!=t.typeID&&(i[_0x609d("0x292")]=x[_0x609d("0x95")][_0x609d("0x292")]),i[_0x609d("0x19e")]=x[_0x609d("0x4")]||esmap[_0x609d("0x1dd")][_0x609d("0x1ea")],i}return t(d,x),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=i},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t,i){var n,g;return _(this,d),n=g=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x374")],x,t,i)),g[_0x609d("0x1de")]=function(x){return this.o3d_.flash(x)},g.jump=function(x){return this[_0x609d("0x182")][_0x609d("0x36c")](x)},g[_0x609d("0x375")]=function(x){this[_0x609d("0x182")][_0x609d("0x375")](x)},g[_0x609d("0x182")][_0x609d("0x376")]=g[_0x609d("0x182")][_0x609d("0x17e")],g}return t(d,x),i(d,[{key:"ID",get:function(){return this[_0x609d("0x299")][_0x609d("0x377")]}},{key:_0x609d("0x43"),get:function(){return this.data_.name}},{key:_0x609d("0x292"),get:function(){return this[_0x609d("0x299")][_0x609d("0x378")]}},{key:"x",get:function(){return this[_0x609d("0x379")].x},set:function(x){}},{key:"y",get:function(){return this[_0x609d("0x379")].y},set:function(x){}},{key:"z",get:function(){return this[_0x609d("0x379")].z},set:function(x){}},{key:_0x609d("0x1e0"),get:function(){if(!this[_0x609d("0x379")]){var x=this[_0x609d("0x299")];this[_0x609d("0x379")]=new(esmap[_0x609d("0x25b")])(-x.X,x.Y,this[_0x609d("0x182")][_0x609d("0xc9")][_0x609d("0x37a")](new(THREE[_0x609d("0x1b1")])(0,6,0)).y)}return this[_0x609d("0x379")]}},{key:_0x609d("0x17e"),get:function(){return this[_0x609d("0x182")].forceVisible_},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x,this[_0x609d("0x182")][_0x609d("0x17e")]=x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t){_(this,d);var i=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,0,t,new(THREE[_0x609d("0x352")]),x));return i[_0x609d("0x37b")]=!1,i}return t(d,x),i(d,[{key:"addLayer",value:function(x){return!x instanceof esmap[_0x609d("0x167")]?void console[_0x609d("0x37c")](_0x609d("0x37d")):void this.o3d_.add(x[_0x609d("0x182")])}},{key:_0x609d("0x37e"),value:function(x,d){var _=this[_0x609d("0x37f")](x);if(!_){switch(d){case _0x609d("0x380"):_=new esmap.ESLayer(esmap.ESLayerType.IMAGE_MARKER);break;case _0x609d("0x381"):_=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16c")]);break;case _0x609d("0x382"):_=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x383")]);break;case _0x609d("0x384"):_=new(esmap[_0x609d("0x167")])(esmap.ESLayerType[_0x609d("0x385")]);case _0x609d("0x354"):_=new esmap.ESLayer(esmap[_0x609d("0x168")][_0x609d("0x19f")]);break;case"modelImage":_=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")].MODEL_IMAGE);break;case _0x609d("0x386"):_=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x387")])}_[_0x609d("0x43")]=x,this.addLayer(_)}return _}},{key:_0x609d("0x388"),value:function(x,d){x=[].concat(x);for(var _=!1,e=[],t=0;t<this[_0x609d("0x1a1")][_0x609d("0x21")];t++){var i=this[_0x609d("0x1a1")][t];if(i[_0x609d("0x19e")]&&x[_0x609d("0x18")](i._type_)>-1&&(d&&(_=d(i,i[_0x609d("0x19e")])),e[_0x609d("0x1a")](i)),_)return 0==e[_0x609d("0x21")]?null:1==e[_0x609d("0x21")]?e[0]:e}return 0==e[_0x609d("0x21")]?null:1==e[_0x609d("0x21")]?e[0]:e}},{key:"getLayersByNames",value:function(x,d){x=[][_0x609d("0x19a")](x);for(var _=[],e=0;e<this[_0x609d("0x1a1")][_0x609d("0x21")];e++){var t=this.layers[e];t[_0x609d("0x43")]&&x[_0x609d("0x18")](t[_0x609d("0x43")])>-1&&(d&&d(t,t[_0x609d("0x43")])&&e--,_[_0x609d("0x1a")](t))}return 0==_[_0x609d("0x21")]?null:1==_[_0x609d("0x21")]?_[0]:_}},{key:_0x609d("0x389"),value:function(x,d){var _=[];return this[_0x609d("0x388")](x,function(x){if(void 0!=d)for(var e=x.o3d_[_0x609d("0x19")],t=0;t<e;t++)d(x[_0x609d("0x182")].children[t])&&_.push(x[_0x609d("0x182")].children[t]);else _.push[_0x609d("0x36")](_,x.o3d_.children)}),_}},{key:"getFirstLayer",value:function(x){var d=esmap[_0x609d("0x197")][_0x609d("0x388")](x);return d?d[_0x609d("0x21")]?d[0]:d:null}},{key:_0x609d("0x38a"),value:function(x){x[_0x609d("0x182")][_0x609d("0x17e")]=!1;for(var d=0;x[_0x609d("0x182")][_0x609d("0x19")].length>d;){var _=x[_0x609d("0x182")][_0x609d("0x19")][d];_.em&&_.em[_0x609d("0x24e")]?_.em.dispose():d++}this[_0x609d("0x182")][_0x609d("0xc7")](x.o3d_)}},{key:_0x609d("0x38b"),value:function(x){for(var d=[][_0x609d("0x19a")](x),_=0;_<this[_0x609d("0x1a1")][_0x609d("0x21")];_++){var e=this[_0x609d("0x1a1")][_];if(e[_0x609d("0x19e")]&&this[_0x609d("0x38c")](d,e[_0x609d("0x19e")])){e[_0x609d("0x182")].visible=!1;for(var t=0;e[_0x609d("0x182")][_0x609d("0x19")][_0x609d("0x21")]>t;){var i=e[_0x609d("0x182")][_0x609d("0x19")][t];i.em&&i.em.dispose?i.em[_0x609d("0x24e")]():t++}this[_0x609d("0x182")].remove(e[_0x609d("0x182")]),_--}}}},{key:_0x609d("0x38d"),value:function(x){for(var d=[][_0x609d("0x19a")](x),_=0;_<this[_0x609d("0x1a1")][_0x609d("0x21")];_++){var e=this[_0x609d("0x1a1")][_];if(e[_0x609d("0x43")]&&this[_0x609d("0x38c")](d,e[_0x609d("0x43")])){e[_0x609d("0x182")][_0x609d("0x17e")]=!1;for(var t=0;e.o3d_.children[_0x609d("0x21")]>t;){var i=e[_0x609d("0x182")][_0x609d("0x19")][t];i.em&&i.em[_0x609d("0x24e")]?i.em[_0x609d("0x24e")]():t++}this[_0x609d("0x182")][_0x609d("0xc7")](e[_0x609d("0x182")]),_--}}}},{key:_0x609d("0x38c"),value:function(x,d){for(var _=0;_<x[_0x609d("0x21")];_++)if(x[_]==d)return!0;return!1}},{key:_0x609d("0x38e"),value:function(x){x&&this[_0x609d("0x299")][_0x609d("0x1fb")]&&x[_0x609d("0x38f")](this[_0x609d("0x299")][_0x609d("0x1fb")])}},{key:_0x609d("0x390"),value:function(x){x&&this[_0x609d("0x299")][_0x609d("0x1fb")]&&x.disposeHeatMap(this[_0x609d("0x299")][_0x609d("0x1fb")])}},{key:_0x609d("0x391"),value:function(x){return this[_0x609d("0x392")](x,this[_0x609d("0x182")],!1)}},{key:_0x609d("0x392"),value:function(x,d,_){if(d[_0x609d("0x180")]&&(_=x(d[_0x609d("0x180")])),_)return!0;for(var e=0;e<d[_0x609d("0x19")][_0x609d("0x21")];e++){var t=this[_0x609d("0x392")](x,d[_0x609d("0x19")][e],_);if(t)return!0}}},{key:_0x609d("0x1da"),get:function(){return this[_0x609d("0x299")][_0x609d("0x1fb")]}},{key:_0x609d("0x393"),get:function(){return this[_0x609d("0x299")][_0x609d("0x394")]}},{key:_0x609d("0x395"),get:function(){return this.data_[_0x609d("0x43")]}},{key:_0x609d("0x396"),get:function(){return this.data_[_0x609d("0x23b")]}},{key:_0x609d("0x397"),get:function(){return this[_0x609d("0x299")][_0x609d("0x398")]}},{key:_0x609d("0x1e0"),get:function(){return new(esmap[_0x609d("0x25b")])(-this[_0x609d("0x141")][_0x609d("0x1b2")],this[_0x609d("0x141")][_0x609d("0x1b4")],this[_0x609d("0x182")][_0x609d("0x211")][_0x609d("0x23b")])}},{key:_0x609d("0x1a1"),get:function(){for(var x=[],d=0;d<this[_0x609d("0x182")][_0x609d("0x19")].length;d++){var _=this[_0x609d("0x182")][_0x609d("0x19")][d],e=_[_0x609d("0x180")];e&&x.push(e)}return x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&"function"!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x){var t,i;return _(this,d),t=i=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x16d")],{},new(THREE[_0x609d("0x352")]))),i.alwaysShow=function(x,d){this[_0x609d("0x182")][_0x609d("0x399")](x,d)},i[_0x609d("0x336")]=function(x){this.o3d_[_0x609d("0x336")](x)},i[_0x609d("0x1de")]=function(x){return this[_0x609d("0x182")][_0x609d("0x1de")](x)},i[_0x609d("0x36c")]=function(x){return this[_0x609d("0x182")][_0x609d("0x36c")](x)},i[_0x609d("0x375")]=function(x){this[_0x609d("0x182")][_0x609d("0x375")](x)},i[_0x609d("0x368")]=function(){this[_0x609d("0x182")][_0x609d("0x368")]()},i.stopMoveTo=function(x){this.o3d_[_0x609d("0x39a")](x)},i.fade=function(x){this[_0x609d("0x182")][_0x609d("0x39b")](x)},i[_0x609d("0x182")][_0x609d("0x376")]=i.o3d_[_0x609d("0x17e")],i[_0x609d("0x353")]=_0x609d("0x380"),i[_0x609d("0x355")]=x||{},i[_0x609d("0x357")](),i}return t(d,x),i(d,[{key:_0x609d("0x357"),value:function(){if(!(!this[_0x609d("0x182")]instanceof THREE[_0x609d("0x352")])){var x=esmap[_0x609d("0x164")][_0x609d("0x165")],d=x.mapScene,_=esmap[_0x609d("0x126")][_0x609d("0x85")];this.x_=_[_0x609d("0x359")](this[_0x609d("0x355")],"x",x.center.x),this.y_=_[_0x609d("0x359")](this[_0x609d("0x355")],"y",x.center.y),this[_0x609d("0x355")][_0x609d("0x94")]=_[_0x609d("0x359")](this[_0x609d("0x355")],_0x609d("0x94"),_0x609d("0x39c")),this[_0x609d("0x355")][_0x609d("0x35b")]=_[_0x609d("0x359")](this.opts_,_0x609d("0x35b"),null),this[_0x609d("0x370")]=_[_0x609d("0x359")](this.opts_,_0x609d("0x43"),null),this.id_=_[_0x609d("0x359")](this[_0x609d("0x355")],"id",esmap[_0x609d("0x126")].id++),this[_0x609d("0x39d")]=_[_0x609d("0x359")](this[_0x609d("0x355")],_0x609d("0x26c"),32),this.up_=_[_0x609d("0x359")](this[_0x609d("0x355")],"up",!0),this[_0x609d("0x35e")]=_[_0x609d("0x359")](this[_0x609d("0x355")],"spritify",!0);var e=this,t=this[_0x609d("0x182")][_0x609d("0x376")];0==this[_0x609d("0x355")][_0x609d("0x35b")]||this[_0x609d("0x355")].angle?this[_0x609d("0x182")]=new(esmap[_0x609d("0x39e")])(this[_0x609d("0x35c")],{vertex:[this.x_,this.y_],name:this[_0x609d("0x370")],size_:this[_0x609d("0x39d")]},this.opts_[_0x609d("0x94")],function(x){setTimeout(function(){e[_0x609d("0x17e")]=t;var x=0;x=void 0!=e[_0x609d("0x355")][_0x609d("0x185")]?e[_0x609d("0x355")].height:void 0!=e[_0x609d("0x355")].z?e[_0x609d("0x355")].z:6,e[_0x609d("0x182")][_0x609d("0x186")][_0x609d("0x100")](-(e.x_+d.sceneX_),x,e.y_-d[_0x609d("0x1b4")]),e[_0x609d("0x182")][_0x609d("0x227")][_0x609d("0x100")](0,0,0,"XYZ"),e[_0x609d("0x39f")]?e[_0x609d("0x182")][_0x609d("0x227")].y=THREE[_0x609d("0x1bb")][_0x609d("0x35a")](e[_0x609d("0x355")][_0x609d("0x35b")]):(e[_0x609d("0x182")][_0x609d("0x227")][_0x609d("0x100")](-Math.PI/2,0,Math.PI,_0x609d("0x3a0")),e.o3d_[_0x609d("0x227")].z=THREE[_0x609d("0x1bb")][_0x609d("0x35a")](e[_0x609d("0x355")][_0x609d("0x35b")])),e[_0x609d("0x182")][_0x609d("0x3a1")]=x,e[_0x609d("0x182")].enabledUpdateSize=!1,e[_0x609d("0x355")][_0x609d("0x12e")]&&e.opts_[_0x609d("0x12e")](e)},0)}):this[_0x609d("0x182")]=new(esmap[_0x609d("0x3a2")])({id:this.id_,vertex:[this.x_,this.y_],name:this[_0x609d("0x370")],size_:this.size_},this[_0x609d("0x355")][_0x609d("0x94")],function(){e[_0x609d("0x17e")]=t;var _=0;_=void 0!=e[_0x609d("0x355")][_0x609d("0x185")]?e[_0x609d("0x355")][_0x609d("0x185")]:void 0!=e[_0x609d("0x355")].z?e[_0x609d("0x355")].z:6,e[_0x609d("0x182")][_0x609d("0x186")][_0x609d("0x100")](-(e.x_+d[_0x609d("0x1b2")]),_,e.y_-d.sceneZ_),e.o3d_[_0x609d("0x3a1")]=_,e[_0x609d("0x355")][_0x609d("0x12e")]&&e.opts_[_0x609d("0x12e")](e),x[_0x609d("0x16f")](!0)}),this[_0x609d("0x182")][_0x609d("0x376")]=!1,this[_0x609d("0x182")][_0x609d("0x17e")]=!1,this[_0x609d("0x182")][_0x609d("0x180")]=this,this[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0x3a3")]=!1}}},{key:_0x609d("0x94"),get:function(){return this[_0x609d("0x355")][_0x609d("0x94")]},set:function(x){this[_0x609d("0x355")][_0x609d("0x94")]=x,this.o3d_[_0x609d("0x3a4")](x)}},{key:_0x609d("0x17e"),get:function(){return this[_0x609d("0x376")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x,this[_0x609d("0x182")][_0x609d("0x17e")]=x}},{key:"ID",get:function(){return this[_0x609d("0x35c")]}},{key:"name",get:function(){return this.name_},set:function(x){this[_0x609d("0x370")]=x}},{key:"x",get:function(){return this.x_},set:function(x){this.x_=x}},{key:"y",get:function(){return this.y_},set:function(x){this.y_=x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n,n[_0x609d("0x1b")][_0x609d("0x376")]={get:function(){return this[_0x609d("0x182")][_0x609d("0x376")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x}}},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if("function"!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x.prototype=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t,i){var n;return _(this,d),n=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x2a2")],x,t,i)),n[_0x609d("0x182")][_0x609d("0x376")]=n[_0x609d("0x182")][_0x609d("0x17e")],n}return t(d,x),i(d,[{key:"ID",get:function(){return this[_0x609d("0x299")][_0x609d("0x377")]}},{key:_0x609d("0x43"),get:function(){return this[_0x609d("0x299")][_0x609d("0x43")]}},{key:"x",get:function(){return this[_0x609d("0x379")].x},set:function(x){}},{key:"y",get:function(){return this[_0x609d("0x379")].y},set:function(x){}},{key:"z",get:function(){return this[_0x609d("0x379")].z},set:function(x){}},{key:_0x609d("0x1e0"),get:function(){if(!this[_0x609d("0x379")]){var x=this[_0x609d("0x299")];this.coord_=new(esmap[_0x609d("0x25b")])(-x.X,x.Y,this[_0x609d("0x182")][_0x609d("0xc9")][_0x609d("0x37a")](new(THREE[_0x609d("0x1b1")])(0,6,0)).y)}return this[_0x609d("0x379")]}},{key:_0x609d("0x17e"),get:function(){return this[_0x609d("0x376")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x,this[_0x609d("0x182")][_0x609d("0x17e")]=x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e.enumerable=e.enumerable||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t){_(this,d);var i=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,0,t,new(THREE[_0x609d("0x352")])));switch(i[_0x609d("0x19e")]=x||esmap[_0x609d("0x168")][_0x609d("0x1ea")],i[_0x609d("0x43")]="",x){case esmap[_0x609d("0x168")][_0x609d("0x16d")]:case esmap[_0x609d("0x168")][_0x609d("0x16c")]:i[_0x609d("0x182")][_0x609d("0x3a5")]=new(esmap[_0x609d("0x3a6")]),i[_0x609d("0x3a7")]=!1;break;case esmap.ESLayerType.MODEL:break;case esmap.ESLayerType[_0x609d("0x169")]:case esmap[_0x609d("0x168")][_0x609d("0x16b")]:case esmap[_0x609d("0x168")][_0x609d("0x16a")]:i[_0x609d("0x3a7")]=!0}return i}return t(d,x),i(d,[{key:_0x609d("0x3a8"),value:function(x){var d=esmap[_0x609d("0x164")][_0x609d("0x165")],_=this;if(this.checkType(x[_0x609d("0xd0")]))switch(x[_0x609d("0xd0")]){case esmap[_0x609d("0x1e9")].IMAGE_MARKER:this[_0x609d("0x182")][_0x609d("0x82")](x[_0x609d("0x182")]),d[_0x609d("0xc2")][_0x609d("0x3a9")](x.o3d_);break;case esmap[_0x609d("0x1e9")].TEXT_MARKER:this[_0x609d("0x182")].add(x.o3d_),d[_0x609d("0xc2")][_0x609d("0x3aa")](x.o3d_);break;case esmap[_0x609d("0x1e9")][_0x609d("0x19f")]:_[_0x609d("0x3ab")](x,_);break;case esmap[_0x609d("0x1e9")].POLYGON_MARKER:this[_0x609d("0x182")][_0x609d("0x82")](x.o3d_);break;case esmap[_0x609d("0x1e9")][_0x609d("0x387")]:if((d[_0x609d("0x144")].sourceData.o1||0)<=1)return;this[_0x609d("0x182")][_0x609d("0x82")](x),x[_0x609d("0x180")]={name:_0x609d("0x3ac"),nodeType:esmap[_0x609d("0x1e9")].BOARD_MARKER},d.on("update",function(){x[_0x609d("0x3ad")]()})}else console.info("请添加图层对应的marker!");x._init_&&x[_0x609d("0x3ae")]()}},{key:_0x609d("0x3af"),value:function(){this[_0x609d("0x251")][_0x609d("0xc3")]()}},{key:_0x609d("0x3ab"),value:function(x,d){this[_0x609d("0x251")][_0x609d("0x214")]({name:x[_0x609d("0x370")],scale:x[_0x609d("0x362")],rotate:x[_0x609d("0x3b0")],url:x[_0x609d("0x36f")],position:{x:x.x_,y:6+x[_0x609d("0x35d")],z:x.y_},parent:d[_0x609d("0x182")],id:x[_0x609d("0x35c")],bclick:1,self:x,spritify:x[_0x609d("0x35e")],callback:x[_0x609d("0x360")]})}},{key:_0x609d("0x3b1"),value:function(x){var d=this._type_,_=null;for(var e in esmap[_0x609d("0x168")])if(esmap.ESLayerType[e]==d){_=e;break}return esmap[_0x609d("0x1e9")][_]==x||(console[_0x609d("0x1f0")](_0x609d("0x3b2")),!1)}},{key:_0x609d("0x82"),value:function(x){this.o3d_[_0x609d("0x82")](x[_0x609d("0x182")])}},{key:_0x609d("0xc7"),value:function(x){x[_0x609d("0x24e")]()}},{key:_0x609d("0x3b3"),value:function(){for(var x=0;this.o3d_[_0x609d("0x19")][_0x609d("0x21")]>x;){var d=this[_0x609d("0x182")][_0x609d("0x19")][x];d[_0x609d("0x180")]&&d.datas_.dispose?d[_0x609d("0x180")][_0x609d("0x24e")]():x++}}},{key:_0x609d("0x391"),value:function(x){this[_0x609d("0x392")](x,this[_0x609d("0x182")],0)}},{key:_0x609d("0x392"),value:function(x,d,_){d[_0x609d("0x180")]&&x(d[_0x609d("0x180")],_);for(var e=0;e<d[_0x609d("0x19")][_0x609d("0x21")];e++)this.traverse_(x,d.children[e],_+1)}},{key:_0x609d("0x251"),get:function(){var x=esmap[_0x609d("0x164")].instance;return x[_0x609d("0x141")][_0x609d("0x251")]}}]),d}(esmap[_0x609d("0x371")]);d.default=n},function(x,d){_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var _=_0x609d("0x1f")==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol[_0x609d("0x1b")]?_0x609d("0x7a"):typeof x},e=function(x,d,e,t){var i=esmap.ESMap[_0x609d("0x165")];
this[_0x609d("0x19e")]=_0x609d("0x3b4"),esmap[_0x609d("0x3b5")][_0x609d("0x15")](this,i[_0x609d("0x3b6")],this),this[_0x609d("0x190")]=x[0][_0x609d("0x190")];var n=x[_0x609d("0xbc")](function(x){return x[_0x609d("0x1a8")]()});this[_0x609d("0x3b7")]=t,this[_0x609d("0xbc")]=i,this[_0x609d("0xcf")]=d;var g=d;this[_0x609d("0x3b8")]=void 0==g[_0x609d("0x3b8")]||g[_0x609d("0x3b8")],this.nodeType=esmap[_0x609d("0x1e9")].LINE,e=e||{},e.up=e.up||d.up||new THREE.Vector3(0,1,0),this[_0x609d("0xcf")][_0x609d("0x229")]=void 0==this[_0x609d("0xcf")][_0x609d("0x229")]||d[_0x609d("0x229")];var a=1;switch(_(g.color)){case _0x609d("0x51"):g[_0x609d("0x19b")]=this[_0x609d("0x3b9")](g[_0x609d("0x19b")])}g.dash||(g[_0x609d("0x26b")]={size:2,gap:1}),g[_0x609d("0x4")]=_0x609d("0x3ba"),g[_0x609d("0x3bb")]=esmap[_0x609d("0x3bc")].CIRCLE,_0x609d("0x3bd")!=g[_0x609d("0x3be")]&&_0x609d("0x3bf")!=g[_0x609d("0x3be")]||(g.type=g.lineType,g[_0x609d("0x3bb")]=esmap.ESLineMode[_0x609d("0x3c0")]),g[_0x609d("0x3c1")]=g[_0x609d("0x3c1")]||g[_0x609d("0x3be")]&&this[_0x609d("0x3c2")](g[_0x609d("0x3be")])||[g[_0x609d("0x26b")].size,g[_0x609d("0x26b")][_0x609d("0x26d")]],g[_0x609d("0x269")]=esmap.ESUtil[_0x609d("0x85")][_0x609d("0x127")](g,_0x609d("0x269"),_0x609d("0x294"),8),g[_0x609d("0x3c1")]&&(this[_0x609d("0x3c3")]=g[_0x609d("0x3c1")][_0x609d("0x3c4")](function(x,d){return x+d})),a=this[_0x609d("0x3c3")];var r=JSON[_0x609d("0x13")](JSON[_0x609d("0x3c5")](g));delete r.height,this[_0x609d("0x3c6")]=new(esmap[_0x609d("0x3c7")])(r);var A=new(THREE[_0x609d("0x3c8")])(this[_0x609d("0x3c6")][_0x609d("0x2ee")]);A[_0x609d("0x3c9")]=THREE[_0x609d("0x3ca")],A[_0x609d("0x198")]=!0;var I=new(esmap[_0x609d("0x3cb")])({radius:g[_0x609d("0x269")],pathVertices:n,uvBaseLen:a,up:g.up||e.up,notCenter:e[_0x609d("0x3cc")]||d[_0x609d("0x3cc")],lineMode:g[_0x609d("0x3bb")],yScale:g.yScale,smooth:g.smooth,billboard:g[_0x609d("0x3cd")]});A[_0x609d("0x29b")]=A[_0x609d("0x29c")]=THREE[_0x609d("0x29d")],this[_0x609d("0x3ce")]=Math[_0x609d("0x1bf")](I.length/I[_0x609d("0x3cf")]),A[_0x609d("0x29f")].x=this[_0x609d("0x3ce")],A[_0x609d("0x29f")].y=1,A[_0x609d("0x198")]=!0;var C=new THREE.MeshBasicMaterial;C[_0x609d("0x3d0")]=!0,C[_0x609d("0x1c8")]=void 0==g.alpha?1:g[_0x609d("0x26a")],C.map=A,C[_0x609d("0x198")]=!0,C[_0x609d("0x17e")]=!1,this.visible=!1,C[_0x609d("0x3a3")]=!0,g.seeThrough&&(C[_0x609d("0x3d1")]=!1),THREE[_0x609d("0x3d2")][_0x609d("0x15")](this,I,C),this.position[_0x609d("0x23c")](I[_0x609d("0x27d")]),this[_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x3d5")],this[_0x609d("0x3d6")](),this[_0x609d("0x14a")](_0x609d("0x3d7"),this[_0x609d("0x24e")]),this[_0x609d("0x3d8")]=this.update[_0x609d("0xa2")](this),this[_0x609d("0xbc")].on("update",this[_0x609d("0x3d8")]),this[_0x609d("0x3d9")]=this[_0x609d("0x188")].bind(this),this.map.on(_0x609d("0x188"),this._visibleFloorNumsChanged);var o=new(THREE[_0x609d("0x3d2")])(this[_0x609d("0x193")],this[_0x609d("0x194")]);o[_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x3da")],this[_0x609d("0x82")](o),this[_0x609d("0x3db")]=o};e[_0x609d("0x1b")]=Object[_0x609d("0xdc")](THREE[_0x609d("0x3d2")].prototype,{height:{get:function(){return this[_0x609d("0x186")].y},set:function(x){this[_0x609d("0x186")].y=x}},color:{get:function(){return this[_0x609d("0xcf")][_0x609d("0x19b")]},set:function(x){_0x609d("0x51")==typeof x&&(x=this[_0x609d("0x3b9")](x)),this[_0x609d("0x3c6")][_0x609d("0xc6")]({color:x}),this[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x198")]=!0}},lineStyle:{get:function(){return this.style},set:function(x){this[_0x609d("0x2a3")](x)}},alpha:{get:function(){return this[_0x609d("0x194")][_0x609d("0x1c8")]},set:function(x){this[_0x609d("0x194")][_0x609d("0x1c8")]=x}},lineWidth:{get:function(){return this[_0x609d("0xcf")][_0x609d("0x269")]},set:function(x){this[_0x609d("0x2a3")]({lineWidth:x})}}}),Object[_0x609d("0x348")](e[_0x609d("0x1b")],esmap[_0x609d("0x3b5")][_0x609d("0x1b")],{_colorToStr:function(x){if(_0x609d("0x51")==typeof x){for(var d=x.toString(16);d[_0x609d("0x21")]<6;)d="0"+d;return"#"+d}return x},getDashArrayByLineType:function(x){if(x instanceof Array)return x;switch(x){case esmap.ESLineType[_0x609d("0x3dc")]:return[1,0];case esmap[_0x609d("0x3dd")].DOTTED:return[1,1];case esmap[_0x609d("0x3dd")][_0x609d("0x3de")]:return[2.5,1,.5,1];case esmap[_0x609d("0x3dd")][_0x609d("0x3df")]:return[3,1,1.5,1];case esmap[_0x609d("0x3dd")][_0x609d("0x3e0")]:return[2,1];case esmap[_0x609d("0x3dd")][_0x609d("0x3e1")]:return[2.5,.5,.5,.5,.5,.5];case esmap[_0x609d("0x3dd")][_0x609d("0x3e2")]:return[2.5,.5,.5,.5,.5,.5,.5,.5];case esmap[_0x609d("0x3dd")][_0x609d("0x3e3")]:return[5,0];case esmap[_0x609d("0x3dd")][_0x609d("0x3e4")]:return[7,0]}},visibleFloorNumsChanged:function(x){var d=this[_0x609d("0x190")],_=!0;_0x609d("0x51")==typeof d?x[_0x609d("0x18")](d)==-1&&(_=!1):d instanceof Array&&d.forEach(function(d){x.indexOf(d)==-1&&(_=!1)}),this[_0x609d("0x17e")]=_},updateStyle:function(x){x[_0x609d("0x19b")]&&_0x609d("0x51")==typeof x.color&&(x.color=this._colorToStr(x.color)),Object.assign(this[_0x609d("0xcf")],x),this.style[_0x609d("0x4")]=_0x609d("0x3ba"),_0x609d("0x3bd")!=this[_0x609d("0xcf")][_0x609d("0x3be")]&&"esarrow"!=this.style[_0x609d("0x3be")]||(this[_0x609d("0xcf")][_0x609d("0x4")]=this[_0x609d("0xcf")][_0x609d("0x3be")]),x[_0x609d("0x3be")]&&!x[_0x609d("0x3c1")]&&(this[_0x609d("0xcf")].dashArray=this[_0x609d("0x3c2")](x[_0x609d("0x3be")])),delete this[_0x609d("0xcf")][_0x609d("0x185")],this[_0x609d("0x3c6")].update(this[_0x609d("0xcf")]),this[_0x609d("0x3d6")](),this.material[_0x609d("0xbc")][_0x609d("0x198")]=!0,this.textureLength=this[_0x609d("0xcf")][_0x609d("0x3c1")][_0x609d("0x3c4")](function(x,d){return x+d}),this[_0x609d("0x1a4")]&&this[_0x609d("0x1a4")][_0x609d("0x21")]>0&&this.brothers.forEach(function(d){d.updateStyle(x)})},_updateMaterialByNaviMap:function(){var x=this[_0x609d("0x3c6")][_0x609d("0x3e5")];this[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x1b3")].y=x[_0x609d("0x1b3")],this.material[_0x609d("0x3e6")]=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](x,_0x609d("0x3e6"),0)},_firstUpdate:!0,update:function(x){this[_0x609d("0xbc")][_0x609d("0x132")][_0x609d("0x3e7")]&&!this[_0x609d("0xcf")][_0x609d("0x3e8")]&&(this[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x1b3")].x-=x*(this[_0x609d("0xcf")][_0x609d("0x26b")][_0x609d("0x3e9")]||this[_0x609d("0xcf")][_0x609d("0x3e9")]||1));var d=this[_0x609d("0xbc")][_0x609d("0x12f")],_=(d[_0x609d("0x137")],1),e=this[_0x609d("0xbc")].mapTheme[_0x609d("0x3ea")];if(this[_0x609d("0x3b7")],_=esmap[_0x609d("0x197")].getSpriteScale(this[_0x609d("0xbc")],this),this[_0x609d("0xcf")][_0x609d("0x229")]){if("3d"==d[_0x609d("0x356")][_0x609d("0x22c")]){if(0==d.h_)return;this[_0x609d("0x3b8")]&&this[_0x609d("0x193")][_0x609d("0x3eb")](_*this[_0x609d("0xcf")][_0x609d("0x269")]*.7),this[_0x609d("0x3ec")]()}else this[_0x609d("0x3b8")]&&(1==e?this[_0x609d("0x193")][_0x609d("0x3eb")](_*this[_0x609d("0xcf")].lineWidth*.7/d[_0x609d("0x356")][_0x609d("0x14c")][_0x609d("0x280")]):this[_0x609d("0x193")][_0x609d("0x3eb")](_*this[_0x609d("0xcf")][_0x609d("0x269")]*.7));this[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x29f")].x=this[_0x609d("0x193")][_0x609d("0x21")]/(this.textureLength*_*7*(1==e?2:1))}},_upVec:new THREE.Vector3(0,1,0),_zVec:new THREE.Vector3(0,0,1),_billboard:function(){if(this[_0x609d("0xcf")][_0x609d("0x3cd")]&&2==this.geometry[_0x609d("0x3ed")][_0x609d("0x21")]){var x=this[_0x609d("0x193")][_0x609d("0x3ed")],d=x[1][_0x609d("0x1a8")]().sub(x[0])[_0x609d("0x287")](),_=d[_0x609d("0x3ee")](this[_0x609d("0x3ef")]),e=Math[_0x609d("0x125")](_),t=e*this[_0x609d("0xbc")][_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x22f")]();this[_0x609d("0x3f0")].setFromAxisAngle(d,t)}},alwaysShow:esmap[_0x609d("0x366")][_0x609d("0x1b")].alwaysShow,picked:function(){},dispose:function(){this[_0x609d("0x1a4")]&&this[_0x609d("0x1a4")][_0x609d("0x21")]>0&&this.brothers[_0x609d("0xc1")](function(x){x.dispose()}),esmap.ESComponent[_0x609d("0x1b")][_0x609d("0x24e")][_0x609d("0x15")](this),this[_0x609d("0xbc")].off("update",this._update),this[_0x609d("0xbc")][_0x609d("0x10b")](_0x609d("0x188"),this[_0x609d("0x3d9")]),this[_0x609d("0xc9")]&&this[_0x609d("0xc9")][_0x609d("0xc7")](this),this[_0x609d("0x193")][_0x609d("0x24e")](),this.material[_0x609d("0xbc")][_0x609d("0x24e")](),this.material.dispose()}}),d.default=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function x(d,e,t){_(this,x),this[_0x609d("0x356")]=esmap.ESMap[_0x609d("0x165")],this.id=d||0,this[_0x609d("0x18d")]=e||[],this[_0x609d("0xcf")]=t||this[_0x609d("0x356")][_0x609d("0x143")].navigateStyle_,this[_0x609d("0x182")]=new(THREE[_0x609d("0x352")]),this.o3d_.datas_=this};d[_0x609d("0x92")]=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=_0x609d("0x1f")==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol.prototype?_0x609d("0x7a"):typeof x},n=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),g=function(x){function d(x){var t,i;return _(this,d),t=i=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x3f1")],{},new(THREE[_0x609d("0x352")]))),i[_0x609d("0x188")]=esmap[_0x609d("0x191")][_0x609d("0x1b")][_0x609d("0x188")],i[_0x609d("0x399")]=esmap[_0x609d("0x366")][_0x609d("0x1b")].alwaysShow,i[_0x609d("0x336")]=function(x){this[_0x609d("0x182")][_0x609d("0x336")](x)},i[_0x609d("0x182")][_0x609d("0x376")]=i[_0x609d("0x182")][_0x609d("0x17e")],i.opts_=x,i[_0x609d("0x190")]=1,i[_0x609d("0x357")](),i}return t(d,x),n(d,[{key:_0x609d("0x357"),value:function(x){if(this[_0x609d("0x182")]instanceof THREE[_0x609d("0x352")]){var d=esmap[_0x609d("0x126")].Option,_=this[_0x609d("0x355")].map||esmap[_0x609d("0x164")].instance;this.x_=d[_0x609d("0x359")](this[_0x609d("0x355")],"x",0),this.y_=d[_0x609d("0x359")](this.opts_,"y",0),this[_0x609d("0x35d")]=d[_0x609d("0x359")](this.opts_,"height",0),this.url_=d[_0x609d("0x359")](this.opts_,_0x609d("0x94"),_0x609d("0x39c")),this[_0x609d("0x370")]=d[_0x609d("0x359")](this[_0x609d("0x355")],_0x609d("0x43"),null),this[_0x609d("0x35c")]=d[_0x609d("0x359")](this[_0x609d("0x355")],"id",esmap[_0x609d("0x126")].id++),this[_0x609d("0x39d")]=d[_0x609d("0x359")](this[_0x609d("0x355")],_0x609d("0x26c"),128),this[_0x609d("0x35e")]=!0;var e=this;if(this[_0x609d("0x182")][_0x609d("0x376")],this[_0x609d("0x182")]=new(esmap[_0x609d("0x39e")])(0,{id:this[_0x609d("0x35c")],vertex:[0,0],name:this[_0x609d("0x370")],size_:this.size_},this[_0x609d("0x36f")],function(x){e[_0x609d("0x3f2")]=!0,e.o3d_[_0x609d("0x194")].visible=!0,e[_0x609d("0x355")][_0x609d("0x3f3")]&&(e.direction=e[_0x609d("0x355")][_0x609d("0x3f3")]),e[_0x609d("0x3d9")]=e[_0x609d("0x188")][_0x609d("0xa2")](e),_.on(_0x609d("0x188"),e[_0x609d("0x3d9")]),e[_0x609d("0x355")].callback&&e.opts_.callback(e)}),e[_0x609d("0x182")][_0x609d("0x3a1")]=0,e[_0x609d("0x355")][_0x609d("0x185")]&&(e[_0x609d("0x182")].initY_=e[_0x609d("0x355")].height),e.opts_.fnum){var t=_[_0x609d("0x1b7")](e[_0x609d("0x355")].floornum);e[_0x609d("0x182")][_0x609d("0x3a1")]+=t}this[_0x609d("0x182")].x=this.x_,this[_0x609d("0x182")].y=this.y_,this[_0x609d("0x182")][_0x609d("0x194")].visible=!1,this.o3d_[_0x609d("0x3f4")]=!0,this[_0x609d("0x182")][_0x609d("0x376")]=!0,this[_0x609d("0x182")][_0x609d("0x180")]=this,this[_0x609d("0x182")].up[_0x609d("0x288")](-1),this[_0x609d("0x364")]=this[_0x609d("0x3d8")][_0x609d("0xa2")](this),_.on("update",this[_0x609d("0x364")])}}},{key:_0x609d("0x3f3"),get:function(){return this[_0x609d("0x182")].rotation.z/Math.PI*180-180},set:function(x){this.o3d_[_0x609d("0x227")].set(-Math.PI/2,0,x/180*Math.PI+Math.PI,_0x609d("0x3a0"))}},{key:"visible",get:function(){return this[_0x609d("0x182")][_0x609d("0x376")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x,this.o3d_[_0x609d("0x17e")]=x}},{key:_0x609d("0x185"),set:function(x){this[_0x609d("0x182")][_0x609d("0x3a1")]=x},get:function(){return this.o3d_[_0x609d("0x186")].y}},{key:_0x609d("0x1fb"),get:function(){return this.fnum},set:function(x){this[_0x609d("0x190")]=x}},{key:_0x609d("0x186"),get:function(){return this.o3d_[_0x609d("0x186")]}},{key:"ID",get:function(){return this[_0x609d("0x35c")]}},{key:_0x609d("0x43"),get:function(){return this[_0x609d("0x370")]}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=g,Object.defineProperties(g[_0x609d("0x1b")],{_update:{value:function(x){this[_0x609d("0x182")][_0x609d("0x3ad")](esmap[_0x609d("0x164")][_0x609d("0x165")].mapView)}},setPosition:{value:function(x,d,_,e){var t=esmap[_0x609d("0x164")][_0x609d("0x165")];"object"==(_0x609d("0x8")==typeof x?"undefined":i(x))&&(d=x.y,_=esmap.ESUtil[_0x609d("0x85")].getValues(x,"fnum",_0x609d("0x1fb"),"FloorNum",1),e=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](x,_0x609d("0x185"),_0x609d("0x3f5"),_0x609d("0x1b3"),"offsetHeight",0),x=x.x),this.x=x,this.y=d,this instanceof esmap[_0x609d("0x2ac")]?(_=_||this[_0x609d("0x190")]||t[_0x609d("0x20e")],this[_0x609d("0x190")]=_,this.o3d_.initY_=t[_0x609d("0x1b7")](_)+(e||0),this[_0x609d("0x186")][_0x609d("0x100")](-(x+t.mapScene.sceneX_),this[_0x609d("0x182")][_0x609d("0x3a1")],d-t.mapScene[_0x609d("0x1b4")])):void 0!=_&&(this[_0x609d("0x182")][_0x609d("0x3a1")]=_)}},getPosition:{value:function(){var x=esmap[_0x609d("0x164")][_0x609d("0x165")];return{x:-x.mapScene[_0x609d("0x1b2")]-this[_0x609d("0x186")].x,y:this[_0x609d("0x186")].z+x[_0x609d("0x141")].sceneZ_,z:this[_0x609d("0x182")][_0x609d("0x3a1")]||0,fnum:this[_0x609d("0x190")]}}},dispose:{value:function(){if(this[_0x609d("0x182")][_0x609d("0xc9")]){var x=esmap[_0x609d("0x164")][_0x609d("0x165")];x[_0x609d("0x10b")](_0x609d("0xc6"),this._update_),this[_0x609d("0x182")][_0x609d("0xc9")].remove(this[_0x609d("0x182")])}}},rotateTo:{value:function(x){var d=this;_0x609d("0x51")==typeof x&&(x={to:x});var _,e=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](x,"time",_0x609d("0x129"),.3),t=d[_0x609d("0x3f3")],i=esmap[_0x609d("0x197")][_0x609d("0x3f6")](t,x.to);return clearInterval(d[_0x609d("0x12b")]),d[_0x609d("0x12b")]=THREE[_0x609d("0x12c")].work(e,function(x){_=t+i*x,_<=0?_=360+_:_>=360&&(_-=360),d[_0x609d("0x3f3")]=_},function(){x[_0x609d("0x12e")]&&x.callback()}),d[_0x609d("0x12b")]}}})},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var e=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x3f7")]=d,this[_0x609d("0x3f8")]=e,this[_0x609d("0x3f9")]=!0,this.enableMapRotate_=!0,this[_0x609d("0x3fa")]=!0,this[_0x609d("0x3fb")]=!0,this[_0x609d("0x3fc")]=!0}return e(x,[{key:_0x609d("0x3fd"),get:function(){return this[_0x609d("0x3f9")]},set:function(x){x!=this[_0x609d("0x3f9")]&&(this[_0x609d("0x3f9")]=x,this.controls_.enablePan=x)}},{key:_0x609d("0x3fe"),get:function(){return this[_0x609d("0x3ff")]},set:function(x){x!=this[_0x609d("0x3ff")]&&(this[_0x609d("0x3ff")]=x,this[_0x609d("0x3f8")].enableGestureRotate=x)}},{key:"enableMapIncline",get:function(){return this[_0x609d("0x3fa")]},set:function(x){x!=this[_0x609d("0x3fa")]&&(this[_0x609d("0x3fa")]=x,this[_0x609d("0x3f8")][_0x609d("0x400")]=x)}},{key:_0x609d("0x401"),get:function(){return this[_0x609d("0x3fb")]},set:function(x){x!=this[_0x609d("0x3fb")]&&(this[_0x609d("0x3fb")]=x,this[_0x609d("0x3f8")][_0x609d("0x402")]=x)}},{key:_0x609d("0x403"),get:function(){return this.enableMapSingleTap_},set:function(x){x!=this.enableMapSingleTap_&&(this.enableMapSingleTap_=x,this[_0x609d("0x3f7")].enabled=x)}}]),x}();d.default=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),t=function(){function x(d,e,t){_(this,x),this[_0x609d("0x278")]=t,this[_0x609d("0x404")]=null,this.visible_=d,this[_0x609d("0x405")]=e,this.w_,this.h_,this[_0x609d("0x406")]=8,this[_0x609d("0x407")]=15}return e(x,[{key:_0x609d("0x238"),value:function(x,d){if(null!=this.sprite_){var _=x/2,e=d/2;this.sprite_.position[_0x609d("0x100")](_-this.w_/2-this[_0x609d("0x406")],-e+this.h_/2+this[_0x609d("0x407")],1)}this[_0x609d("0x408")]&&null==this[_0x609d("0x404")]&&(this.init(),this[_0x609d("0x404")].visible=!0)}},{key:_0x609d("0x135"),value:function(){if(null==this[_0x609d("0x404")]){var x=document[_0x609d("0x2")](_0x609d("0x409"));x[_0x609d("0x6")]=_0x609d("0x40a");var d=new(THREE[_0x609d("0x3c8")])(x),_=esmap[_0x609d("0x197")][_0x609d("0x347")]()[_0x609d("0x339")];this.w_=_?96:60,this.h_=_?25:15,d[_0x609d("0x3c9")]=THREE[_0x609d("0x40b")],d[_0x609d("0x198")]=!0,this[_0x609d("0x404")]=new(THREE[_0x609d("0x40c")])(new(THREE[_0x609d("0x40d")])({map:d})),this[_0x609d("0x404")][_0x609d("0x27c")][_0x609d("0x100")](this.w_,this.h_,1),this[_0x609d("0x405")][_0x609d("0x82")](this[_0x609d("0x404")]);var e=this[_0x609d("0x278")].container,t=e[_0x609d("0x40e")],i=e[_0x609d("0x328")]+20;this.updateHUD(t,i)}}},{key:_0x609d("0x17e"),set:function(x){x!=this.visible_&&(this.visible_=x,x?(this[_0x609d("0x135")](),this[_0x609d("0x404")].visible=!0):null!=this[_0x609d("0x404")]&&(this[_0x609d("0x404")][_0x609d("0x17e")]=!1))},get:function(){return this[_0x609d("0x408")]}}]),x}();d.default=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x.prototype=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object.defineProperty(d,"__esModule",{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t,i){return _(this,d),e(this,(d[_0x609d("0x350")]||Object.getPrototypeOf(d))[_0x609d("0x15")](this,esmap[_0x609d("0x1e9")][_0x609d("0x1a2")],x,t,i))}return t(d,x),i(d,[{key:"ID",get:function(){return this[_0x609d("0x299")][_0x609d("0x377")]}},{key:_0x609d("0x1da"),get:function(){return this.data_[_0x609d("0x1fb")]}},{key:_0x609d("0x43"),get:function(){return this[_0x609d("0x299")].name}},{key:"x",get:function(){return this.coord_.x},set:function(x){}},{key:"y",get:function(){return this[_0x609d("0x379")].y},set:function(x){}},{key:"z",get:function(){return this[_0x609d("0x379")].z},set:function(x){}},{key:_0x609d("0x1e0"),get:function(){if(!this[_0x609d("0x379")]){this[_0x609d("0x182")].geometry[_0x609d("0x40f")]||this[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x410")]();var x=this[_0x609d("0x182")][_0x609d("0x193")].boundingSphere[_0x609d("0x27d")];this[_0x609d("0x379")]=new(esmap[_0x609d("0x25b")])(-(this[_0x609d("0x141")][_0x609d("0x1b2")]+x.x),this[_0x609d("0x141")][_0x609d("0x1b4")]+x.y,this[_0x609d("0x182")][_0x609d("0xc9")].localToWorld(new THREE.Vector3).y)}return this[_0x609d("0x379")]}},{key:"typeID",get:function(){return this[_0x609d("0x299")][_0x609d("0x378")]}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var i=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x){var t;_(this,d),t=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this,x)),t[_0x609d("0x19e")]=esmap[_0x609d("0x411")][_0x609d("0x412")];var i=new(THREE[_0x609d("0x413")])(1,1,1,1),n=new THREE.MeshLambertMaterial({transparent:!0,side:THREE[_0x609d("0x414")],depthWrite:!1});return n[_0x609d("0x17e")]=!1,t[_0x609d("0x182")]=new(THREE[_0x609d("0x3d2")])(i,n),t[_0x609d("0x182")][_0x609d("0x180")]=t,1==x[_0x609d("0xcf")][_0x609d("0x35b")]?t[_0x609d("0x182")].rotation[_0x609d("0x100")](-Math.PI/2,0,Math.PI-x[_0x609d("0xcf")][_0x609d("0x36b")]*THREE[_0x609d("0x1bb")][_0x609d("0x23f")],_0x609d("0x415")):t[_0x609d("0x182")].rotation.set(Math.PI,-x.style[_0x609d("0x36b")]*THREE[_0x609d("0x1bb")][_0x609d("0x23f")],Math.PI,_0x609d("0x415")),t[_0x609d("0x182")][_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x416")],t[_0x609d("0x2a3")](t[_0x609d("0x417")][_0x609d("0xcf")]),t}return t(d,x),i(d,[{key:_0x609d("0x2a3"),value:function(x){var d=this;d[_0x609d("0x418")]=setInterval(function(){x[_0x609d("0x209")],x[_0x609d("0x209")][_0x609d("0x209")]&&(clearInterval(d[_0x609d("0x418")]),d[_0x609d("0x182")][_0x609d("0x194")].visible=!0,d[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0xbc")]=x[_0x609d("0x209")],d.o3d_[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x3c9")]=THREE[_0x609d("0x40b")],d[_0x609d("0x182")][_0x609d("0x194")][_0x609d("0xbc")].anisotropy=16)},0),this[_0x609d("0x182")][_0x609d("0x27c")][_0x609d("0x100")](x[_0x609d("0x26c")][_0x609d("0x2bb")],x[_0x609d("0x26c")][_0x609d("0x185")],1),this.o3d_[_0x609d("0x186")][_0x609d("0x100")](-(x[_0x609d("0x419")].x+this[_0x609d("0x417")].sx)+x[_0x609d("0x1b3")].x,x.height+x[_0x609d("0x1b3")].z,x[_0x609d("0x419")].y-this[_0x609d("0x417")].sz+x[_0x609d("0x1b3")].y)}}]),d}(esmap.ESElement);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e,t,i){_(this,x),t[_0x609d("0x180")]=this,Object[_0x609d("0x372")](this,{nodeType:{enumerable:!0,get:function(){return d}},mapScene:{get:function(){return i},set:function(x){i=x}},o3d_:{get:function(){return t},set:function(x){t=x},configurable:!0,enumerable:!1},data_:{enumerable:!0,get:function(){return e}}})}return e(x,[{key:"x",get:function(){return this[_0x609d("0x141")]?-this[_0x609d("0x182")][_0x609d("0x186")].x-this.mapScene[_0x609d("0x1b2")]:0},set:function(x){this[_0x609d("0x141")]?this[_0x609d("0x182")][_0x609d("0x186")][_0x609d("0x41a")](-x-this[_0x609d("0x141")][_0x609d("0x1b2")]):(this[_0x609d("0x355")]=this[_0x609d("0x355")]||{},this[_0x609d("0x355")].x=x)}},{key:"y",get:function(){return this[_0x609d("0x141")]?this[_0x609d("0x182")][_0x609d("0x186")].z+this.mapScene[_0x609d("0x1b4")]:0},set:function(x){this.mapScene?this[_0x609d("0x182")][_0x609d("0x186")][_0x609d("0x41b")](x-this.mapScene[_0x609d("0x1b4")]):(this.opts_=this[_0x609d("0x355")]||{},this[_0x609d("0x355")].y=x)}},{key:"z",get:function(){return this[_0x609d("0x141")]?this[_0x609d("0x182")].position.y:0},set:function(x){}},{key:_0x609d("0x1e0"),get:function(){return new(esmap[_0x609d("0x25b")])(this.x,this.y,this.z)}},{key:"parent",get:function(){return this[_0x609d("0x182")][_0x609d("0xc9")]?this[_0x609d("0x182")].parent[_0x609d("0x180")]:null}},{key:_0x609d("0x17e"),set:function(x){this.o3d_[_0x609d("0x17e")]=x},get:function(){return this[_0x609d("0x182")][_0x609d("0x17e")]}},{key:_0x609d("0x52"),get:function(){if(this instanceof esmap[_0x609d("0x298")])return this;var x=this.parent;if(x){if(x instanceof esmap.ESFloorManager)return x;var d=x[_0x609d("0xc9")];if(d&&d instanceof esmap[_0x609d("0x298")])return d}return null}},{key:_0x609d("0x1da"),get:function(){return this[_0x609d("0x52")]?this.floor.FloorNum:null}}]),e(x,[{key:_0x609d("0x24e"),value:function(){if(this.o3d_){this.o3d_[_0x609d("0x17e")]=!1;var x=this[_0x609d("0x182")][_0x609d("0xc9")];return x?(x[_0x609d("0xc7")](this[_0x609d("0x182")]),!0):void 0}}},{key:_0x609d("0x1de"),value:function(x,d){this[_0x609d("0x182")].flash({scale:d,time:x})}}]),x}();d[_0x609d("0x92")]=t},function(x,d){_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var _=_0x609d("0x1f")==typeof Symbol&&"symbol"==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x.constructor===Symbol&&x!==Symbol[_0x609d("0x1b")]?_0x609d("0x7a"):typeof x},e=function(x){this._geo=null,x=x||{},this[_0x609d("0x353")]=_0x609d("0x382"),this[_0x609d("0xbc")]=x[_0x609d("0xbc")]||esmap.ESMap[_0x609d("0x165")],Object[_0x609d("0x348")](this,{color:15881754,alpha:.5,lineWidth:1,height:6,points:{type:"rectangle",center:this[_0x609d("0xbc")][_0x609d("0x27d")],width:30,height:30}},x),esmap.ESElement[_0x609d("0x15")](this,{o3d:new(THREE[_0x609d("0x3d2")]),type:esmap[_0x609d("0x411")].POLYGON_MARKER}),this[_0x609d("0x182")].material[_0x609d("0x3d0")]=!0,this[_0x609d("0x182")].material[_0x609d("0x3a3")]=!1,this.o3d_[_0x609d("0x194")].side=THREE.DoubleSide,this[_0x609d("0x41c")]&&this[_0x609d("0xbc")][_0x609d("0xc2")][_0x609d("0x214")](this[_0x609d("0x182")]),this[_0x609d("0xc6")](this,!0)};e[_0x609d("0x1b")]=Object[_0x609d("0xdc")](esmap.ESElement[_0x609d("0x1b")],{height:{get:function(){return this[_0x609d("0x41d")]},set:function(x){this[_0x609d("0x41d")]=x,this[_0x609d("0x182")]&&(this[_0x609d("0x182")][_0x609d("0x186")].y=x)}}}),Object[_0x609d("0x348")](e.prototype,{_init_:function(){this[_0x609d("0x182")].position.y=this[_0x609d("0x41d")]},_dispose_:function(){this[_0x609d("0x41c")]&&this[_0x609d("0xbc")][_0x609d("0xc2")][_0x609d("0x41e")](this.o3d_)},alwaysShow:function(x,d){esmap[_0x609d("0x366")].prototype[_0x609d("0x399")][_0x609d("0x15")](this[_0x609d("0x182")],x,d),esmap[_0x609d("0x366")].prototype.alwaysShow[_0x609d("0x15")](this[_0x609d("0x41f")],x,d)},setColor:function(x){this.update({color:x})},setLineWidth:function(x){this.update({lineWidth:x})},setAlpha:function(x){this[_0x609d("0xc6")]({alpha:x})},_normalizePoints:function(x){var d=this;return x.map(function(x){return new THREE.Vector2(d[_0x609d("0xbc")][_0x609d("0x27d")].x-x.x,d.map[_0x609d("0x27d")].y-x.y)})},_createLine:function(x){var d=this;d.line&&(d.line[_0x609d("0x24e")](),d.line=null);var x=d.o3d_[_0x609d("0x193")][_0x609d("0x420")][_0x609d("0xbc")](function(x){return x[_0x609d("0x1a8")]()});x[_0x609d("0x1a")](x[0]),d.line=new(esmap[_0x609d("0x191")])(x,{color:d[_0x609d("0x19b")],lineWidth:d.lineWidth,lineType:esmap[_0x609d("0x3dd")][_0x609d("0x3dc")]},{up:new(THREE[_0x609d("0x1b1")])(0,0,1),notCenter:!0}),d[_0x609d("0x182")][_0x609d("0x82")](d[_0x609d("0x41f")]),d[_0x609d("0x41f")][_0x609d("0x186")][_0x609d("0x100")](0,0,0),d[_0x609d("0x41f")][_0x609d("0x194")].visible=!0,d[_0x609d("0x41f")][_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x382")]},_createPoints:function(x){switch(x[_0x609d("0x4")]){case"circle":if(x[_0x609d("0x27d")]&&x.radius){for(var d=x[_0x609d("0x27d")],_=x[_0x609d("0x421")]||30,e=x.segments||40,t=[],i=0;i<e;i++)t[_0x609d("0x1a")]({x:d.x+_*Math.cos(2*Math.PI/e*i),y:d.y+_*Math[_0x609d("0x422")](2*Math.PI/e*i)});return t}break;case _0x609d("0x423"):if(x[_0x609d("0x2bb")]&&x[_0x609d("0x185")]&&(x[_0x609d("0x424")]||x[_0x609d("0x27d")])){var d=x.center||this[_0x609d("0xbc")].center,n=x[_0x609d("0x424")];if(!n)var n={x:d.x-x.width/2,y:d.y-x[_0x609d("0x185")]/2};return[{x:n.x,y:n.y},{x:n.x+x.width,y:n.y},{x:n.x+x.width,y:n.y+x[_0x609d("0x185")]},{x:n.x,y:n.y+x.height}]}}},update:function(x,d){var e=this;if(d||Object[_0x609d("0x348")](e,x),x[_0x609d("0x18d")]){var t=null;if(x[_0x609d("0x18d")]instanceof Array){if(t=x[_0x609d("0x18d")],t[_0x609d("0x21")]<3)return}else if(_0x609d("0x20")==_(x[_0x609d("0x18d")])&&(t=e._createPoints(x[_0x609d("0x18d")]),!t))return;e[_0x609d("0x182")][_0x609d("0x193")][_0x609d("0x24e")]();var i=e[_0x609d("0x425")](t),n=new(THREE[_0x609d("0x426")])(new(THREE[_0x609d("0x427")])(i));e.o3d_[_0x609d("0x193")]=n,x[_0x609d("0x269")]||e[_0x609d("0x428")](i),d&&(e.o3d_[_0x609d("0x429")](-Math.PI/2),e[_0x609d("0x182")][_0x609d("0x186")].y=e[_0x609d("0x185")]),e.o3d_[_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x382")]}x[_0x609d("0x269")]&&e[_0x609d("0x428")](i),x[_0x609d("0x19b")]&&(e[_0x609d("0x182")].material[_0x609d("0x19b")][_0x609d("0x100")](e[_0x609d("0x19b")]),e.line.color=e[_0x609d("0x19b")]),void 0!=x[_0x609d("0x26a")]&&e.o3d_[_0x609d("0x194")][_0x609d("0x1c8")]&&(e[_0x609d("0x182")].material[_0x609d("0x1c8")]=e[_0x609d("0x26a")])},contain:function(x){var d=Object[_0x609d("0x348")](x);d=this[_0x609d("0x425")]([d])[0];var _=new THREE.Vector3(d.x,this[_0x609d("0x182")][_0x609d("0x42a")]().y+30,-d.y),e=new(THREE[_0x609d("0x1b1")])(0,-1,0),t=new(THREE[_0x609d("0x258")])(_,e),i=t[_0x609d("0x42b")](this.o3d_);return i.length>0}}),d[_0x609d("0x92")]=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=_0x609d("0x1f")==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol.prototype?_0x609d("0x7a"):typeof x},t=function x(d){_(this,x);var e=esmap[_0x609d("0x164")][_0x609d("0x165")];this[_0x609d("0x278")]=d,this.options_[_0x609d("0x26c")]=_0x609d("0x3ba"),_0x609d("0x3ba")==this.options_[_0x609d("0x26c")]?(this.w_=this[_0x609d("0x278")][_0x609d("0x2bb")]?this[_0x609d("0x278")][_0x609d("0x2bb")]:300,this.h_=this[_0x609d("0x278")][_0x609d("0x185")]?this[_0x609d("0x278")][_0x609d("0x185")]:150,this[_0x609d("0x2be")]=10):(this.w_=32,this.h_=32,this.padding_=8),this[_0x609d("0x42c")]=this.options_[_0x609d("0x42d")]?this[_0x609d("0x278")][_0x609d("0x42d")]:0,
this[_0x609d("0x2dc")]=_0x609d("0x42e"),this.defaultRadius_=this[_0x609d("0x278")][_0x609d("0x2e7")]?this[_0x609d("0x278")][_0x609d("0x2e7")]:_0x609d("0x42f"),this[_0x609d("0x430")]=this[_0x609d("0x278")].screenCoord?this[_0x609d("0x278")][_0x609d("0x431")]:null,this.mapCoord_=this[_0x609d("0x278")][_0x609d("0x1e0")]?this.options_[_0x609d("0x1e0")]:null,this[_0x609d("0x432")]&&this[_0x609d("0x432")][_0x609d("0x185")]&&(this[_0x609d("0x432")].z=this[_0x609d("0x432")][_0x609d("0x185")]),this.screenCoord_&&this.screenCoord_[_0x609d("0x185")]&&(this[_0x609d("0x430")].z=this[_0x609d("0x430")][_0x609d("0x185")]),(this[_0x609d("0x430")]||this[_0x609d("0x432")])&&(this[_0x609d("0x433")]=!!this.screenCoord_,this.$=function(x){return document[_0x609d("0x2cb")](x)},this[_0x609d("0x301")]=this.options_[_0x609d("0x434")]?this[_0x609d("0x278")].padding:20,this[_0x609d("0x435")]=this.h_-2*this.defaultPadding_,this.content_=this[_0x609d("0x278")].content?this.options_[_0x609d("0x436")]:_0x609d("0x437"),this[_0x609d("0x438")]=_0x609d("0x439")+this.contentHeight_+_0x609d("0x43a")+this[_0x609d("0x438")]+_0x609d("0x43b"),this[_0x609d("0x43c")]=this.options_[_0x609d("0x43d")]?this[_0x609d("0x278")][_0x609d("0x43d")]:_0x609d("0x43e"),this[_0x609d("0x43f")]=this[_0x609d("0x278")][_0x609d("0x43f")]?this[_0x609d("0x278")][_0x609d("0x43f")]:_0x609d("0x440"),this[_0x609d("0x2d9")]=this[_0x609d("0x278")].backgroundColor?this[_0x609d("0x278")][_0x609d("0x2d9")]:_0x609d("0x441"),this[_0x609d("0x1c8")]=1,this[_0x609d("0x356")]=e,this.popDiv_=null,e&&this[_0x609d("0x442")](e))};d.default=t,t[_0x609d("0x1b")]={_tryInit:function(x){var d=document[_0x609d("0x2")]("div");d[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x443")),d[_0x609d("0xcf")][_0x609d("0x2bb")]=this.w_+"px",d[_0x609d("0xcf")][_0x609d("0x185")]=this.h_+"px",d[_0x609d("0xcf")][_0x609d("0x434")]=this.defaultPadding_+"px",d[_0x609d("0xcf")][_0x609d("0x2d9")]=_0x609d("0x444")+this[_0x609d("0x2d9")]+","+this.opacity+")",d[_0x609d("0xcf")][_0x609d("0x445")]=this.borderStyle_,d.style.borderRadius=this.defaultRadius_,d[_0x609d("0xcf")][_0x609d("0x186")]=_0x609d("0x2d8");var _=document[_0x609d("0x2")](_0x609d("0x446"));_[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x447")),_[_0x609d("0xcf")][_0x609d("0x2bb")]=0,_.style[_0x609d("0x185")]=0,_[_0x609d("0xcf")][_0x609d("0x2e0")]=0,_.style[_0x609d("0x448")]=_0x609d("0x2fa"),_.style[_0x609d("0x186")]=_0x609d("0x2d8"),_[_0x609d("0xcf")][_0x609d("0x449")]=_0x609d("0x44a"),_[_0x609d("0xcf")][_0x609d("0x43d")]=_0x609d("0x44b"),_[_0x609d("0xcf")][_0x609d("0x43f")]=this[_0x609d("0x43f")]+_0x609d("0x44c"),_[_0x609d("0xcf")].left=this.w_/2-25+"px",_[_0x609d("0xcf")].bottom=_0x609d("0x44d");var e=document[_0x609d("0x2")](_0x609d("0x446"));e[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x44e")),e[_0x609d("0xcf")][_0x609d("0x2bb")]=0,e[_0x609d("0xcf")][_0x609d("0x185")]=0,e[_0x609d("0xcf")][_0x609d("0x2e0")]=0,e[_0x609d("0xcf")][_0x609d("0x448")]="auto",e.style[_0x609d("0x186")]="absolute",e[_0x609d("0xcf")][_0x609d("0x43d")]=_0x609d("0x44b"),e[_0x609d("0xcf")].borderWidth=_0x609d("0x44a"),e[_0x609d("0xcf")][_0x609d("0x43f")]=_0x609d("0x444")+this[_0x609d("0x2d9")]+","+this[_0x609d("0x1c8")]+") transparent transparent",e[_0x609d("0xcf")].left=this.w_/2-25+"px",e.style[_0x609d("0x284")]=_0x609d("0x44f");var t=document.createElement(_0x609d("0x450"));t[_0x609d("0x4")]=_0x609d("0x451"),t.value="✖",t[_0x609d("0xcf")][_0x609d("0x186")]=_0x609d("0x2d8"),t[_0x609d("0xcf")][_0x609d("0x282")]=_0x609d("0x452"),t[_0x609d("0xcf")][_0x609d("0x283")]=_0x609d("0x453"),t[_0x609d("0xcf")].background=_0x609d("0x454"),t[_0x609d("0xcf")].width="24px",t[_0x609d("0xcf")][_0x609d("0x185")]=_0x609d("0x455"),t.style[_0x609d("0x445")]=0,t[_0x609d("0xcf")][_0x609d("0x456")]=_0x609d("0x2f1"),t.style[_0x609d("0x434")]="0",t[_0x609d("0x2f7")]=this[_0x609d("0x457")][_0x609d("0xa2")](this);var i=x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x0")](_0x609d("0x2ee"))[0];if(x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x2ef")](d,i),d[_0x609d("0x7")](t),d[_0x609d("0x7")](_),d[_0x609d("0x7")](e),d[_0x609d("0x458")](_0x609d("0x459"),this[_0x609d("0x438")]),this[_0x609d("0x433")]){var n=this[_0x609d("0x356")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x45a")]();this[_0x609d("0x430")].x-=n[_0x609d("0x281")],this[_0x609d("0x430")].y-=n[_0x609d("0x283")],this.mapCoord_=this[_0x609d("0x45b")](this[_0x609d("0x430")]),this[_0x609d("0x2fc")](d,this[_0x609d("0x430")])}else this[_0x609d("0x432")].z=this[_0x609d("0x45c")](this.mapCoord_[_0x609d("0x190")],this[_0x609d("0x432")].z),this[_0x609d("0x2fc")](d,this[_0x609d("0x45d")](this[_0x609d("0x432")]));this[_0x609d("0x45e")]=d,this[_0x609d("0x300")]();var g=this;g[_0x609d("0x278")][_0x609d("0x45f")]&&g[_0x609d("0x278")][_0x609d("0x45f")](g[_0x609d("0x278")][_0x609d("0x436")])},getMapCoord_Z:function(x,d){return d=d?this[_0x609d("0x356")][_0x609d("0x1b7")](x)+d:this[_0x609d("0x356")].getFloorHeight(x)+this.map_[_0x609d("0x1b0")]},getMapCoord_:function(x){if(_0x609d("0x20")!=(_0x609d("0x8")==typeof x?"undefined":e(x))||!x.x||!x.y||!x[_0x609d("0x190")])return null;var d={x:x.x,y:x.y,z:this[_0x609d("0x45c")](x[_0x609d("0x190")],x.z)};return map[_0x609d("0x257")](d.x,d.y,d.z)},getScreenCoord_:function(x){return _0x609d("0x20")==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))&&x.x&&x.y&&x.z?this.map_[_0x609d("0x25c")](x.x,x.y,x.z):null},bindCloseClick_:function(){this[_0x609d("0x460")]()},close:function(){this[_0x609d("0x45e")]&&(this[_0x609d("0x356")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x131")](this.popDiv_),this[_0x609d("0x45e")]=null,this[_0x609d("0x278")][_0x609d("0x461")]&&_0x609d("0x1f")==typeof this[_0x609d("0x278")][_0x609d("0x461")]&&this[_0x609d("0x278")][_0x609d("0x461")](!0))},hide:function(){this.popDiv_&&(this[_0x609d("0x45e")][_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2f1"))},show:function(){this.popDiv_&&(this[_0x609d("0x45e")].style[_0x609d("0x21a")]=_0x609d("0x2ff"))},toggle:function(){this[_0x609d("0x45e")]&&(_0x609d("0x2f1")==this[_0x609d("0x45e")][_0x609d("0xcf")].display?this.popDiv_[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2ff"):this[_0x609d("0x45e")][_0x609d("0xcf")][_0x609d("0x21a")]="none")},setPosition_:function(x,d){x&&d&&_0x609d("0x20")==(_0x609d("0x8")==typeof d?_0x609d("0x8"):e(d))&&d.x&&d.y&&(x[_0x609d("0xcf")].top=d.y-this.h_-35-this[_0x609d("0x42c")]+"px",x[_0x609d("0xcf")][_0x609d("0x281")]=d.x-this.w_/2+2+"px")},controlPositionListener:function(){if(this[_0x609d("0x356")]){var x=this;x[_0x609d("0x2fc")](x[_0x609d("0x45e")],x.getScreenCoord_(x[_0x609d("0x432")])),this[_0x609d("0x356")].on(_0x609d("0xc6"),function(){x[_0x609d("0x45e")]&&x.setPosition_(x[_0x609d("0x45e")],x[_0x609d("0x45d")](x[_0x609d("0x432")]))})}}}},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e.key,e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),n=function(x){function d(x){var t,i;_(this,d),t=i=e(this,(d[_0x609d("0x350")]||Object.getPrototypeOf(d)).call(this,esmap[_0x609d("0x1e9")].TEXT_MARKER,{},new(THREE[_0x609d("0x352")]))),i[_0x609d("0x336")]=function(x){this[_0x609d("0x182")][_0x609d("0x336")](x)},i[_0x609d("0x182")][_0x609d("0x376")]=i[_0x609d("0x182")][_0x609d("0x17e")],i[_0x609d("0x355")]=x||{};var n={};return n[_0x609d("0x462")]=x.fontsize||12,n.fillcolor=x[_0x609d("0x463")]||_0x609d("0x464"),n[_0x609d("0x465")]=x[_0x609d("0x465")]||"255,255,255",n[_0x609d("0x26a")]=x[_0x609d("0x26a")]||1,i.style_=n,i[_0x609d("0x357")](),i}return t(d,x),i(d,[{key:_0x609d("0x357"),value:function(){var x=this;if(x[_0x609d("0x182")]instanceof THREE[_0x609d("0x352")])var d=esmap[_0x609d("0x164")][_0x609d("0x165")];var _=d[_0x609d("0x141")],e=esmap[_0x609d("0x126")][_0x609d("0x85")];x.x_=e[_0x609d("0x359")](x.opts_,"x",d[_0x609d("0x27d")].x),x.y_=e[_0x609d("0x359")](x[_0x609d("0x355")],"y",d[_0x609d("0x27d")].y),x.z_=e[_0x609d("0x359")](x[_0x609d("0x355")],"height",6),x[_0x609d("0x370")]=e[_0x609d("0x359")](x[_0x609d("0x355")],_0x609d("0x43"),_0x609d("0x466")),x[_0x609d("0x35c")]=e[_0x609d("0x359")](x[_0x609d("0x355")],"id",esmap[_0x609d("0x126")].id++),x[_0x609d("0x467")]=e[_0x609d("0x359")](x[_0x609d("0x355")],_0x609d("0x468"),!1),x[_0x609d("0x3b0")]=e[_0x609d("0x359")](x.opts_,"angle",90);var t=d.options[_0x609d("0x469")],i=x[_0x609d("0x182")][_0x609d("0x376")];x[_0x609d("0x182")]=x.unspritify_?new(esmap[_0x609d("0x46a")])(x[_0x609d("0x35c")],{vertex:[x.x_,x.y_],name:x[_0x609d("0x370")],height:x.z_,ShowLevel:t,angle:x[_0x609d("0x3b0")]},x.style_,function(){d[_0x609d("0x16f")](!0)}):new(esmap[_0x609d("0x366")])(d[_0x609d("0x1da")],{oid:x[_0x609d("0x35c")],vertex:[x.x_,x.y_],name:x.name_,unspritify:x[_0x609d("0x467")]},x[_0x609d("0x2a5")]),x.o3d_.forceVisible_=!1,x[_0x609d("0x182")][_0x609d("0x17e")]=!1,x[_0x609d("0x182")][_0x609d("0x180")]=x,x.o3d_[_0x609d("0x186")].set(-(x.x_+_[_0x609d("0x1b2")]),x.z_,x.y_-_[_0x609d("0x1b4")]),setTimeout(function(){x.o3d_&&(x[_0x609d("0x182")][_0x609d("0x376")]=i)},0)}},{key:_0x609d("0x43"),get:function(){if(this[_0x609d("0x355")]&&this[_0x609d("0x355")][_0x609d("0x43")])return this[_0x609d("0x355")][_0x609d("0x43")]},set:function(x){this[_0x609d("0x182")].setname(x),this[_0x609d("0x355")]=this.opts_||{},this[_0x609d("0x355")][_0x609d("0x43")]=x}},{key:_0x609d("0x462"),get:function(){if(this[_0x609d("0x2a5")]&&this[_0x609d("0x2a5")][_0x609d("0x462")])return this[_0x609d("0x2a5")][_0x609d("0x462")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x46b")](x),this[_0x609d("0x2a5")]=this[_0x609d("0x2a5")]||{},this[_0x609d("0x2a5")][_0x609d("0x462")]=x}},{key:"fillcolor",get:function(){if(this[_0x609d("0x2a5")]&&this[_0x609d("0x2a5")][_0x609d("0x463")])return this[_0x609d("0x2a5")][_0x609d("0x463")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x46c")](x),this[_0x609d("0x2a5")]=this[_0x609d("0x2a5")]||{},this[_0x609d("0x2a5")][_0x609d("0x463")]=x}},{key:_0x609d("0x465"),get:function(){if(this[_0x609d("0x2a5")]&&this[_0x609d("0x2a5")][_0x609d("0x465")])return this[_0x609d("0x2a5")][_0x609d("0x465")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x46d")](x),this.style_=this[_0x609d("0x2a5")]||{},this[_0x609d("0x2a5")][_0x609d("0x465")]=x}},{key:_0x609d("0xcf"),get:function(){return this[_0x609d("0x2a5")]}},{key:_0x609d("0x17e"),get:function(){return this[_0x609d("0x376")]},set:function(x){this[_0x609d("0x182")][_0x609d("0x376")]=x,this[_0x609d("0x182")][_0x609d("0x17e")]=x}},{key:"ID",get:function(){return this[_0x609d("0x35c")]}},{key:"x",get:function(){return this.x_},set:function(x){this.x_=x}},{key:"y",get:function(){return this.y_},set:function(x){this.y_=x}}]),d}(esmap[_0x609d("0x371")]);d[_0x609d("0x92")]=n},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x)}return e(x,null,[{key:_0x609d("0x358"),value:function(x){var d={};return x.on=function(_,e){return(d[_]=d[_]||[])[_0x609d("0x1a")](e),x},x[_0x609d("0x46e")]=function(d,_){function e(){_[_0x609d("0x36")](x[_0x609d("0x10b")](d,e),arguments)}return e.h=_,x.on(d,e)},x[_0x609d("0x10b")]=function(_,e){for(var t=d[_],i=0;e&&t&&t[i];i++)t[i]!=e&&t[i].h!=e||t[_0x609d("0x25")](i--,1);return i||delete d[_],x},x[_0x609d("0x10c")]=function(_){for(var e=d[_],t=0;e&&e[t];)e[t++][_0x609d("0x36")](x,e[_0x609d("0x29")][_0x609d("0x15")](arguments,1));return x},x}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x),this[_0x609d("0x46f")],this[_0x609d("0x470")]}return e(x,[{key:_0x609d("0x13"),value:function(x){if(this[_0x609d("0x46f")]=[],this[_0x609d("0x470")]=[],x[_0x609d("0x18")](_0x609d("0x471"))>=0)for(var d=x[_0x609d("0x70")](i[_0x609d("0x472")],x[_0x609d("0x21")]-3)[_0x609d("0x240")](/\),\(/),_=0;_<d.length;_++){var e=d[_].split(/,/);if(0==_)for(var t=0;t<e[_0x609d("0x21")];t++){var n=e[t][_0x609d("0x240")](" "),g={x:-parseFloat(n[0]),y:parseFloat(n[1])};this[_0x609d("0x46f")][_0x609d("0x1a")](g)}else{for(var a=[],t=0;t<e[_0x609d("0x21")];t++){var n=e[t][_0x609d("0x240")](" "),g={x:-parseFloat(n[0]),y:parseFloat(n[1])};a[_0x609d("0x1a")](g)}this.holes_.push(a)}}return this}},{key:_0x609d("0x473"),value:function(){return null!=this[_0x609d("0x470")]&&this[_0x609d("0x470")].length>0}}]),x}(),i=function x(){_(this,x)};i[_0x609d("0x472")]=_0x609d("0x471")[_0x609d("0x21")],i[_0x609d("0x474")]=t,d[_0x609d("0x92")]=i},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x356")]=d,this[_0x609d("0x475")](e),this.matInfos={}}return e(x,[{key:_0x609d("0x476"),value:function(x){var d=this[_0x609d("0x356")][_0x609d("0x21f")]-this.map_[_0x609d("0x220")],_=this[_0x609d("0x356")][_0x609d("0x221")]-this[_0x609d("0x356")][_0x609d("0x222")],e={w:Math[_0x609d("0x110")](d),h:Math[_0x609d("0x110")](_)},t=esmap[_0x609d("0x197")][_0x609d("0x477")]();e.w=e.w*t[0]/15,e.h=e.h*t[1]/15;var i=1,n=x[_0x609d("0x478")]||8192;return(d>500||_>500)&&n>=8192&&(n=2048),(e.w>=n||e.h>=n)&&(e.w>=e.h?(i=e.h/e.w,e.w=n,e.h=n*i):(i=e.w/e.h,e.h=n,e.w=n*i)),e}},{key:_0x609d("0x479"),value:function(x,d){var _=(x-this[_0x609d("0x356")][_0x609d("0x220")])/(this[_0x609d("0x356")].maxX-this.map_[_0x609d("0x220")]),e=(d-this[_0x609d("0x356")][_0x609d("0x222")])/(this[_0x609d("0x356")][_0x609d("0x221")]-this[_0x609d("0x356")][_0x609d("0x222")]),t={x:1-_,y:1-e};return t.x=t.x*this[_0x609d("0x132")][_0x609d("0x2bb")],t.y=t.y*this[_0x609d("0x132")][_0x609d("0x185")],t}},{key:"config",value:function(x){var d=this,_=d.getDeviceWH(x),e=_.w,t=_.h;d[_0x609d("0x132")]={width:e,height:t,opacity:x.opacity?255*x[_0x609d("0x1c8")]:25500,radius:x[_0x609d("0x421")]?x[_0x609d("0x421")]:30,bshadow:x[_0x609d("0x421")]?x[_0x609d("0x421")]/20:1.5,maxSize:x[_0x609d("0x478")]||8192,boundVal:15e3,shadowBlur:15,points:{max:x[_0x609d("0x47a")]?x[_0x609d("0x47a")]:100,data:[]},gradient:x[_0x609d("0x47b")]?x[_0x609d("0x47b")]:{.45:_0x609d("0x47c"),.55:"rgb(0,255,255)",.65:_0x609d("0x47d"),.95:_0x609d("0x47e"),1:_0x609d("0x47f")}};var i=document[_0x609d("0x2")](_0x609d("0x2ee")),n=i[_0x609d("0x480")]("2d");i[_0x609d("0x2bb")]=e,i[_0x609d("0x185")]=t,d[_0x609d("0x132")][_0x609d("0x10d")]=n,d.options[_0x609d("0x2ee")]=i}},{key:_0x609d("0x481"),value:function(x,d,_,e){var t=this,i=t[_0x609d("0x132")].ctx,n=(t[_0x609d("0x132")][_0x609d("0x421")],t[_0x609d("0x132")][_0x609d("0x482")]),g=parseFloat(_/t[_0x609d("0x132")].points[_0x609d("0x47a")],10);i[_0x609d("0x483")]=_0x609d("0x484")+g+")",i[_0x609d("0x485")]=n,i.shadowOffsetY=n,i[_0x609d("0x486")]=t[_0x609d("0x132")][_0x609d("0x486")],i[_0x609d("0x335")](),i[_0x609d("0x487")](x-n,d-n,t[_0x609d("0x132")][_0x609d("0x421")],0,2*Math.PI,!0),i[_0x609d("0x488")](),i[_0x609d("0x489")]()}},{key:_0x609d("0x48a"),value:function(){for(var x=this,d=x.options[_0x609d("0x2bb")],_=x.options[_0x609d("0x185")],e=x[_0x609d("0x132")][_0x609d("0x10d")],t=e[_0x609d("0x48b")](0,0,d,_),i=t.data,n=i.length,g=x[_0x609d("0x48c")](),a=x[_0x609d("0x132")][_0x609d("0x1c8")],r=3;r<n;r+=4){var A=i[r],I=4*A;if(I){var C=A<a?A:a;i[r-3]=g[I],i[r-2]=g[I+1],i[r-1]=g[I+2],i[r]=C}}t[_0x609d("0x95")][_0x609d("0x100")](i),e[_0x609d("0x48d")](t,0,0)}},{key:_0x609d("0x38f"),value:function(x){var d=this,_=d[_0x609d("0x132")][_0x609d("0x2ee")],e=new(THREE[_0x609d("0x3c8")])(_),t=d.map_[_0x609d("0x19d")](x),i=!1;x!=d[_0x609d("0x356")][_0x609d("0x20e")]&&d[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x216")]&&(i=!0);for(var n=t[_0x609d("0x389")](_0x609d("0x48e")),g=0;g<n[_0x609d("0x21")];g++){var a=n[g],r=null,A=null;a[_0x609d("0x194")][_0x609d("0x195")]?(A=a[_0x609d("0x194")][_0x609d("0x195")][0],r=a.material.materials[1]):(A=a[_0x609d("0x194")],r=A.clone()),a[_0x609d("0x48f")]&&(this[_0x609d("0x490")](x),A[_0x609d("0xbc")]&&(A[_0x609d("0xbc")].dispose(),A[_0x609d("0xbc")]=void 0)),a[_0x609d("0x48f")]=!0;var I=A[_0x609d("0x491")];A[_0x609d("0xbc")]&&(d[_0x609d("0x492")][I]={},d[_0x609d("0x492")][I].map=A.map,A[_0x609d("0xbc")]&&A[_0x609d("0xbc")].dispose(),A[_0x609d("0xbc")]=void 0),A[_0x609d("0xbc")]=e,A.color[_0x609d("0x100")](16777215),A[_0x609d("0x3d0")]=!!i,A.antitrans_=!0,A[_0x609d("0xbc")][_0x609d("0x198")]=!0,A.needsUpdate=!0,a[_0x609d("0x194")]=new THREE.MultiMaterial([A,r])}var C=t[_0x609d("0x389")]([_0x609d("0x361"),_0x609d("0x493")]);C[_0x609d("0xc1")](function(x){if(x[_0x609d("0x180")][_0x609d("0x299")].Typeid<9900||x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]>9999)if(x.material&&x[_0x609d("0x194")][_0x609d("0x195")])for(var d=x[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")],_=0,t=3;_<d;){var n=x[_0x609d("0x194")].materials[_];n[_0x609d("0xbc")]?(n[_0x609d("0xbc")][_0x609d("0x24e")](),n[_0x609d("0xbc")]=void 0):n[_0x609d("0x494")]=n[_0x609d("0x19b")][_0x609d("0x1a8")](),n[_0x609d("0xbc")]=e,n[_0x609d("0x19b")][_0x609d("0x100")](16777215),n[_0x609d("0x3d0")]=!!i,n[_0x609d("0x495")]=!0,n[_0x609d("0xbc")].needsUpdate=!0,n[_0x609d("0x198")]=!0,t=0==_?3:2,_+=t}else{var g=x[_0x609d("0x194")],a=g[_0x609d("0x1a8")]();g[_0x609d("0xbc")]?(g.map.dispose(),g[_0x609d("0xbc")]=void 0):g[_0x609d("0x494")]=g[_0x609d("0x19b")][_0x609d("0x1a8")](),g[_0x609d("0xbc")]=e,g[_0x609d("0x19b")].set(16777215),g[_0x609d("0x3d0")]=!!i,g[_0x609d("0x495")]=!0,g[_0x609d("0xbc")][_0x609d("0x198")]=!0,g[_0x609d("0x198")]=!0,x.material=new(THREE[_0x609d("0x1a7")])([g,a])}})}},{key:_0x609d("0x490"),value:function(x){var d=this;if(x){for(var _=d.map_[_0x609d("0x19d")](x),e=_.getObjectsByAlias("floorBase"),t=0;t<e[_0x609d("0x21")];t++){var i=e[t];if(i[_0x609d("0x48f")]){i[_0x609d("0x48f")]=null;var n=i.material.materials[0],g=i[_0x609d("0x194")][_0x609d("0x195")][1];n[_0x609d("0xbc")]&&n.map[_0x609d("0x24e")](),n[_0x609d("0xbc")]=void 0;var a=n[_0x609d("0x491")];d[_0x609d("0x492")][a]?d[_0x609d("0x492")][a].map?(n[_0x609d("0xbc")]=d[_0x609d("0x492")][a][_0x609d("0xbc")],n.map.needsUpdate=!0,n[_0x609d("0x3d0")]=!0,n.needsUpdate=!0):(n&&n[_0x609d("0x24e")](),n=void 0,i[_0x609d("0x194")]=g,i[_0x609d("0x194")][_0x609d("0x3d0")]=!0,i.material.needsUpdate=!0):i[_0x609d("0x194")]=g;var r=_[_0x609d("0x389")]([_0x609d("0x361"),"modelBase"]);r.forEach(function(x){if(x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]<9900||x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]>9999)if(x[_0x609d("0x194")]&&x.material.materials)for(var d=x[_0x609d("0x194")][_0x609d("0x195")].length,_=0,e=3;_<d;){var t=x[_0x609d("0x194")][_0x609d("0x195")][_];t[_0x609d("0xbc")]&&t[_0x609d("0xbc")][_0x609d("0x24e")](),t[_0x609d("0xbc")]=void 0,t[_0x609d("0x19b")][_0x609d("0x23c")](x[_0x609d("0x194")][_0x609d("0x195")][_][_0x609d("0x494")]),t[_0x609d("0x3d0")]=!0,t[_0x609d("0x198")]=!0,e=0==_?3:2,_+=e}else{var t=x[_0x609d("0x194")];t[_0x609d("0xbc")]&&(t[_0x609d("0xbc")][_0x609d("0x24e")](),t[_0x609d("0xbc")]=void 0),t.color[_0x609d("0x23c")](t[_0x609d("0x494")]),t.transparent=!0,t[_0x609d("0x198")]=!0}})}}d.matInfos={}}}},{key:_0x609d("0x48c"),value:function(){var x=document[_0x609d("0x2")](_0x609d("0x2ee")),d=x[_0x609d("0x480")]("2d");x.width=1,x[_0x609d("0x185")]=256;var _=this,e=_[_0x609d("0x132")].gradient,t=d.createLinearGradient(0,0,1,256);for(var i in e)t.addColorStop(i,e[i]);return d[_0x609d("0x496")]=t,d[_0x609d("0x497")](0,0,1,256),d[_0x609d("0x48b")](0,0,1,256).data}},{key:_0x609d("0x498"),value:function(x,d,_){var e=this,t=e[_0x609d("0x132")][_0x609d("0x18d")],i=t[_0x609d("0x95")];_>t[_0x609d("0x47a")]&&(t[_0x609d("0x47a")]=_),i[_0x609d("0x1a")]([x,d,_])}},{key:_0x609d("0x499"),value:function(){this[_0x609d("0x132")][_0x609d("0x18d")][_0x609d("0x95")]=[],this[_0x609d("0x175")]()}},{key:"addPoint",value:function(x,d,_){if(x&&d&&_){var e=this[_0x609d("0x479")](x,d);if(e){var t=this;t[_0x609d("0x481")](e.x,e.y,_),t[_0x609d("0x48a")]()}}}},{key:_0x609d("0x175"),value:function(){var x=this.options[_0x609d("0x10d")];x.clearRect(0,0,this[_0x609d("0x132")].width,this.options[_0x609d("0x185")])}},{key:_0x609d("0x49a"),value:function(x){var d=this;d[_0x609d("0x175")]();for(var _=x[_0x609d("0x21")],e=0;e<_;e++){var t=this[_0x609d("0x479")](x[e].x,x[e].y);if(!t)return!0;d[_0x609d("0x481")](t.x,t.y,x[e][_0x609d("0x7f")],!1)}d[_0x609d("0x48a")]()}},{key:_0x609d("0x49b"),value:function(x){var d=this,_=d[_0x609d("0x132")][_0x609d("0x2bb")],e=d[_0x609d("0x132")][_0x609d("0x185")],t=d[_0x609d("0x132")].points[_0x609d("0x47a")];d[_0x609d("0x175")]();for(var i=0;i<x;i++){var n=Math[_0x609d("0x52")](Math[_0x609d("0x49c")]()*_+1),g=Math.floor(Math[_0x609d("0x49c")]()*e+1),a=Math[_0x609d("0x52")](Math[_0x609d("0x49c")]()*t+1);d[_0x609d("0x481")](n,g,a)}d.colorize()}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x),this[_0x609d("0x15f")]=new(THREE[_0x609d("0x49d")])}return e(x,[{key:_0x609d("0x49e"),value:function(x,d){this.loader[_0x609d("0x49e")](x,function(x,_){var e;if(e=_[_0x609d("0x21")]>1?new(THREE[_0x609d("0x1a7")])(_):_[0],e.materials)for(var t=0;t<e[_0x609d("0x195")].length;t++)1!=e.materials[t][_0x609d("0x1c8")]&&(e[_0x609d("0x195")][t][_0x609d("0x3a3")]=!1);var i=new THREE.Mesh(x,e);d&&d(i)})}},{key:"setTexturePath",value:function(x){this[_0x609d("0x15f")][_0x609d("0x49f")](x)}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x),this[_0x609d("0x4a0")]}return e(x,[{key:_0x609d("0x175"),value:function(){this.rects_=[]}},{key:_0x609d("0x1a"),value:function(x,d){if(0==this.rects_.length)return this.rects_[_0x609d("0x1a")](d),!1;for(var _ in this[_0x609d("0x4a0")]){var e=this[_0x609d("0x4a0")][_];if(this[_0x609d("0x4a1")](e,d))return!0}return this[_0x609d("0x4a0")][_0x609d("0x1a")](d),!1}},{key:_0x609d("0x4a1"),value:function(x,d){return x.x<d.x+d.w&&x.x+x.w>d.x&&x.y<d.y+d.h&&x.h+x.y>d.y}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e,t){_(this,x),this[_0x609d("0x278")]=t,this[_0x609d("0x279")]=null,this[_0x609d("0x27a")]=null,this[_0x609d("0x4a2")]=null,this.materialBg_=null,this[_0x609d("0x408")]=d,this[_0x609d("0x405")]=e,this.w_=Math.min(t[_0x609d("0x27b")],128),this.h_=Math.min(t[_0x609d("0x27b")],128)}return e(x,[{key:"updateHUD",value:function(x,d,_){if(null!=this[_0x609d("0x279")]&&null!=this[_0x609d("0x27a")]){var e=x/2,t=d/2,i=_?_:this[_0x609d("0x278")][_0x609d("0x277")];this.spriteBg_[_0x609d("0x186")][_0x609d("0x100")](-e+this.w_/2+i[0],t-this.h_/2-i[1],.5),this[_0x609d("0x27a")].position[_0x609d("0x100")](-e+this.w_/2+i[0],t-this.h_/2-i[1],1)}}},{key:_0x609d("0x22e"),value:function(x){null!=this.materialBg_&&(this[_0x609d("0x4a2")][_0x609d("0x227")]=Math.PI+x)}},{key:"init",value:function(){if(null==this[_0x609d("0x279")]&&null==this[_0x609d("0x27a")]){var x=document.createElement(_0x609d("0x409"));x[_0x609d("0x6")]=_0x609d("0x4a3");var d=new(THREE[_0x609d("0x3c8")])(x),_=document[_0x609d("0x2")](_0x609d("0x409"));_[_0x609d("0x6")]=_0x609d("0x4a4");var e=new(THREE[_0x609d("0x3c8")])(_);this.w_=THREE[_0x609d("0x1bb")][_0x609d("0x4a5")](this.w_),this.h_=THREE[_0x609d("0x1bb")][_0x609d("0x4a5")](this.h_),this[_0x609d("0x4a6")]=this.w_,this.lh_=this.h_,d.needsUpdate=!0,e[_0x609d("0x198")]=!0,this[_0x609d("0x4a7")]=new(THREE[_0x609d("0x40d")])({map:d}),this[_0x609d("0x279")]=new(THREE[_0x609d("0x40c")])(this[_0x609d("0x4a7")]),this[_0x609d("0x279")][_0x609d("0x27c")][_0x609d("0x100")](this.w_,this.h_,1),this[_0x609d("0x4a2")]=new(THREE[_0x609d("0x40d")])({map:e}),this[_0x609d("0x27a")]=new(THREE[_0x609d("0x40c")])(this[_0x609d("0x4a2")]),this[_0x609d("0x27a")][_0x609d("0x27c")][_0x609d("0x100")](this[_0x609d("0x4a6")],this[_0x609d("0x4a8")],1),this[_0x609d("0x405")][_0x609d("0x82")](this[_0x609d("0x279")]),this[_0x609d("0x405")][_0x609d("0x82")](this[_0x609d("0x27a")]);var t=this[_0x609d("0x278")][_0x609d("0x4a9")],i=t[_0x609d("0x40e")],n=t[_0x609d("0x328")];this[_0x609d("0x238")](i,n)}}},{key:_0x609d("0x17e"),set:function(x){x!=this[_0x609d("0x408")]&&(this[_0x609d("0x408")]=x,x?(this[_0x609d("0x135")](),this[_0x609d("0x279")].visible=this[_0x609d("0x27a")][_0x609d("0x17e")]=!0):null!=this[_0x609d("0x279")]&&null!=this[_0x609d("0x27a")]&&(this[_0x609d("0x279")][_0x609d("0x17e")]=this[_0x609d("0x27a")][_0x609d("0x17e")]=!1))},get:function(){return this.visible_}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object.defineProperty(x,e.key,e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),t=function(){function x(d,e,t){_(this,x),this.x=d,this.y=e,this.z=t}return e(x,[{key:_0x609d("0x4aa"),value:function(x){this.x=x.x,this.y=x.y}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x)}return e(x,[{key:_0x609d("0x4ab"),value:function(x){var d=document[_0x609d("0x2")](_0x609d("0x2d5"));d[_0x609d("0x303")]=_0x609d("0x4ac"),d.setAttribute(_0x609d("0x2d6"),"noWebGL"),x[_0x609d("0x7")](d)}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x.prototype=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(){return _(this,d),e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x36")](this,arguments))}return t(d,x),i(d,[{key:_0x609d("0x1de"),value:function(x){this[_0x609d("0x33c")]||(this[_0x609d("0x33c")]={width:this[_0x609d("0x4ad")],height:this[_0x609d("0x35d")]}),this[_0x609d("0x4ad")]=this.originSize[_0x609d("0x2bb")],this[_0x609d("0x35d")]=this[_0x609d("0x33c")][_0x609d("0x185")],x=x||{},x[_0x609d("0x128")]=void 0==x.time?.6:x[_0x609d("0x128")];var d=this,_=esmap[_0x609d("0x126")][_0x609d("0x85")].getValues;if(!this._isAnimating||x[_0x609d("0x4ae")])return d[_0x609d("0x4af")]=!0,x[_0x609d("0x27c")]=_(x,_0x609d("0x27c"),1.5),x[_0x609d("0x4b0")]=_(x,"times",1),x[_0x609d("0x4b1")]=_(x,"delay",0),0==x[_0x609d("0x4b0")]&&(x[_0x609d("0x4b0")]=Number.MAX_VALUE),x[_0x609d("0x128")]=void 0==x.time?.6:x[_0x609d("0x128")],clearInterval(this[_0x609d("0x4b2")]),this[_0x609d("0x4b2")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](this,.2*x[_0x609d("0x128")],{width_:this[_0x609d("0x4ad")]*x[_0x609d("0x27c")],height_:this[_0x609d("0x35d")]*x[_0x609d("0x27c")]},THREE[_0x609d("0x12c")][_0x609d("0x4b4")],function(){d[_0x609d("0x4b2")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](d,.8*x[_0x609d("0x128")],{width_:d[_0x609d("0x33c")][_0x609d("0x2bb")],height_:d[_0x609d("0x33c")][_0x609d("0x185")]},THREE[_0x609d("0x12c")][_0x609d("0x4b4")],function(){x[_0x609d("0x4b0")]--,x[_0x609d("0x4b0")]>0?d[_0x609d("0x4b2")]=setTimeout(function(){x[_0x609d("0x4ae")]=!0,d[_0x609d("0x1de")](x)},1e3*x[_0x609d("0x4b1")]):(d[_0x609d("0x4af")]=!1,x[_0x609d("0x12e")]&&x[_0x609d("0x12e")]())})}),x}},{key:"flash3d",value:function(x){var d,_,e=this;x=x||{};var t=esmap[_0x609d("0x126")].Option[_0x609d("0x127")];if(!this[_0x609d("0x4af")]||x[_0x609d("0x4ae")])return e[_0x609d("0x4af")]=!0,x.scale=t(x,_0x609d("0x27c"),1.5),x[_0x609d("0x4b0")]=t(x,_0x609d("0x4b0"),1),x[_0x609d("0x4b1")]=t(x,_0x609d("0x4b1"),0),0==x[_0x609d("0x4b0")]&&(x[_0x609d("0x4b0")]=Number[_0x609d("0x4b5")]),x[_0x609d("0x128")]=void 0==x[_0x609d("0x128")]?.6:x[_0x609d("0x128")],clearInterval(this[_0x609d("0x4b2")]),d=new(THREE[_0x609d("0x1b1")])(x.scale,x[_0x609d("0x27c")],x[_0x609d("0x27c")]),_=new(THREE[_0x609d("0x1b1")])(1,1,1),this[_0x609d("0x4b2")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](this,.2*x[_0x609d("0x128")],{scale:d},THREE.Tween.easeInOutQuad,function(){
e.flashId=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](e,.8*x[_0x609d("0x128")],{scale:_},THREE[_0x609d("0x12c")][_0x609d("0x4b4")],function(){x[_0x609d("0x4b0")]--,x[_0x609d("0x4b0")]>0?e[_0x609d("0x4b2")]=setTimeout(function(){x[_0x609d("0x4ae")]=!0,e[_0x609d("0x1de")](x)},1e3*x[_0x609d("0x4b1")]):(e[_0x609d("0x4af")]=!1,x[_0x609d("0x12e")]&&x[_0x609d("0x12e")]())})}),x}},{key:_0x609d("0x399"),value:function(x,d){var _=esmap[_0x609d("0x197")][_0x609d("0x4b6")](this[_0x609d("0x180")]),e=esmap.ESRenderOrder[_];d=void 0==d?void 0==e?10:e:d,x=void 0==x||x,this[_0x609d("0x194")][_0x609d("0x3a3")]=!x,this[_0x609d("0x194")][_0x609d("0x3d1")]=!x,this.renderOrder=x?d:0}},{key:"animate",value:function(x){function d(i){function c(d,i,a){x[_0x609d("0x4b7")],n[_0x609d("0x186")].x=e.point.x+g[_0x609d("0x186")].x,n[_0x609d("0x186")].z=e[_0x609d("0x1e1")].z+g[_0x609d("0x186")].z;var r={x:-d-map[_0x609d("0x141")][_0x609d("0x1b2")],z:i+map[_0x609d("0x141")][_0x609d("0x1b4")]};if(_[_0x609d("0x10c")](_0x609d("0x4b8"),{x:r.x,y:r.z}),x[_0x609d("0x4b7")]&&u){var A=new(THREE[_0x609d("0x1b1")])(1,0,0),C=A.clone(),o=n.matrix[_0x609d("0x1a8")]();o.setPosition(new(THREE[_0x609d("0x1b1")])),C[_0x609d("0x4b9")](o);var s=C[_0x609d("0x1a8")]()[_0x609d("0x4ba")](A),s=s.y<0?-1:1,c=A[_0x609d("0x4bb")](C),l=Math.PI-c*s-I;t[_0x609d("0x13a")][_0x609d("0x20")]instanceof THREE[_0x609d("0x4bc")]&&(l+=Math.PI),t.controls.update({forceTheta:l})}x[_0x609d("0x4bd")]&&u&&t[_0x609d("0x336")]({x:r.x,y:r.z,time:0,FloorNum:1,callback:null}),n.quaternion[_0x609d("0x4be")](f,.2)}var u=!1;if(t[_0x609d("0x162")][t[_0x609d("0x162")][_0x609d("0x21")]-1]==d&&(u=!0),C+=i*a,e=getPointByDistance(s,C,A),e&&e.point){var f=null,l=n.matrix[_0x609d("0x1a8")]();l[_0x609d("0x4bf")](n[_0x609d("0x186")],new THREE.Vector3(e[_0x609d("0x1e1")].x+g.position.x,n[_0x609d("0x186")].y,e[_0x609d("0x1e1")].z+g[_0x609d("0x186")].z),n.up),l[_0x609d("0x4c0")]((new(THREE[_0x609d("0x4c1")]))[_0x609d("0x4c2")](new(THREE[_0x609d("0x4c3")])(0,I,0))),f=(new(THREE[_0x609d("0x4c4")]))[_0x609d("0x4c5")](l)}e[_0x609d("0x4c6")]?r?C=0:(n[_0x609d("0x367")](),n[_0x609d("0x367")]=null,_.emit(_0x609d("0x4c7"),{_this:_})):c(n[_0x609d("0x186")].x,n[_0x609d("0x186")].z,o)}var _=this;if(x&&x[_0x609d("0x18d")]){var e,t=esmap.ESMap[_0x609d("0x165")],i=x[_0x609d("0x18d")][_0x609d("0xbc")](function(x){return new(THREE[_0x609d("0x1b1")])(-t[_0x609d("0x141")][_0x609d("0x1b2")]-x.x,0,x.y-t[_0x609d("0x141")][_0x609d("0x1b4")])}),n=this.o3d_,g=i,a=x[_0x609d("0x3e9")]||12,r=x.loop,A=x.offset||0,I=x[_0x609d("0x35b")]*THREE.Math[_0x609d("0x23f")],C=x.startDistance||0,o=(new(THREE[_0x609d("0x1b1")])(1,0,0),void 0===x[_0x609d("0x4c8")]?Math.PI/2:x[_0x609d("0x4c8")]),s=g;g[_0x609d("0x186")]={x:0,y:0,z:0},t[_0x609d("0x162")][_0x609d("0x1a")](d),n.stop&&n[_0x609d("0x367")](),t.on("update",d),n[_0x609d("0x367")]=function(){n[_0x609d("0x4c9")]&&n[_0x609d("0x4c9")](),t[_0x609d("0x10b")](_0x609d("0xc6"),d)}}}},{key:_0x609d("0x3ad"),value:function(x){if(void 0===this[_0x609d("0x4ca")]&&(this.enabledUpdateSize=!0),this[_0x609d("0x4ca")]){x=x||esmap[_0x609d("0x164")].instance.mapView;var d=x.map_[_0x609d("0x14c")],_=esmap[_0x609d("0x164")].instance[_0x609d("0x1f7")];this[_0x609d("0x4cb")]||(this.originPosition=this[_0x609d("0x186")].clone()),(void 0==this[_0x609d("0x3a1")]||isNaN(this[_0x609d("0x3a1")]))&&(isNaN(this[_0x609d("0x186")].y)&&(this[_0x609d("0x186")].y=0),this[_0x609d("0x3a1")]=this[_0x609d("0x186")].y);var e=this.data_?0==this[_0x609d("0x299")][_0x609d("0x4cc")]?0:this[_0x609d("0x299")][_0x609d("0x4cc")]:0==this[_0x609d("0x180")][_0x609d("0x4cd")]?0:this[_0x609d("0x180")][_0x609d("0x4cd")];if((e||0==e)&&(_>e?this.visible=!1:this[_0x609d("0x17e")]=!0),"3d"==x.map_.viewMode){if(0==x.h_)return;this._lastScale=void 0;var t=esmap[_0x609d("0x366")][_0x609d("0x4ce")](this,x),i=this[_0x609d("0x35d")]?this.height_*t[_0x609d("0x4cf")]/2:0,n=this[_0x609d("0x3f4")]?0:i;if(this.position[_0x609d("0x4d0")](this.initY_+n),this[_0x609d("0x183")]&&(_0x609d("0x184")==this[_0x609d("0x183")]||_0x609d("0x1e7")==this.type_||_0x609d("0x4d1")==this[_0x609d("0x183")])&&(this[_0x609d("0x180")][_0x609d("0x467")]||void 0!=this[_0x609d("0x180")][_0x609d("0x35e")]&&!this[_0x609d("0x180")][_0x609d("0x35e")]))return;this[_0x609d("0x27c")].copy(t[_0x609d("0x27c")])}else{if(this[_0x609d("0x183")]&&(_0x609d("0x184")==this.type_||_0x609d("0x1e7")==this[_0x609d("0x183")]||_0x609d("0x4d1")==this[_0x609d("0x183")])&&(void 0!=this[_0x609d("0x180")].spritify_&&!this[_0x609d("0x180")][_0x609d("0x35e")]||this[_0x609d("0x180")][_0x609d("0x467")]))return;this[_0x609d("0x4d2")]=esmap[_0x609d("0x366")][_0x609d("0x4ce")](this,x)[_0x609d("0x27c")],this[_0x609d("0x27c")][_0x609d("0x23c")](this[_0x609d("0x4d2")].clone().multiplyScalar(1/d[_0x609d("0x280")]))}}}},{key:"makeTextSprite_",value:function(x,d){function _(x,d){if(L[x]&&""!=L[x]){if(_0x609d("0x19b")==d)return esmap[_0x609d("0x197")].toRgba(L[x]);if(_0x609d("0x51")==d)return parseFloat(L[x])}return 0}var e,t=this;void 0===d&&(d={});var i=d.hasOwnProperty(_0x609d("0x4d3"))?d[_0x609d("0x4d3")]:_0x609d("0x4d4"),n=d[_0x609d("0x1c")](_0x609d("0x462"))?d[_0x609d("0x462")]:36;n=Math[_0x609d("0x1bf")](n*(this[_0x609d("0x4d5")]||1));var g=d.hasOwnProperty("color")?d[_0x609d("0x19b")]:"rgba(0,0,0,1)",a=d[_0x609d("0x1c")](_0x609d("0x4d6"))?d[_0x609d("0x4d6")]:2,r=d[_0x609d("0x1c")](_0x609d("0x43f"))?d.borderColor:_0x609d("0x4d7"),A=esmap[_0x609d("0x197")][_0x609d("0x347")]()[_0x609d("0x339")];a*=A?3:2;var I,C,o=Math[_0x609d("0x1bf")](n*(A&&n<=36?1.1:1)),s=o+_0x609d("0x4d8")+i;t[_0x609d("0x2ee")]||(t[_0x609d("0x2ee")]=document[_0x609d("0x2")](_0x609d("0x2ee"))),t[_0x609d("0x4d9")]||(t[_0x609d("0x4d9")]=t[_0x609d("0x2ee")][_0x609d("0x480")]("2d")),I=t.canvas,C=t.context,C[_0x609d("0x4da")]=s;for(var c=a/2,u=x[_0x609d("0x240")]("\n"),f=[],l=0,h=0,b=0;b<u[_0x609d("0x21")];b++)if(""==u[b])u.splice(b,1),b--;else{var p=C[_0x609d("0x4db")](u[b])[_0x609d("0x2bb")];l=Math[_0x609d("0x47a")](l,p),h+=o+a,f[_0x609d("0x1a")]({text:u[b],width:p})}d.textspace=d[_0x609d("0x4dc")]||4,h+=d[_0x609d("0x4dc")]*(u[_0x609d("0x21")]-1);var v=null,m=!1,y={x:c,y:-a},w={x:0,y:0},E=l+a,k=void 0==x||""==x?0:h,S=d.imagesize||o,T=d[_0x609d("0x4dd")]||4,R=l,O=50,M=0,L=t[_0x609d("0x299")]&&t[_0x609d("0x299")][_0x609d("0x4de")]&&t[_0x609d("0xbc")][_0x609d("0x143")][_0x609d("0x4df")]?t[_0x609d("0xbc")][_0x609d("0x143")].fontStyleThemeDic[t[_0x609d("0x299")][_0x609d("0x4de")]]:void 0;if(L){var P=_(_0x609d("0x462"),_0x609d("0x51")),j=_(_0x609d("0x4e0"),"number"),N=_(_0x609d("0x4e1"),_0x609d("0x19b")),H=_("platestorkcolor",_0x609d("0x19b"));if(j){var D=4*(j-P);l+=2*D,h+=D,E=l+a,k=h,S=d[_0x609d("0x29e")]||S+D}}if(t.data_&&t[_0x609d("0x299")][_0x609d("0x209")]&&""!=t.data_[_0x609d("0x209")])switch(m=!0,d[_0x609d("0x4e2")]){case _0x609d("0x281"):case _0x609d("0x282"):S>h?(y.y=(S-h)/2,k=S):(y.y=-a,w.y=(h-S)/2),"left"==d[_0x609d("0x4e2")]?(y.x=S+T,E=l+y.x):(w.x=0!=l?l+T:0,E=l+S+T);break;case _0x609d("0x283"):case"bottom":if(R=Math[_0x609d("0x47a")](l,S)+a,l>=S?w.x=Math[_0x609d("0x1bf")]((l+c-S)/2):y.x=Math.ceil((S-l+c)/2),_0x609d("0x283")==d.imagealign)k=k+S+T,E=R,y.y=S+T-c;else{var F=k;k=k+S+T,E=R,w.y=F+T}}if(I[_0x609d("0x2bb")]=E,I[_0x609d("0x185")]=k,t.originPivot=new(THREE[_0x609d("0x1b1")])(I[_0x609d("0x2bb")]/2,0,I[_0x609d("0x185")]/2),t[_0x609d("0x4e3")]=t[_0x609d("0x4e4")].clone(),m)var z=setInterval(function(){M==O&&clearInterval(z),v=t[_0x609d("0x299")][_0x609d("0x4e5")][_0x609d("0x209")],v&&(C[_0x609d("0x4e6")](v,w.x,w.y,S,S),t[_0x609d("0x4e7")]=new(THREE[_0x609d("0x1b1")])(w.x+S/2,0,w.y+S/2),"icon"==d[_0x609d("0x4e8")]&&(t.pivot=t[_0x609d("0x4e7")]),e&&(e.needsUpdate=!0),clearInterval(z)),M++},100);if(void 0!=x&&x){if(C[_0x609d("0x4da")]=s,C[_0x609d("0x4e9")]=!0,j){C[_0x609d("0x4ea")]=H,C[_0x609d("0x269")]=4;var Y=0;"top"==d[_0x609d("0x4e2")]&&(Y=S+T),C[_0x609d("0x334")](y.x+4,4+Y,l-8,h-8,10)[_0x609d("0x4eb")](),C[_0x609d("0x496")]=N,C[_0x609d("0x334")](y.x+4,4+Y,l-8,h-8,10)[_0x609d("0x489")]()}for(var Z=0,b=0;b<f[_0x609d("0x21")];b++){var X=(l-f[b][_0x609d("0x2bb")])/2+y.x,B=(b+1)*(o+d[_0x609d("0x4dc")]+c)+y.y-d[_0x609d("0x4dc")];j?Z=D/2:(Z=0,C[_0x609d("0x4ea")]=r,C[_0x609d("0x269")]=a,C[_0x609d("0x4ec")](f[b].text,X,B)),C[_0x609d("0x496")]=g,C[_0x609d("0x4ed")](f[b][_0x609d("0x4ee")],X,B+Z)}}return this[_0x609d("0x4ad")]=I[_0x609d("0x2bb")],this[_0x609d("0x35d")]=I[_0x609d("0x185")],e=new(THREE[_0x609d("0x3c8")])(I)[_0x609d("0x1a8")](),e[_0x609d("0x3c9")]=THREE.LinearFilter,e[_0x609d("0x4ef")]=esmap[_0x609d("0x134")].instance[_0x609d("0x250")][_0x609d("0x4f0")](),e[_0x609d("0x4f1")]=!1,e[_0x609d("0x198")]=!0,d[_0x609d("0x4f2")]||this.material_||(this.material_=new(THREE[_0x609d("0x40d")])({map:e,depthWrite:!1})),e}},{key:_0x609d("0x2a3"),value:function(x){x=x||this.style,this[_0x609d("0x4f3")](this[_0x609d("0x3f")],{fontsize:2*x.fontsize,borderThickness:2,color:esmap[_0x609d("0x197")][_0x609d("0x4f4")](x[_0x609d("0x463")]||_0x609d("0x464")),borderColor:esmap[_0x609d("0x197")][_0x609d("0x4f4")](x[_0x609d("0x465")]||"255,255,255"),imagealign:x.imagealign||_0x609d("0x281"),imagesize:x[_0x609d("0x29e")],imagespace:x[_0x609d("0x4dd")],textspace:x[_0x609d("0x4dc")]||4,pivottype:x.pivottype||_0x609d("0x27d")})}},{key:_0x609d("0x4f5"),value:function(x){this[_0x609d("0x3f")]=x,this.updateStyle()}},{key:_0x609d("0x46b"),value:function(x){this.style[_0x609d("0x462")]=x,this.updateStyle()}},{key:_0x609d("0x46c"),value:function(x){this[_0x609d("0xcf")][_0x609d("0x463")]=x,this[_0x609d("0x2a3")]()}},{key:_0x609d("0x46d"),value:function(x){this[_0x609d("0xcf")][_0x609d("0x465")]=x,this[_0x609d("0x2a3")]()}},{key:_0x609d("0x368"),value:function(){if(clearInterval(this[_0x609d("0x4b2")]),this[_0x609d("0x33c")])this[_0x609d("0x4ad")]=this[_0x609d("0x33c")][_0x609d("0x2bb")],this[_0x609d("0x35d")]=this[_0x609d("0x33c")][_0x609d("0x185")];else{var x=new(THREE[_0x609d("0x1b1")])(1,1,1);this[_0x609d("0x4b2")]=em[_0x609d("0x12c")][_0x609d("0x4b3")](this,.1,{scale:x},em[_0x609d("0x12c")][_0x609d("0x4f6")])}this[_0x609d("0x4af")]=!1}},{key:_0x609d("0x375"),value:function(){clearInterval(this[_0x609d("0x4f7")],this[_0x609d("0x3a1")]=this._initY,this[_0x609d("0x4af")]=!1)}},{key:_0x609d("0x39a"),value:function(x){clearInterval(this[_0x609d("0x4f8")]),this[_0x609d("0x4af")]=!1}},{key:_0x609d("0x36c"),value:function(x){var d=this,_=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")];if(!this[_0x609d("0x4af")]||x.force)return d._isAnimating=!0,x=x||{},void 0==x._initY&&(d[_0x609d("0x4f9")]=d[_0x609d("0x3a1")]),x.times=_(x,_0x609d("0x4b0"),1),0==x[_0x609d("0x4b0")]&&(x[_0x609d("0x4b0")]=Number[_0x609d("0x4b5")]),x[_0x609d("0x4b1")]=_(x,"delay",0),x.height=_(x,_0x609d("0x185"),8),x[_0x609d("0x129")]=_(x,_0x609d("0x128"),_0x609d("0x129"),1),clearInterval(this[_0x609d("0x4f7")]),this[_0x609d("0x4f7")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](this,.2*x[_0x609d("0x129")],{initY_:d[_0x609d("0x4f9")]+x[_0x609d("0x185")]},THREE[_0x609d("0x12c")].easeOutQuad,function(){d[_0x609d("0x4f7")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](d,.8*x.duration,{initY_:d[_0x609d("0x4f9")]},THREE[_0x609d("0x12c")].bounce,function(){x[_0x609d("0x4b0")]--,x[_0x609d("0x4b0")]>0?d[_0x609d("0x4f7")]=setTimeout(function(){x[_0x609d("0x4ae")]=!0,d[_0x609d("0x36c")](x)},1e3*x[_0x609d("0x4b1")]):(d._isAnimating=!1,x.callback&&x[_0x609d("0x12e")]())})}),x}},{key:_0x609d("0x336"),value:function(x){var d=this,_=esmap[_0x609d("0x126")].Option[_0x609d("0x127")](x,_0x609d("0x128"),_0x609d("0x129"),1),e=!1;return d[_0x609d("0x180")]&&d[_0x609d("0x180")].alias&&"es3dmarker"==d.datas_[_0x609d("0x353")]&&(e=!0),d[_0x609d("0x4af")]=!0,THREE[_0x609d("0x12c")].kill(d[_0x609d("0x4f8")]),d[_0x609d("0x4f8")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](e?d[_0x609d("0x186")]:d,_,{x:e?-d.datas_[_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b2")]-x.x:x.x,y:e?x.y-d[_0x609d("0x180")][_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b4")]:x.y},x.ease||THREE[_0x609d("0x12c")][_0x609d("0x4f6")],function(){d[_0x609d("0x4af")]=!1,x.callback&&x[_0x609d("0x12e")]()},function(_){x[_0x609d("0xc6")]&&x[_0x609d("0xc6")]({x:d.x,y:d.y})}),x}},{key:"moveTo2",value:function(x){var d=this,_=esmap[_0x609d("0x126")].Option[_0x609d("0x127")](x,"time",_0x609d("0x129"),1),e=!1;return d[_0x609d("0x180")]&&d[_0x609d("0x180")][_0x609d("0x353")]&&_0x609d("0x354")==d[_0x609d("0x180")][_0x609d("0x353")]&&(e=!0),THREE[_0x609d("0x12c")].kill(d[_0x609d("0x4f8")]),d._moveToID=THREE[_0x609d("0x12c")].action(e?d[_0x609d("0x186")]:d,_,{x:e?-d[_0x609d("0x180")][_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b2")]-x.x:x.x,z:e?x.y-d[_0x609d("0x180")][_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b4")]:x.y},x[_0x609d("0x4fa")]||THREE[_0x609d("0x12c")][_0x609d("0x4f6")],function(){x[_0x609d("0x12e")]&&x[_0x609d("0x12e")]()},function(_){x.update&&x[_0x609d("0xc6")]({x:-d[_0x609d("0x180")][_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b2")]-d[_0x609d("0x186")].x,y:d[_0x609d("0x186")].z+d[_0x609d("0x180")][_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b4")]})}),x}},{key:_0x609d("0x36b"),value:function(x){var d=this,_=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](x,_0x609d("0x128"),_0x609d("0x129"),1),e=!1;return d.datas_&&d[_0x609d("0x180")][_0x609d("0x353")]&&_0x609d("0x354")==d[_0x609d("0x180")].alias&&(e=!0),THREE[_0x609d("0x12c")][_0x609d("0x4fb")](d[_0x609d("0x4fc")]),d[_0x609d("0x4fc")]=THREE[_0x609d("0x12c")].action(e?d[_0x609d("0x227")]:d,_,{y:THREE[_0x609d("0x1bb")][_0x609d("0x35a")](x[_0x609d("0x35b")])},x[_0x609d("0x4fa")]||THREE.Tween.linear,function(){x[_0x609d("0x12e")]&&x[_0x609d("0x12e")]()}),x}},{key:_0x609d("0x39b"),value:function(x){var d=this;if(d[_0x609d("0x194")]&&!d[_0x609d("0x4fd")]){d[_0x609d("0x4fd")]=!0,x=x||{},x.out||(d[_0x609d("0x17e")]=!0);var _=esmap[_0x609d("0x126")].Option[_0x609d("0x127")](x,_0x609d("0x128"),_0x609d("0x129"),.2);THREE[_0x609d("0x12c")][_0x609d("0x4fb")](d._fadeID),d._fadeID=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](d[_0x609d("0x194")],_,{opacity:x[_0x609d("0x4fe")]?0:1},null,function(){d[_0x609d("0x4fd")]=!1,x[_0x609d("0x4fe")]&&(d[_0x609d("0x17e")]=!1),x[_0x609d("0x12e")]&&x[_0x609d("0x12e")]()})}}},{key:_0x609d("0x4ff"),value:function(x){function d(d,_){THREE[_0x609d("0x12c")][_0x609d("0x4b3")](d,.5,{opacity:0},THREE[_0x609d("0x12c")][_0x609d("0x4f6")],function(){_&&x&&x()})}var _=this;if(_[_0x609d("0x194")]&&_[_0x609d("0x194")].materials)for(var e=0;e<_[_0x609d("0x194")][_0x609d("0x195")].length;e++){var t=_[_0x609d("0x194")][_0x609d("0x195")][e];d(t,e==_[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")]-1)}else d(_[_0x609d("0x194")],!0)}},{key:_0x609d("0x500"),value:function(x){function d(d,_){THREE[_0x609d("0x12c")][_0x609d("0x4b3")](d,.5,{opacity:1},THREE[_0x609d("0x12c")][_0x609d("0x4f6")],function(){_&&x&&x()})}var _=this;if(_[_0x609d("0x194")]&&_[_0x609d("0x194")].materials)for(var e=0;e<_[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")];e++){var t=_[_0x609d("0x194")].materials[e];d(t,e==_[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")]-1)}else d(_[_0x609d("0x194")],!0)}},{key:_0x609d("0x501"),get:function(){return this[_0x609d("0x4e3")]},set:function(x){if(x instanceof THREE[_0x609d("0x1b1")]){this.pivot_=x,this[_0x609d("0x502")]=new(THREE[_0x609d("0x1b1")])(this[_0x609d("0x4ad")]/2-x.x,0,x.y-this[_0x609d("0x35d")]/2);var d=new(THREE[_0x609d("0x4c3")])(this[_0x609d("0xbc")].controls[_0x609d("0x28b")](),this[_0x609d("0xbc")][_0x609d("0x13a")][_0x609d("0x22f")](),0,"YXZ"),_=(new(THREE[_0x609d("0x4c1")])).makeRotationFromEuler(d);this[_0x609d("0x186")][_0x609d("0x23c")](this[_0x609d("0x4cb")][_0x609d("0x1a8")]()[_0x609d("0x82")](this[_0x609d("0x502")][_0x609d("0x1a8")]()[_0x609d("0x288")](this[_0x609d("0x503")]).applyMatrix4(_)))}}}]),d}(THREE.Sprite),g=function(){function x(d,e,t){_(this,x),this[_0x609d("0xbc")]=esmap[_0x609d("0x164")][_0x609d("0x165")],this[_0x609d("0x299")]=e,this[_0x609d("0x299")].floornum=d,e[_0x609d("0x504")]&&(this.data_.x_=e[_0x609d("0x504")][0],this[_0x609d("0x299")].y_=e.vertex[1]),this[_0x609d("0x4ad")],this[_0x609d("0x35d")],this[_0x609d("0x1d2")]=null,this[_0x609d("0x4d5")]=1,this[_0x609d("0x4ca")]=!0,this[_0x609d("0x3f")]=e[_0x609d("0x43")],t=t||{},t[_0x609d("0x4e2")]=t[_0x609d("0x4e2")]||"left",t.imagesize=null,t[_0x609d("0x4dd")]=t[_0x609d("0x4dd")]||4,t[_0x609d("0x4dc")]=t[_0x609d("0x4dc")]||4,t.pivottype=t[_0x609d("0x4e8")]||_0x609d("0x27d"),this.style=t,this[_0x609d("0x4cb")]=null,this.pivotOffset=null,this[_0x609d("0x4e3")]=null,this[_0x609d("0x4e4")]=null,this.iconPivot=null,this[_0x609d("0x2a3")](t),THREE.Sprite[_0x609d("0x15")](this,this[_0x609d("0x1d2")])}return i(x,null,[{key:_0x609d("0x4ce"),value:function(x,d){var _=x.getWorldPosition(),e=_0x609d("0x283")==d[_0x609d("0x356")][_0x609d("0x223")];e&&(_.y=d.map_[_0x609d("0x151")].y);var t=_,i=d.camera[_0x609d("0x186")],n=d.map_[_0x609d("0x13a")].target[_0x609d("0x1a8")](),g=t.distanceTo(i),a=n[_0x609d("0x1a8")]()[_0x609d("0x246")](i).normalize(),r=t[_0x609d("0x1a8")]()[_0x609d("0x246")](i)[_0x609d("0x287")](),A=a.dot(r);g*=A;var I=g/d.h_*.3,C=(x[_0x609d("0x4d5")]||1,x[_0x609d("0x4ad")]*I),o=x[_0x609d("0x35d")]*I;x[_0x609d("0x503")]=I;var s={scale:6==x[_0x609d("0x180")].nodeType?new THREE.Vector3(C,o,C):new(THREE[_0x609d("0x1b1")])(C,o,1),meterperpixel:I};return s}}]),x}();d[_0x609d("0x92")]=g,g[_0x609d("0x1b")]=new n,esmap[_0x609d("0x197")]._setGeneralProperties(g[_0x609d("0x1b")],_0x609d("0x4cb"))},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}function i(x){for(var d,_=[],e=2*Math.PI/x[_0x609d("0x18c")],t=0;t<x[_0x609d("0x18c")];t++){var i=new(THREE[_0x609d("0x1b1")])(0,x[_0x609d("0x421")]*x[_0x609d("0x505")]*Math[_0x609d("0x422")](e*t),x.radius*Math[_0x609d("0x506")](e*t));_[_0x609d("0x1a")](i),0==t&&(d=i)}_[_0x609d("0x1a")](d);var n,g,I,C,s=x[_0x609d("0x3ed")].length,c=a(x[_0x609d("0x3ed")]);x[_0x609d("0x21")]=c[_0x609d("0x21")],x[_0x609d("0x27d")]=c[_0x609d("0x27d")],x[_0x609d("0x3cc")]||r(x[_0x609d("0x3ed")],x[_0x609d("0x27d")]),x[_0x609d("0x507")]=2*Math.PI*x[_0x609d("0x421")];var u,f=0,l=0,h=x[_0x609d("0x507")]/x[_0x609d("0x18c")];x[_0x609d("0x508")]=[],o=x.up[_0x609d("0x1a8")](),x[_0x609d("0x509")]=null;for(var t=0;t<s;t++){n=0==t?null:x.pathVertices[t-1],I=t==s-1?null:x[_0x609d("0x3ed")][t+1],g=x[_0x609d("0x3ed")][t],C=A(n,g,I),x[_0x609d("0x509")]||(x._up_=new(THREE[_0x609d("0x1b1")])(0,1,0)[_0x609d("0x4b9")](C)[_0x609d("0x287")]()),t>0&&(f+=g[_0x609d("0x50a")](n)),l=0,x[_0x609d("0x50b")][t]=[];var b=g[_0x609d("0x1a8")]();b.y=0;for(var p=0,v=0;v<_[_0x609d("0x21")];v++)u=_[v].clone().applyMatrix4(C),x[_0x609d("0x420")][_0x609d("0x1a")](u),x[_0x609d("0x50b")][t].push(u),x[_0x609d("0x508")][_0x609d("0x1a")](new(THREE[_0x609d("0x50c")])((f+p)/x[_0x609d("0x21")],1-l/x[_0x609d("0x507")])),l+=h}}function n(x){for(var d,_=x[_0x609d("0x3ed")][_0x609d("0x21")],e=x[_0x609d("0x18c")]+1,t=0;t<_-1;t++){d=t*e;for(var i=0;i<e-1;i++)x[_0x609d("0x1ac")][_0x609d("0x1a")](new(THREE[_0x609d("0x50d")])(d+i+1,d+i,d+e+i)),x[_0x609d("0x1ac")][_0x609d("0x1a")](new(THREE[_0x609d("0x50d")])(d+i+1,d+i+e,d+e+i+1))}}function g(x){for(var d=x[_0x609d("0x1ac")][_0x609d("0x21")],_=0;_<d;_++){var e=x[_0x609d("0x1ac")][_];x[_0x609d("0x50e")][0][_0x609d("0x1a")]([x[_0x609d("0x508")][e.a],x[_0x609d("0x508")][e.b],x._uvs[e.c]])}x[_0x609d("0x50f")]=!0}function a(x){for(var d=0,_=x[0][_0x609d("0x1a8")](),e=1;e<x[_0x609d("0x21")];e++)d+=x[e][_0x609d("0x50a")](x[e-1]),_[_0x609d("0x82")](x[e]);return{length:d,center:_[_0x609d("0x510")](x.length)}}function r(x,d){x[_0x609d("0xc1")](function(x){x[_0x609d("0x246")](d)})}function A(x,d,_){var e,t=x&&x[_0x609d("0x1a8")](),i=d[_0x609d("0x1a8")](),n=_&&_[_0x609d("0x1a8")](),g=1,a=null;if(x)if(_){var r=i[_0x609d("0x1a8")]().sub(t).normalize(),A=n[_0x609d("0x246")](i).normalize();a=r[_0x609d("0x4bb")](A)/2,g=1/Math.cos(a),g=THREE.Math[_0x609d("0x1bc")](g,1,2),e=r[_0x609d("0x82")](A)[_0x609d("0x287")]()}else e=i[_0x609d("0x246")](t)[_0x609d("0x287")]();else e=n.sub(i)[_0x609d("0x287")]();var I=o[_0x609d("0x1a8")](),C=(new(THREE[_0x609d("0x1b1")]))[_0x609d("0x511")](e,I)[_0x609d("0x287")](),s=(new(THREE[_0x609d("0x1b1")])).crossVectors(C,e)[_0x609d("0x287")]();o=s[_0x609d("0x1a8")](),C.multiplyScalar(g);var c=(new(THREE[_0x609d("0x4c1")]))[_0x609d("0x512")](e,s,C)[_0x609d("0x513")](d);return c.angle=a,c.vz=C,c}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var I=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e.enumerable=e.enumerable||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),C=function(x){!x[_0x609d("0x3ed")]||x[_0x609d("0x3ed")][_0x609d("0x21")]<2||(i(x),n(x),g(x),x.computeFaceNormals())},o=null,s=function(x){function d(x){_(this,d);var t=e(this,(d.__proto__||Object[_0x609d("0x351")](d))[_0x609d("0x15")](this)),i=t;return i.pathVertices=null,i[_0x609d("0x421")]=1,i[_0x609d("0x18c")]=12,i[_0x609d("0x3cf")]=1,Object[_0x609d("0x348")](i,x),i[_0x609d("0x505")]||(i.lineMode==esmap[_0x609d("0x3bc")][_0x609d("0x3c0")]?i[_0x609d("0x505")]=.3:i[_0x609d("0x3bb")]==esmap[_0x609d("0x3bc")].CIRCLE&&(i[_0x609d("0x505")]=1)),i[_0x609d("0x18b")]=esmap.ESUtil[_0x609d("0x85")].getValues(i,_0x609d("0x18b"),!0),i.up||(i.up=new(THREE[_0x609d("0x1b1")])(0,1,0)),t[_0x609d("0x508")]=[],t[_0x609d("0x50b")]=[],C(i),t}return t(d,x),I(d,[{key:_0x609d("0x3eb"),value:function(x){for(var d,_,e=this,t=0,i=e[_0x609d("0x50b")],n=(x instanceof Array,1),g=0;g<i[_0x609d("0x21")];g++){var a=i[g],r=e[_0x609d("0x3ed")][g];if(r)for(var A=0;A<a.length;A++){var I=a[A];0==A&&1!=e[_0x609d("0x505")]&&(d=a[0][_0x609d("0x1a8")]()[_0x609d("0x246")](r)[_0x609d("0x21")]()),1!=e[_0x609d("0x505")]&&(_=I[_0x609d("0x1a8")]()[_0x609d("0x246")](r),n=_[_0x609d("0x21")]()/d);var C=r[_0x609d("0x1a8")]().add(I[_0x609d("0x1a8")]()[_0x609d("0x246")](r)[_0x609d("0x287")]()[_0x609d("0x288")](x*n));e[_0x609d("0x420")][t][_0x609d("0x23c")](C),t++}}x<.1&&(x=.1),e[_0x609d("0x421")]=x,e[_0x609d("0x514")]=!0}}]),d}(THREE.Geometry);d[_0x609d("0x92")]=s},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e={dataUrlPrefix:_0x609d("0x515"),themeUrlPrefix:_0x609d("0x516")},t=function x(d){_(this,x),this[_0x609d("0x271")]=e[_0x609d("0x517")],this[_0x609d("0x272")]=e[_0x609d("0x518")],this[_0x609d("0x4a9")]=document[_0x609d("0x8b")],this[_0x609d("0x277")]=[10,20],this[_0x609d("0x27b")]=64,this[_0x609d("0x519")]=[10,20],this[_0x609d("0x51a")]="60",this[_0x609d("0x51b")]="firebrick",this[_0x609d("0x51c")]=_0x609d("0x51d"),this[_0x609d("0x51e")]=null,this[_0x609d("0x1cb")]=0,this[_0x609d("0x51f")]=!0,this[_0x609d("0x249")]=.3,this[_0x609d("0x216")]=!0,this.focusAlpha=.4,this[_0x609d("0x28c")]=!0,this[_0x609d("0x28d")]=.3,this.moveToAnimateMode=!0,this.moveToAnimateTime=.3,this[_0x609d("0x520")]=!0,this[_0x609d("0x1d0")]=!0,this.modelSelectedEffect=!0,this.minScaleLevel=0,this[_0x609d("0x1c2")]=null,this.defaultScaleLevel=null,this[_0x609d("0x521")]=20,this[_0x609d("0x1fd")]=null,this[_0x609d("0x1fe")]=null,this[_0x609d("0x223")]="3d",this[_0x609d("0x2b0")]=!1,this[_0x609d("0x2b2")]=45,this[_0x609d("0x2b4")]=45,this[_0x609d("0x522")]=2048,this[_0x609d("0x523")]=.6,this[_0x609d("0x3e7")]=!0,this.controlsRotateThreshold=.04,this[_0x609d("0x524")]=.05,this.defaultControlsPose=null,this.defaultCenter=null,this[_0x609d("0x241")]=180,this[_0x609d("0x242")]=null,this[_0x609d("0x525")]=0,this.mapFloorSpan=0,this[_0x609d("0x526")]=1,this[_0x609d("0x527")]=1,this[_0x609d("0x528")]=1,this[_0x609d("0x529")]=null,this[_0x609d("0x52a")]=null,this[_0x609d("0x52b")]=!1,this.perspective=!1,this.slots=!1,this[_0x609d("0x52c")]=!0,this[_0x609d("0x52d")]=!1,this.compassAngle=180;var t=esmap[_0x609d("0x197")].getPlatform()[_0x609d("0x339")];if(this[_0x609d("0x277")]=t?this[_0x609d("0x277")]:[5,5],this[_0x609d("0x27b")]=t?this[_0x609d("0x27b")]:30,this[_0x609d("0x51a")]=t?this[_0x609d("0x51a")]:"50",d)for(var i in d)this[i]=d[i]};d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x),this.map_=null,this[_0x609d("0x52e")]=new(THREE[_0x609d("0x258")]),this[_0x609d("0x52f")]=new(THREE[_0x609d("0x258")]),this[_0x609d("0x530")]=null,this[_0x609d("0x531")]=[],this[_0x609d("0x17f")]=[],this.init_=!1,this[_0x609d("0x4a9")]=null,this[_0x609d("0x532")]=!0,this[_0x609d("0x533")]={levelFrom:null,levelTo:null,scale_offset:null,cameraFrom:null,cameraTo:null},em[_0x609d("0x133")][_0x609d("0x358")](this),this[_0x609d("0x339")]=esmap.ESMapUtil[_0x609d("0x347")]()[_0x609d("0x339")],this[_0x609d("0x15c")]=new(THREE[_0x609d("0x15d")])}return e(x,[{key:"start",value:function(x,d){this.map_=x,this[_0x609d("0x4a9")]=x[_0x609d("0x12f")][_0x609d("0x130")],this[_0x609d("0x534")]=d,this[_0x609d("0x535")]||(this.init_=!0,d[_0x609d("0x14a")](_0x609d("0x536"),this[_0x609d("0x537")].bind(this)),d[_0x609d("0x14a")](_0x609d("0x538"),this.mousemove_[_0x609d("0xa2")](this)),d[_0x609d("0x14a")](_0x609d("0x539"),this[_0x609d("0x53a")][_0x609d("0xa2")](this)),d[_0x609d("0x14a")](_0x609d("0x2eb"),this[_0x609d("0x537")][_0x609d("0xa2")](this)),d[_0x609d("0x14a")](_0x609d("0x2ec"),this[_0x609d("0x53b")].bind(this)),d[_0x609d("0x14a")]("touchend",this[_0x609d("0x53a")][_0x609d("0xa2")](this))),this[_0x609d("0x531")]=[],this[_0x609d("0x17f")]=[]}},{key:"addModel",value:function(x){x[_0x609d("0x183")]="Model",this[_0x609d("0x531")][_0x609d("0x1a")](x)}},{key:_0x609d("0x53c"),value:function(x){x[_0x609d("0x183")]=_0x609d("0x53d"),this[_0x609d("0x531")][_0x609d("0x1a")](x)}},{key:_0x609d("0x53e"),value:function(){if(this[_0x609d("0x530")]){if(this.compassRaycaster_[_0x609d("0x259")](this[_0x609d("0x530")],this[_0x609d("0x356")][_0x609d("0x12f")][_0x609d("0x53f")]),!this[_0x609d("0x356")][_0x609d("0x147")][_0x609d("0x279")])return;this.compassRaycaster_.intersectObject(this[_0x609d("0x356")].compass_[_0x609d("0x279")]).length>0&&this.map_[_0x609d("0x123")]({to:this[_0x609d("0x356")].options[_0x609d("0x540")],duration:.3,callback:function(){}})}}},{key:_0x609d("0x541"),value:function(x,d){var _;x=[].concat(x),void 0==d&&(d=!0),_=d?this[_0x609d("0x531")]:this.objects_;for(var e=0;e<_[_0x609d("0x21")];e++){var t=_[e];x[_0x609d("0x18")](t)>-1&&(_.splice(e,1),e--)}}},{key:_0x609d("0x3a9"),value:function(x){x[_0x609d("0x183")]="UserPOI",this[_0x609d("0x17f")][_0x609d("0x1a")](x)}},{key:_0x609d("0x3aa"),value:function(x){x[_0x609d("0x183")]=_0x609d("0x4d1"),this[_0x609d("0x17f")][_0x609d("0x1a")](x)}},{key:_0x609d("0x542"),value:function(x){x[_0x609d("0x183")]=_0x609d("0x543"),this[_0x609d("0x17f")][_0x609d("0x1a")](x)}},{key:_0x609d("0x544"),value:function(x){x[_0x609d("0x183")]=_0x609d("0x545"),this[_0x609d("0x17f")][_0x609d("0x1a")](x)}},{key:_0x609d("0x546"),value:function(x){x[_0x609d("0x183")]=_0x609d("0x1e7"),this.objects_[_0x609d("0x1a")](x)}},{key:"addFloor",value:function(x){x[_0x609d("0x183")]=_0x609d("0x52"),this[_0x609d("0x17f")][_0x609d("0x1a")](x)}},{key:_0x609d("0x547"),value:function(x){if(!x.visible)return!1;var d=!0;return x[_0x609d("0x548")](function(x){x[_0x609d("0x17e")]||(d=!1)}),d}},{key:_0x609d("0xc6"),value:function(x){if(this[_0x609d("0x532")]&&this[_0x609d("0x530")]){this[_0x609d("0x52e")][_0x609d("0x259")](this[_0x609d("0x530")],this[_0x609d("0x356")][_0x609d("0x14c")]),this[_0x609d("0x549")]=!1,this[_0x609d("0x54a")]=[],this.modelIntersects_=[];for(var d=[],_=0;_<this[_0x609d("0x17f")][_0x609d("0x21")];_++){var e=this[_0x609d("0x17f")][_];this[_0x609d("0x547")](e)&&d[_0x609d("0x1a")](e)}var t=this[_0x609d("0x52e")].intersectObjects(d);if(t[_0x609d("0x21")]>0&&(this[_0x609d("0x54a")]=t,this.isPickedObject=!0),this[_0x609d("0x54b")]=!1,this[_0x609d("0x339")]&&x)if(this[_0x609d("0x54a")][_0x609d("0x21")]>0){var i=this[_0x609d("0x54a")][0][_0x609d("0x20")];i&&(_0x609d("0x184")==i[_0x609d("0x183")]||i.datas_&&i.datas_[_0x609d("0x353")]&&_0x609d("0x354")==i[_0x609d("0x180")][_0x609d("0x353")])?(document.body[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),this[_0x609d("0x54c")]=i[_0x609d("0x180")]||i,this[_0x609d("0x356")][_0x609d("0x10c")](_0x609d("0x54d"),this.over_)):(document[_0x609d("0x8b")][_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x54e"),this[_0x609d("0x54c")]&&this[_0x609d("0x356")][_0x609d("0x10c")](_0x609d("0x54f"),this.over_),this.over_=null)}else document[_0x609d("0x8b")][_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x54e"),this[_0x609d("0x54c")]&&this[_0x609d("0x356")][_0x609d("0x10c")]("onLeave",this.over_),this.over_=null;for(var n=[],_=0;_<this[_0x609d("0x531")][_0x609d("0x21")];_++){var g=this[_0x609d("0x531")][_];this[_0x609d("0x547")](g)&&n[_0x609d("0x1a")](g)}var a=this[_0x609d("0x52e")].intersectObjects(n);a[_0x609d("0x21")]>0&&(this[_0x609d("0x550")]=a,this[_0x609d("0x54b")]=!0)}}},{key:_0x609d("0x537"),value:function(x){var d=this;this[_0x609d("0x532")]&&(this[_0x609d("0x15c")].start(),this[_0x609d("0x551")]=!0,this[_0x609d("0x530")]=this[_0x609d("0x552")](x),this[_0x609d("0x553")]=this[_0x609d("0x530")][_0x609d("0x1a8")](),this[_0x609d("0x533")][_0x609d("0x554")]=map[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x276")](),this[_0x609d("0x533")].cameraFrom=map[_0x609d("0x14c")][_0x609d("0x186")][_0x609d("0x1a8")](),this[_0x609d("0xc6")](),x[_0x609d("0x310")](),x.stopPropagation(),setTimeout(function(){1==d[_0x609d("0x551")]&&(d[_0x609d("0xc6")](!1),d[_0x609d("0x10c")](_0x609d("0x1e4"),{intersects:d.objectIntersects_,mouse:d[_0x609d("0x553")]}))},800))}},{key:_0x609d("0x53b"),value:function(x){this.enabled_&&(this.mouse_=this[_0x609d("0x552")](x),this[_0x609d("0x553")]=this[_0x609d("0x552")](x),this[_0x609d("0x555")]=this[_0x609d("0x15c")][_0x609d("0x233")](),this[_0x609d("0x356")][_0x609d("0x132")].editMode&&this.update(!0),x[_0x609d("0x310")]())}},{key:_0x609d("0x53a"),value:function(x){var d=!1,_=!1;if(this[_0x609d("0x551")]=!1,this[_0x609d("0x15c")][_0x609d("0x367")](),this[_0x609d("0x533")][_0x609d("0x556")]=map[_0x609d("0x13a")][_0x609d("0x1b9")][_0x609d("0x276")](),this[_0x609d("0x533")][_0x609d("0x557")]=map[_0x609d("0x14c")][_0x609d("0x186")][_0x609d("0x1a8")](),(Math[_0x609d("0x124")](this[_0x609d("0x533")][_0x609d("0x558")].x-this[_0x609d("0x533")][_0x609d("0x557")].x)>.8||Math[_0x609d("0x124")](this[_0x609d("0x533")][_0x609d("0x558")].z-this[_0x609d("0x533")][_0x609d("0x557")].z)>.8)&&(_=!0),this[_0x609d("0x533")][_0x609d("0x559")]=this[_0x609d("0x533")][_0x609d("0x554")]-this[_0x609d("0x533")].levelTo,0!==this[_0x609d("0x533")][_0x609d("0x559")]&&(d=!0),this[_0x609d("0x532")]){if(x[_0x609d("0x30d")]||(this[_0x609d("0x553")]=this[_0x609d("0x552")](x)),(0==x[_0x609d("0x451")]||x[_0x609d("0x30d")])&&this[_0x609d("0x553")][_0x609d("0x50a")](this.mouse_)<.01){if(this.clickCompass())return;this.isPickedObject||this[_0x609d("0x54b")]?(!d&&!_&&this.isPickedObject&&this[_0x609d("0x10c")]("pickerObjects_",{intersects:this.objectIntersects_,mouse:this.curMouse}),!d&&!_&&this[_0x609d("0x54b")]&&this[_0x609d("0x10c")]("pickerModels_",{intersects:this[_0x609d("0x550")],
mouse:this[_0x609d("0x553")]})):!d&&!_&&this[_0x609d("0x10c")](_0x609d("0x1e8"),this[_0x609d("0x553")])}x[_0x609d("0x310")]()}}},{key:_0x609d("0x552"),value:function(x){var d=this[_0x609d("0x4a9")][_0x609d("0x45a")](),_=new(THREE[_0x609d("0x50c")]);return _.x=((x[_0x609d("0x30d")]?x[_0x609d("0x30d")][0].clientX:x.clientX)-d[_0x609d("0x281")])/d[_0x609d("0x2bb")]*2-1,_.y=2*-(((x[_0x609d("0x30d")]?x[_0x609d("0x30d")][0].clientY:x[_0x609d("0x55a")])-d[_0x609d("0x283")])/d[_0x609d("0x185")])+1,_}},{key:_0x609d("0xbe"),get:function(){return this[_0x609d("0x532")]},set:function(x){this[_0x609d("0x532")]=x}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function e(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object.create(d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}function t(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function x(d,_,e){t(this,x),this[_0x609d("0x299")]=_,this[_0x609d("0x299")][_0x609d("0x1fb")]=d;var i,n=_[_0x609d("0x378")];_[_0x609d("0x209")]&&""!=_[_0x609d("0x209")]&&(n=_[_0x609d("0x209")]),esmap[_0x609d("0x55b")][_0x609d("0x1d7")]=esmap[_0x609d("0x55b")][_0x609d("0x1d7")]||{},i=esmap[_0x609d("0x55b")]._mats[d+"_"+n],i||(i=e.getPoiMaterialByType(n),esmap[_0x609d("0x55b")][_0x609d("0x1d7")][d+"_"+n]=i),THREE[_0x609d("0x40c")][_0x609d("0x15")](this,i),this[_0x609d("0x27c")][_0x609d("0x100")](10,10,10),this[_0x609d("0x4ad")]=parseFloat(_.w),this[_0x609d("0x35d")]=parseFloat(_.h)};d[_0x609d("0x92")]=i;var n=function(x){function d(){var x,e,i,n;t(this,d);for(var g=arguments[_0x609d("0x21")],a=Array(g),r=0;r<g;r++)a[r]=arguments[r];return e=i=_(this,(x=d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")][_0x609d("0x36")](x,[this].concat(a))),i[_0x609d("0x3ad")]=esmap.ESMapLabel[_0x609d("0x1b")].updateScreenSize,i[_0x609d("0x1de")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x1de")],i[_0x609d("0x36c")]=esmap[_0x609d("0x366")].prototype[_0x609d("0x36c")],i[_0x609d("0x375")]=esmap.ESMapLabel[_0x609d("0x1b")][_0x609d("0x375")],n=e,_(i,n)}return e(d,x),d}(THREE[_0x609d("0x40c")]);i.prototype=new n,esmap[_0x609d("0x197")][_0x609d("0x55c")](i[_0x609d("0x1b")])},function(x,d){function _(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function e(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x.prototype=Object[_0x609d("0xdc")](d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object.setPrototypeOf(x,d):x[_0x609d("0x350")]=d)}function t(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function x(d,_,e){t(this,x),this[_0x609d("0x3a4")]=esmap[_0x609d("0x55d")][_0x609d("0x3a4")],this[_0x609d("0x299")]=d,this.visible=!1;var i=new(THREE[_0x609d("0x40d")]);THREE.Sprite[_0x609d("0x15")](this,i);var n=this;esmap[_0x609d("0x197")].loadTexture(_,function(x){i[_0x609d("0xbc")]=x,n[_0x609d("0x17e")]=!0;var _={};d[_0x609d("0x39d")]instanceof Object?(_.w=d[_0x609d("0x39d")].w,_.h=d[_0x609d("0x39d")].h):_.w=_.h=d[_0x609d("0x39d")];var t=_.w/32*10,g=_.h/32*10;n.renderOrder=esmap[_0x609d("0x3d4")][_0x609d("0x380")],n.scale[_0x609d("0x100")](t,g,1),n[_0x609d("0x4ad")]=_.w,n[_0x609d("0x35d")]=_.h,e&&e(x)})};d[_0x609d("0x92")]=i;var n=function(x){function d(){var x,e,i,n;t(this,d);for(var g=arguments[_0x609d("0x21")],a=Array(g),r=0;r<g;r++)a[r]=arguments[r];return e=i=_(this,(x=d[_0x609d("0x350")]||Object[_0x609d("0x351")](d))[_0x609d("0x15")].apply(x,[this].concat(a))),i[_0x609d("0x3ad")]=esmap[_0x609d("0x366")].prototype[_0x609d("0x3ad")],i[_0x609d("0x1de")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x1de")],i[_0x609d("0x399")]=esmap.ESMapLabel[_0x609d("0x1b")][_0x609d("0x399")],i[_0x609d("0x336")]=esmap[_0x609d("0x366")].prototype[_0x609d("0x336")],i.fade=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x39b")],i[_0x609d("0x36c")]=esmap.ESMapLabel[_0x609d("0x1b")][_0x609d("0x36c")],i[_0x609d("0x375")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x375")],i[_0x609d("0x368")]=esmap.ESMapLabel.prototype[_0x609d("0x368")],n=e,_(i,n)}return e(d,x),d}(THREE[_0x609d("0x40c")]);i.prototype=new n,esmap.ESMapUtil[_0x609d("0x55c")](i[_0x609d("0x1b")])},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var i=function(x){function d(x,t,i,n){_(this,d);var g=new(THREE[_0x609d("0x1a6")])({transparent:!0}),a=new(THREE[_0x609d("0x413")])(1,1,1,1),r=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d)).call(this,a,g));r[_0x609d("0x3a4")]=esmap[_0x609d("0x55d")][_0x609d("0x3a4")],r[_0x609d("0x3ad")]=esmap[_0x609d("0x366")].prototype[_0x609d("0x3ad")],r[_0x609d("0x1de")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x1de")],r[_0x609d("0x399")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x399")],r.moveTo=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x336")],r.fade=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x39b")],r[_0x609d("0x299")]=t,r.visible=!1;var A=r;return esmap[_0x609d("0x197")][_0x609d("0x55e")](i,function(x){g.map=x,g[_0x609d("0x55f")]=!0,g[_0x609d("0x3a3")]=!1,g[_0x609d("0x3d1")]=!1,g[_0x609d("0x3e6")]=THREE.DoubleSide,A.renderOrder=esmap.ESRenderOrder[_0x609d("0x560")];var d=t[_0x609d("0x39d")]/32;A[_0x609d("0x27c")][_0x609d("0x100")](10*d,10*d,10*d*5),A[_0x609d("0x227")].set(-Math.PI/2,0,Math.PI,_0x609d("0x3a0")),A.width_=32*d,A[_0x609d("0x35d")]=32*d,A.visible=!0,n&&n(x)}),r}return t(d,x),d}(THREE[_0x609d("0x3d2")]);d[_0x609d("0x92")]=i,esmap[_0x609d("0x197")][_0x609d("0x55c")](i[_0x609d("0x1b")])},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||"object"!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if("function"!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x.__proto__=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=new(THREE[_0x609d("0x225")])(1,1,1,1),n=function(x){function d(x,t,n,g){_(this,d);var a=new THREE.MeshLambertMaterial({transparent:!0}),r={fontsize:2*n[_0x609d("0x462")],borderThickness:.1,color:esmap[_0x609d("0x197")][_0x609d("0x4f4")](n[_0x609d("0x463")]||_0x609d("0x464")),borderColor:esmap[_0x609d("0x197")][_0x609d("0x4f4")](n[_0x609d("0x465")]||_0x609d("0x441")),imagealign:n[_0x609d("0x4e2")]||_0x609d("0x281"),imagesize:n[_0x609d("0x29e")],imagespace:n.imagespace,textspace:n[_0x609d("0x4dc")]||4,pivottype:n[_0x609d("0x4e8")]||_0x609d("0x27d")},A=(n[_0x609d("0x462")],e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d)).call(this,i,a)));A[_0x609d("0x3a4")]=esmap[_0x609d("0x55d")].setUrl,A[_0x609d("0x3ad")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x3ad")],A[_0x609d("0x1de")]=esmap.ESMapLabel.prototype.flash,A[_0x609d("0x399")]=esmap[_0x609d("0x366")][_0x609d("0x1b")].alwaysShow,A[_0x609d("0x336")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x336")],A[_0x609d("0x39b")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x39b")];var I=esmap[_0x609d("0x366")][_0x609d("0x1b")].makeTextSprite_[_0x609d("0x15")](A,t[_0x609d("0x43")],r),C=I[_0x609d("0x209")][_0x609d("0x2bb")],o=I[_0x609d("0x209")][_0x609d("0x185")];I[_0x609d("0x198")]=!0,A.material.map=I,A[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x198")]=!0,A[_0x609d("0x194")][_0x609d("0x55f")]=!0,A[_0x609d("0x194")][_0x609d("0x198")]=!0,A[_0x609d("0x193")]=new(THREE[_0x609d("0x225")])(C,o,1,1),A.data_=t,A[_0x609d("0x17e")]=!1;var s=A;return s[_0x609d("0x227")][_0x609d("0x100")](-Math.PI/2,0,Math.PI,_0x609d("0x3a0")),s[_0x609d("0x561")](THREE[_0x609d("0x1bb")].degToRad(Number(t[_0x609d("0x35b")]))),s[_0x609d("0x3d3")]=esmap.ESRenderOrder[_0x609d("0x560")],s.scale.set(.04,.04,1),g&&g(),A}return t(d,x),d}(THREE[_0x609d("0x3d2")]);d[_0x609d("0x92")]=n,esmap[_0x609d("0x197")][_0x609d("0x55c")](n[_0x609d("0x1b")])},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x203")]=null,this[_0x609d("0x1b2")]=0,this[_0x609d("0x1b4")]=0,this[_0x609d("0x20b")]={},this[_0x609d("0x562")]=0,this.o3dScene_=null,this[_0x609d("0x245")]={},this[_0x609d("0x563")]={},this[_0x609d("0x17b")]=null,this.box3_=null,this[_0x609d("0x26e")]=0,this[_0x609d("0x26f")]=0,this[_0x609d("0x564")]=0,this[_0x609d("0x270")]=0,this.asyncWaitTime=0,this[_0x609d("0x356")]=d,this[_0x609d("0x565")]=e,this.loadqueue=new(esmap[_0x609d("0x566")])(d);var e=esmap.ESMapUtil[_0x609d("0x347")]();this[_0x609d("0x339")]=e[_0x609d("0x339")]}return e(x,[{key:_0x609d("0x175"),value:function(){function x(d){if(null!==d){d[_0x609d("0x180")]&&d[_0x609d("0x180")][_0x609d("0x182")]&&(d[_0x609d("0x180")][_0x609d("0x182")]=void 0,d.datas_=void 0);for(var _=0;_<d[_0x609d("0x19")][_0x609d("0x21")];_++)x(d[_0x609d("0x19")][_]);d[_0x609d("0x193")]&&(d[_0x609d("0x193")][_0x609d("0x24e")](),d[_0x609d("0x193")]=void 0),d[_0x609d("0x194")]&&(d[_0x609d("0x194")][_0x609d("0x195")]?d.material[_0x609d("0x195")][_0x609d("0xc1")](function(x){x.map&&(x[_0x609d("0xbc")][_0x609d("0x24e")](),x.map=void 0),x[_0x609d("0x24e")](),x=void 0}):(d[_0x609d("0x194")][_0x609d("0x24e")](),d.material=void 0))}d=void 0}x(this[_0x609d("0x567")])}},{key:_0x609d("0x1ed"),value:function(x,d){var _=x[_0x609d("0x1ee")]<32503514?x.maptime:x[_0x609d("0x1ee")]/1e3;if((new Date)[_0x609d("0x1ef")]()>1e6*_)return void console.info(esmap[_0x609d("0x1f1")][_0x609d("0x1f2")]);var e=esmap.ESMapUtil[_0x609d("0x568")](x.token+x[_0x609d("0x569")]+x[_0x609d("0x56a")]+(x.o1||0)+_0x609d("0x56b")+(x.o2||0));e!=x[_0x609d("0x56c")]&&x[_0x609d("0x56c")]!=x[_0x609d("0x52a")]&&_0x609d("0x56d")!=x[_0x609d("0x52a")]||(this[_0x609d("0x203")]=x,this[_0x609d("0x562")]=d,this.sceneX_=this[_0x609d("0x203")][_0x609d("0x56e")],this[_0x609d("0x1b4")]=this[_0x609d("0x203")][_0x609d("0x56f")],this[_0x609d("0x567")]=new(THREE[_0x609d("0x352")]),this[_0x609d("0x245")]={},this.userFloors_={},this.lineManager=new(THREE[_0x609d("0x352")]),this.o3dScene_[_0x609d("0x82")](this[_0x609d("0x17b")]),this[_0x609d("0x239")]=esmap[_0x609d("0x18e")][_0x609d("0x570")](this[_0x609d("0x203")]),this[_0x609d("0x26e")]=this[_0x609d("0x203")][_0x609d("0x220")],this[_0x609d("0x564")]=this[_0x609d("0x203")][_0x609d("0x21f")],this[_0x609d("0x26f")]=this[_0x609d("0x203")][_0x609d("0x222")],this[_0x609d("0x270")]=this[_0x609d("0x203")].maxY)}},{key:_0x609d("0x571"),value:function(){return esmap[_0x609d("0x18e")].calcInitCamera(this[_0x609d("0x239")])}},{key:_0x609d("0x174"),value:function(){return this[_0x609d("0x567")]}},{key:_0x609d("0x20d"),value:function(x,d){var _=this[_0x609d("0x20b")][x];_[_0x609d("0x572")]=d;var e=new(esmap[_0x609d("0x298")])(this,_),t=e[_0x609d("0x182")];t.visible=!1,t[_0x609d("0x211")]=_,t[_0x609d("0x186")].set(0,_[_0x609d("0x23b")],0),this[_0x609d("0x245")][x]=t,this[_0x609d("0x567")][_0x609d("0x82")](t)}},{key:_0x609d("0x573"),value:function(x,d){}},{key:_0x609d("0x574"),value:function(x,d){}},{key:"getO3dFloor",value:function(x){return this[_0x609d("0x245")][x]}},{key:"forEachFloor",value:function(x,d,_,e){var t=this[_0x609d("0x215")](x);if(t){var i=this[_0x609d("0x20b")][x][_0x609d("0x572")],n=this;if(this[_0x609d("0x356")].mapService[_0x609d("0x1e5")][_0x609d("0x3ea")]>esmap[_0x609d("0x575")]||this[_0x609d("0x356")][_0x609d("0x144")][_0x609d("0x1e5")].version<esmap[_0x609d("0x576")])return;n[_0x609d("0x577")](i,t,x).then(function(){_()})[_0x609d("0x578")](n[_0x609d("0x579")][_0x609d("0xa2")](n,i,t,x))[_0x609d("0x578")](n[_0x609d("0x57a")][_0x609d("0xa2")](n,i,t,x)).then(n.asyncBuildPolygons.bind(n,i,t,x))[_0x609d("0x578")](n[_0x609d("0x57b")][_0x609d("0xa2")](n,i,t,x))[_0x609d("0x578")](function(){setTimeout(function(){var _=n[_0x609d("0x57c")][_0x609d("0xa2")](n,i,t,x,d);_()[_0x609d("0x578")](function(){n.loadqueue.start(),n[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x520")]&&esmap[_0x609d("0x197")][_0x609d("0x1d0")](n.map_,x,_0x609d("0x57d")),n[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x1d0")]&&esmap[_0x609d("0x197")][_0x609d("0x1d0")](n[_0x609d("0x356")],x,_0x609d("0x361")),n[_0x609d("0x356")][_0x609d("0x132")].mergeModels&&esmap[_0x609d("0x197")][_0x609d("0x1d0")](n[_0x609d("0x356")],x,_0x609d("0x493")),n[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x51e")]&&n[_0x609d("0x356")][_0x609d("0x132")].callbackByFloor(x),n.map_.emit(_0x609d("0x2a8"),x),e&&e()})},50)})}}},{key:"asyncBuidExtents",value:function(x,d,_){var e=this,t=new(THREE[_0x609d("0x57e")]),i=x[_0x609d("0x57f")],n=e[_0x609d("0x20b")][_];return n[_0x609d("0x580")],setTimeout(function(){for(var x in i){var g=i[x],a=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")].FLOOR_BASE);d[_0x609d("0x82")](a[_0x609d("0x182")]);var r=g[_0x609d("0x581")],A=new esmap.ESLayer(esmap.ESLayerType.BASE_LINE,g);d[_0x609d("0x82")](A[_0x609d("0x182")]);for(var I in r){var C=r[I],o=e.mapTheme_.floorStyleBase[_];void 0==o&&(o=e.mapTheme_.floorStyleBase[0]);var s=1,c=e.mapTheme_[_0x609d("0x296")],u=e[_0x609d("0x565")].floorOpacity_,f=null,l=null,h=null;o&&(o[_0x609d("0x185")]&&(s=o[_0x609d("0x185")]),(o[_0x609d("0x19b")]||0===o[_0x609d("0x19b")])&&(c=o[_0x609d("0x19b")]),(o[_0x609d("0x1c8")]||0===o.opacity)&&(u=o[_0x609d("0x1c8")]),o.image&&(f=o[_0x609d("0x209")],l=o[_0x609d("0x29e")],h=e[_0x609d("0x356")].options[_0x609d("0x272")]+"/"+e[_0x609d("0x565")].themeName+"/")),n[_0x609d("0x209")]&&(f=n[_0x609d("0x209")],l=n[_0x609d("0x29e")],h=e[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x271")]+"/"+e[_0x609d("0x356")][_0x609d("0x172")]+_0x609d("0x582"));var b=e[_0x609d("0x583")](C,s,1);if(b){var p=new(THREE[_0x609d("0x3d2")])(b.geometry);p.rotation[_0x609d("0x100")](Math.PI/2,0,0,_0x609d("0x3a0")),p[_0x609d("0x186")][_0x609d("0x4d0")](esmap[_0x609d("0x584")][_0x609d("0x585")]),p[_0x609d("0x180")]={floor:_,nodeType:esmap[_0x609d("0x1e9")].FLOOR},a[_0x609d("0x182")][_0x609d("0x82")](p);var v=new(THREE[_0x609d("0x1a6")])({color:c,transparent:!0,opacity:u,receiveShadow:!0});if(p[_0x609d("0x194")]=v,f&&f[_0x609d("0x21")]>1){var m=l[_0x609d("0x240")](","),y=[Number(m[0]),Number(m[1])],w=new(THREE[_0x609d("0x1a7")])([v,v[_0x609d("0x1a8")]()]),E=w[_0x609d("0x195")][0],k=e[_0x609d("0x565")][_0x609d("0x291")][f[_0x609d("0x117")](_0x609d("0x206"),"")][_0x609d("0x1d2")][_0x609d("0xbc")];k[_0x609d("0x29b")]=k[_0x609d("0x29c")]=THREE.RepeatWrapping;var S=(e[_0x609d("0x356")].maxX-e.map_[_0x609d("0x220")])/(e.map_.maxY-e[_0x609d("0x356")][_0x609d("0x222")]);k[_0x609d("0x29f")][_0x609d("0x100")](y[0]*S,y[1]),E[_0x609d("0xbc")]=k,E[_0x609d("0x19b")][_0x609d("0x100")](16777215),k[_0x609d("0x198")]=!0,E[_0x609d("0x198")]=!0,p.material=w}e[_0x609d("0x356")][_0x609d("0xc2")][_0x609d("0x586")](p)}}}e[_0x609d("0x356")].emit(_0x609d("0x587"),_,_0x609d("0x588")),t.resolve(),e[_0x609d("0x356")][_0x609d("0x235")]()},e[_0x609d("0x589")]),t}},{key:_0x609d("0x57c"),value:function(x,d,_,e){var t=this,i=null,n=new(THREE[_0x609d("0x57e")]);return setTimeout(function(){for(var e in x[_0x609d("0x58a")]){var g=x[_0x609d("0x58a")][e],a=null,r=g[_0x609d("0x58b")],A=new esmap.ESLayer(esmap[_0x609d("0x168")].MODEL,g),I=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x58c")],g);d.add(I[_0x609d("0x182")]),d.add(A[_0x609d("0x182")]);var C=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x58d")]);C[_0x609d("0x43")]=_0x609d("0x58b"),d.add(C.o3d_);var o=new(esmap[_0x609d("0x167")])(esmap.ESLayerType[_0x609d("0x412")],{});d.add(o[_0x609d("0x182")]);for(var s=(r.length,t[_0x609d("0x356")].sl()),c=0;c<r[_0x609d("0x21")]&&35988889==s;c++){var u=r[c],f=5;if(u[_0x609d("0x1c")](_0x609d("0x58e"))&&null!=u[_0x609d("0x58e")]&&u.RoomHigh>0&&(f=u[_0x609d("0x58e")]),u[_0x609d("0x1c")](_0x609d("0x58f"))&&null!=u.RoomLogo&&u[_0x609d("0x58f")][_0x609d("0x21")]>1)if(u.modelImage){var l=new esmap.ESModelImage({style:u[_0x609d("0x2a7")],sx:t[_0x609d("0x1b2")],sz:t[_0x609d("0x1b4")],id:u[_0x609d("0x377")]});o[_0x609d("0x82")](l)}else u[_0x609d("0x590")];if(u[_0x609d("0x591")]&&u.RModel[_0x609d("0x21")]>2&&_0x609d("0x8")!=u[_0x609d("0x591")]){if(!t[_0x609d("0x356")].options[_0x609d("0x526")])continue;var h=t[_0x609d("0x356")].mapScene,b=new(THREE[_0x609d("0x1b1")])(1,1.5,1);if(u[_0x609d("0x27c")]){var p=u[_0x609d("0x27c")][_0x609d("0x240")](",");b=new(THREE[_0x609d("0x1b1")])(parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2]))}if(u[_0x609d("0x36b")])var v=Math.PI/180,m=u[_0x609d("0x36b")][_0x609d("0x240")](","),y=new(THREE[_0x609d("0x4c3")])(parseFloat(m[0])*v,parseFloat(m[1])*v,parseFloat(m[2])*v);var w=new(THREE[_0x609d("0x1b1")])(-u[_0x609d("0x592")]-h[_0x609d("0x1b2")],.5,u.CenY-h[_0x609d("0x1b4")]);if(u[_0x609d("0x1b3")]){var E=u[_0x609d("0x1b3")][_0x609d("0x240")](",");w.x+=parseFloat(E[0]),w.y+=parseFloat(E[1]),w.z+=parseFloat(E[2])}var k=t[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x271")]+"/"+t.map_.sceneId_,S=k+_0x609d("0x593")+u[_0x609d("0x591")]+_0x609d("0x594");t[_0x609d("0x251")][_0x609d("0x214")]({name:u[_0x609d("0x591")],url:S,scale:b,rotate:y,position:w,parent:C[_0x609d("0x182")],id:u.oid,bclick:u[_0x609d("0x595")],fnum:_})}if(999!=u[_0x609d("0x2a0")]||0!=t[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x525")]){var T=t[_0x609d("0x583")](u,f,u.top);if(T){var R=t[_0x609d("0x565")].getModelTheme(u),O=t[_0x609d("0x565")][_0x609d("0x596")](u,u[_0x609d("0x597")]),M=new(esmap[_0x609d("0x598")])(T[_0x609d("0x193")],t[_0x609d("0x565")]);if(M[_0x609d("0x227")][_0x609d("0x100")](Math.PI/2,0,0,_0x609d("0x3a0")),M[_0x609d("0x186")][_0x609d("0x4d0")](f),u[_0x609d("0x1b3")]&&!u[_0x609d("0x591")]){var E=u[_0x609d("0x1b3")][_0x609d("0x240")](",");E[_0x609d("0x21")]>=2&&(M[_0x609d("0x186")].y+=parseFloat(E[1]))}M[_0x609d("0x194")]=O,A[_0x609d("0x182")][_0x609d("0x82")](M),new(esmap[_0x609d("0x599")])(u,M,t),t[_0x609d("0x356")][_0x609d("0xc2")][_0x609d("0x214")](M);var L=T[_0x609d("0x59a")][_0x609d("0x59b")]();L&&L[_0x609d("0x420")][_0x609d("0x21")]>0&&L.vertices[_0x609d("0x1a")](L[_0x609d("0x420")][0]);for(var P=[],j=L[_0x609d("0x420")][_0x609d("0x21")],e=0;e<j;e++)0==e||e==j-1?P[_0x609d("0x1a")](L.vertices[e]):P[_0x609d("0x1a")](L[_0x609d("0x420")][e],L[_0x609d("0x420")][e]);L[_0x609d("0x420")]=P;var N={color:R[_0x609d("0x59c")],linewidth:R[_0x609d("0x59d")]};i&&a==u[_0x609d("0x2a0")]||(a=u[_0x609d("0x2a0")],i=new(THREE[_0x609d("0x59e")])(N));var H=new THREE.LineSegments(L,i);if(H[_0x609d("0x59f")]=!1,H[_0x609d("0x180")]={nodeType:esmap[_0x609d("0x1e9")][_0x609d("0x293")],typeID:u.RoomStyle},H[_0x609d("0x227")][_0x609d("0x100")](Math.PI/2,0,0,_0x609d("0x3a0")),H[_0x609d("0x186")][_0x609d("0x4d0")](f+.002),u.offset){var E=u[_0x609d("0x1b3")].split(",");H[_0x609d("0x186")].x+=parseFloat(E[0]),H.position.y+=parseFloat(E[1]),H[_0x609d("0x186")].z+=parseFloat(E[2])}t.map_.options[_0x609d("0x52c")]&&I[_0x609d("0x182")].add(H)}}}}t[_0x609d("0x356")].emit(_0x609d("0x587"),_,_0x609d("0x361")),n[_0x609d("0x5a0")]()},t.asyncWaitTime),n}},{key:_0x609d("0x579"),value:function(x,d,_){var e=this,t=new(THREE[_0x609d("0x57e")]);if(e.map_[_0x609d("0x132")][_0x609d("0x527")])return e[_0x609d("0x5a1")]=null,setTimeout(function(){for(var i in x[_0x609d("0x5a2")]){var n=x[_0x609d("0x5a2")][i],g=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16b")]);d[_0x609d("0x82")](g[_0x609d("0x182")]),g[_0x609d("0x182")][_0x609d("0x3a5")]=new(esmap[_0x609d("0x3a6")]);var a=n.pois;for(var r in a){var A=a[r],I=new(esmap[_0x609d("0x55b")])(_,A,e[_0x609d("0x565")]);new(esmap[_0x609d("0x5a3")])(A,I,e),g[_0x609d("0x182")][_0x609d("0x82")](I);var C=A.Height||3;I[_0x609d("0x186")].set(A.X-e[_0x609d("0x1b2")],C,A.Y-e[_0x609d("0x1b4")]),I[_0x609d("0x3a1")]=C,e[_0x609d("0x356")][_0x609d("0xc2")][_0x609d("0x542")](I)}}e[_0x609d("0x356")].emit(_0x609d("0x587"),_,_0x609d("0x5a4")),t[_0x609d("0x5a0")]()},e[_0x609d("0x589")]),t}},{key:_0x609d("0x57a"),value:function(x,d,_){var e=this,t=new THREE.Promise;if(e.map_[_0x609d("0x132")][_0x609d("0x528")])return setTimeout(function(){for(var i in x.labellayers){var n=x[_0x609d("0x5a5")][i],g=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16a")]);d[_0x609d("0x82")](g[_0x609d("0x182")]),g[_0x609d("0x182")].boxCollision_=new(esmap[_0x609d("0x3a6")]);var a=n.labels;for(var r in a){var A=a[r];if(""!=A[_0x609d("0x43")]){var I=A[_0x609d("0x5a6")]||2.5,C=new(esmap[_0x609d("0x366")])(_,A,e[_0x609d("0x565")][_0x609d("0x2a4")]);new(esmap[_0x609d("0x5a7")])(A,C,e),C[_0x609d("0x17e")]=!1,g[_0x609d("0x182")][_0x609d("0x82")](C),C[_0x609d("0x186")][_0x609d("0x100")](A.X-e[_0x609d("0x1b2")],I,A.Y-e[_0x609d("0x1b4")]),e[_0x609d("0x356")][_0x609d("0xc2")][_0x609d("0x544")](C)}}}e[_0x609d("0x356")][_0x609d("0x10c")](_0x609d("0x587"),_,_0x609d("0x1df")),t[_0x609d("0x5a0")]()},e[_0x609d("0x589")]),t}},{key:_0x609d("0x5a8"),value:function(x,d,_){var e=this,t=null,i=new THREE.Promise,n=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x412")],{});return d[_0x609d("0x82")](n[_0x609d("0x182")]),setTimeout(function(){for(var g in x[_0x609d("0x5a9")]){var a=x[_0x609d("0x5a9")][g],r=null,A=a.modelbases,I=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x1a3")],a),C=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")].MODEL_LINE,a);d[_0x609d("0x82")](C[_0x609d("0x182")]),d[_0x609d("0x82")](I[_0x609d("0x182")]);for(var o=0;o<A.length;o++){var s=A[o],c=5,u=e[_0x609d("0x565")].getModelTheme(s);if(s[_0x609d("0x1c")]("RoomHigh")&&null!=s[_0x609d("0x58e")]&&s[_0x609d("0x58e")]>0&&(c=s[_0x609d("0x58e")]),s[_0x609d("0x1c")](_0x609d("0x58f"))&&null!=s.RoomLogo&&s[_0x609d("0x58f")][_0x609d("0x21")]>1)if(s[_0x609d("0x2a7")]){var f=new(esmap[_0x609d("0x5aa")])({style:s[_0x609d("0x2a7")],sx:i[_0x609d("0x1b2")],sz:i[_0x609d("0x1b4")],id:s[_0x609d("0x377")]});n[_0x609d("0x82")](f)}else s[_0x609d("0x590")];var l=e[_0x609d("0x583")](s,c,s[_0x609d("0x283")]);if(l){var u=e[_0x609d("0x565")][_0x609d("0x5ab")](s),h=e[_0x609d("0x565")][_0x609d("0x596")](s,s[_0x609d("0x597")]),b=new esmap.ESModelMesh(l[_0x609d("0x193")],e[_0x609d("0x565")]);if(b.rotation[_0x609d("0x100")](Math.PI/2,0,0,_0x609d("0x3a0")),b[_0x609d("0x186")][_0x609d("0x4d0")](c),s.offset){var p=s[_0x609d("0x1b3")][_0x609d("0x240")](",");p[_0x609d("0x21")]>=2&&(b[_0x609d("0x186")].y+=parseFloat(p[1]))}b[_0x609d("0x194")]=h,new(esmap[_0x609d("0x599")])(s,b,e),I[_0x609d("0x182")][_0x609d("0x82")](b),e.map_[_0x609d("0x132")].showBase&&e[_0x609d("0x356")][_0x609d("0xc2")][_0x609d("0x53c")](b);var v=l[_0x609d("0x59a")].createPointsGeometry();v&&v[_0x609d("0x420")][_0x609d("0x21")]>0&&v[_0x609d("0x420")].push(v[_0x609d("0x420")][0]);for(var m=[],y=v[_0x609d("0x420")][_0x609d("0x21")],g=0;g<y;g++)0==g||g==y-1?m[_0x609d("0x1a")](v[_0x609d("0x420")][g]):m[_0x609d("0x1a")](v[_0x609d("0x420")][g],v[_0x609d("0x420")][g]);v[_0x609d("0x420")]=m;var w={color:u[_0x609d("0x59c")],linewidth:u.strokeWidth};t&&r==s[_0x609d("0x2a0")]||(r=s[_0x609d("0x2a0")],t=new(THREE[_0x609d("0x59e")])(w));var E=new(THREE[_0x609d("0x5ac")])(v,t);if(E[_0x609d("0x59f")]=!1,E[_0x609d("0x180")]={nodeType:esmap[_0x609d("0x1e9")][_0x609d("0x293")],typeID:s.RoomStyle},E[_0x609d("0x227")][_0x609d("0x100")](Math.PI/2,0,0,_0x609d("0x3a0")),E[_0x609d("0x186")][_0x609d("0x4d0")](c+.002),s[_0x609d("0x1b3")]){var p=s[_0x609d("0x1b3")][_0x609d("0x240")](",");E[_0x609d("0x186")].x+=parseFloat(p[0]),E.position.y+=parseFloat(p[1]),E[_0x609d("0x186")].z+=parseFloat(p[2])}e[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x52c")]&&C[_0x609d("0x182")].add(E)}}}e[_0x609d("0x356")][_0x609d("0x10c")](_0x609d("0x587"),_,_0x609d("0x5ad")),i[_0x609d("0x5a0")]()},e[_0x609d("0x589")]),i}},{key:_0x609d("0x57b"),value:function(x,d,_){var e=this,t=e.floors_[_][_0x609d("0x580")]-e[_0x609d("0x356")].options[_0x609d("0x5ae")];return new(THREE[_0x609d("0x57e")]),x[_0x609d("0x5af")][_0x609d("0xc1")](function(x){var _=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x58d")]);_[_0x609d("0x43")]=_0x609d("0x5b0"),d[_0x609d("0x82")](_[_0x609d("0x182")]);var i=x;for(var n in i[_0x609d("0x5b0")])if(e[_0x609d("0x356")][_0x609d("0x132")].loadModel3D){var g=i[_0x609d("0x5b0")][n];if(g.LM&&g.LM[_0x609d("0x21")]>2&&_0x609d("0x8")!=g.LM){var a=e[_0x609d("0x356")][_0x609d("0x141")],r=g.LS[_0x609d("0x240")](",");if(r.length>2)var A=new(THREE[_0x609d("0x1b1")])(parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2]));if(g.LR)var I=Math.PI/180,C=g.LR[_0x609d("0x240")](","),o=new(THREE[_0x609d("0x4c3")])(parseFloat(C[0])*I,parseFloat(C[1])*I,parseFloat(C[2])*I);var s=g.LO[_0x609d("0x240")](",");if(s[_0x609d("0x21")]>2)var c=new(THREE[_0x609d("0x1b1")])(-g.X1-a[_0x609d("0x1b2")]+parseFloat(s[0]),t/2-parseFloat(s[1]),g.Y1-a.sceneZ_+parseFloat(s[2]));else var c=new(THREE[_0x609d("0x1b1")])(-g.X1-a[_0x609d("0x1b2")],t/2,g.Y1-a.sceneZ_);var u=e[_0x609d("0x356")][_0x609d("0x132")].mapDataSrc+"/"+e[_0x609d("0x356")][_0x609d("0x172")],f=u+_0x609d("0x593")+g.LM+_0x609d("0x594");e[_0x609d("0x251")].addModel({name:g.LM,url:f,scale:A,rotate:o,position:c,parent:_[_0x609d("0x182")],id:g[_0x609d("0x418")]})}}})}},{key:_0x609d("0x5b1"),value:function(x,d){var _=this[_0x609d("0x356")][_0x609d("0x163")],e=d[_0x609d("0x3a5")],t=d.datas_[_0x609d("0x3a7")];e.clear();for(var i in d[_0x609d("0x19")]){var n=d.children[i];if(n[_0x609d("0x376")]){var g=this[_0x609d("0x356")][_0x609d("0x25f")](n),a=n[_0x609d("0x4ad")]/2,r=n[_0x609d("0x35d")]/2;t&&e[_0x609d("0x1a")](n,{x:g.x-a/2,y:g.y-r/2,w:a,h:r})?n.visible=!_:(n[_0x609d("0x17e")]=!0,n[_0x609d("0x3ad")](x))}}}},{key:_0x609d("0x232"),value:function(x){for(var d in this[_0x609d("0x245")]){var _=this[_0x609d("0x245")][d];if(_[_0x609d("0x17e")])for(var e=0;e<_[_0x609d("0x19")][_0x609d("0x21")];e++){var t=_[_0x609d("0x19")][e],i=t[_0x609d("0x180")];i&&i[_0x609d("0x17e")]&&(i[_0x609d("0x19e")]==esmap[_0x609d("0x168")][_0x609d("0x16a")]||i[_0x609d("0x19e")]==esmap.ESLayerType[_0x609d("0x16c")]?this[_0x609d("0x5b1")](x,t):(i[_0x609d("0x19e")]==esmap[_0x609d("0x168")][_0x609d("0x16b")]||i[_0x609d("0x19e")]==esmap[_0x609d("0x168")].IMAGE_MARKER)&&this[_0x609d("0x5b1")](x,t))}}}},{key:_0x609d("0x583"),value:function(x,d,_){var e=x[_0x609d("0x18d")];if(e[_0x609d("0x21")]>=4){for(var t,i=new(THREE[_0x609d("0x427")]),n=this[_0x609d("0x1b2")],g=this[_0x609d("0x1b4")],a=0;a<e[_0x609d("0x21")];a++){var r=e[a];0==a?i[_0x609d("0x336")](r.x-n,r.y-g):i[_0x609d("0x5b2")](r.x-n,r.y-g)}if(x[_0x609d("0x5b3")]&&x.holes[_0x609d("0x21")]>0)for(var A in x[_0x609d("0x5b3")]){var I=x.holes[A],C=new(THREE[_0x609d("0x5b4")]);for(var a in I){var r=I[a];0==a?C.moveTo(r.x-n,r.y-g):C.lineTo(r.x-n,r.y-g)}i.holes[_0x609d("0x1a")](C)}t=0==d?new(THREE[_0x609d("0x426")])(i):new(THREE[_0x609d("0x5b5")])(i,{needtop:_,amount:d,bevelEnabled:!1,material:0,extrudeMaterial:1});for(var o=this[_0x609d("0x356")][_0x609d("0x220")],s=this[_0x609d("0x356")][_0x609d("0x222")],c=this.map_[_0x609d("0x21f")]-o,u=this[_0x609d("0x356")].maxY-s,n=this.map_[_0x609d("0x141")][_0x609d("0x1b2")],g=this[_0x609d("0x356")][_0x609d("0x141")][_0x609d("0x1b4")],f=t[_0x609d("0x1ac")],l=f[_0x609d("0x21")],A=0;A<l;A++){var h=t.vertices[f[A].a],b=t[_0x609d("0x420")][f[A].b],p=t[_0x609d("0x420")][f[A].c];t.faceVertexUvs[0][A][0].x=(h.x-o-n)/c,t[_0x609d("0x50e")][0][A][0].y=(h.y-s+g)/u,t[_0x609d("0x50e")][0][A][1].x=(b.x-o-n)/c,t.faceVertexUvs[0][A][1].y=(b.y-s+g)/u,t.faceVertexUvs[0][A][2].x=(p.x-o-n)/c,t[_0x609d("0x50e")][0][A][2].y=(p.y-s+g)/u}return{geometry:t,shape:i}}return null}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object.defineProperty(d,"__esModule",{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(){_(this,x)}return e(x,null,[{key:_0x609d("0x570"),value:function(x){var d=Number[_0x609d("0x5b6")],_=Number[_0x609d("0x5b7")],e=x[_0x609d("0x204")];for(var t in e){var i=e[t].Elevation;d=Math[_0x609d("0x5b8")](d,i),_=Math[_0x609d("0x47a")](_,i)}return new(THREE[_0x609d("0x5b9")])(new THREE.Vector3(x[_0x609d("0x220")],d,x[_0x609d("0x222")]),new(THREE[_0x609d("0x1b1")])(x[_0x609d("0x21f")],_,x[_0x609d("0x221")]))}},{key:"calcInitCamera",value:function(x){var d=x[_0x609d("0x27d")](),_=x[_0x609d("0x26c")]();return{target:new(THREE[_0x609d("0x1b1")])(0,d.y,0),position:new(THREE[_0x609d("0x1b1")])(1*_.x,d.y+.75*_.x,1*-_.x)}}},{key:_0x609d("0x18f"),value:function(x,d,_){if(x[_0x609d("0x21")]>=3){var e=Math.PI/20,t=Math.PI-e,i=_||1,n=void 0==d?8:d;if(0==n)return x;var g=1/n;x.push(x[x[_0x609d("0x21")]-1]);for(var a=[],r=0;r<x.length-2;){var A=x[r][_0x609d("0x1a8")](),I=x[r+1][_0x609d("0x1a8")](),C=x[r+2][_0x609d("0x1a8")](),o=A.clone()[_0x609d("0x246")](I),s=C.clone()[_0x609d("0x246")](I),c=o[_0x609d("0x4bb")](s),u=o[_0x609d("0x21")](),f=s[_0x609d("0x21")]();if(A[_0x609d("0x190")]=x[r].fnum,I[_0x609d("0x190")]=x[r+1][_0x609d("0x190")],C[_0x609d("0x190")]=x[r+2][_0x609d("0x190")],a[_0x609d("0x1a")](A),c>e&&c<t&&u>i&&f>i){var l=I.clone()[_0x609d("0x5ba")](A,i/u),h=I[_0x609d("0x1a8")]()[_0x609d("0x5ba")](C,i/f);l.fnum=I[_0x609d("0x190")],a.push(l);for(var b=g;b<.999999;b+=g){var p=b,v=l[_0x609d("0x1a8")]()[_0x609d("0x5ba")](I,p),m=I[_0x609d("0x1a8")]()[_0x609d("0x5ba")](h,p),y=v.lerp(m,p);y.fnum=l[_0x609d("0x190")],a.push(y)}x[r+1]=h,h[_0x609d("0x190")]=I[_0x609d("0x190")],r++}else r++;r==x[_0x609d("0x21")]-2&&a[_0x609d("0x1a")](C)}return a}return x}}]),x}();d[_0x609d("0x92")]=t},function(x,d,_){function e(x){return x&&x.__esModule?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=_(32),g=e(n),a=_(40),r=e(a),A=_(3),I=e(A),C=function(){function x(d){t(this,x),this[_0x609d("0x356")]=d,this[_0x609d("0x278")]=d[_0x609d("0x132")]}return i(x,[{key:_0x609d("0x1ec"),value:function(x,d,e){var t=this,i=this[_0x609d("0x278")][_0x609d("0x271")]+"/"+x+"/"+x+_0x609d("0x5bb");this[_0x609d("0x278")].s&&this[_0x609d("0x278")].k?i=this[_0x609d("0x278")].s+_0x609d("0x5bc")+x+_0x609d("0x5bd")+this[_0x609d("0x278")].k+_0x609d("0x5be")+Date.parse(new Date):this[_0x609d("0x278")][_0x609d("0x52d")]&&(i+=_0x609d("0x5bf")+Date[_0x609d("0x13")](new Date));
var n=_(73);new XMLHttpRequest,I[_0x609d("0x92")].get(i,!0)[_0x609d("0xad")](function(x){var _=new Uint8Array(x),e=n[_0x609d("0x5c0")][_0x609d("0x101")](_),i=t[_0x609d("0x5c1")](e[_0x609d("0x3ea")]),g=[e[_0x609d("0x569")],e[_0x609d("0x52a")]],a=[t[_0x609d("0x278")][_0x609d("0x569")],t[_0x609d("0x278")][_0x609d("0x52a")]],r=e[_0x609d("0x56a")];if(!i)return void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")][_0x609d("0x5c2")]);if(a[0]&&g[0]){var A=esmap[_0x609d("0x197")][_0x609d("0x568")](_0x609d("0x5c3")+e[_0x609d("0x5c4")]+a[0]);g[0]&&A==g[0]&&(t[_0x609d("0x356")][_0x609d("0x145")].visible=!1)}var I=document[_0x609d("0x5c5")],C=I[_0x609d("0x240")]("."),o=C[_0x609d("0x21")];o>=2&&(I=C[o-2]+"."+C[o-1]);var s=esmap[_0x609d("0x197")][_0x609d("0x568")](I);if("WndNWnQOW24="!=s&&_0x609d("0x5c6")!=s&&_0x609d("0x5c7")!=s&&"Ti4xTjg="!=s&&g[1]&&_0x609d("0x56d")!=g[1]){if(r.length>1&&r[_0x609d("0x18")](I)==-1)return void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")].DOM_ERR);if(t[_0x609d("0x278")].k&&t[_0x609d("0x278")].s){var A=esmap[_0x609d("0x197")][_0x609d("0x568")](g[1]+"editor");if(A!=t[_0x609d("0x278")].k)return void console[_0x609d("0x1f0")](t[_0x609d("0x278")].k)}else{var c=e[_0x609d("0x1ee")]<32503514?e[_0x609d("0x1ee")]:e[_0x609d("0x1ee")]/1e3;if((new Date)[_0x609d("0x1ef")]()>1e6*c)return void console.info(esmap[_0x609d("0x1f1")][_0x609d("0x1f2")]);if(!a[1])return void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")].TOKEN_MISS);var A=esmap[_0x609d("0x197")][_0x609d("0x568")](e[_0x609d("0x418")]+a[1]);if(A!=g[1])return void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")].TOKEN_ERR)}}var u=esmap[_0x609d("0x197")][_0x609d("0x568")](g[1]+g[0]+r+e.o1+"ABC"+e.o2);u!=e[_0x609d("0x56c")]&&e.Hash!=g[1]&&_0x609d("0x56d")!=g[1]||esmap[_0x609d("0x164")][_0x609d("0x2bc")]||(esmap.ESMap[_0x609d("0x2bc")]=!0,t.map_[_0x609d("0x1c9")](function(){esmap[_0x609d("0x164")][_0x609d("0x2bc")]=!1,esmap[_0x609d("0x164")][_0x609d("0x200")]||(esmap.ESMap[_0x609d("0x200")]=!0);var x=t[_0x609d("0x5c8")](e);esmap[_0x609d("0x164")][_0x609d("0x5c9")]&&(x[_0x609d("0x56e")]=-x[_0x609d("0x56e")],x.x=-x.x,t[_0x609d("0x5c9")](x)),d(x)},e[_0x609d("0x5ca")]))})[_0x609d("0xaf")](e)}},{key:_0x609d("0x5c1"),value:function(x){return!(x>esmap[_0x609d("0x575")]||x<esmap.minV)}},{key:_0x609d("0x20c"),value:function(x,d,_,e){var t=this,i=t[_0x609d("0x5cb")](d);esmap[_0x609d("0x164")][_0x609d("0x5c9")]&&t[_0x609d("0x5c9")](i),_(i)}},{key:"queryThemeV2",value:function(x,d){var _=this.options_.mapThemeSrc+"/"+x+"/"+x+_0x609d("0x5cc");I[_0x609d("0x92")][_0x609d("0xb1")]({url:_})[_0x609d("0xad")](d)}},{key:_0x609d("0x5cd"),value:function(x){var d="";for(var _ in x)d[_0x609d("0x21")]>0&&(d+="&"),d+=_+"="+x[_];return d}},{key:_0x609d("0x5c8"),value:function(x){this[_0x609d("0x1e5")]=x;var d=x[_0x609d("0x1ee")];Object[_0x609d("0x1d")](this[_0x609d("0x1e5")],_0x609d("0x1ee"),{value:d,writable:!1});var _;if(this[_0x609d("0x278")].visibleFloors){if(!Array[_0x609d("0x57")](this[_0x609d("0x278")][_0x609d("0x1fd")])&&_0x609d("0x1fc")!=this.options_.visibleFloors)return void console[_0x609d("0x1f0")](_0x609d("0x5ce")+esmap[_0x609d("0x1f1")][_0x609d("0x5cf")]+_0x609d("0x5d0"));_=1==this[_0x609d("0x278")][_0x609d("0x1fd")][_0x609d("0x21")]?this[_0x609d("0x278")][_0x609d("0x1fd")][0]:this[_0x609d("0x278")].defaultFloornum?this.options_.defaultFloornum:this.options_[_0x609d("0x1fe")]?this[_0x609d("0x278")][_0x609d("0x1fe")]:x[_0x609d("0x5d1")]?x[_0x609d("0x5d1")]:1}else _=this[_0x609d("0x278")][_0x609d("0x5d2")]?this[_0x609d("0x278")][_0x609d("0x5d2")]:this[_0x609d("0x278")][_0x609d("0x1fe")]?this[_0x609d("0x278")][_0x609d("0x1fe")]:x[_0x609d("0x5d1")]?x.DefaultFnum:1,this[_0x609d("0x278")][_0x609d("0x1fd")]=[_];this[_0x609d("0x278")][_0x609d("0x1fe")]=_,this[_0x609d("0x356")][_0x609d("0x189")]=this.options_[_0x609d("0x1fd")];for(var e=this[_0x609d("0x278")][_0x609d("0x5ae")],t=0,i=0;t<x[_0x609d("0x204")].length;t++){this[_0x609d("0x356")][_0x609d("0x2ab")].indexOf(t+1)<0&&this[_0x609d("0x356")].visibleNoFloorNums_.push(t+1);var n=x.floors[t];i=(t+1)*e+n[_0x609d("0x23b")],n[_0x609d("0x23b")]=i,n[_0x609d("0x580")]=e+x[_0x609d("0x5d3")]}return this[_0x609d("0x1e5")]}},{key:"_convertToSceneFloor",value:function(x){for(var d=x.floornum,_=(new(r[_0x609d("0x92")][_0x609d("0x474")]),[]),e=[],t=[],i=[],n=[],g=this[_0x609d("0x5d4")](x[_0x609d("0x5d5")]),a=(esmap.ESMap[_0x609d("0x165")],0);a<g[_0x609d("0x21")];a++){var A=this.convertGeo2Geometry_(g[a]);_[_0x609d("0x1a")](A)}x[_0x609d("0x5d5")]=null;var I=x[_0x609d("0x5d6")];for(a in I){var C=I[a],A=this.convertGeo2Geometry_(C[_0x609d("0x5d5")]);if(A[_0x609d("0x1fb")]=d,A[_0x609d("0x283")]=C.BC>>1&1||1,A[_0x609d("0x377")]=C[_0x609d("0x418")],A[_0x609d("0x2a0")]=C.RS,A[_0x609d("0x597")]=C.RC||"",A[_0x609d("0x592")]=C[_0x609d("0x592")],A.CenY=C[_0x609d("0x5d7")],A[_0x609d("0x591")]=C.RM,A[_0x609d("0x378")]=C.Tid||C[_0x609d("0x378")]||0,A[_0x609d("0x595")]=1&C.BC||0,A[_0x609d("0x5d8")]=C.FS||0,A.name=C[_0x609d("0x43")],C[_0x609d("0x5d9")]&&(A.offset=C[_0x609d("0x5d9")]),C.BC&&1&C.BC||C.RM&&C.RM[_0x609d("0x21")]>0){if(A[_0x609d("0x58e")]=void 0==C.RH?5:C.RH,A[_0x609d("0x58e")]<1&&(A.top=1),A[_0x609d("0x58f")]=void 0==C.RL?"":C.RL,A[_0x609d("0x5da")]=void 0==C[_0x609d("0x5db")]?"":C.RLSize,A[_0x609d("0x4cc")]=C.SL,C.RM&&(C[_0x609d("0x5dc")]&&(A[_0x609d("0x27c")]=C[_0x609d("0x5dc")]),C.RMR&&(A[_0x609d("0x36b")]=C[_0x609d("0x5dd")])),A[_0x609d("0x1c")](_0x609d("0x58f"))&&null!=A.RoomLogo&&A[_0x609d("0x58f")][_0x609d("0x21")]>1&&0==A[_0x609d("0x5d8")]&&""!=A[_0x609d("0x5da")]){var o={},s=A[_0x609d("0x5da")][_0x609d("0x240")](",");o[_0x609d("0x419")]=new THREE.Vector2(A[_0x609d("0x592")],A[_0x609d("0x5d7")]),o[_0x609d("0x26c")]=new(THREE[_0x609d("0x50c")])(parseFloat(s[0]),parseFloat(s[1]));var c=this[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x271")]+"/"+this[_0x609d("0x356")].sceneId_+"/imagelogo/"+A[_0x609d("0x58f")];o[_0x609d("0x209")]=esmap[_0x609d("0x197")][_0x609d("0x55e")](c,function(){}),o[_0x609d("0x185")]=A.RoomHigh+.02,o[_0x609d("0x36b")]=s[_0x609d("0x21")]>2?parseFloat(s[2]):0,o[_0x609d("0x35b")]=s[_0x609d("0x21")]>3?parseFloat(s[3]):0,o.offset=s[_0x609d("0x21")]>5?{x:parseFloat(s[4]),y:parseFloat(s[5]),z:parseFloat(s[6])||0}:{x:0,y:0,z:0},A[_0x609d("0x2a7")]=o}e.push(A)}else A.RoomHigh=void 0==C.RH?.25:C.RH,n.push(A)}var u=x[_0x609d("0x5de")];for(var f in u){var l=x[_0x609d("0x5de")][f];t.push({oid:l[_0x609d("0x418")],Typeid:l.Tid,name:l.name||"",fontstyleid:l[_0x609d("0x5df")],Height:l.SH,X:-l.X,Y:l.Y,image:l[_0x609d("0x209")],w:void 0==l.w?32:l.w,h:void 0==l.h?32:l.h,ShowLevel:l.SL?l.SL:0,texture:void 0==l.image?"":""==l[_0x609d("0x209")]?"":esmap[_0x609d("0x197")].loadTexture(this.options_[_0x609d("0x271")]+"/"+this[_0x609d("0x356")][_0x609d("0x172")]+_0x609d("0x5e0")+l[_0x609d("0x209")])})}var h=x.Facility;if(x[_0x609d("0x207")])for(var b in h){var p=h[b];i[_0x609d("0x1a")]({oid:p[_0x609d("0x418")],X:-p.X,Y:p.Y,Height:p.SH,image:void 0==p[_0x609d("0x209")]?"":p[_0x609d("0x209")],w:void 0==p.w||""==p.w?32:p.w,h:void 0==p.h||""==p.h?32:p.h,name:p[_0x609d("0x43")],ShowLevel:p.SL?p.SL:0,Typeid:p[_0x609d("0x208")]})}var v=[],m=x[_0x609d("0x5e1")];if(x[_0x609d("0x5e1")])for(var y in m){var w=m[y];v[_0x609d("0x1a")](w)}var E={fnum:d,floorBaseLayers:[{lid:2,floorBases:_}],modellayers:[{lid:3,models:e}],labellayers:[{lid:5,labels:t}],poilayers:[{lid:4,pois:i}],liftlayers:[{lid:6,lifts:v}],modelbaselayer:[{lid:9,modelbases:n}]};return E}},{key:_0x609d("0x5cb"),value:function(x){for(var d=this[_0x609d("0x1e5")][_0x609d("0x204")],_=0;_<d[_0x609d("0x21")];_++){var e=d[_];if(e[_0x609d("0x1fb")]==x)return this[_0x609d("0x5e2")](e)}return null}},{key:_0x609d("0x5e3"),value:function(x){var d=(new(r[_0x609d("0x92")].GData))[_0x609d("0x13")](x),_={points:d[_0x609d("0x46f")],holes:d[_0x609d("0x470")]};return _}},{key:_0x609d("0x5c9"),value:function(x){if(x&&"string"!=typeof x)for(var d in x){var _=x[d];if(_0x609d("0x420")==d||"vertex"==d)for(var e in _)e%2==0&&(_[e]=-_[e]);else this[_0x609d("0x5c9")](_)}}},{key:_0x609d("0x5d4"),value:function(x){var d=new Array;if(null!=x&&x[_0x609d("0x21")]>10)for(var _=x[_0x609d("0x240")]("&&"),e=0;e<_[_0x609d("0x21")];e++){var t=_[e][_0x609d("0x18")]("&");t>0&&(_[e]=_[e][_0x609d("0x70")](0,t)),_[e].length>10&&d[_0x609d("0x1a")](_[e])}return d}}]),x}();C[_0x609d("0x5e4")]=g[_0x609d("0x92")],d[_0x609d("0x92")]=C},function(x,d,_){function e(x){return x&&x[_0x609d("0x79")]?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=_(2),g=e(n),a=function(){function x(d){t(this,x),this[_0x609d("0x290")]="2001",this.themeList_=null,this[_0x609d("0x5e5")]=null,this[_0x609d("0x29a")]=null,this[_0x609d("0x4df")]=null,this[_0x609d("0x5e6")]={color_:16777215,alpha:1,strokeColor_:16777215,strokeWidth:2},this[_0x609d("0x1cd")]=16777215,this[_0x609d("0x5e7")]=.875,this[_0x609d("0x296")]=16776960,this[_0x609d("0x297")]=.875,this.selectedColor_=16750950,this[_0x609d("0x18a")]={color:16711680,lineWidth:8,alpha:.8,dash:{size:1,gap:1}},this[_0x609d("0x278")]=d,this[_0x609d("0x290")]=this[_0x609d("0x278")][_0x609d("0x1cb")]||this[_0x609d("0x290")]}return i(x,[{key:_0x609d("0x210"),value:function(x,d){var _=new(THREE[_0x609d("0x1a6")])({color:d||x[_0x609d("0x5e8")],opacity:x[_0x609d("0x26a")],transparent:!0,side:THREE[_0x609d("0x414")]});return _}},{key:_0x609d("0x5ab"),value:function(x){var d=this.themeList_[x[_0x609d("0x2a0")]];return g.default[_0x609d("0x5e9")](d?d:this[_0x609d("0x5e6")])}},{key:_0x609d("0x5ea"),value:function(x){for(var d in this[_0x609d("0x4df")])if(1*this[_0x609d("0x4df")][d][_0x609d("0x5eb")]==x)return this[_0x609d("0x4df")][d]}},{key:_0x609d("0x596"),value:function(x,d){var _;if(d.length<1){var e=this[_0x609d("0x5e5")][x.RoomStyle]||this[_0x609d("0x210")](this.defaultTheme_);_=e[_0x609d("0x1a8")]()}else _=this[_0x609d("0x210")](this[_0x609d("0x5ab")](x),esmap[_0x609d("0x197")][_0x609d("0x2a1")](d)),_[_0x609d("0x5e8")]=esmap[_0x609d("0x197")][_0x609d("0x2a1")](d);return _?_:this[_0x609d("0x5ec")]}},{key:_0x609d("0x5ed"),value:function(x){var d=this[_0x609d("0x291")][x];if(d&&void 0!=d[_0x609d("0x1d2")]){var _=d[_0x609d("0x1d2")][_0x609d("0x1a8")]();return _}return new(THREE[_0x609d("0x40d")])({color:16711680})}},{key:"initPoiMateriaByData",value:function(x,d){var _=esmap[_0x609d("0x164")][_0x609d("0x165")];for(var e in x){var t={};if(t.id=e,t[_0x609d("0x185")]=d,!this[_0x609d("0x291")][t.id]&&12e4!=t.id){var i=this[_0x609d("0x278")][_0x609d("0x272")]+"/"+this[_0x609d("0x290")]+"/"+t.id+_0x609d("0x206");t.id&&t.id[_0x609d("0x42")]()[_0x609d("0x18")](".png")>0&&(i=this.options_[_0x609d("0x271")]+"/"+_[_0x609d("0x172")]+_0x609d("0x5e0")+t.id);var n=esmap[_0x609d("0x197")][_0x609d("0x55e")](i);n[_0x609d("0x3c9")]=THREE.LinearFilter,n[_0x609d("0x5ee")]=THREE[_0x609d("0x3ca")],t[_0x609d("0x1d2")]=new(THREE[_0x609d("0x40d")])({map:n}),t[_0x609d("0x1d2")][_0x609d("0x26c")]=d,this[_0x609d("0x291")][t.id]=t}}}},{key:_0x609d("0x1cc"),get:function(){return this[_0x609d("0x290")]},set:function(x){this[_0x609d("0x290")]=x}},{key:_0x609d("0x95"),set:function(x){this[_0x609d("0x1cd")]=esmap.ESMapUtil[_0x609d("0x2a1")](x.mapstyle[_0x609d("0x5ef")]),this[_0x609d("0x291")]={},this[_0x609d("0x5e5")]={};for(var d=x[_0x609d("0x5f0")],_=0;_<d.length;_++){var e=d[_];e[_0x609d("0x5e8")]=esmap[_0x609d("0x197")].toColor(e[_0x609d("0x19b")]),1==e.typeid&&(this[_0x609d("0x5f1")]=e[_0x609d("0x5e8")]),e[_0x609d("0x59c")]=esmap[_0x609d("0x197")][_0x609d("0x2a1")](e[_0x609d("0x465")]),e[_0x609d("0x26a")]=e[_0x609d("0x3d0")],this[_0x609d("0x5e5")][e[_0x609d("0x5eb")]]=this[_0x609d("0x210")](e),this[_0x609d("0x291")][e[_0x609d("0x5eb")]]=e}var t={},i=x[_0x609d("0x5f2")],n=this;if(this[_0x609d("0x29a")]={},i&&i[_0x609d("0x21")]>0){var g=i[0];this[_0x609d("0x296")]=esmap[_0x609d("0x197")][_0x609d("0x2a1")](g[_0x609d("0x19b")]),g[_0x609d("0x3d0")]&&(this[_0x609d("0x297")]=1-parseFloat(g[_0x609d("0x3d0")])),i.forEach(function(x){n.floorStyleBase[x[_0x609d("0x1fb")]]={height:x[_0x609d("0x5f3")],opacity:1-parseFloat(x[_0x609d("0x3d0")]),color:esmap[_0x609d("0x197")].toColor(x.color),image:x[_0x609d("0x209")]||"",imagesize:x[_0x609d("0x29e")]||""};var d=x[_0x609d("0x209")];d&&!t[d.replace(_0x609d("0x206"),"")]&&(t[d[_0x609d("0x117")](".png","")]=1)})}n.initPoiMateriaByData(t,32),this[_0x609d("0x4df")]={};var a=x[_0x609d("0x5f4")];if(a){a[0]&&(this[_0x609d("0x2a4")]=a[0],a[1]&&(this[_0x609d("0x5f5")]=a[1]));for(var r,A=this[_0x609d("0x278")][_0x609d("0x272")]+this[_0x609d("0x290")]+"/",_=0;_<a.length;_++){r=a[_],void 0!=r[_0x609d("0x209")]&&""!=r[_0x609d("0x209")]&&(r[_0x609d("0x4e5")]=esmap[_0x609d("0x197")][_0x609d("0x55e")](A+r.image));for(var I=r.typeid[_0x609d("0x240")](","),C=0;C<I[_0x609d("0x21")];C++)this.fontStyleThemeDic[I[C]]=r}}this[_0x609d("0x1a9")]||(this[_0x609d("0x1a9")]=new(THREE[_0x609d("0x1a6")])({color:this.selectedColor_,emissive:this[_0x609d("0x5f1")],transparent:!0})),this[_0x609d("0x1a9")][_0x609d("0x19b")]=new THREE.Color(this[_0x609d("0x5f1")]),this[_0x609d("0x5ec")]=this[_0x609d("0x210")](this[_0x609d("0x5e6")])}}]),x}();d[_0x609d("0x92")]=a},function(x,d,_){function e(x){return x&&x.__esModule?x:{default:x}}function t(x){if(Array.isArray(x)){for(var d=0,_=Array(x[_0x609d("0x21")]);d<x[_0x609d("0x21")];d++)_[d]=x[d];return _}return Array[_0x609d("0x65")](x)}function i(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var n=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),g=_(3),r=e(g),A=1e-5,I=function(){function x(){i(this,x)}return n(x,null,[{key:_0x609d("0x2a1"),value:function(x){var d=x.split(",");if(d[_0x609d("0x21")]<3){var _=esmap[_0x609d("0x197")][_0x609d("0x199")](x);if(d=_[_0x609d("0x240")](","),d.length<3)return 0}return parseInt(d[0])<<16|parseInt(d[1])<<8|parseInt(d[2])}},{key:_0x609d("0x1a5"),value:function(x){var d=x.split(","),_=parseInt(d[0]),e=parseInt(d[1]),t=parseInt(d[2]),i="#"+((1<<24)+(_<<16)+(e<<8)+t)[_0x609d("0x42")](16)[_0x609d("0x29")](1);return i}},{key:_0x609d("0x199"),value:function(x){var d=x[_0x609d("0x6f")](),_=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(d&&_[_0x609d("0x78")](d)){if(4===d.length){for(var e="#",t=1;t<4;t+=1)e+=d[_0x609d("0x29")](t,t+1)[_0x609d("0x19a")](d[_0x609d("0x29")](t,t+1));d=e}for(var i=[],t=1;t<7;t+=2)i[_0x609d("0x1a")](parseInt("0x"+d[_0x609d("0x29")](t,t+2)));return i[_0x609d("0x108")](",")}return d}},{key:"toRgba",value:function(x){var d=x.split(",");return d[_0x609d("0x21")]>=3?_0x609d("0x444")+parseInt(d[0])+","+parseInt(d[1])+","+parseInt(d[2])+_0x609d("0x5f6"):0}},{key:_0x609d("0x5f7"),value:function(x){return x&&x instanceof esmap[_0x609d("0x298")]?x[_0x609d("0x141")]:x[_0x609d("0x182")]&&x[_0x609d("0x182")][_0x609d("0xc9")]?esmap[_0x609d("0x197")].getMapScene(x[_0x609d("0x182")][_0x609d("0xc9")][_0x609d("0x180")]):null}},{key:_0x609d("0x4b6"),value:function(x){return x[_0x609d("0x19e")]||null}},{key:_0x609d("0x5f8"),value:function(){var x=esmap[_0x609d("0x164")][_0x609d("0x165")][_0x609d("0x13a")];return{target:x[_0x609d("0x23d")].x[_0x609d("0x5f9")](3)+","+x[_0x609d("0x23d")].y[_0x609d("0x5f9")](3)+","+x.target.z[_0x609d("0x5f9")](3),position:x.object[_0x609d("0x186")].x[_0x609d("0x5f9")](3)+","+x[_0x609d("0x20")][_0x609d("0x186")].y[_0x609d("0x5f9")](3)+","+x[_0x609d("0x20")][_0x609d("0x186")].z.toFixed(3)}}},{key:_0x609d("0x3f6"),value:function(x,d){var _=d-x;return Math[_0x609d("0x124")](_)>180&&(_=-1*Math.sign(_)*360+_),_}},{key:_0x609d("0x5fa"),value:function(x){var d=esmap[_0x609d("0x164")][_0x609d("0x165")][_0x609d("0x13a")],_=x.target[_0x609d("0x240")](","),e=x[_0x609d("0x186")][_0x609d("0x240")](","),t=new(THREE[_0x609d("0x1b1")])(parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2])),i=new(THREE[_0x609d("0x1b1")])(parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]));d[_0x609d("0x23d")][_0x609d("0x23c")](t),d[_0x609d("0x20")][_0x609d("0x186")][_0x609d("0x23c")](i),d.update()}},{key:_0x609d("0x347"),value:function(){for(var x=navigator[_0x609d("0x5fb")],d=new Array(_0x609d("0x5fc"),_0x609d("0x5fd"),_0x609d("0x5fe"),"Windows Phone",_0x609d("0x5ff"),_0x609d("0x600")),_=!0,e="PC",t=!1,i=0;i<d[_0x609d("0x21")];i++)if(x[_0x609d("0x18")](d[i])>0){_=!1,e=d[i],x[_0x609d("0x18")](_0x609d("0x601"))>0&&(t=!0);break}return{isPC:_,isWX:t,platform:e}}},{key:_0x609d("0x602"),value:function(){var x=esmap[_0x609d("0x164")].instance,d=x[_0x609d("0x172")],_=_0x609d("0x603"),e=esmap[_0x609d("0x197")][_0x609d("0x568")](d+"escopegoodwork"),t=_+_0x609d("0x604")+d+_0x609d("0x605")+e,i=null;return r[_0x609d("0x92")][_0x609d("0xb1")]({url:t,async:!1})[_0x609d("0xad")](function(x){x=JSON[_0x609d("0x13")](x),1==x[_0x609d("0xf")]&&(i=x.t)}),i?(x.audioToken=i,i):console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")][_0x609d("0x606")])}},{key:_0x609d("0x607"),value:function(x){function d(){return navigator[_0x609d("0x5fb")][_0x609d("0x18")](_0x609d("0x601"))>0}function _(){var _="https://tsn.baidu.com/text2audio?",i=e[_0x609d("0x608")]?e[_0x609d("0x608")]:esmap[_0x609d("0x197")][_0x609d("0x602")]();return _+=_0x609d("0x609")+x+_0x609d("0x60a")+i+_0x609d("0x60b"),t[_0x609d("0x6")]=_,d()?WeixinJSBridge?WeixinJSBridge[_0x609d("0x60c")](_0x609d("0x60d"),{},function(x){t[_0x609d("0x60e")]()}):wx[_0x609d("0x60d")]&&wx[_0x609d("0x60d")]({success:function(x){},complete:function(){t[_0x609d("0x60e")]()}}):t[_0x609d("0x60e")](),!0}var e=esmap.ESMap.instance,t=e[_0x609d("0x60f")]||(e[_0x609d("0x60f")]=new Audio,e[_0x609d("0x12f")].container_[_0x609d("0x7")](e[_0x609d("0x60f")])),i=arguments[_0x609d("0x21")]>1&&void 0!==arguments[1]?arguments[1]:2;if(x){if(0===t[_0x609d("0xe")])return _();if(2===i){if(t[_0x609d("0x610")])return _();_()}}}},{key:_0x609d("0x611"),value:function(x,d){var _=null,e=100;if("3d"==x[_0x609d("0x223")]){if(_0x609d("0x51")==typeof d)e=d;else{var t=void 0!=d?d[_0x609d("0x42a")]():x.controls.target;e=x[_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")][_0x609d("0x50a")](t)}var i=esmap[_0x609d("0x197")][_0x609d("0x612")](x[_0x609d("0x12f")][_0x609d("0x137")],x.controls,e);_=2*i[_0x609d("0x283")]/x.height}else(_0x609d("0x283")==x[_0x609d("0x223")]||"2d"==x[_0x609d("0x223")])&&(_=2*x[_0x609d("0x13a")].object.top/x[_0x609d("0x13a")][_0x609d("0x20")][_0x609d("0x280")]/x[_0x609d("0x185")]);return _}},{key:_0x609d("0x57"),value:function(x){return _0x609d("0x613")==Object[_0x609d("0x1b")].toString[_0x609d("0x15")](x)}},{key:"mergeModels",value:function(x,d,_){_=_||_0x609d("0x361");var e=!1;"model"!=_&&_0x609d("0x493")!=_||(e=!0);for(var t=x[_0x609d("0x19d")](d),i=t[_0x609d("0x388")](_),n=[][_0x609d("0x19a")](i),g=0;g<n[_0x609d("0x21")];g++){var a,r,A=n[g];if(A&&!A[_0x609d("0x614")]){var I=A[_0x609d("0x182")];for(I[_0x609d("0x615")]={},a=I.children,r={},a[_0x609d("0xc1")](function(x){var d;switch(_){case _0x609d("0x361"):case _0x609d("0x493"):d=x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x2a0")];break;case _0x609d("0x57d"):d=x[_0x609d("0x180")].typeID}if(x[_0x609d("0x194")].color_&&(d=x.datas_[_0x609d("0x292")]+"_"+x[_0x609d("0x194")][_0x609d("0x5e8")]),r[d]||(r[d]={},r[d].datas_=x.datas_,r[d][_0x609d("0x194")]=x.material,r[d].geometry=new(THREE[_0x609d("0x616")]),e&&(r[d][_0x609d("0x1a4")]=[]),r[d][_0x609d("0x1db")]=0),e){var t=r[d].faceIndex;r[d][_0x609d("0x1db")]+=x[_0x609d("0x193")][_0x609d("0x1ac")][_0x609d("0x21")];var i=Object[_0x609d("0x348")]({},x[_0x609d("0x180")]);i[_0x609d("0x1da")]=x.datas_[_0x609d("0x1da")],i.ID=x[_0x609d("0x180")].ID,i[_0x609d("0x43")]=x[_0x609d("0x180")][_0x609d("0x43")],i[_0x609d("0x292")]=x[_0x609d("0x180")].typeID,i[_0x609d("0x1e0")]=x.datas_[_0x609d("0x1e0")],i[_0x609d("0x2c6")]=x[_0x609d("0x180")][_0x609d("0x2c6")],i[_0x609d("0x1aa")]=[t,r[d][_0x609d("0x1db")]],r[d][_0x609d("0x1a4")][_0x609d("0x1a")](i),delete x[_0x609d("0x180")][_0x609d("0x182")]}x[_0x609d("0x617")](),r[d][_0x609d("0x193")][_0x609d("0x6c")](x[_0x609d("0x193")],x[_0x609d("0x618")])}),x[_0x609d("0xc2")].removeObject(I[_0x609d("0x19")]);I[_0x609d("0x19")].length>0;)I.children[0].visible=!1,I[_0x609d("0x19")][0][_0x609d("0x193")][_0x609d("0x24e")](),I.remove(I.children[0]);for(var C in r){var o=r[C];o.geometry[_0x609d("0x410")]();var s;switch(_){case _0x609d("0x361"):s=new(THREE[_0x609d("0x3d2")])(o[_0x609d("0x193")],o[_0x609d("0x194")]),s[_0x609d("0x59f")]=!0,s[_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x361")];break;case _0x609d("0x493"):s=new(THREE[_0x609d("0x3d2")])(o[_0x609d("0x193")],o[_0x609d("0x194")]),s[_0x609d("0x619")]=!0,s[_0x609d("0x3d3")]=esmap.ESRenderOrder[_0x609d("0x361")];break;case _0x609d("0x57d"):s=new(THREE[_0x609d("0x5ac")])(o[_0x609d("0x193")],o[_0x609d("0x194")]),s[_0x609d("0x3d3")]=esmap[_0x609d("0x3d4")][_0x609d("0x3da")]}o.datas_[_0x609d("0x182")]=s,s.datas_=o.datas_,e&&(s[_0x609d("0x180")].brothers=o[_0x609d("0x1a4")],s[_0x609d("0x180")][_0x609d("0x1a4")][_0x609d("0xc1")](function(x){x[_0x609d("0x182")]=s})),I.add(s),_0x609d("0x361")==_&&x[_0x609d("0xc2")][_0x609d("0x214")](s)}A._merged=!0}}}},{key:_0x609d("0x612"),value:function(x,d,_){x instanceof esmap[_0x609d("0x164")]&&(_=d,d=x[_0x609d("0x13a")],x=x[_0x609d("0x12f")][_0x609d("0x137")]);var e=x[_0x609d("0x61a")],t=x[_0x609d("0x61b")],i=void 0!=_?_:d[_0x609d("0x23d")][_0x609d("0x50a")](x[_0x609d("0x186")]),n=Math[_0x609d("0x61c")](e*THREE[_0x609d("0x1bb")][_0x609d("0x23f")]/2)*i,g=2*n,a=g*t,r=a/2;return{top:n||1,right:r}}},{key:_0x609d("0x61d"),value:function(x,d){var _=esmap[_0x609d("0x164")][_0x609d("0x165")];_[_0x609d("0x19c")][_0x609d("0xc1")](function(e){var t=_[_0x609d("0x19d")](e);t.getLayersByTypes(x,d)})}},{key:_0x609d("0x61e"),value:function(x,d,_,e){function t(x){if(_&&_(x)&&i.push(x),e)return e==i[_0x609d("0x21")]}var i=[],n=!1,g=esmap[_0x609d("0x164")][_0x609d("0x165")],a=g[_0x609d("0x19d")](x);return a&&a[_0x609d("0x388")](d,function(x){if(void 0!=_)for(var d=x[_0x609d("0x182")][_0x609d("0x19")].length,e=0;e<d;e++){var g=x[_0x609d("0x182")][_0x609d("0x19")][e].datas_,a=g[_0x609d("0x1a4")];if(a){for(var r=a[_0x609d("0x21")],A=0;A<r;A++)if(n=t(a[A]))return!0}else if(n=t(g))return!0}else i=x.o3d_[_0x609d("0x19")].reduce(function(x,d){return x[_0x609d("0x1a")][_0x609d("0x36")](x,void 0!=d[_0x609d("0x180")][_0x609d("0x1a4")]?d[_0x609d("0x180")][_0x609d("0x1a4")]:[d[_0x609d("0x180")]]),x},[])}),i}},{key:_0x609d("0x218"),value:function(x,d,_){var e=esmap[_0x609d("0x164")].instance;void 0==_&&(_=!0),_&&esmap[_0x609d("0x197")].restoreFloorAlpha(x);var t=e[_0x609d("0x141")][_0x609d("0x245")][x];t&&(t[_0x609d("0x615")]||(t.lastAlpha={}),t[_0x609d("0x391")](function(x){if(x[_0x609d("0x194")]){var _=null;_=x.material[_0x609d("0x195")]?x[_0x609d("0x194")][_0x609d("0x195")]:[x[_0x609d("0x194")]];for(var e=0;e<_[_0x609d("0x21")];e++){var i=_[e];if(i[_0x609d("0x1c8")]<=.1)break;if(i[_0x609d("0x1c8")]<=.5&&d>i[_0x609d("0x1c8")])break;t[_0x609d("0x615")][i.uuid]||(t.lastAlpha[i[_0x609d("0x491")]]=i[_0x609d("0x1c8")]),i.opacity=d,i[_0x609d("0x3d0")]=!0}}}))}},{key:_0x609d("0x217"),value:function(x){var d=esmap[_0x609d("0x164")][_0x609d("0x165")],_=d[_0x609d("0x141")][_0x609d("0x245")][x];_&&_.lastAlpha&&_[_0x609d("0x391")](function(x){if(x.material){var d=null;d=x[_0x609d("0x194")][_0x609d("0x195")]?x[_0x609d("0x194")][_0x609d("0x195")]:[x.material],d[_0x609d("0xc1")](function(x){_[_0x609d("0x615")][x[_0x609d("0x491")]]&&(x[_0x609d("0x1c8")]=_.lastAlpha[x[_0x609d("0x491")]]),x[_0x609d("0x495")]&&(x[_0x609d("0x3d0")]=!1)})}})}},{key:_0x609d("0x61f"),value:function(x,d,_){for(var e=_0x609d("0x51")==typeof d,t=e||void 0!=d[_0x609d("0x180")]?d[_0x609d("0x180")]:d,_=e?_:t.data_[_0x609d("0x377")],i=e?d:t[_0x609d("0x1da")],n=x[_0x609d("0x19d")](i),g=n[_0x609d("0x389")](_0x609d("0x1df")),a=g[_0x609d("0x21")],r=0;r<a;r++)if(g[r][_0x609d("0x299")][_0x609d("0x377")]==_)return g[r];return null}},{key:"searchModel",value:function(x,d){var _=[],e=esmap.ESMap[_0x609d("0x165")],i=(_[_0x609d("0x21")],[][_0x609d("0x19a")](t(x[_0x609d("0x190")]?[x[_0x609d("0x190")]]:e[_0x609d("0x19c")]))),n=x[_0x609d("0xcb")]||"ID",g=[][_0x609d("0x19a")](x.data),a=g[_0x609d("0x21")],r=!0,A=!1,I=void 0;try{for(var C,o=i[Symbol[_0x609d("0x7b")]]();!(r=(C=o[_0x609d("0xf0")]())[_0x609d("0x620")]);r=!0){var s=C[_0x609d("0x7f")];_[_0x609d("0x1a")][_0x609d("0x36")](_,esmap[_0x609d("0x197")][_0x609d("0x61e")](s,[_0x609d("0x361")],function(x){return g[_0x609d("0x621")](x[n])},_0x609d("0x43")==n?void 0:a))}}catch(x){A=!0,I=x}finally{try{!r&&o.return&&o[_0x609d("0x622")]()}finally{if(A)throw I}}return d&&d(_),_}},{key:"m",value:function(x){return x>A}},{key:"n",value:function(x){return x<-A}},{key:"l",value:function(x){return x<A&&x>-A}},{key:"o",value:function x(d,_,e,t){var i=_.x,n=_.y,g=e.x,a=e.y,r=d.x,A=d.y,I=g-i,x=a-n,C=Math[_0x609d("0x21e")](I*I+x*x),o=r-i,s=A-n,c=Math[_0x609d("0x21e")](o*o+s*s);if(esmap[_0x609d("0x197")].l(C))return l(c)?(t.x=_.x,t.y=_.y,0):(t.x=_.x,t.y=_.y,c);var u=I/C,f=x/C,h=u*o+f*s;if(!esmap[_0x609d("0x197")].m(h))return t.x=_.x,t.y=_.y,c;if(!esmap[_0x609d("0x197")].n(h-C)){var b=r-g,p=A-a,v=Math[_0x609d("0x21e")](b*b+p*p);return t.x=e.x,t.y=e.y,v}var m=i+h*u,y=n+h*f,w=r-m,E=A-y,k=Math[_0x609d("0x21e")](w*w+E*E);return t.x=m,t.y=y,k}},{key:_0x609d("0x59b"),value:function(x){var d=new(THREE[_0x609d("0x623")]);return x[_0x609d("0x624")]&&d[_0x609d("0x625")](_0x609d("0x186"),new(THREE[_0x609d("0x626")])(parmas[_0x609d("0x624")],3)),x[_0x609d("0x627")]&&d[_0x609d("0x628")](new(THREE[_0x609d("0x626")])(x.indexes,6)),d}},{key:_0x609d("0x568"),value:function(x){var d,_,e,t,i,n=_0x609d("0x629"),g="",a="",r="",A=0;do d=x[_0x609d("0x118")](A++),_=x.charCodeAt(A++),a=x[_0x609d("0x118")](A++),e=d>>4,t=(3&d)<<4|_>>4,i=(15&_)<<2|a>>6,r=63&a,isNaN(_)?i=r=64:isNaN(a)&&(r=64),g=g+n.charAt(e)+n[_0x609d("0x6e")](t)+n.charAt(i)+n[_0x609d("0x6e")](r),d=_=a="",e=t=i=r="";while(A<x[_0x609d("0x21")]);return g}},{key:_0x609d("0x62a"),value:function(x,d){var _=new(THREE[_0x609d("0x1b1")])(0,0,1),e=new(THREE[_0x609d("0x1b1")])(x.x,0,x.y),t=new(THREE[_0x609d("0x1b1")])(d.x,0,d.y),i=t[_0x609d("0x1a8")]()[_0x609d("0x246")](e)[_0x609d("0x287")](),n=i[_0x609d("0x4bb")](_)*THREE[_0x609d("0x1bb")][_0x609d("0x27e")];return i[_0x609d("0x1a8")]()[_0x609d("0x4ba")](_).y>0?360-n:n}},{key:_0x609d("0x477"),value:function(){var x=new Array;if(void 0!=window[_0x609d("0x62b")][_0x609d("0x62c")])x[0]=window[_0x609d("0x62b")][_0x609d("0x62c")],x[1]=window.screen[_0x609d("0x62d")];else{var d=document[_0x609d("0x2")](_0x609d("0x62e"));d[_0x609d("0xcf")].cssText=_0x609d("0x62f"),document[_0x609d("0x8b")][_0x609d("0x7")](d),x[0]=parseInt(d[_0x609d("0x630")]),x[1]=parseInt(d[_0x609d("0x187")]),d[_0x609d("0x631")][_0x609d("0x131")](d)}return x}}]),x}();I[_0x609d("0x632")]=function(x,d,_,e){var t=[],i=null,n=null,g=null,r=[],A=_[_0x609d("0x633")]||["model",_0x609d("0x1df"),_0x609d("0x5a4"),_0x609d("0x380"),_0x609d("0x381"),_0x609d("0x560")];"number"==typeof d?i=0==d?x[_0x609d("0x19c")]:[d]:_0x609d("0x1fc")==d?i=x[_0x609d("0x19c")]:d instanceof Array&&(i=d);for(var I=0;I<i[_0x609d("0x21")];I++){var C=i[I];t[_0x609d("0x1a")][_0x609d("0x36")](t,esmap[_0x609d("0x197")].getDatasByAlias(C,A,function(d){if(_[_0x609d("0xd0")]&&_[_0x609d("0xd0")]!=esmap[_0x609d("0x1e9")][_0x609d("0x634")]&&_.nodeType!=d[_0x609d("0xd0")])return!1;if(_[_0x609d("0x43")]&&(!d[_0x609d("0x43")]||_[_0x609d("0x43")]!=d[_0x609d("0x43")]))return!1;if(_.keyword&&(!d.name||d.name[_0x609d("0x18")](_[_0x609d("0x635")])<0))return!1;if(_.ID&&_.ID!=d.ID)return!1;if(_[_0x609d("0x1da")]&&_[_0x609d("0x1da")]!=d[_0x609d("0x1da")])return!1;if(_.typeID&&_[_0x609d("0x292")]!=d[_0x609d("0x292")])return!1;if(_.mapCoord&&_[_0x609d("0x421")]){if(_[_0x609d("0xd0")]==esmap[_0x609d("0x1e9")][_0x609d("0x1a2")]){var e=d[_0x609d("0x299")][_0x609d("0x18d")],t=[];n=null;for(var i=x[_0x609d("0x1b7")](C),A=0;A<e.length;A+=2)t[_0x609d("0x1a")](new(esmap[_0x609d("0x25b")])(-e[A].x,e[A].y,i));if(t[_0x609d("0x21")]<2)n=p(_[_0x609d("0x1e0")],t[0]);else for(var I=new(esmap[_0x609d("0x25b")]),A=0;A<t[_0x609d("0x21")]-1;A++)g=esmap[_0x609d("0x197")].o(_[_0x609d("0x1e0")],t[A],t[A+1],I),(!n||g<n)&&(n=g);if(n>_[_0x609d("0x421")])return;r[_0x609d("0x1a")]({node:d,distance:n})}if(_.nodeType==esmap[_0x609d("0x1e9")].FACILITY){if((n=esmap[_0x609d("0x636")][_0x609d("0x637")](a,_[_0x609d("0x1e0")],d[_0x609d("0x1e0")]))>_.radius)return;r[_0x609d("0x1a")]({node:d,distance:n})}}return!0}))}return r[_0x609d("0x21")]>0&&(r.sort(function(x,d){return x[_0x609d("0x638")]-d[_0x609d("0x638")]}),t=r[_0x609d("0xbc")](function(x){return x[_0x609d("0x4f")]})),e&&e(t),t},I[_0x609d("0x55e")]=function(){var x=new(THREE[_0x609d("0x639")]);return x[_0x609d("0x63a")]="anonymous",function(d,_,e,t){return x[_0x609d("0x49e")](d,_,e,t)}}(),I[_0x609d("0x55c")]=function(x,d,_,e){d=d||_0x609d("0x186"),_=_||_0x609d("0x3a1"),Object[_0x609d("0x372")](x,{x:{get:function(){var x=esmap[_0x609d("0x164")][_0x609d("0x165")][_0x609d("0x27d")].x;return x-this[d].x},set:function(x){var _=esmap[_0x609d("0x164")][_0x609d("0x165")].center.x;this[d].x=_-x}},y:{get:function(){var x=esmap[_0x609d("0x164")][_0x609d("0x165")][_0x609d("0x27d")].y;return this[d].z+x},set:function(x){var _=esmap.ESMap[_0x609d("0x165")][_0x609d("0x27d")].y;this[d].z=x-_}},height:e||{get:function(){return this[_]},set:function(x){this[_]=x}}})},d[_0x609d("0x92")]=I},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),t=function(){function x(d){_(this,x),this[_0x609d("0x173")]=null,this[_0x609d("0x137")]=null,this[_0x609d("0x149")]=null,this.cameraOrtho=null,this[_0x609d("0x250")]=null,this[_0x609d("0x339")]=esmap[_0x609d("0x197")][_0x609d("0x347")]().isPC,this.map_=d,esmap[_0x609d("0x134")][_0x609d("0x165")]||(esmap.ESMapView.instance=this)}return e(x,[{key:_0x609d("0x135"),value:function(){var x=this;this[_0x609d("0x130")]=this[_0x609d("0x356")][_0x609d("0x132")].container;try{this[_0x609d("0x250")]=new(THREE[_0x609d("0x63b")])({antialias:!0,precision:_0x609d("0x63c"),alpha:!0}),this[_0x609d("0x250")][_0x609d("0x63d")]=!1}catch(x){return(new(esmap[_0x609d("0x63e")]))[_0x609d("0x4ab")](this[_0x609d("0x130")]),!1}this.renderer[_0x609d("0x2ad")](16777215),this.renderer[_0x609d("0x63f")](window[_0x609d("0x640")]),this[_0x609d("0x250")][_0x609d("0x641")]=!1,this[_0x609d("0x250")][_0x609d("0x642")][_0x609d("0xbe")]=!0,this.renderer[_0x609d("0x642")][_0x609d("0x4")]=THREE[_0x609d("0x643")],this.map_[_0x609d("0x132")].perspective&&this[_0x609d("0x250")][_0x609d("0x644")](0),this.canvas_=this.renderer[_0x609d("0x253")],this[_0x609d("0x130")].appendChild(this.canvas_);var d=this.container_[_0x609d("0x40e")],_=this.container_[_0x609d("0x328")];this[_0x609d("0x137")]=new(THREE[_0x609d("0x4bc")])(35,d/_,2,2e4),this[_0x609d("0x173")]=new(THREE[_0x609d("0x645")]),this[_0x609d("0x28a")]=new(THREE[_0x609d("0x646")])(-d/2,d/2,-_/2,_/2,1,1e5),this[_0x609d("0x28a")][_0x609d("0x227")][_0x609d("0x100")](-Math.PI/2,0,0,_0x609d("0x3a0")),this.cameraTop[_0x609d("0x647")]=!1,this.cameraTop[_0x609d("0x186")][_0x609d("0x100")](0,1e5,0),this.composer=new(esmap[_0x609d("0x648")])(this[_0x609d("0x356")]),
this[_0x609d("0x53f")]=new(THREE[_0x609d("0x646")])(-d/2,d/2,_/2,-_/2,1,10),this[_0x609d("0x53f")][_0x609d("0x186")][_0x609d("0x41b")](10),this[_0x609d("0x149")]=new(THREE[_0x609d("0x645")]),this.ambientLight=new(THREE[_0x609d("0x649")])(7829367),this[_0x609d("0x173")][_0x609d("0x82")](this[_0x609d("0x64a")]),this[_0x609d("0x64b")]=new(THREE[_0x609d("0x64c")])(8947848,1.4),this[_0x609d("0x64b")][_0x609d("0x186")].set(1,1,1)[_0x609d("0x287")](),this[_0x609d("0x64b")][_0x609d("0x23d")].position[_0x609d("0x23c")](new THREE.Vector3),this[_0x609d("0x173")][_0x609d("0x82")](this[_0x609d("0x64b")]);var e=new(THREE[_0x609d("0x64c")])(0,.1);return this[_0x609d("0x173")][_0x609d("0x82")](e),e[_0x609d("0x59f")]=this.map_[_0x609d("0x132")].shadowEnabled,e[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x64e")]=.1,e[_0x609d("0x64d")].camera[_0x609d("0x64f")]=2e3,e.shadow.mapSize.set(this[_0x609d("0x356")].options[_0x609d("0x522")],this[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x522")]),e[_0x609d("0x64d")][_0x609d("0x650")]=1e-4,this[_0x609d("0x2b1")]=e,this[_0x609d("0x651")]=this.map_[_0x609d("0x132")][_0x609d("0x2b2")],this[_0x609d("0x652")]=this[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x2b4")],Object[_0x609d("0x372")](this,{shadowAngleX:{get:function(){return this[_0x609d("0x651")]},set:function(x){this._shadowAngleX=x,this[_0x609d("0x24a")]()}},shadowAngleY:{get:function(){return this[_0x609d("0x652")]},set:function(x){this._shadowAngleY=x,this[_0x609d("0x24a")]()}}}),x[_0x609d("0x356")].on(_0x609d("0x22b"),function(){var d=Math[_0x609d("0x47a")](x[_0x609d("0x356")].maxX-x[_0x609d("0x356")][_0x609d("0x220")],x.map_.maxY-x[_0x609d("0x356")][_0x609d("0x222")])/2;e[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x283")]=d,e[_0x609d("0x64d")][_0x609d("0x137")].bottom=-d,e[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x282")]=d,e[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x281")]=-d,e[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x285")](),x[_0x609d("0x24a")]()}),this[_0x609d("0x653")]=new(THREE[_0x609d("0x64c")])(3355443),this[_0x609d("0x653")][_0x609d("0x186")][_0x609d("0x100")](-1,.5,-1)[_0x609d("0x287")](),this[_0x609d("0x173")].add(this[_0x609d("0x653")]),!0}},{key:"updateShadowPostion",value:function(x){x||(x=this.shadowLight[_0x609d("0x64d")][_0x609d("0x137")][_0x609d("0x283")]/1.5),this[_0x609d("0x654")]=new(THREE[_0x609d("0x1b1")])(1,0,0),this[_0x609d("0x654")][_0x609d("0x655")](new(THREE[_0x609d("0x4c3")])(0,this[_0x609d("0x652")]*THREE[_0x609d("0x1bb")][_0x609d("0x23f")],this[_0x609d("0x651")]*THREE[_0x609d("0x1bb")][_0x609d("0x23f")],_0x609d("0x656"))),this[_0x609d("0x64b")][_0x609d("0x186")][_0x609d("0x23c")](this[_0x609d("0x654")]),this[_0x609d("0x2b1")][_0x609d("0x186")][_0x609d("0x23c")](this[_0x609d("0x356")].controls[_0x609d("0x23d")][_0x609d("0x1a8")]().add(this[_0x609d("0x654")].multiplyScalar(x))),this.shadowLight[_0x609d("0x23d")][_0x609d("0x186")][_0x609d("0x23c")](this[_0x609d("0x356")][_0x609d("0x13a")].target),this.shadowLight.lookAt(this[_0x609d("0x2b1")][_0x609d("0x23d")])}},{key:_0x609d("0x236"),value:function(x){var d=this[_0x609d("0x130")][_0x609d("0x40e")],_=this[_0x609d("0x130")][_0x609d("0x328")];return x||d!=this.w_||_!=this.h_?{w:d,h:_}:null}},{key:_0x609d("0x237"),value:function(x,d){this.w_2_=x/2,this[_0x609d("0x261")]=d/2,this[_0x609d("0x33a")][_0x609d("0x344")](x,d),this[_0x609d("0x250")][_0x609d("0x346")](x,d),this[_0x609d("0x137")][_0x609d("0x61b")]=x/d,this[_0x609d("0x137")].updateProjectionMatrix();var _=esmap.ESMapUtil.getOrthoCameraSizeByPerspectiveCamera(this[_0x609d("0x137")],this[_0x609d("0x356")][_0x609d("0x13a")]);this.cameraTop.left=-_[_0x609d("0x282")],this[_0x609d("0x28a")][_0x609d("0x282")]=_[_0x609d("0x282")],this[_0x609d("0x28a")][_0x609d("0x283")]=_[_0x609d("0x283")],this[_0x609d("0x28a")][_0x609d("0x284")]=-_[_0x609d("0x283")],this[_0x609d("0x28a")][_0x609d("0x285")](),this.cameraOrtho[_0x609d("0x281")]=-this.w_2_,this.cameraOrtho[_0x609d("0x282")]=this[_0x609d("0x25e")],this[_0x609d("0x53f")][_0x609d("0x283")]=this[_0x609d("0x261")],this[_0x609d("0x53f")][_0x609d("0x284")]=-this.h_2_,this[_0x609d("0x53f")][_0x609d("0x285")](),this.w_=this[_0x609d("0x130")][_0x609d("0x40e")],this.h_=this[_0x609d("0x130")][_0x609d("0x328")]}},{key:_0x609d("0x234"),value:function(x){this[_0x609d("0x250")][_0x609d("0x175")](),"3d"==x?this.composer[_0x609d("0x234")]():this[_0x609d("0x33a")][_0x609d("0x343")](),this[_0x609d("0x250")][_0x609d("0x657")](),this[_0x609d("0x250")][_0x609d("0x234")](this.sceneOrtho,this[_0x609d("0x53f")])}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function e(x,d){if(!x)throw new ReferenceError(_0x609d("0x34d"));return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function t(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function, not "+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e.configurable=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=function(x){function d(x,t){_(this,d);var i=e(this,(d[_0x609d("0x350")]||Object[_0x609d("0x351")](d)).call(this,x));return i[_0x609d("0x565")]=t,i[_0x609d("0x658")]=!1,i[_0x609d("0x659")]=!1,i[_0x609d("0x65a")]=null,i[_0x609d("0x65b")]=null,i}return t(d,x),i(d,[{key:_0x609d("0x65c"),value:function(){this[_0x609d("0x194")][_0x609d("0x19b")]=new(THREE[_0x609d("0x196")])(this[_0x609d("0x565")][_0x609d("0x5e8")])}},{key:_0x609d("0x65d"),value:function(x){var d=void 0==x?this[_0x609d("0x565")][_0x609d("0x5f1")]:x;this.material[_0x609d("0x19b")]=new(THREE[_0x609d("0x196")])(d)}},{key:"selectedColor",set:function(x){x=new(THREE[_0x609d("0x196")])(x),this[_0x609d("0x65d")](x)},get:function(){return this[_0x609d("0x65b")]?this[_0x609d("0x65b")][_0x609d("0x19b")]:this[_0x609d("0x565")].selectedColor_}}]),d}(THREE[_0x609d("0x3d2")]);d[_0x609d("0x92")]=n},function(x,d){_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var _=function(x){Object[_0x609d("0x348")](this,{type:_0x609d("0x3ba"),width:128,height:128,color:"#ff0000",arrowHeightPercent:.4,arrowWidthPercent:.7,arrowPercent:.1,lineType:null,dashArray:[2,1],godHeightPercent:.5,godEdgePercent:.2,godArrowPercent:.3,godColor:_0x609d("0x65e"),godEdgeColor:_0x609d("0x65f"),godArrowColor:_0x609d("0x660"),godArrowXScale:.6,godArrowWidthPercent:.07},x),this[_0x609d("0x3e5")]={offset:0},this.ctx=document[_0x609d("0x2")](_0x609d("0x2ee"))[_0x609d("0x480")]("2d"),this[_0x609d("0xc6")]()};_[_0x609d("0x1b")]={constructor:_,get"canvas"(){return this.ctx[_0x609d("0x2ee")]},update:function(x){var d=this;switch(Object[_0x609d("0x348")](d,x),d[_0x609d("0x661")](),d[_0x609d("0x10d")][_0x609d("0x2ee")][_0x609d("0x2bb")]=d[_0x609d("0x2bb")],d.ctx[_0x609d("0x2ee")][_0x609d("0x185")]=d.height,d[_0x609d("0x4")]){case _0x609d("0x3ba"):d[_0x609d("0x662")]();break;case _0x609d("0x3bd"):d[_0x609d("0x663")]();break;case _0x609d("0x3bf"):d[_0x609d("0x664")]()}},_doColor:function(){var x=this,d=["color",_0x609d("0x665"),_0x609d("0x666"),"godArrowColor"];d[_0x609d("0xc1")](function(d){"number"==typeof x[d]&&(x[d]=esmap[_0x609d("0x191")][_0x609d("0x1b")][_0x609d("0x3b9")](x[d]))})},_setMaterialInfo:function(){var x=this;x[_0x609d("0x3e5")].offset=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](arguments,0,0),x[_0x609d("0x3e5")][_0x609d("0x3e6")]=esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](arguments,1,0)},_drawNormal:function(){var x=this,d=x[_0x609d("0x3c1")][_0x609d("0x3c4")](function(x,d){return x+d}),_=0;x[_0x609d("0x3c1")].forEach(function(e,t){t%2==0&&(x[_0x609d("0x10d")].fillStyle=x[_0x609d("0x19b")],x[_0x609d("0x10d")][_0x609d("0x497")](_/d*x[_0x609d("0x2bb")],0,e/d*x[_0x609d("0x2bb")],x[_0x609d("0x185")])),_+=e}),x[_0x609d("0x667")](0)},_drawArrow:function(){var x=this,d=(1-x[_0x609d("0x668")])*x.height/2,_=x.height*x[_0x609d("0x668")];x[_0x609d("0x10d")][_0x609d("0x335")](),x[_0x609d("0x10d")].moveTo(0,d);var e=x[_0x609d("0x2bb")]*(x[_0x609d("0x669")]-x[_0x609d("0x66a")]);x.ctx[_0x609d("0x5b2")](e,d),x[_0x609d("0x10d")][_0x609d("0x5b2")](x.width*x[_0x609d("0x669")],d+_/2),x[_0x609d("0x10d")][_0x609d("0x5b2")](e,d+_),x[_0x609d("0x10d")].lineTo(0,d+_),x.ctx[_0x609d("0x5b2")](x[_0x609d("0x2bb")]*x[_0x609d("0x66a")],d+_/2),x[_0x609d("0x10d")][_0x609d("0x488")](),x.ctx[_0x609d("0x496")]=x[_0x609d("0x19b")],x[_0x609d("0x10d")][_0x609d("0x489")](),x[_0x609d("0x667")](-.25,2)},_drawGodArrow:function(){var x=this;x[_0x609d("0x10d")][_0x609d("0x496")]=x[_0x609d("0x666")],x[_0x609d("0x10d")].fillRect(0,(1-x[_0x609d("0x66b")])*x[_0x609d("0x185")]/2,x.width,x[_0x609d("0x66b")]*x[_0x609d("0x185")]),x[_0x609d("0x10d")][_0x609d("0x496")]=x[_0x609d("0x19b")];var d=(1-x.godHeightPercent+x[_0x609d("0x66c")])*x[_0x609d("0x185")]/2,_=(x[_0x609d("0x66b")]-x[_0x609d("0x66c")])*x[_0x609d("0x185")];x[_0x609d("0x10d")][_0x609d("0x497")](0,d,x[_0x609d("0x2bb")],_),x[_0x609d("0x10d")][_0x609d("0x496")]=_0x609d("0x66d"),x[_0x609d("0x10d")].shadowOffsetX=-2,x[_0x609d("0x10d")][_0x609d("0x66e")]=2,x.ctx[_0x609d("0x486")]=4,x[_0x609d("0x10d")][_0x609d("0x483")]="rgba(0,0,0,0.5)";var e={x:x[_0x609d("0x2bb")]/2,y:x[_0x609d("0x185")]/2},t=x.width*x[_0x609d("0x66f")],i=x[_0x609d("0x2bb")]*x[_0x609d("0x670")],n=x[_0x609d("0x2bb")]*(x.godArrowPercent-x[_0x609d("0x670")])*x[_0x609d("0x671")],g=e.x-t/2*x[_0x609d("0x671")],a=e.y-t/2;x[_0x609d("0x10d")][_0x609d("0x335")](),x[_0x609d("0x10d")][_0x609d("0x336")](g,a),x[_0x609d("0x10d")][_0x609d("0x5b2")](g+i,a),x.ctx[_0x609d("0x5b2")](g+i+n,a+t/2),x[_0x609d("0x10d")][_0x609d("0x5b2")](g+i,a+t),x[_0x609d("0x10d")][_0x609d("0x5b2")](g,a+t),x.ctx[_0x609d("0x5b2")](g+n,a+t/2),x[_0x609d("0x10d")][_0x609d("0x488")](),x[_0x609d("0x10d")][_0x609d("0x496")]=x[_0x609d("0x672")],x[_0x609d("0x10d")][_0x609d("0x489")](),x[_0x609d("0x667")](-.25,2)}},d[_0x609d("0x92")]=_},function(x,d){!function(x,d,_){function e(e,t){this[_0x609d("0x20")]=e,this[_0x609d("0xbc")]=t,this[_0x609d("0x23d")]=new _.Vector3,this.minDistance=0,this[_0x609d("0x673")]=1/0,this[_0x609d("0x674")]=0,this[_0x609d("0x675")]=1/0,this[_0x609d("0x139")]=0,this.maxPolarAngle=Math.PI,this[_0x609d("0x676")]=-(1/0),this[_0x609d("0x677")]=1/0,this[_0x609d("0x678")]=!1,this[_0x609d("0x679")]=.25,this[_0x609d("0x158")];var i=this,n=1e-6;this[_0x609d("0x67a")]=n;var g,a,r=0,A=0,I=1,C=new(_[_0x609d("0x1b1")]),o=!1;this[_0x609d("0x28b")]=function(){return a},this.getAzimuthalAngle=function(){return g},this.rotateLeft=function(x){A-=x},this[_0x609d("0x67b")]=function(x){r-=x},this.panLeft=function(){var x=new(_[_0x609d("0x1b1")]);return function(d){var _=this[_0x609d("0x20")][_0x609d("0x618")][_0x609d("0x67c")];x[_0x609d("0x100")](_[0],_[1],_[2]),x[_0x609d("0x288")](-d),C[_0x609d("0x82")](x)}}(),this.panUp=function(){var x=new(_[_0x609d("0x1b1")]);return function(d){var _=this[_0x609d("0x20")][_0x609d("0x618")][_0x609d("0x67c")];x[_0x609d("0x100")](_[4],0,_[6]),x[_0x609d("0x287")](),x[_0x609d("0x288")](d),C[_0x609d("0x82")](x)}}(),this.pan=function(x,d,e,t){if(i[_0x609d("0x20")]instanceof _[_0x609d("0x4bc")]){var n=i.object[_0x609d("0x186")],g=n[_0x609d("0x1a8")]()[_0x609d("0x246")](i[_0x609d("0x23d")]),a=g[_0x609d("0x21")]();a*=Math[_0x609d("0x61c")](i.object[_0x609d("0x61a")]/2*Math.PI/180),i[_0x609d("0x67d")](2*x*a/t),i.panUp(2*d*a/t)}else i[_0x609d("0x20")]instanceof _.OrthographicCamera?(i[_0x609d("0x67d")](x*(i[_0x609d("0x20")][_0x609d("0x282")]-i[_0x609d("0x20")][_0x609d("0x281")])/e/i[_0x609d("0x20")][_0x609d("0x280")]),i[_0x609d("0x67e")](d*(i[_0x609d("0x20")].top-i[_0x609d("0x20")][_0x609d("0x284")])/t/i[_0x609d("0x20")][_0x609d("0x280")])):console[_0x609d("0x37c")]("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.__lastScaleLevel=-1,this[_0x609d("0x276")]=function(){var x;return x=i[_0x609d("0x20")]instanceof _[_0x609d("0x4bc")]?i.getDistance()/i[_0x609d("0x67f")]:i.object[_0x609d("0x283")]/i[_0x609d("0x20")][_0x609d("0x280")]/i[_0x609d("0x680")]},this[_0x609d("0x273")]=function(){for(var x=(i[_0x609d("0x681")](),i.getScaleRate()),d=0;d<this[_0x609d("0xbc")][_0x609d("0x159")][_0x609d("0x21")];d++)if(x<this.map[_0x609d("0x159")][d])return d-1;return d-1},this[_0x609d("0x1b8")]=function(d,e){e=e||{};var t=e[_0x609d("0x682")]?d:i.map[_0x609d("0x159")][d];t=_[_0x609d("0x1bb")][_0x609d("0x1bc")](t,i[_0x609d("0xbc")].scaleLevels_[0],i[_0x609d("0xbc")][_0x609d("0x159")][i[_0x609d("0xbc")][_0x609d("0x159")][_0x609d("0x21")]-1]);var n,g;e=e||{},e[_0x609d("0x128")]=void 0==e[_0x609d("0x128")]?.3:e[_0x609d("0x128")],n=i[_0x609d("0x276")](),g=t-n,clearInterval(this[_0x609d("0x683")]),i[_0x609d("0x683")]=x[_0x609d("0x12c")][_0x609d("0x248")](e[_0x609d("0x128")],function(x){i[_0x609d("0x274")](n+g*x,1!=x),i.checkScaleLevel()},null,e.callback)},this[_0x609d("0x684")]=function(){this[_0x609d("0xbc")][_0x609d("0x152")][_0x609d("0x22a")]();var x=this.getCurrentScaleLevel();x!=this.__lastScaleLevel&&(this[_0x609d("0x685")]=x,x>-1&&this[_0x609d("0x10c")](_0x609d("0x1eb"),x))},this[_0x609d("0x686")]=function(x){if(this[_0x609d("0xbc")][_0x609d("0x15a")]=this[_0x609d("0x273")](),i.object instanceof _[_0x609d("0x4bc")])I/=x;else if(i[_0x609d("0x20")]instanceof _.OrthographicCamera){var d=this[_0x609d("0x20")][_0x609d("0x280")]*x,e=i.map.mapView.cameraTop[_0x609d("0x283")],t=e/d;t<i[_0x609d("0x687")].max&&(i[_0x609d("0x20")][_0x609d("0x280")]=d,i[_0x609d("0x20")][_0x609d("0x285")](),o=!0)}this[_0x609d("0x684")]()},this.dollyOut=function(x){if(this[_0x609d("0xbc")][_0x609d("0x15a")]=this.getCurrentScaleLevel(),i[_0x609d("0x20")]instanceof _[_0x609d("0x4bc")])I*=x;else if(i[_0x609d("0x20")]instanceof _[_0x609d("0x646")]){var d=this[_0x609d("0x20")][_0x609d("0x280")]/x,e=i[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x28a")].top,t=e/d;t>i[_0x609d("0x687")][_0x609d("0x5b8")]&&(i.object[_0x609d("0x280")]=d,i[_0x609d("0x20")][_0x609d("0x285")](),o=!0)}this.checkScaleLevel()},this[_0x609d("0x681")]=function(){return i[_0x609d("0xbc")].mapView[_0x609d("0x137")][_0x609d("0x186")][_0x609d("0x1a8")]()[_0x609d("0x246")](i[_0x609d("0x23d")])[_0x609d("0x21")]()},this[_0x609d("0x67f")]=null,this[_0x609d("0x1be")]=function(x){return this[_0x609d("0x67f")]&&!x||(i[_0x609d("0x67f")]=this[_0x609d("0x681")](),i[_0x609d("0x680")]=d[_0x609d("0x197")].getOrthoCameraSizeByPerspectiveCamera(i[_0x609d("0xbc")].mapView.camera,i,i[_0x609d("0x67f")])[_0x609d("0x283")]),i[_0x609d("0x67f")]},this[_0x609d("0x274")]=function(x,e){var t=i[_0x609d("0xbc")][_0x609d("0x12f")].camera,n=(i.map[_0x609d("0x12f")].cameraTop,t.position[_0x609d("0x1a8")]()[_0x609d("0x246")](i[_0x609d("0x23d")])[_0x609d("0x287")]());n.multiplyScalar(this[_0x609d("0x67f")]*x);var g=i[_0x609d("0x23d")][_0x609d("0x1a8")]()[_0x609d("0x82")](n);if(i[_0x609d("0x20")]instanceof _[_0x609d("0x4bc")])t[_0x609d("0x186")][_0x609d("0x23c")](g);else if(i[_0x609d("0x20")]instanceof _[_0x609d("0x646")]){var a=g[_0x609d("0x50a")](i[_0x609d("0x23d")]),r=d.ESMapUtil[_0x609d("0x612")](t,i,a),A=i.object[_0x609d("0x283")]/r[_0x609d("0x283")];i[_0x609d("0x20")][_0x609d("0x280")]=A,i[_0x609d("0x20")][_0x609d("0x285")]()}e||(this.__lastScaleLevel=this.getCurrentScaleLevel())};var s,c,u,f,l,h=!0;this[_0x609d("0x688")]=function(x){h=!1,c=s*x[_0x609d("0x638")],l=i[_0x609d("0x20")].zoom*(1/x[_0x609d("0x638")]),u=a+x[_0x609d("0x689")],f=g+x[_0x609d("0x68a")]},this[_0x609d("0x68b")]=function(x,d,e,t,n){if(t&&(s=c/x[_0x609d("0x638")]),i[_0x609d("0x20")]instanceof _[_0x609d("0x646")]){var r=l/(1/x[_0x609d("0x638")]),A=i.map[_0x609d("0x12f")][_0x609d("0x28a")].top,I=A/r;I>i[_0x609d("0x687")][_0x609d("0x5b8")]&&I<i[_0x609d("0x687")][_0x609d("0x47a")]&&(i.object[_0x609d("0x280")]=r,i[_0x609d("0x20")][_0x609d("0x285")](),o=!0)}n&&(d&&(a=u-x[_0x609d("0x689")]),e&&(g=f-x.theta))},this[_0x609d("0x68c")]=function(){h=!0};var b=0;this[_0x609d("0x68d")]=function(){b=a,a=0},this.popPhi_=function(){return a=b},this[_0x609d("0xc6")]=function(x){var d=new(_[_0x609d("0x1b1")]),t=(new(_[_0x609d("0x4c4")]))[_0x609d("0x68e")](e.up,new _.Vector3(0,1,0)),c=t.clone()[_0x609d("0x68f")](),u=new(_[_0x609d("0x1b1")]),f=new(_[_0x609d("0x4c4")]);return function(x){var e=this[_0x609d("0x20")][_0x609d("0x186")];d[_0x609d("0x23c")](e)[_0x609d("0x246")](this[_0x609d("0x23d")]),d.applyQuaternion(t),h&&(g=Math[_0x609d("0x690")](d.x,d.z),a=Math.atan2(Math[_0x609d("0x21e")](d.x*d.x+d.z*d.z),d.y),g+=A,a+=r),g=Math[_0x609d("0x47a")](this[_0x609d("0x676")],Math[_0x609d("0x5b8")](this[_0x609d("0x677")],g)),x&&(x.hasOwnProperty(_0x609d("0x691"))&&(a=x[_0x609d("0x691")],r=0),x[_0x609d("0x1c")](_0x609d("0x692"))&&(g=x[_0x609d("0x692")],A=0)),a=Math[_0x609d("0x47a")](this[_0x609d("0x139")],Math[_0x609d("0x5b8")](this[_0x609d("0x13b")],a)),a=Math.max(n,Math[_0x609d("0x5b8")](Math.PI-n,a)),h&&(s=d[_0x609d("0x21")]()*I),s=Math[_0x609d("0x47a")](this.minDistance,Math.min(this[_0x609d("0x673")],s));var l=this[_0x609d("0x23d")][_0x609d("0x1a8")](),b=this.map[_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")][_0x609d("0x1a8")]();h&&(b[_0x609d("0x82")](C),l[_0x609d("0x82")](C),I=1,C[_0x609d("0x100")](0,0,0)),d.x=s*Math[_0x609d("0x422")](a)*Math[_0x609d("0x422")](g),d.y=s*Math[_0x609d("0x506")](a),d.z=s*Math[_0x609d("0x422")](a)*Math[_0x609d("0x506")](g),d[_0x609d("0x693")](c);var p=d[_0x609d("0x82")](l);return(void 0===this[_0x609d("0x158")]||this.validRange_(p,l[_0x609d("0x1a8")]()))&&(i[_0x609d("0x20")]instanceof _[_0x609d("0x646")]?(e[_0x609d("0x23c")](p),this[_0x609d("0x23d")][_0x609d("0x23c")](l),this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")][_0x609d("0x23c")](b),this[_0x609d("0x20")].up=new(_[_0x609d("0x1b1")])(Math[_0x609d("0x422")](g),0,Math[_0x609d("0x506")](g)),this.object[_0x609d("0x4bf")](this[_0x609d("0x23d")])):(e[_0x609d("0x23c")](p),this[_0x609d("0x23d")][_0x609d("0x23c")](l),this.object[_0x609d("0x4bf")](this[_0x609d("0x23d")]))),this[_0x609d("0x678")]===!0?(A*=1-this[_0x609d("0x679")],r*=1-this[_0x609d("0x679")]):(A=0,r=0),!!(o||u[_0x609d("0x694")](this[_0x609d("0x20")].position)>n||8*(1-f[_0x609d("0x3ee")](this[_0x609d("0x20")][_0x609d("0x3f0")]))>n)&&(u[_0x609d("0x23c")](this[_0x609d("0x20")][_0x609d("0x186")]),f[_0x609d("0x23c")](this[_0x609d("0x20")][_0x609d("0x3f0")]),o=!1,!0)}}(),x[_0x609d("0x133")][_0x609d("0x358")](this)}x[_0x609d("0x136")]=function(x,t,i){function n(x,d){var _=b[_0x609d("0x253")]===document?b[_0x609d("0x253")][_0x609d("0x8b")]:b.domElement;h[_0x609d("0x695")](x,d,_[_0x609d("0x40e")],_.clientHeight)}function g(){return 2*Math.PI/60/60*b[_0x609d("0x696")]}function a(x){return void 0===x?Math[_0x609d("0x113")](.95,b[_0x609d("0x697")]):Math.pow(.95,b[_0x609d("0x697")]*x)}function r(x){if(b[_0x609d("0xbe")]!==!1){if(x[_0x609d("0x310")](),x[_0x609d("0x451")]===b[_0x609d("0x698")][_0x609d("0x699")]){if(b[_0x609d("0x69a")]===!1)return;O=R[_0x609d("0x69b")],p[_0x609d("0x100")](x[_0x609d("0x69c")],x[_0x609d("0x55a")])}else if(x.button===b[_0x609d("0x698")][_0x609d("0x69d")]){if(b[_0x609d("0x402")]===!1)return;O=R[_0x609d("0x69e")],k.set(x[_0x609d("0x69c")],x[_0x609d("0x55a")])}else if(x[_0x609d("0x451")]===b[_0x609d("0x698")][_0x609d("0x69f")]){if(b.enablePan===!1)return;O=R[_0x609d("0x69f")],y[_0x609d("0x100")](x[_0x609d("0x69c")],x[_0x609d("0x55a")])}O!==R.NONE&&(document.addEventListener(_0x609d("0x538"),A,!1),document[_0x609d("0x14a")](_0x609d("0x539"),I,!1),b.dispatchEvent(L))}}function A(x){if(b[_0x609d("0xbe")]!==!1){x[_0x609d("0x310")]();var d=b[_0x609d("0x253")]===document?b[_0x609d("0x253")][_0x609d("0x8b")]:b[_0x609d("0x253")];if(O===R[_0x609d("0x69b")]){if(b[_0x609d("0x69a")]===!1)return;v[_0x609d("0x100")](x[_0x609d("0x69c")],x[_0x609d("0x55a")]),m.subVectors(v,p),b.enableGestureRotate&&h[_0x609d("0x6a0")](2*Math.PI*m.x/d[_0x609d("0x40e")]*b[_0x609d("0x6a1")]),b[_0x609d("0x400")]&&h[_0x609d("0x67b")](2*Math.PI*m.y/d.clientHeight*b[_0x609d("0x6a1")]),p[_0x609d("0x23c")](v)}else if(O===R.DOLLY){if(b[_0x609d("0x402")]===!1)return;S.set(x[_0x609d("0x69c")],x[_0x609d("0x55a")]),T[_0x609d("0x6a2")](S,k),T.y>0?h[_0x609d("0x686")](a()):T.y<0&&h[_0x609d("0x6a3")](a()),k[_0x609d("0x23c")](S)}else if(O===R.PAN){if(b[_0x609d("0x6a4")]===!1)return;w[_0x609d("0x100")](x[_0x609d("0x69c")],x[_0x609d("0x55a")]),E[_0x609d("0x6a2")](w,y),n(E.x,E.y),y[_0x609d("0x23c")](w)}O!==R[_0x609d("0x1ea")]&&b.update()}}function I(){b[_0x609d("0xbe")]!==!1&&(document[_0x609d("0x6a5")](_0x609d("0x538"),A,!1),document[_0x609d("0x6a5")]("mouseup",I,!1),b.dispatchEvent(P),O=R[_0x609d("0x1ea")])}function C(x){if(b[_0x609d("0xbe")]!==!1&&b[_0x609d("0x402")]!==!1&&O===R[_0x609d("0x1ea")]){x[_0x609d("0x310")](),x[_0x609d("0x6a6")]();var d=0;void 0!==x[_0x609d("0x314")]?d=x[_0x609d("0x314")]:void 0!==x[_0x609d("0x315")]&&(d=-x.detail),d>0?h[_0x609d("0x6a3")](a()):d<0&&h[_0x609d("0x686")](a()),b.update(),b[_0x609d("0x333")](L),b[_0x609d("0x333")](P)}}function o(x){if(b[_0x609d("0xbe")]!==!1&&b[_0x609d("0x6a7")]!==!1&&b[_0x609d("0x6a4")]!==!1)switch(x[_0x609d("0x6a8")]){case b[_0x609d("0x3e")].UP:n(0,b[_0x609d("0x6a9")]),b[_0x609d("0xc6")]();break;case b[_0x609d("0x3e")][_0x609d("0x6aa")]:n(0,-b[_0x609d("0x6a9")]),b[_0x609d("0xc6")]();break;case b.keys[_0x609d("0x6ab")]:n(b[_0x609d("0x6a9")],0),b.update();break;case b[_0x609d("0x3e")][_0x609d("0x6ac")]:n(-b[_0x609d("0x6a9")],0),b[_0x609d("0xc6")]()}}function s(x){if(b[_0x609d("0xbe")]!==!1){switch(x.touches[_0x609d("0x21")]){case 1:if(b[_0x609d("0x6a4")]===!1)return;O=R[_0x609d("0x6ad")],y[_0x609d("0x100")](x.touches[0][_0x609d("0x30e")],x[_0x609d("0x30d")][0][_0x609d("0x30f")]);break;case 2:if(b[_0x609d("0x402")]===!1&&b[_0x609d("0x69a")]===!1)return;O=R[_0x609d("0x6ae")];var d=b[_0x609d("0x253")]===document?b[_0x609d("0x253")][_0x609d("0x8b")]:b[_0x609d("0x253")];h.begin_(f(x.touches,d.clientWidth,d[_0x609d("0x328")],!0,b.enableZoom,b[_0x609d("0x69a")]));break;default:O=R[_0x609d("0x1ea")]}O!==R[_0x609d("0x1ea")]&&b[_0x609d("0x333")](L)}}function c(x){if(b[_0x609d("0xbe")]!==!1){x[_0x609d("0x310")](),x[_0x609d("0x6a6")]();var d=b[_0x609d("0x253")]===document?b[_0x609d("0x253")][_0x609d("0x8b")]:b[_0x609d("0x253")];switch(x[_0x609d("0x30d")][_0x609d("0x21")]){case 1:if(b[_0x609d("0x6a4")]===!1)return;if(O!==R[_0x609d("0x6ad")])return;w[_0x609d("0x100")](x[_0x609d("0x30d")][0][_0x609d("0x30e")],x[_0x609d("0x30d")][0][_0x609d("0x30f")]),E[_0x609d("0x6a2")](w,y),n(E.x,E.y),y[_0x609d("0x23c")](w),b[_0x609d("0xc6")]();break;case 2:if(O!==R[_0x609d("0x6ae")])return;h[_0x609d("0x68b")](f(x[_0x609d("0x30d")],d[_0x609d("0x40e")],d[_0x609d("0x328")]),b[_0x609d("0x400")],b.enableGestureRotate,b[_0x609d("0x402")],b[_0x609d("0x69a")]),b[_0x609d("0xbc")][_0x609d("0x224")]&&b[_0x609d("0xbc")][_0x609d("0x152")]&&b[_0x609d("0xbc")][_0x609d("0x152")][_0x609d("0x22a")](),b[_0x609d("0xc6")]();break;default:O=R.NONE}}}function u(){b[_0x609d("0xbe")]!==!1&&(b[_0x609d("0x333")](P),O=R[_0x609d("0x1ea")],h[_0x609d("0x68c")]())}function f(x,d,e,t){var i={},n=new(_[_0x609d("0x50c")])(x[0].pageX,x[0][_0x609d("0x30f")]),g=new(_[_0x609d("0x50c")])(x[1][_0x609d("0x30e")],x[1][_0x609d("0x30f")]),a=g[_0x609d("0x1a8")]()[_0x609d("0x246")](n),r=Math.PI*(n.y+g.y)/2/e;j||(j=r),Math[_0x609d("0x124")](r-j)>.01?(j=i.phi=r,z=!0):(z=!1,i[_0x609d("0x689")]=j);var A=a[_0x609d("0x21")]();D||(D=A);var I=Math.sign(A-D);I!=F?Math[_0x609d("0x124")](A/D-1)>b[_0x609d("0xbc")][_0x609d("0x132")][_0x609d("0x524")]?(F=I,i.distance=A):i[_0x609d("0x638")]=D:i[_0x609d("0x638")]=A,D=i[_0x609d("0x638")];var C=(new(_[_0x609d("0x50c")])(1,0),-a.angle());t&&(Y=0),N||(N=C);var o=C-N,s=Math.sign(o);return s!=H?Math.abs(o)>b[_0x609d("0xbc")][_0x609d("0x132")][_0x609d("0x6af")]&&(!z||t)?(Y=0,i[_0x609d("0x68a")]=C-Y,H=s,N=C,Z=i[_0x609d("0x68a")]):i[_0x609d("0x68a")]=Z:(i[_0x609d("0x68a")]=C-Y,N=C,Z=i.theta),i}function l(x){x[_0x609d("0x310")]()}var h=new e(x,i);this.domElement=void 0!==t?t:document,this.map=i,this.constraint=h,this[_0x609d("0x28b")]=function(){return h[_0x609d("0x28b")]()},this.getAzimuthalAngle=function(){return h[_0x609d("0x22f")]()},this[_0x609d("0xbe")]=!0,this.center=this[_0x609d("0x23d")],this[_0x609d("0x402")]=!0,this[_0x609d("0x697")]=1,this.enableRotate=!0,this[_0x609d("0x6a1")]=1,this[_0x609d("0x6b0")]=!0,this[_0x609d("0x400")]=!0,this[_0x609d("0x6a4")]=!0,this[_0x609d("0x6a9")]=7,this[_0x609d("0x6b1")]=!1,this[_0x609d("0x696")]=2,this[_0x609d("0x6a7")]=!0,this[_0x609d("0x3e")]={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this[_0x609d("0x698")]={PAN:_[_0x609d("0x6b2")][_0x609d("0x6ab")],ZOOM:_[_0x609d("0x6b2")][_0x609d("0x6b3")],ORBIT:_[_0x609d("0x6b2")][_0x609d("0x6ac")]};var b=this,p=new(_[_0x609d("0x50c")]),v=new(_[_0x609d("0x50c")]),m=new(_[_0x609d("0x50c")]),y=(new(_[_0x609d("0x50c")]),new(_[_0x609d("0x50c")]),new(_[_0x609d("0x50c")])),w=new(_[_0x609d("0x50c")]),E=new(_[_0x609d("0x50c")]),k=new(_[_0x609d("0x50c")]),S=new(_[_0x609d("0x50c")]),T=new(_[_0x609d("0x50c")]),R={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5};R.TOUCH_ROTATE_DOLLY=34;var O=R[_0x609d("0x1ea")];this[_0x609d("0x6b4")]=this.target[_0x609d("0x1a8")](),this[_0x609d("0x6b5")]=this.object[_0x609d("0x186")][_0x609d("0x1a8")](),this[_0x609d("0x6b6")]=this[_0x609d("0x20")][_0x609d("0x280")];var M={type:_0x609d("0x6b7")},L={type:_0x609d("0xc3")},P={type:_0x609d("0x155")};this[_0x609d("0xc6")]=function(x){this.autoRotate&&O===R.NONE&&h[_0x609d("0x6a0")](g()),h.update(x)===!0&&(x&&x[_0x609d("0x6b8")]||this[_0x609d("0x333")](M))},this[_0x609d("0x1be")]=function(x,_,e){var t=this,n=h.initScaleLevel(e);t[_0x609d("0x6b9")]=n*x,t[_0x609d("0x6b9")]=t[_0x609d("0x6b9")]>i.options[_0x609d("0x521")]?i[_0x609d("0x132")][_0x609d("0x521")]:t[_0x609d("0x6b9")],t[_0x609d("0x673")]=n*_;var g=d[_0x609d("0x197")][_0x609d("0x612")](t.map.mapView.camera,t,t[_0x609d("0x6b9")]),a=d.ESMapUtil.getOrthoCameraSizeByPerspectiveCamera(t[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x137")],t,t[_0x609d("0x673")]);return h[_0x609d("0x687")]={min:g.top,max:a[_0x609d("0x283")]},n},this[_0x609d("0x274")]=function(x){h[_0x609d("0x274")](x),this.update()},this.reset=function(){O=R[_0x609d("0x1ea")],this[_0x609d("0x23d")][_0x609d("0x23c")](this[_0x609d("0x6b4")]),this[_0x609d("0x20")][_0x609d("0x186")][_0x609d("0x23c")](this[_0x609d("0x6b5")]),this[_0x609d("0x20")][_0x609d("0x280")]=this[_0x609d("0x6b6")],this[_0x609d("0x20")][_0x609d("0x285")](),this[_0x609d("0x333")](M),this[_0x609d("0xc6")]()},this[_0x609d("0x1c3")]=function(x){h.dollyOut(x||a()),b[_0x609d("0xc6")]()},this[_0x609d("0x1c4")]=function(x){h.dollyIn(x||a()),b[_0x609d("0xc6")]()},this[_0x609d("0x157")]=function(x){h.validRange_=x};var j,N=null,H=0,D=null,F=0,z=!1,Y=0,Z=0;this[_0x609d("0x24e")]=function(){this.domElement[_0x609d("0x6a5")]("contextmenu",l,!1),this[_0x609d("0x253")].removeEventListener("mousedown",r,!1),this.domElement[_0x609d("0x6a5")](_0x609d("0x6ba"),C,!1),this.domElement[_0x609d("0x6a5")](_0x609d("0x2ea"),C,!1),this[_0x609d("0x253")][_0x609d("0x6a5")](_0x609d("0x2eb"),s,!1),this[_0x609d("0x253")][_0x609d("0x6a5")](_0x609d("0x2ed"),u,!1),this[_0x609d("0x253")].removeEventListener(_0x609d("0x2ec"),c,!1),document[_0x609d("0x6a5")](_0x609d("0x538"),A,!1),document[_0x609d("0x6a5")]("mouseup",I,!1),window[_0x609d("0x6a5")](_0x609d("0x6bb"),o,!1)},this[_0x609d("0x253")].addEventListener(_0x609d("0x6bc"),l,!1),this.domElement.addEventListener(_0x609d("0x536"),r,!1),this[_0x609d("0x253")].addEventListener(_0x609d("0x6ba"),C,!1),this[_0x609d("0x253")][_0x609d("0x14a")](_0x609d("0x2ea"),C,!1),this[_0x609d("0x253")][_0x609d("0x14a")](_0x609d("0x2eb"),s,!1),this[_0x609d("0x253")][_0x609d("0x14a")](_0x609d("0x2ed"),u,!1),this.domElement[_0x609d("0x14a")]("touchmove",c,!1),window[_0x609d("0x14a")](_0x609d("0x6bb"),o,!1),this[_0x609d("0xc6")]()},x[_0x609d("0x136")][_0x609d("0x1b")]=Object.create(_[_0x609d("0x6bd")].prototype),x[_0x609d("0x136")].prototype[_0x609d("0x7c")]=x[_0x609d("0x136")],Object[_0x609d("0x372")](x[_0x609d("0x136")][_0x609d("0x1b")],{object:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x20")]}},target:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x23d")]},set:function(x){this.constraint[_0x609d("0x23d")][_0x609d("0x23c")](x)}},minDistance:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x6b9")]},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x6b9")]=x}},maxDistance:{get:function(){return this[_0x609d("0x1b9")].maxDistance},set:function(x){this[_0x609d("0x1b9")].maxDistance=x}},minZoom:{get:function(){return this[_0x609d("0x1b9")].minZoom},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x674")]=x}},maxZoom:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x675")]},set:function(x){this[_0x609d("0x1b9")].maxZoom=x}},minPolarAngle:{get:function(){return this[_0x609d("0x1b9")].minPolarAngle},set:function(x){this.constraint[_0x609d("0x139")]=x}},maxPolarAngle:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x13b")]},set:function(x){this.constraint[_0x609d("0x13b")]=x}},minAzimuthAngle:{get:function(){return this.constraint.minAzimuthAngle},set:function(x){this.constraint[_0x609d("0x676")]=x}},maxAzimuthAngle:{get:function(){return this.constraint[_0x609d("0x677")]},set:function(x){this.constraint[_0x609d("0x677")]=x}},enableDamping:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x678")]},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x678")]=x}},dampingFactor:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x679")]},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x679")]=x}},noZoom:{get:function(){return!this[_0x609d("0x402")]},set:function(x){this[_0x609d("0x402")]=!x}},noRotate:{get:function(){return!this[_0x609d("0x69a")]},set:function(x){this[_0x609d("0x69a")]=!x}},noPan:{get:function(){return!this[_0x609d("0x6a4")]},set:function(x){this.enablePan=!x}},noKeys:{get:function(){return!this[_0x609d("0x6a7")]},set:function(x){this[_0x609d("0x6a7")]=!x}},staticMoving:{get:function(){return!this[_0x609d("0x1b9")].enableDamping},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x678")]=!x}},dynamicDampingFactor:{get:function(){return this[_0x609d("0x1b9")][_0x609d("0x679")]},set:function(x){this[_0x609d("0x1b9")][_0x609d("0x679")]=x}}})}(em,esmap,THREE)},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,"__esModule",{value:!0});var e=function x(d,e){_(this,x),this.x=d,this.y=e};d[_0x609d("0x92")]=e},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e[_0x609d("0x7d")]||!1,e.configurable=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x278")]=new esmap.ESControlOptions(e),_0x609d("0x3ba")==this[_0x609d("0x278")][_0x609d("0x26c")]?(this.w_=42,this.h_=42,this[_0x609d("0x2be")]=10):(this.w_=32,this.h_=32,this[_0x609d("0x2be")]=8),this.x_=this[_0x609d("0x278")][_0x609d("0x1b3")].x,this.y_=this[_0x609d("0x278")].offset.y,this[_0x609d("0x2bf")]=!!this[_0x609d("0x278")][_0x609d("0x2bf")]&&this[_0x609d("0x278")][_0x609d("0x2bf")],this.showBtnCount=this[_0x609d("0x278")][_0x609d("0x2c0")]?this[_0x609d("0x278")][_0x609d("0x2c0")]:5,this[_0x609d("0x2c3")]=this[_0x609d("0x278")][_0x609d("0x186")]?this.options_.position:2,this.top_=20,this[_0x609d("0x302")]=10,this[_0x609d("0x2d1")]=10,this.change_=null,this.inited=!1,
this[_0x609d("0x2c6")]=_0x609d("0x2c7"),this[_0x609d("0x2c8")]=_0x609d("0x2c9"),this.defaultShadow_=_0x609d("0x42e"),this[_0x609d("0x2dd")]=_0x609d("0x2ca"),this.$=function(x){return document[_0x609d("0x2cb")](x)},this.touchPointX,this[_0x609d("0x2cd")],this[_0x609d("0x2ce")],this[_0x609d("0x2cf")],this.map=d,this[_0x609d("0x302")]=10,this.imgURL_=this[_0x609d("0x278")].imgURL,d&&this[_0x609d("0x135")](d)}return e(x,[{key:_0x609d("0x135"),value:function(x){var d=this.$(".btn-floors-wrap");d&&x[_0x609d("0x12f")][_0x609d("0x130")].removeChild(d);var _=this.$(_0x609d("0x6be"));_&&x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x131")](_);var e=document.createElement(_0x609d("0x2d5"));e.setAttribute("class",_0x609d("0x6bf")),e[_0x609d("0xcf")].width=this.w_+"px",e.style[_0x609d("0x186")]=_0x609d("0x2d8"),e[_0x609d("0xcf")][_0x609d("0x2d9")]=_0x609d("0x2da"),e[_0x609d("0xcf")].boxShadow=this[_0x609d("0x2dc")],e[_0x609d("0xcf")][_0x609d("0x2e7")]=this[_0x609d("0x2dd")];var t=document[_0x609d("0x2")](_0x609d("0x2d5"));t[_0x609d("0xd3")](_0x609d("0x2d6"),"layer-floors-wrap layer-btn"),t[_0x609d("0xcf")][_0x609d("0x434")]=this[_0x609d("0x2be")]+"px",t[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df");var i=document.createElement(_0x609d("0x409"));this.allLayer?i[_0x609d("0xd3")](_0x609d("0x6"),this[_0x609d("0x2d2")]+"layers.png"):i[_0x609d("0xd3")](_0x609d("0x6"),this[_0x609d("0x2d2")]+_0x609d("0x6c0")),i[_0x609d("0xcf")][_0x609d("0x2bb")]=this.w_-2*this[_0x609d("0x2be")]+"px",i.style.height=this.h_-2*this[_0x609d("0x2be")]+"px";var n=document[_0x609d("0x2")](_0x609d("0x2d5"));n[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x6c1")),n.onmousewheel=this[_0x609d("0x2e9")][_0x609d("0xa2")](this),n[_0x609d("0x14a")](_0x609d("0x2ea"),this[_0x609d("0x2e9")][_0x609d("0xa2")](this),!1),n[_0x609d("0x14a")](_0x609d("0x2eb"),this[_0x609d("0x2eb")][_0x609d("0xa2")](this),!1),n[_0x609d("0x14a")](_0x609d("0x2ec"),this[_0x609d("0x2ec")][_0x609d("0xa2")](this),!1),n[_0x609d("0x14a")](_0x609d("0x2ed"),this.touchend.bind(this),!1),t[_0x609d("0x7")](i),e[_0x609d("0x7")](t),e[_0x609d("0x7")](n);var g=x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x0")](_0x609d("0x2ee"))[0];if(x[_0x609d("0x12f")][_0x609d("0x130")].insertBefore(e,g),this[_0x609d("0x2f0")](x[_0x609d("0x1fa")],x[_0x609d("0x20e")]),this[_0x609d("0x2c0")]<x[_0x609d("0x1fa")][_0x609d("0x21")]){var a=document.createElement(_0x609d("0x2d5"));a[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x6c2")),a[_0x609d("0xcf")][_0x609d("0x185")]=_0x609d("0x2f3"),a[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x2f6"),a[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),a[_0x609d("0x2f7")]=this.up[_0x609d("0xa2")](this),a[_0x609d("0x6c3")]=function(x){x[_0x609d("0x6a6")](),x[_0x609d("0x310")]()},a.onmouseup=function(x){x[_0x609d("0x6a6")](),x[_0x609d("0x310")]()};var r=document[_0x609d("0x2")](_0x609d("0x2d5"));r[_0x609d("0xd3")]("class",_0x609d("0x6c4")),r[_0x609d("0xcf")][_0x609d("0x185")]=_0x609d("0x2f3"),r.style.background=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+"arrow1.png) no-repeat 50% 50%",r.style[_0x609d("0x2de")]="pointer",r[_0x609d("0x2f7")]=this.down[_0x609d("0xa2")](this),e.insertBefore(a,n),e[_0x609d("0x7")](r),n[_0x609d("0xcf")][_0x609d("0x448")]=_0x609d("0x2fa"),n[_0x609d("0xcf")][_0x609d("0x185")]=this[_0x609d("0x2c0")]*this.h_+"px",this[_0x609d("0x2fb")](x[_0x609d("0x1fa")][_0x609d("0x21")]-x[_0x609d("0x20e")]),this[_0x609d("0x6c5")]()}else this.showBtnCount=x.listFloors.length;this[_0x609d("0x2fc")](e),this[_0x609d("0x300")]();var A=this;A[_0x609d("0x2bf")]&&A[_0x609d("0x31f")](),t.onclick=function(x){x[_0x609d("0x6a6")](),_0x609d("0x283")!=map[_0x609d("0x22c")]&&(A[_0x609d("0x2bf")]?(i[_0x609d("0xd3")](_0x609d("0x6"),A[_0x609d("0x2d2")]+_0x609d("0x6c0")),A[_0x609d("0x2bf")]=!1):(i.setAttribute(_0x609d("0x6"),A[_0x609d("0x2d2")]+_0x609d("0x6c6")),"3d"==map.viewMode_&&(A[_0x609d("0x2bf")]=!0)),A[_0x609d("0x31f")]())},t[_0x609d("0x6c3")]=function(x){x[_0x609d("0x6a6")]()},t[_0x609d("0x6c7")]=function(x){x[_0x609d("0x6a6")]()},t[_0x609d("0x6c8")]=function(x){x[_0x609d("0x6a6")](),x.preventDefault(),A[_0x609d("0x2bf")]?(i[_0x609d("0xd3")](_0x609d("0x6"),A[_0x609d("0x2d2")]+_0x609d("0x6c0")),A[_0x609d("0x2bf")]=!1):(i[_0x609d("0xd3")](_0x609d("0x6"),A.imgURL_+_0x609d("0x6c6")),"3d"==map[_0x609d("0x22c")]&&(A.allLayer=!0)),A.triggerChange_()},A[_0x609d("0xbc")].on(_0x609d("0x28e"),function(x){_0x609d("0x283")==x&&(A.allLayer=!1,A.triggerChange_(),i[_0x609d("0xd3")](_0x609d("0x6"),A.imgURL_+_0x609d("0x6c0")))}),A.map.visibleFloorNums[_0x609d("0x21")]==A[_0x609d("0xbc")][_0x609d("0x19c")].length&&(i[_0x609d("0xd3")](_0x609d("0x6"),A[_0x609d("0x2d2")]+_0x609d("0x6c6")),A[_0x609d("0x2bf")]=!0)}},{key:_0x609d("0x300"),value:function(){if(this[_0x609d("0xbc")]){var x=this;this[_0x609d("0xbc")].on("update",function(){x[_0x609d("0x2fc")](x.$(_0x609d("0x6c9")))})}}},{key:_0x609d("0x6ca"),value:function(x){var d=this.$(_0x609d("0x6cb"));x?(d[_0x609d("0xd3")]("src",this[_0x609d("0x2d2")]+_0x609d("0x6c6")),this[_0x609d("0x2bf")]=!0):(d[_0x609d("0xd3")](_0x609d("0x6"),this.imgURL_+_0x609d("0x6c0")),this.allLayer=!1),this[_0x609d("0x31f")]()}},{key:"setPosition_",value:function(x,d){if(x)switch(this.positon_){case 1:x.style[_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.y_+"px",x.style[_0x609d("0x281")]=this[_0x609d("0x302")]+this.x_+"px";break;case 2:var d=this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x187")]-x.clientHeight-60;x[_0x609d("0xcf")][_0x609d("0x283")]=d-this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x281")]=this[_0x609d("0x302")]+this.x_+"px";break;case 3:x[_0x609d("0xcf")].top=this[_0x609d("0x2d0")]+this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x282")]=this[_0x609d("0x2d1")]+this.x_+"px";break;case 4:var d=this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x187")]-x[_0x609d("0x328")]-60;x[_0x609d("0xcf")][_0x609d("0x283")]=d-this.y_+"px",x[_0x609d("0xcf")].right=this[_0x609d("0x2d1")]+this.x_+"px"}}},{key:_0x609d("0x2f0"),value:function(x,d){var _;for(this.$(_0x609d("0x6be"))[_0x609d("0x303")]="",_=x[_0x609d("0x21")]-1;_>=0;_--){var e=x[_];this.$(_0x609d("0x6be"))[_0x609d("0x7")](this[_0x609d("0x6cc")](e[_0x609d("0x1fb")],e[_0x609d("0x304")][_0x609d("0x305")](),d==e[_0x609d("0x1fb")])),_>0&&this.$(_0x609d("0x6be")).appendChild(this[_0x609d("0x306")]())}this.inited=!0}},{key:_0x609d("0x307"),value:function(x){this[_0x609d("0x2c4")]=x}},{key:"up",value:function(x){x[_0x609d("0x6a6")]();var d=document[_0x609d("0x308")](_0x609d("0x6cd"))[_0x609d("0x21")],_=d-parseInt(this.$(".layers-wrap>label[class*='active']")[_0x609d("0x30b")][_0x609d("0x1fb")]);if(0!=_){var e=_-1;this[_0x609d("0x30c")](document[_0x609d("0x308")](_0x609d("0x6cd"))[e]),this.changeScrollState(e)}}},{key:"down",value:function(x){x[_0x609d("0x6a6")]();var d=document[_0x609d("0x308")](_0x609d("0x6cd"))[_0x609d("0x21")],_=d-parseInt(this.$(".layers-wrap>label[class*='active']")[_0x609d("0x30b")][_0x609d("0x1fb")]);if(_+1!=d){var e=_+1;this[_0x609d("0x30c")](document[_0x609d("0x308")](_0x609d("0x6cd"))[e]),this[_0x609d("0x2fb")](e)}}},{key:_0x609d("0x2eb"),value:function(x){x[_0x609d("0x6a6")](),x[_0x609d("0x310")](),this.touchPointX=x[_0x609d("0x30d")][0][_0x609d("0x30e")],this[_0x609d("0x2cd")]=x[_0x609d("0x30d")][0][_0x609d("0x30f")]}},{key:_0x609d("0x2ec"),value:function(x){x[_0x609d("0x6a6")](),x[_0x609d("0x310")](),this[_0x609d("0x2ce")]=x[_0x609d("0x30d")][0][_0x609d("0x30e")],this[_0x609d("0x2cf")]=x[_0x609d("0x30d")][0][_0x609d("0x30f")],this.$(_0x609d("0x6be"))[_0x609d("0x312")]+=this[_0x609d("0x2cd")]-this[_0x609d("0x2cf")]}},{key:_0x609d("0x2ed"),value:function(x){x[_0x609d("0x6a6")](),x[_0x609d("0x310")]();var x=x||window[_0x609d("0x311")],d=null,_=this.$(_0x609d("0x6be"))[_0x609d("0x312")];x[_0x609d("0x313")][_0x609d("0x21")]>0&&(this[_0x609d("0x2ce")]=x[_0x609d("0x313")][0][_0x609d("0x30e")],this[_0x609d("0x2cf")]=x.changedTouches[0].pageY),d=x[_0x609d("0x23d")];var e=this.touchEndPointY-this[_0x609d("0x2cd")];e>0&&e>this.h_?_-=e:e<0&&-e>this.h_?_+=-e:0==e&&d&&this.triggerClick(d),this[_0x609d("0x2cc")]=this[_0x609d("0x2ce")],this[_0x609d("0x2cd")]=this.touchEndPointY}},{key:_0x609d("0x2e9"),value:function(x){x=x||window[_0x609d("0x311")];var d=this.$(".layers-wrap").scrollTop;x[_0x609d("0x314")]?(x[_0x609d("0x314")]>0&&(d-=x.wheelDelta),x[_0x609d("0x314")]<0&&(d+=-x[_0x609d("0x314")])):x[_0x609d("0x315")]&&(x.detail>0&&(d-=x.detail),x[_0x609d("0x315")]<0&&(d+=-x[_0x609d("0x315")])),this.$(".layers-wrap")[_0x609d("0x312")]=d}},{key:_0x609d("0x6cc"),value:function(x,d,_){var e=this,t=document[_0x609d("0x2")](_0x609d("0x1df"));t.setAttribute(_0x609d("0x2d6"),_0x609d("0x6ce")),t.setAttribute(_0x609d("0x318"),x),t[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x319"),t[_0x609d("0xcf")][_0x609d("0x6cf")]=_0x609d("0x27d"),t[_0x609d("0xcf")][_0x609d("0x2bb")]=e.w_+"px",t[_0x609d("0xcf")][_0x609d("0x185")]=e.h_+"px",t[_0x609d("0xcf")][_0x609d("0x31a")]=this.h_+"px",t[_0x609d("0xcf")][_0x609d("0x31c")]=0,t[_0x609d("0xcf")][_0x609d("0x2de")]="pointer",t[_0x609d("0xcf")][_0x609d("0x2e0")]=_0x609d("0x31b"),t[_0x609d("0xcf")][_0x609d("0x2e1")]="bold",_?(this[_0x609d("0x31d")](t,_0x609d("0x17")),t.style[_0x609d("0x19b")]=e[_0x609d("0x2c6")]):t[_0x609d("0xcf")][_0x609d("0x19b")]=e[_0x609d("0x2c8")],t.onclick=function(x){x[_0x609d("0x6a6")]();var d=e.$(_0x609d("0x6d0"));d[_0x609d("0x2e5")]!==this[_0x609d("0x2e5")]&&(e[_0x609d("0x31e")](d,_0x609d("0x17")),d[_0x609d("0xcf")][_0x609d("0x19b")]=e[_0x609d("0x2c8")],e[_0x609d("0x31d")](this,_0x609d("0x17")),this[_0x609d("0xcf")].color=e[_0x609d("0x2c6")],e[_0x609d("0x31f")](),e.showBtnCount<e[_0x609d("0xbc")][_0x609d("0x19c")][_0x609d("0x21")]&&e[_0x609d("0x6c5")]())},t.onmousedown=function(x){x[_0x609d("0x6a6")]()},t[_0x609d("0x6c7")]=function(x){x[_0x609d("0x6a6")]()};var i=document.createElement("span");return i.innerText=d,t.appendChild(i),t}},{key:"hrEl",value:function(){var x=document.createElement("hr");return x[_0x609d("0xcf")][_0x609d("0x185")]="1px",x[_0x609d("0xcf")][_0x609d("0x445")]=_0x609d("0x2f1"),x[_0x609d("0xcf")][_0x609d("0x321")]=_0x609d("0x6d1"),x.style[_0x609d("0x2bb")]="60%",x[_0x609d("0xcf")][_0x609d("0x31c")]=_0x609d("0x323"),x[_0x609d("0xcf")][_0x609d("0x6d2")]=_0x609d("0x324"),x}},{key:_0x609d("0x326"),value:function(x){var d=this.map[_0x609d("0x19c")].length-x;this[_0x609d("0x30c")](document[_0x609d("0x308")](_0x609d("0x6cd"))[d]),this[_0x609d("0x2fb")](d)}},{key:_0x609d("0x31f"),value:function(x){var d=[],x=this.$(_0x609d("0x6d0"));x&&d.push(parseInt(x[_0x609d("0x30b")].floornum)),this[_0x609d("0x325")](d),null!==this.change_&&this[_0x609d("0x2c4")](d,this[_0x609d("0x2bf")])}},{key:"changeMapVisibleFloors_",value:function(x){this[_0x609d("0xbc")]&&(this[_0x609d("0x2bf")]?this[_0x609d("0xbc")][_0x609d("0x189")]=this[_0x609d("0xbc")][_0x609d("0x6d3")]:this[_0x609d("0xbc")][_0x609d("0x189")]=x,this[_0x609d("0xbc")].focusFloorNum=x[0])}},{key:_0x609d("0x327"),value:function(x){for(var d=document[_0x609d("0x308")](_0x609d("0x6cd")),_=0,e=d[_0x609d("0x21")];_<e;_++){var t=d[_];_==x?t[_0x609d("0xcf")][_0x609d("0x19b")]=this[_0x609d("0x2c6")]:t[_0x609d("0xcf")].color=this[_0x609d("0x2c8")]}}},{key:_0x609d("0x2fb"),value:function(x){this[_0x609d("0x327")](x);var d=this.$(_0x609d("0x6cd"))[_0x609d("0x328")],_=document[_0x609d("0x308")](_0x609d("0x6cd"))[_0x609d("0x21")];if(_-this.showBtnCount>x){var e=x*d,t=this.$(_0x609d("0x6be"))[_0x609d("0x312")];e<t&&(this.$(_0x609d("0x6be")).scrollTop=e)}if(this[_0x609d("0x2c0")]<=x){var e=(x-this[_0x609d("0x2c0")]+1)*d,t=this.$(".layers-wrap")[_0x609d("0x312")];e>t&&(this.$(_0x609d("0x6be"))[_0x609d("0x312")]=e)}}},{key:"checkBtn",value:function(){var x=this.$(_0x609d("0x6d0"))[_0x609d("0x30b")][_0x609d("0x1fb")]-1,d=document[_0x609d("0x308")](_0x609d("0x6cd"))[_0x609d("0x21")],_=this.$(_0x609d("0x6d4")),e=this.$(_0x609d("0x6d5"));_&&(0==x?(this[_0x609d("0x31d")](_,_0x609d("0x32c")),_[_0x609d("0xcf")].backgroundImage=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32b")):(this[_0x609d("0x31e")](_,_0x609d("0x32c")),_[_0x609d("0xcf")][_0x609d("0x32a")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32d"))),e&&(x==d-1?(this[_0x609d("0x31d")](e,_0x609d("0x32c")),e[_0x609d("0xcf")][_0x609d("0x32a")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+"arrow3.png)"):(this[_0x609d("0x31e")](e,_0x609d("0x32c")),e[_0x609d("0xcf")][_0x609d("0x32a")]=_0x609d("0x2f5")+this[_0x609d("0x2d2")]+_0x609d("0x32f")))}},{key:_0x609d("0x31d"),value:function(x,d){if(x&&x[_0x609d("0x330")]){var _=x[_0x609d("0x330")],e=""!=_?" ":"",t=_+e+d;x[_0x609d("0x330")]=t}}},{key:_0x609d("0x31e"),value:function(x,d){if(x&&x[_0x609d("0x330")]){var _=" "+x[_0x609d("0x330")]+" ";_=_.replace(/(\s+)/gi," ");var e=_[_0x609d("0x117")](" "+d+" "," ");e=e[_0x609d("0x117")](/(^\s+)|(\s+$)/g,""),x[_0x609d("0x330")]=e}}},{key:_0x609d("0x331"),value:function(x,d){if(!x||!x[_0x609d("0x330")])return!1;var _=x[_0x609d("0x330")],e=_[_0x609d("0x240")](/\s+/),t=0;for(t in e)if(e[t]==d)return!0;return!1}},{key:_0x609d("0x30c"),value:function(x){if(x)if(document[_0x609d("0x1fc")])x[_0x609d("0x2fd")]();else{var d=document[_0x609d("0x332")](_0x609d("0x6d6"));d[_0x609d("0x6d7")](_0x609d("0x2fd"),!0,!0),x[_0x609d("0x333")](d)}}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,"value"in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x278")]=new(esmap[_0x609d("0x2bd")])(e),_0x609d("0x3ba")==this[_0x609d("0x278")][_0x609d("0x26c")]?(this.w_=42,this.h_=42,this[_0x609d("0x6d8")]=0):(this.w_=42,this.h_=42,this[_0x609d("0x6d8")]=0),this.x_=this[_0x609d("0x278")].offset.x,this.y_=this[_0x609d("0x278")][_0x609d("0x1b3")].y,this[_0x609d("0x6d9")]=this[_0x609d("0x278")].init2D,this[_0x609d("0x6d9")]?this[_0x609d("0x22c")]=_0x609d("0x283"):this[_0x609d("0x22c")]="3d",this.initFloors_=!!this[_0x609d("0x278")][_0x609d("0x6da")]&&this[_0x609d("0x278")][_0x609d("0x6da")],this[_0x609d("0x20b")]=this[_0x609d("0x6db")],this[_0x609d("0x301")]=10,this[_0x609d("0x408")]=!0,this[_0x609d("0x2c3")]=this[_0x609d("0x278")][_0x609d("0x186")]?this[_0x609d("0x278")][_0x609d("0x186")]:3,this[_0x609d("0x2d0")]=20,this[_0x609d("0x302")]=10,this.right_=10,this[_0x609d("0x6dc")]=!!this[_0x609d("0x278")][_0x609d("0x6dd")]&&this.options_.expanded,this[_0x609d("0x2dc")]=_0x609d("0x42e"),this[_0x609d("0x2dd")]=_0x609d("0x2ca"),this[_0x609d("0x2d2")]=this[_0x609d("0x278")][_0x609d("0x2d3")],d&&(this[_0x609d("0xbc")]=d,this[_0x609d("0x135")](d))}return e(x,[{key:"init",value:function(x){var d=document[_0x609d("0x2")](_0x609d("0x2d5"));d[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x6de")),d[_0x609d("0xcf")][_0x609d("0x6df")]=10,d[_0x609d("0xcf")][_0x609d("0x186")]=_0x609d("0x2d8"),d[_0x609d("0xcf")].height=this.h_+"px",d[_0x609d("0xcf")].width=this.w_+"px",d.style[_0x609d("0x2de")]=_0x609d("0x2df"),d.style[_0x609d("0x2d9")]=_0x609d("0x2da"),d[_0x609d("0xcf")][_0x609d("0x2db")]=this[_0x609d("0x2dc")],d[_0x609d("0xcf")][_0x609d("0x2e7")]=this[_0x609d("0x2dd")],this[_0x609d("0x6dc")]?d[_0x609d("0xcf")].background=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6e1"):d[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6e2"),d[_0x609d("0x2f7")]=this[_0x609d("0x6e3")][_0x609d("0xa2")](this);var _=document[_0x609d("0x2")](_0x609d("0x2d5"));_[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x6e4")),_[_0x609d("0xcf")][_0x609d("0x186")]=_0x609d("0x2d8"),_[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d(this[_0x609d("0x6dc")]?"0x2ff":"0x2f1");var e=document[_0x609d("0x2")](_0x609d("0x2d5"));e[_0x609d("0xd3")](_0x609d("0x2d6"),_0x609d("0x6e5")),e[_0x609d("0xcf")].height=this.h_+"px",e[_0x609d("0xcf")][_0x609d("0x2bb")]=this.w_+"px",e[_0x609d("0xcf")][_0x609d("0x434")]=this[_0x609d("0x6d8")]+"px",e[_0x609d("0xcf")][_0x609d("0x2de")]=_0x609d("0x2df"),e[_0x609d("0xcf")][_0x609d("0x2db")]=this[_0x609d("0x2dc")],e[_0x609d("0xcf")][_0x609d("0x2e7")]=this.defaultRadius_,this.init2D_?e.style[_0x609d("0x2f4")]=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6e6"):e[_0x609d("0xcf")][_0x609d("0x2f4")]="white url("+this[_0x609d("0x2d2")]+_0x609d("0x6e7"),e[_0x609d("0xcf")][_0x609d("0x2d9")]=_0x609d("0x2da"),e[_0x609d("0x2f7")]=this.controlViewMode.bind(this);var t=document[_0x609d("0x2")](_0x609d("0x2d5"));t[_0x609d("0xd3")](_0x609d("0x2d6"),"tool-floor-btn"),t.style[_0x609d("0x185")]=this.h_+"px",t[_0x609d("0xcf")][_0x609d("0x2bb")]=this.w_+"px",t[_0x609d("0xcf")][_0x609d("0x434")]=this[_0x609d("0x6d8")]+"px",t[_0x609d("0xcf")][_0x609d("0x42d")]=this[_0x609d("0x301")]+"px",t.style[_0x609d("0x2de")]=_0x609d("0x2df"),t[_0x609d("0xcf")][_0x609d("0x2db")]=this[_0x609d("0x2dc")],t[_0x609d("0xcf")].borderRadius=this[_0x609d("0x2dd")],this[_0x609d("0x6db")]?t[_0x609d("0xcf")].background=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6e8"):t[_0x609d("0xcf")].background=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6e9"),t[_0x609d("0x2f7")]=this.controlFloor[_0x609d("0xa2")](this),_[_0x609d("0x7")](e),_[_0x609d("0x7")](t);var i=x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x0")](_0x609d("0x2ee"))[0];x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x2ef")](d,i),x.mapView[_0x609d("0x130")].insertBefore(_,i),this[_0x609d("0x2fc")](d),this[_0x609d("0x2fc")](_,this.h_),this[_0x609d("0x300")]()}},{key:_0x609d("0x300"),value:function(){if(this.map){var x=this;this[_0x609d("0xbc")].on(_0x609d("0xc6"),function(){var d=document.querySelector(_0x609d("0x6ea")),_=document[_0x609d("0x2cb")](_0x609d("0x6eb"));x[_0x609d("0x2fc")](d),x[_0x609d("0x2fc")](_,x.h_)})}}},{key:_0x609d("0x2fc"),value:function(x,d){switch(this.positon_){case 1:d?x[_0x609d("0xcf")].top=this.top_+d+this[_0x609d("0x301")]+this.y_+"px":x[_0x609d("0xcf")][_0x609d("0x283")]=this.top_+this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x281")]=this.left_+this.x_+"px";break;case 2:var _=this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x187")]-x[_0x609d("0x328")]-60;d&&(_=_-d-this[_0x609d("0x301")]),x[_0x609d("0xcf")].top=_-this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x281")]=this.left_+this.x_+"px";break;case 3:d?x[_0x609d("0xcf")].top=this[_0x609d("0x2d0")]+d+this[_0x609d("0x301")]+this.y_+"px":x[_0x609d("0xcf")][_0x609d("0x283")]=this[_0x609d("0x2d0")]+this.y_+"px",x[_0x609d("0xcf")].right=this.right_+this.x_+"px";break;case 4:var e=this[_0x609d("0xbc")][_0x609d("0x12f")].container_[_0x609d("0x187")]-x[_0x609d("0x328")]-60;d&&(e=e-d-this[_0x609d("0x301")]),x[_0x609d("0xcf")].top=e-this.y_+"px",x[_0x609d("0xcf")][_0x609d("0x282")]=this[_0x609d("0x2d1")]+this.x_+"px"}}},{key:"createTool_",value:function(){var x=document[_0x609d("0x6ec")]("tool-wrap")[0],d=document[_0x609d("0x6ec")](_0x609d("0x6e4"))[0];_0x609d("0x2f1")==d[_0x609d("0xcf")].display?(x[_0x609d("0xcf")][_0x609d("0x2f4")]="white url("+this[_0x609d("0x2d2")]+_0x609d("0x6e1"),d[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2ff")):(x[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+"more.png) no-repeat 50% 50%",d[_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2f1"))}},{key:_0x609d("0x6ed"),value:function(x){if(this[_0x609d("0xbc")]){var d=document[_0x609d("0x6ec")](_0x609d("0x6e5"))[0];if(this[_0x609d("0x22c")]&&"3d"!=this[_0x609d("0x22c")])d[_0x609d("0xcf")][_0x609d("0x2f4")]=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+"3D.png) no-repeat",this[_0x609d("0xbc")][_0x609d("0x223")]=esmap[_0x609d("0x6ee")][_0x609d("0x6ef")],this[_0x609d("0x22c")]="3d";else{if(this[_0x609d("0x20b")]){var _=document[_0x609d("0x6ec")](_0x609d("0x6f0"))[0];if(document[_0x609d("0x1fc")])_.click();else{var e=document[_0x609d("0x332")](_0x609d("0x6d6"));e[_0x609d("0x6d7")](_0x609d("0x2fd"),!0,!0),_.dispatchEvent(e)}}d.style[_0x609d("0x2f4")]=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6f1"),this[_0x609d("0xbc")][_0x609d("0x223")]=esmap.ESViewMode[_0x609d("0x6f2")],this[_0x609d("0x22c")]=_0x609d("0x283")}}}},{key:_0x609d("0x6f3"),value:function(x){if(this[_0x609d("0xbc")]){var d=document.getElementsByClassName(_0x609d("0x6f0"))[0];if(this[_0x609d("0x20b")])d.style[_0x609d("0x2f4")]=_0x609d("0x6e0")+this.imgURL_+_0x609d("0x6f4"),this[_0x609d("0xbc")][_0x609d("0x189")]=[map[_0x609d("0x20e")]];else{if(_0x609d("0x283")==this[_0x609d("0x22c")]){var _=document[_0x609d("0x6ec")](_0x609d("0x6e5"))[0];if(document[_0x609d("0x1fc")])_[_0x609d("0x2fd")]();else{var e=document[_0x609d("0x332")](_0x609d("0x6d6"));e[_0x609d("0x6d7")](_0x609d("0x2fd"),!0,!0),_[_0x609d("0x333")](e)}}d[_0x609d("0xcf")].background=_0x609d("0x6e0")+this[_0x609d("0x2d2")]+_0x609d("0x6f5"),this.map[_0x609d("0x189")]=map[_0x609d("0x19c")]}this[_0x609d("0xbc")][_0x609d("0x20e")]={floornum:map[_0x609d("0x20e")],time:0},this[_0x609d("0x20b")]=!this[_0x609d("0x20b")]}}},{key:_0x609d("0x6f6"),value:function(){return this.floors_}}]),x}();d[_0x609d("0x92")]=t},function(x,d){_0x609d("0x93"),!function(x,d){x[_0x609d("0x12c")]={},x[_0x609d("0x12c")][_0x609d("0x4b4")]=function(x){x/=.5;var d=0,_=1;return x<1?_/2*x*x+d:(x--,-_/2*(x*(x-2)-1)+d)},x[_0x609d("0x12c")][_0x609d("0x6f7")]=function(x){var d=0,_=1;return _*x*x+d},x[_0x609d("0x12c")][_0x609d("0x6f8")]=function(x){var d=0,_=1;return-_*x*(x-2)+d},x[_0x609d("0x12c")][_0x609d("0x4f6")]=function(x){return x},x[_0x609d("0x12c")][_0x609d("0x6f9")]=function(x){var d=x-1;return d*d*(2.70158*d+1.70158)+1},x[_0x609d("0x12c")].pingPongSin=function(x){return Math[_0x609d("0x422")](x*Math.PI)},x[_0x609d("0x12c")][_0x609d("0x6fa")]=function(x){return 2*(x>.5?1-x:x)},x.Tween[_0x609d("0x4fb")]=function(x){clearInterval(x)},x[_0x609d("0x12c")][_0x609d("0x248")]=function(d,_,e,t,i){null==e&&(e=x[_0x609d("0x12c")][_0x609d("0x6f8")]);var n,g=0,a=0;return 0==d?(_(1),void 0!=i&&i(1),void 0!=t&&t()):!function(){var r,A=Date[_0x609d("0x6fb")]();a=setInterval(function(){r=Date[_0x609d("0x6fb")](),g+=(r-A)/1e3,A=r,g>=d&&(g=d),n=g/d;var I=e(n);_(I),x[_0x609d("0x12c")][_0x609d("0xbc")]&&x[_0x609d("0x12c")].map[_0x609d("0x235")](),void 0!=i&&i(I),1==n&&(clearInterval(a),null!=t&&t())},1)}(),a},x[_0x609d("0x12c")][_0x609d("0x6fc")]=function(x,_,e,t){var i={obj:e,prop:x,old:e[x]};_0x609d("0x51")==typeof i[_0x609d("0x6fd")]?i.delta=t[x]-e[x]:(i.old instanceof d[_0x609d("0x1b1")]||i[_0x609d("0x6fd")]instanceof d.Color||i[_0x609d("0x6fd")]instanceof d[_0x609d("0x4c4")])&&(i.old=i[_0x609d("0x6fd")][_0x609d("0x1a8")](),i[_0x609d("0x6fe")]=t[x][_0x609d("0x1a8")]()),_[_0x609d("0x1a")](i)},x[_0x609d("0x12c")].work=function(x,_,e,t){return d[_0x609d("0x12c")][_0x609d("0x4b3")](null,x,null,t,e,_)},x[_0x609d("0x12c")][_0x609d("0x6ff")]=function(x,_,e){var t=_.old,i=_.prop,n=_[_0x609d("0x6fe")];"number"==typeof t?x[i]=t+e*n:t instanceof d[_0x609d("0x1b1")]||t instanceof d[_0x609d("0x196")]?x[i][_0x609d("0x23c")](t.clone()[_0x609d("0x5ba")](n,e)):t instanceof d[_0x609d("0x4c4")]&&x[i][_0x609d("0x23c")](t[_0x609d("0x1a8")]()[_0x609d("0x4be")](n,e))},x[_0x609d("0x12c")][_0x609d("0x4b3")]=function(d,_,e,t,i,n){var g=[];for(var a in e)x.Tween._getValue(a,g,d,e);var r=x[_0x609d("0x12c")][_0x609d("0x248")](_,function(_){for(var e=0;e<g[_0x609d("0x21")];e++)x[_0x609d("0x12c")][_0x609d("0x6ff")](d,g[e],_)},t,i,n);return r},x[_0x609d("0x12c")].actionArray=function(d,_,e,t,i,n){var g=[];for(var a in e)for(var r in d)x.Tween._getValue(a,g,d[r],e);var A=x.Tween[_0x609d("0x248")](_,function(d){for(var _=0;_<g[_0x609d("0x21")];_++){var e=g[_];x[_0x609d("0x12c")][_0x609d("0x6ff")](e[_0x609d("0x700")],e,d)}},t,i,n);return A},x[_0x609d("0x12c")][_0x609d("0x701")]=function(d,_,e,t,i,n){var g=[];for(var a in d){var r=[];for(var A in e[a])x.Tween[_0x609d("0x6fc")](A,r,d[a],e[a]);g[_0x609d("0x1a")](r)}var I=x[_0x609d("0x12c")][_0x609d("0x248")](_,function(_){for(var e in d)for(var t in g[e])x[_0x609d("0x12c")][_0x609d("0x6ff")](d[e],g[e][t],_)},t,i,n);return I},x[_0x609d("0x12c")][_0x609d("0x702")]=function(x){var d=x,_=0,e=1,t=1;return(d/=t)<1/2.75?e*(7.5625*d*d)+_:d<2/2.75?e*(7.5625*(d-=1.5/2.75)*d+.75)+_:d<2.5/2.75?e*(7.5625*(d-=2.25/2.75)*d+.9375)+_:e*(7.5625*(d-=2.625/2.75)*d+.984375)+_},x[_0x609d("0x12c")][_0x609d("0x703")]=function(_,e,t,i,n,g){i=i||x[_0x609d("0x12c")][_0x609d("0x6f8")];var a=new d.Quaternion,r=_[_0x609d("0x3f0")][_0x609d("0x1a8")](),A=e[_0x609d("0x3f0")];t=t||1,x[_0x609d("0x12c")][_0x609d("0x701")]([_.position],t,[{x:e.position.x,y:e[_0x609d("0x186")].y,z:e.position.z}],i,function(){n&&n()},function(x){d[_0x609d("0x4c4")][_0x609d("0x4be")](r,A,a,x),_[_0x609d("0x3f0")][_0x609d("0x100")](a.x,a.y,a.z,a.w),g&&g(x)})}}(em,THREE)},function(x,d){function _(x){return x<g&&x>-g}function e(x){return x>g}function t(x){return x<-g}function i(x,d){return Math[_0x609d("0x21e")]((x.x-d.x)*(x.x-d.x)+(x.y-d.y)*(x.y-d.y))}function n(x,d,i,n){var g=d.x,a=d.y,r=i.x,A=i.y,I=x.x,C=x.y,o=r-g,s=A-a,c=Math[_0x609d("0x21e")](o*o+s*s),u=I-g,f=C-a,l=Math[_0x609d("0x21e")](u*u+f*f);if(_(c))return _(l)?(n.x=d.x,n.y=d.y,0):(n.x=d.x,n.y=d.y,l);var h=o/c,b=s/c,p=h*u+b*f;if(!e(p))return n.x=d.x,n.y=d.y,l;if(!t(p-c)){var v=I-r,m=C-A,y=Math[_0x609d("0x21e")](v*v+m*m);return n.x=i.x,n.y=i.y,y}var w=g+p*h,E=a+p*b,k=I-w,S=C-E,T=Math.sqrt(k*k+S*S);return n.x=w,n.y=E,T}_0x609d("0x93"),Object.defineProperty(d,_0x609d("0x79"),{value:!0}),d[_0x609d("0x704")]=i,d[_0x609d("0x705")]=n;var g=1e-5},function(x,d,_){function e(x){return x&&x[_0x609d("0x79")]?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=_(5),g=e(n),a=function(){function x(d,_){t(this,x),this[_0x609d("0x278")]=new(esmap[_0x609d("0x2bd")])(_),_0x609d("0x3ba")==this.options_[_0x609d("0x26c")]?(this.w_=42,this.h_=42,this[_0x609d("0x2be")]=14):(this.w_=28,this.h_=28,this[_0x609d("0x2be")]=8),this.x_=this[_0x609d("0x278")][_0x609d("0x1b3")].x,this.y_=this[_0x609d("0x278")][_0x609d("0x1b3")].y,this[_0x609d("0x2c3")]=this[_0x609d("0x278")][_0x609d("0x186")]?this[_0x609d("0x278")][_0x609d("0x186")]:4,this[_0x609d("0x2d0")]=20,this[_0x609d("0x302")]=10,this[_0x609d("0x2d1")]=10,this[_0x609d("0x2dc")]=_0x609d("0x42e"),this[_0x609d("0x2dd")]=_0x609d("0x2ca"),this.imgURL_=this[_0x609d("0x278")][_0x609d("0x2d3")],this[_0x609d("0x408")]=!0,d&&(this[_0x609d("0xbc")]=d,this[_0x609d("0x135")](d))}return i(x,[{key:_0x609d("0x135"),value:function(x){var d=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xce")](_0x609d("0x2d6"),_0x609d("0x706"))[_0x609d("0xcf")]({zIndex:10,position:_0x609d("0x2d8"),backgroundColor:_0x609d("0x2da"),boxShadow:this[_0x609d("0x2dc")],borderRadius:this.defaultRadius_})[_0x609d("0xcd")],_=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xce")](_0x609d("0x2d6"),"zoom-in-btn")[_0x609d("0xcf")]({padding:this[_0x609d("0x2be")]+"px",cursor:_0x609d("0x2df"),height:this.h_})[_0x609d("0xd4")]("click",this[_0x609d("0x1c0")].bind(this))[_0x609d("0xcd")],e=(0,g[_0x609d("0x92")])(_0x609d("0x409")).attr("src",this[_0x609d("0x2d2")]+_0x609d("0x707"))[_0x609d("0xcf")]({width:this.w_-2*this[_0x609d("0x2be")]+"px",height:this.h_-2*this[_0x609d("0x2be")]+"px"})[_0x609d("0xcd")];_[_0x609d("0x7")](e);var t=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xce")](_0x609d("0x2d6"),_0x609d("0x708"))[_0x609d("0xcf")]({padding:this[_0x609d("0x2be")]+"px",cursor:_0x609d("0x2df"),height:this.h_})[_0x609d("0xd4")](_0x609d("0x2fd"),this.scaleLevelOut.bind(this)).element,i=(0,g[_0x609d("0x92")])(_0x609d("0x409"))[_0x609d("0xce")](_0x609d("0x6"),this[_0x609d("0x2d2")]+"zoomout.png")[_0x609d("0xcf")]({width:this.w_-2*this[_0x609d("0x2be")]+"px",height:this.h_-2*this[_0x609d("0x2be")]+"px"}).element;t[_0x609d("0x7")](i),d[_0x609d("0x7")](_),d[_0x609d("0x7")](this[_0x609d("0x306")]()),d.appendChild(t);var n=x[_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x0")]("canvas")[0];x[_0x609d("0x12f")][_0x609d("0x130")].insertBefore(d,n),this[_0x609d("0x2fc")](d),this[_0x609d("0x300")]()}},{key:_0x609d("0x300"),value:function(){if(this[_0x609d("0xbc")]){var x=this;this[_0x609d("0xbc")].on(_0x609d("0xc6"),function(){var d=document[_0x609d("0x2cb")](_0x609d("0x709"));x[_0x609d("0x2fc")](d)})}}},{key:"setPosition_",value:function(x,d){switch(this[_0x609d("0x2c3")]){case 1:(0,g[_0x609d("0x92")])(x).style({top:this.top_+this.y_+"px",left:this[_0x609d("0x302")]+this.x_+"px"});break;case 2:var d=this[_0x609d("0xbc")][_0x609d("0x12f")].container_[_0x609d("0x187")]-x[_0x609d("0x328")]-60;(0,g[_0x609d("0x92")])(x)[_0x609d("0xcf")]({top:d-this.y_+"px",left:this[_0x609d("0x302")]+this.x_+"px"});break;case 3:(0,g[_0x609d("0x92")])(x)[_0x609d("0xcf")]({top:this[_0x609d("0x2d0")]+this.y_+"px",right:this[_0x609d("0x2d1")]+this.x_+"px"});break;case 4:var d=this[_0x609d("0xbc")][_0x609d("0x12f")][_0x609d("0x130")][_0x609d("0x187")]-x[_0x609d("0x328")]-60;(0,g[_0x609d("0x92")])(x).style({top:d-this.y_+"px",right:this[_0x609d("0x2d1")]+this.x_+"px"})}}},{key:_0x609d("0x306"),value:function(){var x=(0,g.default)("hr")[_0x609d("0xcf")]({height:_0x609d("0x320"),border:"none",borderTop:_0x609d("0x6d1"),width:"60%",margin:_0x609d("0x323"),filter:"alpha(opacity=100, finishopacity=0, style=3)"})[_0x609d("0xcd")];return x}},{key:_0x609d("0x1c1"),value:function(x){this[_0x609d("0xbc")]&&this[_0x609d("0xbc")][_0x609d("0x1c1")](),"function"==typeof x&&x(this[_0x609d("0x70a")])}},{key:_0x609d("0x1c0"),value:function(x){this[_0x609d("0xbc")]&&this[_0x609d("0xbc")][_0x609d("0x1c0")](),_0x609d("0x1f")==typeof x&&x(this[_0x609d("0x70a")])}}]),x}();d[_0x609d("0x92")]=a},function(x,d,_){function e(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}function t(x,d){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||_0x609d("0x20")!=typeof d&&_0x609d("0x1f")!=typeof d?x:d}function i(x,d){if(_0x609d("0x1f")!=typeof d&&null!==d)throw new TypeError(_0x609d("0x34e")+typeof d);x[_0x609d("0x1b")]=Object[_0x609d("0xdc")](d&&d[_0x609d("0x1b")],{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object[_0x609d("0x34f")]?Object[_0x609d("0x34f")](x,d):x[_0x609d("0x350")]=d)}_0x609d("0x93");var n=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object.defineProperty(x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),g=window[_0x609d("0x256")],a=window.em=g,r=window[_0x609d("0x254")]={version:_0x609d("0x70b"),minV:1,maxV:2};_(63),_(82),_(78),_(79),_(80),_(81),_(67),g[_0x609d("0x57e")]=function(){this[_0x609d("0x70c")]=[]},g[_0x609d("0x57e")][_0x609d("0x4b1")]=function(x){var d=new(g[_0x609d("0x57e")]);return setTimeout(function(){d[_0x609d("0x5a0")]()},x),d},g[_0x609d("0x57e")][_0x609d("0x1b")]={constructor:g[_0x609d("0x57e")],then:function(x){return this[_0x609d("0x70c")][_0x609d("0x1a")](x),this},resolve:function(x){var d=this;setTimeout(function(){for(var x=0;x<d.callbacks[_0x609d("0x21")];x++){var _=d[_0x609d("0x70c")][x]();if(_ instanceof g[_0x609d("0x57e")])for(x++;x<d[_0x609d("0x70c")][_0x609d("0x21")];x++)_[_0x609d("0x578")](d[_0x609d("0x70c")][x])}},0)}},r.ESMapConfiguration={EXTENT_EPSILON_Y:-.01,SCENE_AXIS:!1},r[_0x609d("0x70d")]={create:function(x,d){return new A(x,d)}},r[_0x609d("0x55d")]={setUrl:function(x){this.material[_0x609d("0xbc")]&&this[_0x609d("0x194")][_0x609d("0xbc")].dispose(),
this[_0x609d("0x194")][_0x609d("0xbc")]=r.ESMapUtil[_0x609d("0x55e")](x),this[_0x609d("0x194")][_0x609d("0xbc")][_0x609d("0x198")]=!0}},r[_0x609d("0x70e")]={NORTH:"n",SOUTH:"s",WEST:"w",EAST:"e",NORTH_EAST:"ne",NORTH_WEST:"nw",SOUTH_EAST:"se",SOUTH_WEST:"sw"},r[_0x609d("0x168")]={NONE:_0x609d("0x2f1"),FLOOR_BASE:_0x609d("0x48e"),MODEL:_0x609d("0x361"),MODEL_POI:"facility",MODEL_LABEL:_0x609d("0x1df"),MODEL_LINE:"modelLine",MODEL_IMAGE:"modelImage",MODEL_BASE:_0x609d("0x493"),MODEL_LIFT:_0x609d("0x70f"),EXTERANL_MODEL:_0x609d("0x710"),POLYGON_MARKER:_0x609d("0x382"),LOCATION_MARKER:_0x609d("0x560"),IMAGE_MARKER:_0x609d("0x380"),TEXT_MARKER:"textMarker",MODEL3D:_0x609d("0x354"),BOARD_MARKER:"boardMarker"},r.ESElementType={NONE:_0x609d("0x2f1"),MODEL:_0x609d("0x361"),MODEL_POI:_0x609d("0x711"),MODEL_LABEL:_0x609d("0x1df"),MODEL_IMAGE:_0x609d("0x2a7"),MODEL_BASE:_0x609d("0x493"),MODEL_LIFT:_0x609d("0x70f"),EXTERANL_MODEL:_0x609d("0x710"),POLYGON_MARKER:"polygonMarker"},r[_0x609d("0x3d4")]={floorBase:1,model:10,polygonMarker:15,externalModel:20,label:30,facility:30,textMarker:40,imageMarker:61,locationMarker:71,transparentLine:11,lineObject:70,model3D:69},r[_0x609d("0x1f1")]={EXPIRED:_0x609d("0x712"),TOKEN_MISS:_0x609d("0x713"),TOKEN_ERR:_0x609d("0x714"),VERS_ERR:"Error version",DOM_ERR:_0x609d("0x715"),ES3DMARKERNUM_ERR:"maximum es3dMarker limited",AUDIO_TOKEN:_0x609d("0x716"),ARRAY_REQUIRED:_0x609d("0x717")},r[_0x609d("0x1e9")]={NONE:0,FLOOR:4,MODEL:5,MODEL3D:6,FACILITY:11,LABEL:12,LINE:21,IMAGE_MARKER:31,TEXT_MARKER:32,LOCATION_MARKER:33,BOARD_MARKER:34,POLYGON_MARKER:100,ALL:65535,ELEMENT:100},r[_0x609d("0x3bc")]={PLANE:_0x609d("0x718"),CIRCLE:_0x609d("0x719")},r.ESLineType={FULL:"full",DOTTED:"dotted",DOT_DASH:_0x609d("0x71a"),CENTER:_0x609d("0x27d"),DASH:"dash",DOUBLE_DOT_DASH:_0x609d("0x71b"),TRI_DOT_DASH:"triDotDash",NORMAL:_0x609d("0x3ba"),ARROW:_0x609d("0x3bd"),RAW:_0x609d("0x71c"),ESARROW:_0x609d("0x3bf"),TEXTURE:_0x609d("0x4e5")},r[_0x609d("0x6ee")]={MODE_3D:"3d",MODE_2D:_0x609d("0x283")},r[_0x609d("0x13d")]={DEFAULT:10,NAVI:2},r[_0x609d("0x349")]={Map_CONTROL_SMALL:_0x609d("0x71d"),Map_CONTROL_NORMAL:"normal"},r.ESControlPositon={LEFT_TOP:1,LEFT_BOTTOM:2,RIGHT_TOP:3,RIGHT_BOTTOM:4},window[_0x609d("0x71e")]=function(x){r[_0x609d("0x164")]=function(x){var d;d=x&&x[_0x609d("0x4a9")]?x[_0x609d("0x4a9")]:document[_0x609d("0x8b")];var _=new(r[_0x609d("0x63e")]);_[_0x609d("0x4ab")](d)},window[_0x609d("0x71e")]=null};var A=_(41).default,I=(_(77)[_0x609d("0x92")],_(15)[_0x609d("0x92")]);r[_0x609d("0x63e")]=_(46)[_0x609d("0x92")],a.Ajax=_(3).default,a[_0x609d("0x133")]=_(39)[_0x609d("0x92")],a[_0x609d("0x71f")]=_(42)[_0x609d("0x92")],r.ESComposerRender=_(18)[_0x609d("0x92")],r[_0x609d("0x720")]=_(49)[_0x609d("0x92")],r[_0x609d("0x721")]=_(50)[_0x609d("0x92")],r[_0x609d("0x146")]=_(57).default,r[_0x609d("0x140")]=_(58)[_0x609d("0x92")],r[_0x609d("0x197")]=_(59)[_0x609d("0x92")],r[_0x609d("0x134")]=_(60)[_0x609d("0x92")],r[_0x609d("0x148")]=_(44)[_0x609d("0x92")],r[_0x609d("0x3a6")]=_(43)[_0x609d("0x92")],r[_0x609d("0x366")]=_(47).default,r[_0x609d("0x3cb")]=_(48)[_0x609d("0x92")],r.ESMapPoi=_(51).default,r.ESMapPoi2=_(52).default,r[_0x609d("0x39e")]=_(53)[_0x609d("0x92")],r.ESMapPoi4=_(54)[_0x609d("0x92")],r[_0x609d("0x142")]=_(55)[_0x609d("0x92")],r.ESMapSceneUtil=_(56)[_0x609d("0x92")],r[_0x609d("0x598")]=_(61)[_0x609d("0x92")],r[_0x609d("0x3b5")]=_(4).default.Component,r[_0x609d("0x722")]=_(4)[_0x609d("0x92")][_0x609d("0x723")],r[_0x609d("0x191")]=_(28)[_0x609d("0x92")],r.ESMapCoord=_(45).default,r[_0x609d("0x724")]=_(64).default,r[_0x609d("0x725")]=_(31)[_0x609d("0x92")],r[_0x609d("0x371")]=_(35)[_0x609d("0x92")],r[_0x609d("0x1dd")]=_(22).default,r[_0x609d("0x5a3")]=_(23)[_0x609d("0x92")],r[_0x609d("0x726")]=_(25)[_0x609d("0x92")],r[_0x609d("0x5a7")]=_(26)[_0x609d("0x92")],r[_0x609d("0x2ac")]=_(30)[_0x609d("0x92")],r[_0x609d("0x599")]=_(33)[_0x609d("0x92")],r.ESPolygonMarker=_(36)[_0x609d("0x92")],r.ESModelImage=_(34)[_0x609d("0x92")],r[_0x609d("0x727")]=_(38).default,r.ESFloorManager=_(24).default,r.ESLayer=_(27).default,r[_0x609d("0x126")]=_(2).default,r[_0x609d("0x2bd")]=_(20)[_0x609d("0x92")],r[_0x609d("0x34b")]=_(19)[_0x609d("0x92")],r[_0x609d("0x728")]=_(16).default,r[_0x609d("0x729")]=_(65).default,r[_0x609d("0x72a")]=_(66)[_0x609d("0x92")],r[_0x609d("0x72b")]=_(69)[_0x609d("0x92")],r[_0x609d("0x72c")]=_(76)[_0x609d("0x92")],r[_0x609d("0x3c7")]=_(62).default,r[_0x609d("0x72d")]=_(74).default,r.ESLineMarker=_(29)[_0x609d("0x92")],r.ES3DMarker=_(21)[_0x609d("0x92")],_(17),r.ESNaviCore=_(75)[_0x609d("0x92")],r[_0x609d("0x566")]=_(71)[_0x609d("0x92")],r[_0x609d("0x153")]=_(72)[_0x609d("0x92")],r[_0x609d("0x72e")]=_(37)[_0x609d("0x92")];var C=function(x){function d(x){e(this,d);var _=t(this,(d[_0x609d("0x350")]||Object.getPrototypeOf(d))[_0x609d("0x15")](this,x));return _[_0x609d("0x72f")]=new(r[_0x609d("0x725")])(_[_0x609d("0xc2")],_[_0x609d("0x13a")]),_[_0x609d("0x264")]=[],_}return i(d,x),n(d,[{key:"openMapById",value:function(x){this[_0x609d("0x170")](x)}},{key:_0x609d("0x336"),value:function(x){if(x){var d=this,_=x[_0x609d("0x1da")]?x[_0x609d("0x1da")]:this[_0x609d("0x150")],e=this[_0x609d("0x141")].getO3dFloor(_);_!=this[_0x609d("0x150")]&&this[_0x609d("0x244")](_,{notMove:!0});var t=this.mapView[_0x609d("0x137")].position.clone(),i=(t.y-this[_0x609d("0x13a")].target.y,new(g[_0x609d("0x1b1")])(-x.x-this.mapScene[_0x609d("0x1b2")],e[_0x609d("0x186")].y,x.y-this.mapScene[_0x609d("0x1b4")])),n=d[_0x609d("0x13a")][_0x609d("0x23d")].clone(),r=i[_0x609d("0x1a8")]()[_0x609d("0x246")](n);this[_0x609d("0x122")]&&clearInterval(this[_0x609d("0x122")]),this[_0x609d("0x122")]=a[_0x609d("0x12c")][_0x609d("0x4b3")](d.mapView[_0x609d("0x137")].position,void 0==x[_0x609d("0x128")]?d[_0x609d("0x132")][_0x609d("0x730")]?d.options.moveToAnimateTime:0:x.time,null,null,function(){x[_0x609d("0x12e")]&&x[_0x609d("0x12e")](_)},function(x){d[_0x609d("0x13a")][_0x609d("0x23d")][_0x609d("0x23c")](n[_0x609d("0x1a8")]().add(r.clone()[_0x609d("0x288")](x))),"top"==d.viewMode&&d[_0x609d("0x12f")][_0x609d("0x137")][_0x609d("0x186")][_0x609d("0x23c")](t[_0x609d("0x1a8")]()[_0x609d("0x82")](r[_0x609d("0x1a8")]()[_0x609d("0x288")](x))),d[_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:d[_0x609d("0x13a")].constraint[_0x609d("0x22f")](),forcePhi:d.controls.constraint[_0x609d("0x28b")]()})}),this[_0x609d("0x151")]=i}}},{key:"getFloor",value:function(x){var d=this.mapScene[_0x609d("0x245")][x];return void 0==d?null:d[_0x609d("0x180")]}},{key:_0x609d("0x731"),get:function(){return this.gestureController_}},{key:_0x609d("0x732"),get:function(){return r[_0x609d("0x126")][_0x609d("0x86")][_0x609d("0x733")]}},{key:_0x609d("0x734"),get:function(){return r[_0x609d("0x126")][_0x609d("0x86")][_0x609d("0x735")]},set:function(x){x?r.ESUtil[_0x609d("0x86")][_0x609d("0x736")](this[_0x609d("0x12f")][_0x609d("0x130")]):r[_0x609d("0x126")][_0x609d("0x86")][_0x609d("0x737")]()}},{key:_0x609d("0x1b0"),get:function(){return 6}}]),d}(I);r[_0x609d("0x164")]=C,window[_0x609d("0x71e")]=null},function(x,d){function _(x,d,_){return d in x?Object[_0x609d("0x1d")](x,d,{value:_,enumerable:!0,configurable:!0,writable:!0}):x[d]=_,x}function e(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var t=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),i=function(){function x(d){e(this,x),this[_0x609d("0x738")]={},this[_0x609d("0x356")]=d,this.meshStore={},this[_0x609d("0x739")]={},this[_0x609d("0x70c")]={}}return t(x,[{key:_0x609d("0x3a8"),value:function(x,d){if(d in this.markerQueue)x[_0x609d("0x35b")]in this[_0x609d("0x739")][d]?this.markerQueue[d][x[_0x609d("0x35b")]][_0x609d("0x1a")](x):this.markerQueue[d][x[_0x609d("0x35b")]]=[x];else{var e=_({},x[_0x609d("0x35b")],[x]);this[_0x609d("0x739")][d]=e}}},{key:_0x609d("0x214"),value:function(x){var d=x[_0x609d("0x94")],_=this[_0x609d("0x73a")]();return _?void console[_0x609d("0x1f0")](esmap[_0x609d("0x1f1")][_0x609d("0x73b")]):void(d in this[_0x609d("0x738")]?this[_0x609d("0x738")][d][_0x609d("0x1a")](x):(this[_0x609d("0x738")][d]=[],this[_0x609d("0x738")][d][_0x609d("0x1a")](x)))}},{key:_0x609d("0x73c"),value:function(x){var d=0;for(var _ in x)x.hasOwnProperty(_)&&d++;return d+1}},{key:"checkO1",value:function(){var x=this[_0x609d("0x356")][_0x609d("0x144")][_0x609d("0x1e5")].o1||0;return this[_0x609d("0x73c")](this[_0x609d("0x252")])>x}},{key:_0x609d("0xc3"),value:function(){var x=this,d=this.checkO1();if(!d)for(var _ in this[_0x609d("0x738")]){var e=this.queue[_];if(0!=e.length){var t=_[_0x609d("0x73d")]("/"),i=_[_0x609d("0x70")](t);i in x[_0x609d("0x252")]?x[_0x609d("0x73e")](_,e):x.loadModel3D(_,e)}}}},{key:_0x609d("0x73e"),value:function(x,d){for(var _=this,e=x[_0x609d("0x73d")]("/"),t=x[_0x609d("0x70")](e),i=_[_0x609d("0x252")][t],n=0;n<d[_0x609d("0x21")];n++){var g=d[n],a=i.clone();_[_0x609d("0x36")](a,g)}_.queue[x]=[],_[_0x609d("0x73f")]()}},{key:_0x609d("0x36"),value:function(x,d){var _=this,e=_[_0x609d("0x356")][_0x609d("0xc2")],t=x[_0x609d("0x1a8")](),i=!1;t[_0x609d("0x194")]=x[_0x609d("0x194")][_0x609d("0x1a8")](),t.renderOrder=esmap.ESRenderOrder[_0x609d("0x416")],t[_0x609d("0x193")].center(),t[_0x609d("0x369")]=esmap.ESMapLabel[_0x609d("0x1b")].fade3dOut,t[_0x609d("0x36a")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x500")],t[_0x609d("0x336")]=esmap.ESMapLabel.prototype[_0x609d("0x740")],t.rotate=esmap[_0x609d("0x366")].prototype[_0x609d("0x36b")],t[_0x609d("0x36c")]=esmap[_0x609d("0x366")][_0x609d("0x1b")][_0x609d("0x36c")],t[_0x609d("0x1de")]=esmap.ESMapLabel[_0x609d("0x1b")].flash3d,t.stopFlash=esmap.ESMapLabel[_0x609d("0x1b")][_0x609d("0x368")],t[_0x609d("0x180")]=d.self?(d[_0x609d("0x741")][_0x609d("0x182")]=t,t[_0x609d("0x3ad")]=esmap[_0x609d("0x366")][_0x609d("0x1b")].updateScreenSize,t.width_=d[_0x609d("0x27c")].x,t[_0x609d("0x35d")]=d[_0x609d("0x27c")].x,d.self):{url:d[_0x609d("0x94")],name:d[_0x609d("0x43")],ID:d.id||0,fnum:d.fnum||1,nodeType:esmap[_0x609d("0x1e9")][_0x609d("0x19f")],o3d_:t,fadeOut:function(x){this[_0x609d("0x182")][_0x609d("0x369")](x)},fadeIn:function(x){this[_0x609d("0x182")][_0x609d("0x36a")](x)}};var n=d[_0x609d("0x27c")];d[_0x609d("0x94")][_0x609d("0x18")](_0x609d("0x742"))!=-1&&(i=!0,t[_0x609d("0x3d3")]++),t[_0x609d("0x27c")][_0x609d("0x100")](n.x,n.y,n.z);var g=d[_0x609d("0x36b")];t[_0x609d("0x227")][_0x609d("0x100")](g.x,g.y,g.z);var a=d[_0x609d("0x186")];t[_0x609d("0x186")][_0x609d("0x100")](a.x,a.y,a.z),_[_0x609d("0x743")](t,i),d.parent.add(t),d[_0x609d("0x595")]&&e[_0x609d("0x546")](t);var r=t[_0x609d("0x180")]?t[_0x609d("0x180")]:t;this[_0x609d("0x356")][_0x609d("0x10c")](_0x609d("0x744"),r),d[_0x609d("0x12e")]&&d[_0x609d("0x12e")](r)}},{key:"loadModel3D",value:function(x,d){var _=this,e=new(em[_0x609d("0x71f")]),t=function(e){for(var t=0;t<d[_0x609d("0x21")];t++){var i=d[t],n=e[_0x609d("0x1a8")]();_[_0x609d("0x36")](n,i)}var g=x[_0x609d("0x73d")]("/"),a=x[_0x609d("0x70")](g);_[_0x609d("0x252")][a]=e,_[_0x609d("0x73f")]()};_[_0x609d("0x738")][x]=[],e[_0x609d("0x49e")](x,t)}},{key:_0x609d("0x73f"),value:function(){var x=this[_0x609d("0x738")],d=!0;if(0!=Object[_0x609d("0x3e")](x)[_0x609d("0x21")])for(var _ in x)0!=x[_][_0x609d("0x21")]&&(d=!1)}},{key:_0x609d("0x743"),value:function(x,d){var _=this,e=x.datas_[_0x609d("0x190")],t=_.map_[_0x609d("0x141")].o3dFloors_[e];if(d)for(var i=x[_0x609d("0x194")][_0x609d("0x195")]?x.material[_0x609d("0x195")]:[x.material],n=0;n<i[_0x609d("0x21")];n++){var g=i[n];g[_0x609d("0x3d0")]=!0,g[_0x609d("0x3e6")]=THREE[_0x609d("0x414")],g[_0x609d("0x745")]&&(g[_0x609d("0x3a3")]=!1)}if(t&&t[_0x609d("0x17e")]&&_[_0x609d("0x356")][_0x609d("0x132")].focusAlphaMode&&e!=_[_0x609d("0x356")][_0x609d("0x150")]){var a=_.map_[_0x609d("0x132")][_0x609d("0x24b")],r=null;r=x[_0x609d("0x194")][_0x609d("0x195")]?x[_0x609d("0x194")][_0x609d("0x195")]:[x[_0x609d("0x194")]];for(var A=0;A<r[_0x609d("0x21")];A++){var g=r[A];t[_0x609d("0x615")]||(t[_0x609d("0x615")]={}),t[_0x609d("0x615")][g.uuid]||(t[_0x609d("0x615")][g.uuid]=g[_0x609d("0x1c8")]),g[_0x609d("0x3d0")]=!0,g[_0x609d("0x1c8")]=a,g[_0x609d("0x3e6")]=THREE[_0x609d("0x414")]}}}}]),x}();d[_0x609d("0x92")]=i},function(x,d,_){function e(x){return x&&x[_0x609d("0x79")]?x:{default:x}}function t(x,d){if(!(x instanceof d))throw new TypeError("Cannot call a class as a function")}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var i=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e.enumerable=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e.key,e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),n=_(5),g=e(n),a=function(){function x(d){t(this,x),this[_0x609d("0x356")]=d;var _=d[_0x609d("0x132")],e=document.getElementById(_0x609d("0x746"))||d[_0x609d("0x132")][_0x609d("0x4a9")];this[_0x609d("0x747")]=e[_0x609d("0x45a")]();var i=(this[_0x609d("0x747")],_.scalerWidth),n=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:_0x609d("0x2d8"),bottom:_[_0x609d("0x519")][1]+"px",left:_[_0x609d("0x519")][0]+"px",width:i+"px",height:_0x609d("0x44a"),webkitTextSizeAdjust:"none",msTextSizeAdjust:_0x609d("0x2f1")})[_0x609d("0xcd")];e[_0x609d("0x7")](n);var a=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:"absolute",overflow:_0x609d("0x2fa"),fontSize:_0x609d("0x748"),fontFamily:"Arial,sans-serif",textAlign:"center",color:_0x609d("0x51d"),width:_0x609d("0x749"),cursor:_0x609d("0x92"),lineHeight:_0x609d("0x2f3")})[_0x609d("0xcd")];n[_0x609d("0x7")](a),this.textBox=a;var r=(0,g[_0x609d("0x92")])("div")[_0x609d("0xcf")]({position:_0x609d("0x2d8"),overflow:_0x609d("0x2fa"),background:_0x609d("0x51d"),width:_0x609d("0x749"),height:_0x609d("0x74a"),fontSize:"0",bottom:_0x609d("0x74b")})[_0x609d("0xcd")];n[_0x609d("0x7")](r);var A=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:"absolute",overflow:_0x609d("0x2fa"),background:_0x609d("0x51d"),width:"3px",height:"7px",fontSize:"0",bottom:"0",right:_0x609d("0x74b")}).element;n.appendChild(A);var I=(0,g.default)(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:"absolute",overflow:_0x609d("0x2fa"),background:_0x609d("0x51d"),width:_0x609d("0x74c"),height:_0x609d("0x74d"),fontSize:"0",bottom:"0",left:_0x609d("0x74b")})[_0x609d("0xcd")];n[_0x609d("0x7")](I);var C=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:_0x609d("0x2d8"),overflow:_0x609d("0x2fa"),background:_0x609d("0x74e"),width:_0x609d("0x749"),height:_0x609d("0x74c"),fontSize:"0",bottom:"0"})[_0x609d("0xcd")];n.appendChild(C);var o=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:_0x609d("0x2d8"),overflow:_0x609d("0x2fa"),background:_0x609d("0x74e"),width:_0x609d("0x320"),height:"6px",fontSize:"0",bottom:"0",left:"0"}).element;n[_0x609d("0x7")](o);var s=(0,g[_0x609d("0x92")])(_0x609d("0x2d5"))[_0x609d("0xcf")]({position:_0x609d("0x2d8"),overflow:_0x609d("0x2fa"),background:"#000",width:_0x609d("0x320"),height:"6px",fontSize:"0",bottom:"0",right:"0"})[_0x609d("0xcd")];n[_0x609d("0x7")](s),this[_0x609d("0x74f")]=n[_0x609d("0x45a")](),this[_0x609d("0x750")]=n}return i(x,[{key:_0x609d("0x704"),value:function(x,d){return Math[_0x609d("0x21e")]((x.x-d.x)*(x.x-d.x)+(x.y-d.y)*(x.y-d.y))}},{key:_0x609d("0x22a"),value:function(){var x=this,d=this.map_[_0x609d("0x257")](x[_0x609d("0x74f")][_0x609d("0x281")]-x[_0x609d("0x747")][_0x609d("0x281")],x[_0x609d("0x74f")].top-x[_0x609d("0x747")][_0x609d("0x283")],0),_=this[_0x609d("0x356")][_0x609d("0x257")](x[_0x609d("0x74f")][_0x609d("0x282")]-x[_0x609d("0x747")][_0x609d("0x281")],x.barBox[_0x609d("0x283")]-x.box.top,0);if(d&&_){var e=x[_0x609d("0x704")](d,_);x[_0x609d("0x751")][_0x609d("0x303")]=(e>50?e[_0x609d("0x5f9")](0):e[_0x609d("0x5f9")](1))+_0x609d("0x752")}}},{key:_0x609d("0x17e"),set:function(x){x?this[_0x609d("0x750")][_0x609d("0xcf")][_0x609d("0x21a")]=_0x609d("0x2ff"):this[_0x609d("0x750")][_0x609d("0xcf")][_0x609d("0x21a")]="none"},get:function(){return _0x609d("0x2f1")!=this[_0x609d("0x750")][_0x609d("0xcf")][_0x609d("0x21a")]}}]),x}();d.default=a},function(x,d,_){var e="function"==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&_0x609d("0x1f")==typeof Symbol&&x.constructor===Symbol&&x!==Symbol[_0x609d("0x1b")]?_0x609d("0x7a"):typeof x},t=_(83),i=t.Reader,n=t[_0x609d("0x753")],g=t.util,a=t[_0x609d("0x754")][_0x609d("0x92")]||(t.roots.default={});a[_0x609d("0x5c0")]=function(){function x(x){if(this[_0x609d("0x204")]=[],this[_0x609d("0x2ba")]=[],this.panos=[],x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x3ea")]=0,x[_0x609d("0x1b")].maptime=0,x[_0x609d("0x1b")][_0x609d("0x56c")]="",x[_0x609d("0x1b")]._id=0,x.prototype.Type=0,x.prototype[_0x609d("0x43")]="",x[_0x609d("0x1b")][_0x609d("0x755")]="",x.prototype[_0x609d("0x756")]="",x[_0x609d("0x1b")].adcode="",x.prototype[_0x609d("0x757")]="",x[_0x609d("0x1b")].AS=0,x[_0x609d("0x1b")][_0x609d("0x758")]=0,x.prototype[_0x609d("0x759")]="",x.prototype.FirstRotateAngleX=0,x[_0x609d("0x1b")][_0x609d("0x75a")]=0,x[_0x609d("0x1b")][_0x609d("0x75b")]=0,x[_0x609d("0x1b")][_0x609d("0x1f9")]=0,x[_0x609d("0x1b")][_0x609d("0x5d1")]=0,x[_0x609d("0x1b")][_0x609d("0x56e")]=0,x.prototype[_0x609d("0x56f")]=0,x.prototype.DefaultCenZ=0,x[_0x609d("0x1b")].x=0,x[_0x609d("0x1b")].y=0,x[_0x609d("0x1b")].z=0,x[_0x609d("0x1b")].minX=0,x[_0x609d("0x1b")][_0x609d("0x222")]=0,x[_0x609d("0x1b")].maxX=0,x[_0x609d("0x1b")][_0x609d("0x221")]=0,x.prototype.ScaleLevel="",x[_0x609d("0x1b")].Remark="",x[_0x609d("0x1b")].FloorBarName="",x[_0x609d("0x1b")][_0x609d("0x5d3")]=0,x[_0x609d("0x1b")][_0x609d("0x204")]=g.emptyArray,x[_0x609d("0x1b")][_0x609d("0x2ba")]=g[_0x609d("0x75c")],x[_0x609d("0x1b")][_0x609d("0x75d")]=g[_0x609d("0x75c")],x[_0x609d("0x1b")][_0x609d("0x5ca")]="",x[_0x609d("0x1b")][_0x609d("0x52a")]="",x[_0x609d("0x1b")][_0x609d("0x5c4")]="",x[_0x609d("0x1b")][_0x609d("0x569")]="",x.prototype[_0x609d("0x75e")]="",x.prototype.o1=0,x[_0x609d("0x1b")][_0x609d("0x75f")]="",x[_0x609d("0x1b")].o2=0,x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){if(d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x3ea")]&&x[_0x609d("0x1c")](_0x609d("0x3ea"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x3ea")]),null!=x[_0x609d("0x1ee")]&&x.hasOwnProperty(_0x609d("0x1ee"))&&d[_0x609d("0xe0")](16)[_0x609d("0xe1")](x[_0x609d("0x1ee")]),null!=x[_0x609d("0x56c")]&&x[_0x609d("0x1c")](_0x609d("0x56c"))&&d[_0x609d("0xe0")](26)[_0x609d("0x54")](x[_0x609d("0x56c")]),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d[_0x609d("0xe0")](32)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x761")]&&x[_0x609d("0x1c")](_0x609d("0x761"))&&d[_0x609d("0xe0")](40)[_0x609d("0xe1")](x[_0x609d("0x761")]),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&d[_0x609d("0xe0")](50)[_0x609d("0x54")](x.name),null!=x[_0x609d("0x755")]&&x[_0x609d("0x1c")](_0x609d("0x755"))&&d[_0x609d("0xe0")](58)[_0x609d("0x54")](x[_0x609d("0x755")]),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")](_0x609d("0x756"))&&d[_0x609d("0xe0")](66)[_0x609d("0x54")](x[_0x609d("0x756")]),null!=x.adcode&&x[_0x609d("0x1c")](_0x609d("0x762"))&&d[_0x609d("0xe0")](74)[_0x609d("0x54")](x[_0x609d("0x762")]),null!=x[_0x609d("0x757")]&&x[_0x609d("0x1c")]("address")&&d[_0x609d("0xe0")](82)[_0x609d("0x54")](x[_0x609d("0x757")]),null!=x.AS&&x[_0x609d("0x1c")]("AS")&&d.uint32(89)[_0x609d("0xe6")](x.AS),null!=x[_0x609d("0x758")]&&x[_0x609d("0x1c")]("BuildingHigh")&&d[_0x609d("0xe0")](101)[_0x609d("0x46")](x[_0x609d("0x758")]),null!=x[_0x609d("0x759")]&&x[_0x609d("0x1c")]("Tel")&&d[_0x609d("0xe0")](106)[_0x609d("0x54")](x[_0x609d("0x759")]),null!=x[_0x609d("0x763")]&&x.hasOwnProperty(_0x609d("0x763"))&&d.uint32(113)[_0x609d("0xe6")](x.FirstRotateAngleX),null!=x[_0x609d("0x75a")]&&x[_0x609d("0x1c")](_0x609d("0x75a"))&&d[_0x609d("0xe0")](121)[_0x609d("0xe6")](x[_0x609d("0x75a")]),null!=x[_0x609d("0x75b")]&&x[_0x609d("0x1c")](_0x609d("0x75b"))&&d.uint32(129)[_0x609d("0xe6")](x[_0x609d("0x75b")]),null!=x.Firstscale&&x.hasOwnProperty("Firstscale")&&d[_0x609d("0xe0")](137)[_0x609d("0xe6")](x.Firstscale),null!=x[_0x609d("0x5d1")]&&x[_0x609d("0x1c")](_0x609d("0x5d1"))&&d[_0x609d("0xe0")](144).int32(x[_0x609d("0x5d1")]),null!=x[_0x609d("0x56e")]&&x[_0x609d("0x1c")](_0x609d("0x56e"))&&d[_0x609d("0xe0")](153)[_0x609d("0xe6")](x.DefaultCenX),null!=x[_0x609d("0x56f")]&&x[_0x609d("0x1c")](_0x609d("0x56f"))&&d[_0x609d("0xe0")](161)[_0x609d("0xe6")](x[_0x609d("0x56f")]),null!=x[_0x609d("0x764")]&&x[_0x609d("0x1c")](_0x609d("0x764"))&&d[_0x609d("0xe0")](169).double(x.DefaultCenZ),null!=x.x&&x[_0x609d("0x1c")]("x")&&d[_0x609d("0xe0")](177)[_0x609d("0xe6")](x.x),null!=x.y&&x[_0x609d("0x1c")]("y")&&d[_0x609d("0xe0")](185).double(x.y),null!=x.z&&x[_0x609d("0x1c")]("z")&&d[_0x609d("0xe0")](193).double(x.z),null!=x[_0x609d("0x220")]&&x.hasOwnProperty(_0x609d("0x220"))&&d[_0x609d("0xe0")](201).double(x.minX),null!=x[_0x609d("0x222")]&&x[_0x609d("0x1c")]("minY")&&d[_0x609d("0xe0")](209)[_0x609d("0xe6")](x.minY),null!=x[_0x609d("0x21f")]&&x[_0x609d("0x1c")](_0x609d("0x21f"))&&d[_0x609d("0xe0")](217)[_0x609d("0xe6")](x.maxX),null!=x[_0x609d("0x221")]&&x[_0x609d("0x1c")](_0x609d("0x221"))&&d[_0x609d("0xe0")](225)[_0x609d("0xe6")](x[_0x609d("0x221")]),null!=x[_0x609d("0x765")]&&x[_0x609d("0x1c")]("ScaleLevel")&&d[_0x609d("0xe0")](234)[_0x609d("0x54")](x[_0x609d("0x765")]),null!=x[_0x609d("0x56a")]&&x[_0x609d("0x1c")]("Remark")&&d.uint32(242)[_0x609d("0x54")](x[_0x609d("0x56a")]),null!=x[_0x609d("0x2b7")]&&x[_0x609d("0x1c")](_0x609d("0x2b7"))&&d[_0x609d("0xe0")](250)[_0x609d("0x54")](x.FloorBarName),null!=x[_0x609d("0x5d3")]&&x[_0x609d("0x1c")]("FloorHigh")&&d[_0x609d("0xe0")](256).int32(x[_0x609d("0x5d3")]),null!=x[_0x609d("0x204")]&&x[_0x609d("0x204")][_0x609d("0x21")])for(var _=0;_<x.floors.length;++_)a[_0x609d("0x766")].encode(x[_0x609d("0x204")][_],d[_0x609d("0xe0")](266)[_0x609d("0x103")]())[_0x609d("0x105")]();if(null!=x[_0x609d("0x2ba")]&&x[_0x609d("0x2ba")][_0x609d("0x21")])for(var _=0;_<x[_0x609d("0x2ba")][_0x609d("0x21")];++_)a[_0x609d("0x767")][_0x609d("0x760")](x[_0x609d("0x2ba")][_],d.uint32(274)[_0x609d("0x103")]())[_0x609d("0x105")]();if(null!=x[_0x609d("0x75d")]&&x[_0x609d("0x75d")][_0x609d("0x21")])for(var _=0;_<x[_0x609d("0x75d")].length;++_)a[_0x609d("0x768")][_0x609d("0x760")](x[_0x609d("0x75d")][_],d[_0x609d("0xe0")](282)[_0x609d("0x103")]()).ldelim();return null!=x.styleid&&x[_0x609d("0x1c")](_0x609d("0x5ca"))&&d[_0x609d("0xe0")](290)[_0x609d("0x54")](x[_0x609d("0x5ca")]),null!=x[_0x609d("0x52a")]&&x[_0x609d("0x1c")](_0x609d("0x52a"))&&d[_0x609d("0xe0")](298)[_0x609d("0x54")](x[_0x609d("0x52a")]),null!=x[_0x609d("0x5c4")]&&x[_0x609d("0x1c")](_0x609d("0x5c4"))&&d[_0x609d("0xe0")](306)[_0x609d("0x54")](x[_0x609d("0x5c4")]),null!=x[_0x609d("0x569")]&&x[_0x609d("0x1c")](_0x609d("0x569"))&&d[_0x609d("0xe0")](314)[_0x609d("0x54")](x[_0x609d("0x569")]),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&d[_0x609d("0xe0")](322)[_0x609d("0x54")](x[_0x609d("0x75e")]),null!=x.o1&&x[_0x609d("0x1c")]("o1")&&d[_0x609d("0xe0")](328)[_0x609d("0xe1")](x.o1),null!=x[_0x609d("0x75f")]&&x.hasOwnProperty(_0x609d("0x75f"))&&d[_0x609d("0xe0")](338).string(x[_0x609d("0x75f")]),null!=x.o2&&x[_0x609d("0x1c")]("o2")&&d[_0x609d("0xe0")](344)[_0x609d("0xe1")](x.o2),d},x[_0x609d("0x769")]=function(x,d){return this.encode(x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x5c0")]);x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e[_0x609d("0x3ea")]=x[_0x609d("0xe1")]();break;case 2:e[_0x609d("0x1ee")]=x[_0x609d("0xe1")]();break;case 3:e[_0x609d("0x56c")]=x.string();break;case 4:e[_0x609d("0x418")]=x.int32();break;case 5:e[_0x609d("0x761")]=x[_0x609d("0xe1")]();break;case 6:e[_0x609d("0x43")]=x.string();break;case 7:e[_0x609d("0x755")]=x[_0x609d("0x54")]();break;case 8:e.Brief=x.string();break;case 9:e.adcode=x.string();break;case 10:e.address=x[_0x609d("0x54")]();break;case 11:e.AS=x[_0x609d("0xe6")]();break;case 12:e[_0x609d("0x758")]=x[_0x609d("0x46")]();break;case 13:e[_0x609d("0x759")]=x.string();break;case 14:e[_0x609d("0x763")]=x.double();break;case 15:e[_0x609d("0x75a")]=x[_0x609d("0xe6")]();break;case 16:e[_0x609d("0x75b")]=x[_0x609d("0xe6")]();break;case 17:e[_0x609d("0x1f9")]=x[_0x609d("0xe6")]();break;case 18:e[_0x609d("0x5d1")]=x.int32();break;case 19:e[_0x609d("0x56e")]=x[_0x609d("0xe6")]();break;case 20:e[_0x609d("0x56f")]=x[_0x609d("0xe6")]();break;case 21:e[_0x609d("0x764")]=x[_0x609d("0xe6")]();break;case 22:e.x=x[_0x609d("0xe6")]();break;case 23:e.y=x[_0x609d("0xe6")]();break;case 24:e.z=x.double();break;case 25:e[_0x609d("0x220")]=x[_0x609d("0xe6")]();break;case 26:e[_0x609d("0x222")]=x[_0x609d("0xe6")]();break;case 27:e.maxX=x[_0x609d("0xe6")]();break;case 28:e[_0x609d("0x221")]=x[_0x609d("0xe6")]();break;case 29:e[_0x609d("0x765")]=x[_0x609d("0x54")]();break;case 30:e[_0x609d("0x56a")]=x.string();break;case 31:e[_0x609d("0x2b7")]=x[_0x609d("0x54")]();break;case 32:e[_0x609d("0x5d3")]=x.int32();break;case 33:e[_0x609d("0x204")]&&e[_0x609d("0x204")][_0x609d("0x21")]||(e[_0x609d("0x204")]=[]),e[_0x609d("0x204")][_0x609d("0x1a")](a.FloorSet[_0x609d("0x101")](x,x[_0x609d("0xe0")]()));break;case 34:e[_0x609d("0x2ba")]&&e[_0x609d("0x2ba")][_0x609d("0x21")]||(e[_0x609d("0x2ba")]=[]),e[_0x609d("0x2ba")][_0x609d("0x1a")](a[_0x609d("0x767")].decode(x,x[_0x609d("0xe0")]()));break;case 35:e[_0x609d("0x75d")]&&e[_0x609d("0x75d")][_0x609d("0x21")]||(e[_0x609d("0x75d")]=[]),e[_0x609d("0x75d")][_0x609d("0x1a")](a[_0x609d("0x768")].decode(x,x[_0x609d("0xe0")]()));break;case 36:e[_0x609d("0x5ca")]=x[_0x609d("0x54")]();break;case 37:e[_0x609d("0x52a")]=x[_0x609d("0x54")]();break;case 38:e[_0x609d("0x5c4")]=x[_0x609d("0x54")]();break;case 39:e.logotoken=x.string();break;case 40:e[_0x609d("0x75e")]=x[_0x609d("0x54")]();break;case 41:e.o1=x[_0x609d("0xe1")]();break;case 42:e[_0x609d("0x75f")]=x[_0x609d("0x54")]();break;case 43:e.o2=x[_0x609d("0xe1")]();break;default:x[_0x609d("0xeb")](7&t)}}return e},x.decodeDelimited=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){if("object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x)return"object expected";if(null!=x.version&&x[_0x609d("0x1c")]("version")&&!g[_0x609d("0x50")](x.version))return _0x609d("0x76b");if(null!=x[_0x609d("0x1ee")]&&x[_0x609d("0x1c")](_0x609d("0x1ee"))&&!g.isInteger(x[_0x609d("0x1ee")]))return"maptime: integer expected";if(null!=x[_0x609d("0x56c")]&&x.hasOwnProperty(_0x609d("0x56c"))&&!g.isString(x[_0x609d("0x56c")]))return _0x609d("0x76c");if(null!=x[_0x609d("0x418")]&&x.hasOwnProperty(_0x609d("0x418"))&&!g.isInteger(x._id))return _0x609d("0x76d");if(null!=x[_0x609d("0x761")]&&x[_0x609d("0x1c")](_0x609d("0x761"))&&!g[_0x609d("0x50")](x[_0x609d("0x761")]))return _0x609d("0x76e");if(null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&!g[_0x609d("0x53")](x.name))return _0x609d("0x76f");if(null!=x[_0x609d("0x755")]&&x[_0x609d("0x1c")](_0x609d("0x755"))&&!g.isString(x[_0x609d("0x755")]))return _0x609d("0x770");if(null!=x.Brief&&x[_0x609d("0x1c")](_0x609d("0x756"))&&!g[_0x609d("0x53")](x[_0x609d("0x756")]))return"Brief: string expected";if(null!=x.adcode&&x.hasOwnProperty(_0x609d("0x762"))&&!g[_0x609d("0x53")](x[_0x609d("0x762")]))return"adcode: string expected";if(null!=x[_0x609d("0x757")]&&x[_0x609d("0x1c")](_0x609d("0x757"))&&!g[_0x609d("0x53")](x[_0x609d("0x757")]))return _0x609d("0x771");if(null!=x.AS&&x[_0x609d("0x1c")]("AS")&&_0x609d("0x51")!=typeof x.AS)return"AS: number expected";if(null!=x[_0x609d("0x758")]&&x[_0x609d("0x1c")](_0x609d("0x758"))&&_0x609d("0x51")!=typeof x[_0x609d("0x758")])return"BuildingHigh: number expected";if(null!=x[_0x609d("0x759")]&&x[_0x609d("0x1c")](_0x609d("0x759"))&&!g[_0x609d("0x53")](x[_0x609d("0x759")]))return _0x609d("0x772");if(null!=x[_0x609d("0x763")]&&x[_0x609d("0x1c")](_0x609d("0x763"))&&_0x609d("0x51")!=typeof x[_0x609d("0x763")])return _0x609d("0x773");if(null!=x[_0x609d("0x75a")]&&x[_0x609d("0x1c")]("FirstRotateAngleY")&&_0x609d("0x51")!=typeof x[_0x609d("0x75a")])return _0x609d("0x774");if(null!=x[_0x609d("0x75b")]&&x.hasOwnProperty(_0x609d("0x75b"))&&_0x609d("0x51")!=typeof x[_0x609d("0x75b")])return _0x609d("0x775");if(null!=x[_0x609d("0x1f9")]&&x[_0x609d("0x1c")](_0x609d("0x1f9"))&&_0x609d("0x51")!=typeof x[_0x609d("0x1f9")])return _0x609d("0x776");if(null!=x[_0x609d("0x5d1")]&&x[_0x609d("0x1c")](_0x609d("0x5d1"))&&!g[_0x609d("0x50")](x.DefaultFnum))return _0x609d("0x777");if(null!=x[_0x609d("0x56e")]&&x[_0x609d("0x1c")](_0x609d("0x56e"))&&_0x609d("0x51")!=typeof x[_0x609d("0x56e")])return _0x609d("0x778");if(null!=x[_0x609d("0x56f")]&&x[_0x609d("0x1c")](_0x609d("0x56f"))&&_0x609d("0x51")!=typeof x[_0x609d("0x56f")])return _0x609d("0x779");if(null!=x[_0x609d("0x764")]&&x[_0x609d("0x1c")](_0x609d("0x764"))&&_0x609d("0x51")!=typeof x[_0x609d("0x764")])return _0x609d("0x77a");if(null!=x.x&&x.hasOwnProperty("x")&&_0x609d("0x51")!=typeof x.x)return _0x609d("0x77b");if(null!=x.y&&x[_0x609d("0x1c")]("y")&&_0x609d("0x51")!=typeof x.y)return _0x609d("0x77c");if(null!=x.z&&x[_0x609d("0x1c")]("z")&&_0x609d("0x51")!=typeof x.z)return _0x609d("0x77d");if(null!=x.minX&&x.hasOwnProperty(_0x609d("0x220"))&&"number"!=typeof x.minX)return _0x609d("0x77e");if(null!=x[_0x609d("0x222")]&&x[_0x609d("0x1c")](_0x609d("0x222"))&&"number"!=typeof x[_0x609d("0x222")])return _0x609d("0x77f");if(null!=x[_0x609d("0x21f")]&&x.hasOwnProperty(_0x609d("0x21f"))&&_0x609d("0x51")!=typeof x[_0x609d("0x21f")])return _0x609d("0x780");if(null!=x[_0x609d("0x221")]&&x[_0x609d("0x1c")](_0x609d("0x221"))&&_0x609d("0x51")!=typeof x.maxY)return _0x609d("0x781");if(null!=x.ScaleLevel&&x[_0x609d("0x1c")]("ScaleLevel")&&!g[_0x609d("0x53")](x.ScaleLevel))return _0x609d("0x782");if(null!=x[_0x609d("0x56a")]&&x[_0x609d("0x1c")](_0x609d("0x56a"))&&!g.isString(x[_0x609d("0x56a")]))return _0x609d("0x783");if(null!=x[_0x609d("0x2b7")]&&x[_0x609d("0x1c")](_0x609d("0x2b7"))&&!g[_0x609d("0x53")](x[_0x609d("0x2b7")]))return"FloorBarName: string expected";if(null!=x[_0x609d("0x5d3")]&&x.hasOwnProperty(_0x609d("0x5d3"))&&!g.isInteger(x[_0x609d("0x5d3")]))return"FloorHigh: integer expected";if(null!=x.floors&&x[_0x609d("0x1c")](_0x609d("0x204"))){if(!Array[_0x609d("0x57")](x[_0x609d("0x204")]))return _0x609d("0x784");for(var d=0;d<x[_0x609d("0x204")][_0x609d("0x21")];++d){var _=a[_0x609d("0x766")][_0x609d("0x76a")](x.floors[d]);if(_)return _0x609d("0x785")+_}}if(null!=x[_0x609d("0x2ba")]&&x[_0x609d("0x1c")]("navs")){if(!Array.isArray(x[_0x609d("0x2ba")]))return"navs: array expected";for(var d=0;d<x[_0x609d("0x2ba")][_0x609d("0x21")];++d){var _=a[_0x609d("0x767")][_0x609d("0x76a")](x[_0x609d("0x2ba")][d]);if(_)return _0x609d("0x786")+_}}if(null!=x[_0x609d("0x75d")]&&x[_0x609d("0x1c")](_0x609d("0x75d"))){if(!Array[_0x609d("0x57")](x[_0x609d("0x75d")]))return"panos: array expected";for(var d=0;d<x[_0x609d("0x75d")][_0x609d("0x21")];++d){var _=a[_0x609d("0x768")].verify(x[_0x609d("0x75d")][d]);if(_)return _0x609d("0x787")+_}}return null!=x[_0x609d("0x5ca")]&&x[_0x609d("0x1c")](_0x609d("0x5ca"))&&!g.isString(x[_0x609d("0x5ca")])?_0x609d("0x788"):null!=x[_0x609d("0x52a")]&&x[_0x609d("0x1c")]("token")&&!g.isString(x[_0x609d("0x52a")])?_0x609d("0x789"):null!=x.bid&&x[_0x609d("0x1c")](_0x609d("0x5c4"))&&!g[_0x609d("0x53")](x.bid)?"bid: string expected":null!=x[_0x609d("0x569")]&&x[_0x609d("0x1c")](_0x609d("0x569"))&&!g[_0x609d("0x53")](x[_0x609d("0x569")])?_0x609d("0x78a"):null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")]("other1")&&!g.isString(x[_0x609d("0x75e")])?_0x609d("0x78b"):null!=x.o1&&x[_0x609d("0x1c")]("o1")&&!g[_0x609d("0x50")](x.o1)?_0x609d("0x78c"):null!=x.other2&&x[_0x609d("0x1c")](_0x609d("0x75f"))&&!g.isString(x[_0x609d("0x75f")])?_0x609d("0x78d"):null!=x.o2&&x.hasOwnProperty("o2")&&!g[_0x609d("0x50")](x.o2)?"o2: integer expected":null;
},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x5c0")])return x;var d=new(a[_0x609d("0x5c0")]);if(null!=x[_0x609d("0x3ea")]&&(d[_0x609d("0x3ea")]=0|x[_0x609d("0x3ea")]),null!=x[_0x609d("0x1ee")]&&(d[_0x609d("0x1ee")]=0|x[_0x609d("0x1ee")]),null!=x[_0x609d("0x56c")]&&(d[_0x609d("0x56c")]=String(x[_0x609d("0x56c")])),null!=x[_0x609d("0x418")]&&(d[_0x609d("0x418")]=0|x[_0x609d("0x418")]),null!=x[_0x609d("0x761")]&&(d[_0x609d("0x761")]=0|x.Type),null!=x[_0x609d("0x43")]&&(d[_0x609d("0x43")]=String(x[_0x609d("0x43")])),null!=x[_0x609d("0x755")]&&(d[_0x609d("0x755")]=String(x[_0x609d("0x755")])),null!=x[_0x609d("0x756")]&&(d[_0x609d("0x756")]=String(x[_0x609d("0x756")])),null!=x[_0x609d("0x762")]&&(d.adcode=String(x.adcode)),null!=x.address&&(d[_0x609d("0x757")]=String(x[_0x609d("0x757")])),null!=x.AS&&(d.AS=Number(x.AS)),null!=x[_0x609d("0x758")]&&(d[_0x609d("0x758")]=Number(x[_0x609d("0x758")])),null!=x[_0x609d("0x759")]&&(d[_0x609d("0x759")]=String(x[_0x609d("0x759")])),null!=x[_0x609d("0x763")]&&(d[_0x609d("0x763")]=Number(x[_0x609d("0x763")])),null!=x[_0x609d("0x75a")]&&(d[_0x609d("0x75a")]=Number(x[_0x609d("0x75a")])),null!=x[_0x609d("0x75b")]&&(d.FirstRotateAngleZ=Number(x[_0x609d("0x75b")])),null!=x[_0x609d("0x1f9")]&&(d[_0x609d("0x1f9")]=Number(x[_0x609d("0x1f9")])),null!=x[_0x609d("0x5d1")]&&(d[_0x609d("0x5d1")]=0|x[_0x609d("0x5d1")]),null!=x[_0x609d("0x56e")]&&(d.DefaultCenX=Number(x[_0x609d("0x56e")])),null!=x[_0x609d("0x56f")]&&(d[_0x609d("0x56f")]=Number(x[_0x609d("0x56f")])),null!=x.DefaultCenZ&&(d.DefaultCenZ=Number(x[_0x609d("0x764")])),null!=x.x&&(d.x=Number(x.x)),null!=x.y&&(d.y=Number(x.y)),null!=x.z&&(d.z=Number(x.z)),null!=x[_0x609d("0x220")]&&(d[_0x609d("0x220")]=Number(x[_0x609d("0x220")])),null!=x[_0x609d("0x222")]&&(d[_0x609d("0x222")]=Number(x[_0x609d("0x222")])),null!=x[_0x609d("0x21f")]&&(d[_0x609d("0x21f")]=Number(x.maxX)),null!=x.maxY&&(d.maxY=Number(x[_0x609d("0x221")])),null!=x[_0x609d("0x765")]&&(d[_0x609d("0x765")]=String(x[_0x609d("0x765")])),null!=x[_0x609d("0x56a")]&&(d[_0x609d("0x56a")]=String(x.Remark)),null!=x[_0x609d("0x2b7")]&&(d[_0x609d("0x2b7")]=String(x[_0x609d("0x2b7")])),null!=x[_0x609d("0x5d3")]&&(d[_0x609d("0x5d3")]=0|x[_0x609d("0x5d3")]),x.floors){if(!Array[_0x609d("0x57")](x[_0x609d("0x204")]))throw TypeError(".ESMapSet.floors: array expected");d[_0x609d("0x204")]=[];for(var _=0;_<x[_0x609d("0x204")][_0x609d("0x21")];++_){if(_0x609d("0x20")!==e(x[_0x609d("0x204")][_]))throw TypeError(_0x609d("0x78f"));d[_0x609d("0x204")][_]=a.FloorSet[_0x609d("0x78e")](x.floors[_])}}if(x[_0x609d("0x2ba")]){if(!Array[_0x609d("0x57")](x.navs))throw TypeError(".ESMapSet.navs: array expected");d.navs=[];for(var _=0;_<x.navs[_0x609d("0x21")];++_){if(_0x609d("0x20")!==e(x.navs[_]))throw TypeError(_0x609d("0x790"));d[_0x609d("0x2ba")][_]=a[_0x609d("0x767")][_0x609d("0x78e")](x.navs[_])}}if(x[_0x609d("0x75d")]){if(!Array[_0x609d("0x57")](x[_0x609d("0x75d")]))throw TypeError(_0x609d("0x791"));d[_0x609d("0x75d")]=[];for(var _=0;_<x[_0x609d("0x75d")][_0x609d("0x21")];++_){if(_0x609d("0x20")!==e(x.panos[_]))throw TypeError(_0x609d("0x792"));d.panos[_]=a[_0x609d("0x768")][_0x609d("0x78e")](x.panos[_])}}return null!=x.styleid&&(d[_0x609d("0x5ca")]=String(x.styleid)),null!=x[_0x609d("0x52a")]&&(d[_0x609d("0x52a")]=String(x[_0x609d("0x52a")])),null!=x.bid&&(d.bid=String(x.bid)),null!=x[_0x609d("0x569")]&&(d.logotoken=String(x[_0x609d("0x569")])),null!=x[_0x609d("0x75e")]&&(d[_0x609d("0x75e")]=String(x.other1)),null!=x.o1&&(d.o1=0|x.o1),null!=x[_0x609d("0x75f")]&&(d[_0x609d("0x75f")]=String(x[_0x609d("0x75f")])),null!=x.o2&&(d.o2=0|x.o2),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};if((d.arrays||d[_0x609d("0x794")])&&(_[_0x609d("0x204")]=[],_[_0x609d("0x2ba")]=[],_.panos=[]),d[_0x609d("0x794")]&&(_.version=0,_[_0x609d("0x1ee")]=0,_[_0x609d("0x56c")]="",_[_0x609d("0x418")]=0,_[_0x609d("0x761")]=0,_[_0x609d("0x43")]="",_[_0x609d("0x755")]="",_[_0x609d("0x756")]="",_[_0x609d("0x762")]="",_[_0x609d("0x757")]="",_.AS=0,_[_0x609d("0x758")]=0,_.Tel="",_[_0x609d("0x763")]=0,_[_0x609d("0x75a")]=0,_[_0x609d("0x75b")]=0,_[_0x609d("0x1f9")]=0,_[_0x609d("0x5d1")]=0,_[_0x609d("0x56e")]=0,_[_0x609d("0x56f")]=0,_[_0x609d("0x764")]=0,_.x=0,_.y=0,_.z=0,_[_0x609d("0x220")]=0,_[_0x609d("0x222")]=0,_[_0x609d("0x21f")]=0,_[_0x609d("0x221")]=0,_.ScaleLevel="",_[_0x609d("0x56a")]="",_.FloorBarName="",_[_0x609d("0x5d3")]=0,_[_0x609d("0x5ca")]="",_[_0x609d("0x52a")]="",_[_0x609d("0x5c4")]="",_[_0x609d("0x569")]="",_[_0x609d("0x75e")]="",_.o1=0,_[_0x609d("0x75f")]="",_.o2=0),null!=x[_0x609d("0x3ea")]&&x[_0x609d("0x1c")]("version")&&(_[_0x609d("0x3ea")]=x[_0x609d("0x3ea")]),null!=x[_0x609d("0x1ee")]&&x[_0x609d("0x1c")](_0x609d("0x1ee"))&&(_[_0x609d("0x1ee")]=x[_0x609d("0x1ee")]),null!=x[_0x609d("0x56c")]&&x[_0x609d("0x1c")](_0x609d("0x56c"))&&(_[_0x609d("0x56c")]=x[_0x609d("0x56c")]),null!=x._id&&x[_0x609d("0x1c")]("_id")&&(_[_0x609d("0x418")]=x._id),null!=x[_0x609d("0x761")]&&x[_0x609d("0x1c")](_0x609d("0x761"))&&(_.Type=x.Type),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&(_.name=x[_0x609d("0x43")]),null!=x[_0x609d("0x755")]&&x[_0x609d("0x1c")](_0x609d("0x755"))&&(_[_0x609d("0x755")]=x[_0x609d("0x755")]),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")]("Brief")&&(_[_0x609d("0x756")]=x[_0x609d("0x756")]),null!=x[_0x609d("0x762")]&&x.hasOwnProperty(_0x609d("0x762"))&&(_[_0x609d("0x762")]=x[_0x609d("0x762")]),null!=x.address&&x[_0x609d("0x1c")](_0x609d("0x757"))&&(_[_0x609d("0x757")]=x[_0x609d("0x757")]),null!=x.AS&&x[_0x609d("0x1c")]("AS")&&(_.AS=x.AS),null!=x[_0x609d("0x758")]&&x[_0x609d("0x1c")](_0x609d("0x758"))&&(_[_0x609d("0x758")]=x.BuildingHigh),null!=x[_0x609d("0x759")]&&x[_0x609d("0x1c")]("Tel")&&(_[_0x609d("0x759")]=x.Tel),null!=x[_0x609d("0x763")]&&x[_0x609d("0x1c")]("FirstRotateAngleX")&&(_[_0x609d("0x763")]=x.FirstRotateAngleX),null!=x[_0x609d("0x75a")]&&x[_0x609d("0x1c")](_0x609d("0x75a"))&&(_[_0x609d("0x75a")]=x[_0x609d("0x75a")]),null!=x[_0x609d("0x75b")]&&x[_0x609d("0x1c")]("FirstRotateAngleZ")&&(_[_0x609d("0x75b")]=x[_0x609d("0x75b")]),null!=x[_0x609d("0x1f9")]&&x[_0x609d("0x1c")](_0x609d("0x1f9"))&&(_[_0x609d("0x1f9")]=x[_0x609d("0x1f9")]),null!=x[_0x609d("0x5d1")]&&x[_0x609d("0x1c")]("DefaultFnum")&&(_[_0x609d("0x5d1")]=x[_0x609d("0x5d1")]),null!=x.DefaultCenX&&x.hasOwnProperty(_0x609d("0x56e"))&&(_[_0x609d("0x56e")]=x[_0x609d("0x56e")]),null!=x[_0x609d("0x56f")]&&x[_0x609d("0x1c")]("DefaultCenY")&&(_[_0x609d("0x56f")]=x.DefaultCenY),null!=x[_0x609d("0x764")]&&x[_0x609d("0x1c")](_0x609d("0x764"))&&(_[_0x609d("0x764")]=x[_0x609d("0x764")]),null!=x.x&&x[_0x609d("0x1c")]("x")&&(_.x=x.x),null!=x.y&&x.hasOwnProperty("y")&&(_.y=x.y),null!=x.z&&x[_0x609d("0x1c")]("z")&&(_.z=x.z),null!=x[_0x609d("0x220")]&&x[_0x609d("0x1c")]("minX")&&(_[_0x609d("0x220")]=x.minX),null!=x[_0x609d("0x222")]&&x[_0x609d("0x1c")](_0x609d("0x222"))&&(_[_0x609d("0x222")]=x[_0x609d("0x222")]),null!=x[_0x609d("0x21f")]&&x.hasOwnProperty(_0x609d("0x21f"))&&(_[_0x609d("0x21f")]=x[_0x609d("0x21f")]),null!=x[_0x609d("0x221")]&&x[_0x609d("0x1c")]("maxY")&&(_[_0x609d("0x221")]=x[_0x609d("0x221")]),null!=x[_0x609d("0x765")]&&x.hasOwnProperty(_0x609d("0x765"))&&(_.ScaleLevel=x[_0x609d("0x765")]),null!=x.Remark&&x[_0x609d("0x1c")](_0x609d("0x56a"))&&(_[_0x609d("0x56a")]=x[_0x609d("0x56a")]),null!=x[_0x609d("0x2b7")]&&x.hasOwnProperty(_0x609d("0x2b7"))&&(_.FloorBarName=x[_0x609d("0x2b7")]),null!=x[_0x609d("0x5d3")]&&x[_0x609d("0x1c")](_0x609d("0x5d3"))&&(_[_0x609d("0x5d3")]=x[_0x609d("0x5d3")]),x.floors&&x[_0x609d("0x204")][_0x609d("0x21")]){_[_0x609d("0x204")]=[];for(var e=0;e<x[_0x609d("0x204")][_0x609d("0x21")];++e)_[_0x609d("0x204")][e]=a.FloorSet.toObject(x[_0x609d("0x204")][e],d)}if(x[_0x609d("0x2ba")]&&x[_0x609d("0x2ba")][_0x609d("0x21")]){_.navs=[];for(var e=0;e<x[_0x609d("0x2ba")][_0x609d("0x21")];++e)_[_0x609d("0x2ba")][e]=a[_0x609d("0x767")][_0x609d("0x793")](x[_0x609d("0x2ba")][e],d)}if(x[_0x609d("0x75d")]&&x[_0x609d("0x75d")][_0x609d("0x21")]){_[_0x609d("0x75d")]=[];for(var e=0;e<x[_0x609d("0x75d")][_0x609d("0x21")];++e)_[_0x609d("0x75d")][e]=a[_0x609d("0x768")].toObject(x[_0x609d("0x75d")][e],d)}return null!=x[_0x609d("0x5ca")]&&x.hasOwnProperty(_0x609d("0x5ca"))&&(_[_0x609d("0x5ca")]=x[_0x609d("0x5ca")]),null!=x[_0x609d("0x52a")]&&x[_0x609d("0x1c")](_0x609d("0x52a"))&&(_[_0x609d("0x52a")]=x[_0x609d("0x52a")]),null!=x[_0x609d("0x5c4")]&&x.hasOwnProperty("bid")&&(_[_0x609d("0x5c4")]=x.bid),null!=x[_0x609d("0x569")]&&x[_0x609d("0x1c")](_0x609d("0x569"))&&(_[_0x609d("0x569")]=x[_0x609d("0x569")]),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&(_[_0x609d("0x75e")]=x[_0x609d("0x75e")]),null!=x.o1&&x[_0x609d("0x1c")]("o1")&&(_.o1=x.o1),null!=x[_0x609d("0x75f")]&&x[_0x609d("0x1c")](_0x609d("0x75f"))&&(_[_0x609d("0x75f")]=x[_0x609d("0x75f")]),null!=x.o2&&x[_0x609d("0x1c")]("o2")&&(_.o2=x.o2),_},x[_0x609d("0x1b")].toObject=function(x){return this[_0x609d("0x7c")][_0x609d("0x793")](this,x)},x.prototype[_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")].toJSONOptions)},x}(),a[_0x609d("0x766")]=function(){function x(x){if(this.Rooms={},this[_0x609d("0x207")]={},this[_0x609d("0x5de")]={},this[_0x609d("0x5e1")]={},x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x418")]=0,x[_0x609d("0x1b")][_0x609d("0x1fb")]=0,x.prototype[_0x609d("0x797")]=0,x.prototype[_0x609d("0x43")]="",x.prototype[_0x609d("0x304")]="",x[_0x609d("0x1b")].AS=0,x[_0x609d("0x1b")][_0x609d("0x5a6")]=0,x[_0x609d("0x1b")][_0x609d("0x23b")]=0,x.prototype[_0x609d("0x5d5")]="",x.prototype[_0x609d("0x394")]="",x[_0x609d("0x1b")][_0x609d("0x5d6")]=g[_0x609d("0x4c")],x[_0x609d("0x1b")][_0x609d("0x207")]=g[_0x609d("0x4c")],x[_0x609d("0x1b")][_0x609d("0x5de")]=g[_0x609d("0x4c")],x.prototype[_0x609d("0x5e1")]=g[_0x609d("0x4c")],x[_0x609d("0x1b")][_0x609d("0x209")]="",x[_0x609d("0x1b")][_0x609d("0x29e")]="",x[_0x609d("0x1b")].other1="",x[_0x609d("0x1b")][_0x609d("0x75f")]="",x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){if(d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&d.uint32(8)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x1fb")]&&x.hasOwnProperty(_0x609d("0x1fb"))&&d[_0x609d("0xe0")](16).int32(x.floornum),null!=x[_0x609d("0x797")]&&x.hasOwnProperty(_0x609d("0x797"))&&d[_0x609d("0xe0")](24).int32(x.floornumtext),null!=x[_0x609d("0x43")]&&x.hasOwnProperty(_0x609d("0x43"))&&d[_0x609d("0xe0")](34)[_0x609d("0x54")](x[_0x609d("0x43")]),null!=x[_0x609d("0x304")]&&x[_0x609d("0x1c")](_0x609d("0x304"))&&d[_0x609d("0xe0")](42)[_0x609d("0x54")](x[_0x609d("0x304")]),null!=x.AS&&x[_0x609d("0x1c")]("AS")&&d[_0x609d("0xe0")](49)[_0x609d("0xe6")](x.AS),null!=x[_0x609d("0x5a6")]&&x[_0x609d("0x1c")](_0x609d("0x5a6"))&&d[_0x609d("0xe0")](56).int32(x.Height),null!=x[_0x609d("0x23b")]&&x[_0x609d("0x1c")]("Elevation")&&d[_0x609d("0xe0")](64)[_0x609d("0xe1")](x[_0x609d("0x23b")]),null!=x.Outline&&x[_0x609d("0x1c")](_0x609d("0x5d5"))&&d[_0x609d("0xe0")](74)[_0x609d("0x54")](x[_0x609d("0x5d5")]),null!=x[_0x609d("0x394")]&&x[_0x609d("0x1c")](_0x609d("0x394"))&&d[_0x609d("0xe0")](82).string(x[_0x609d("0x394")]),null!=x[_0x609d("0x5d6")]&&x[_0x609d("0x1c")](_0x609d("0x5d6")))for(var _=Object.keys(x[_0x609d("0x5d6")]),e=0;e<_[_0x609d("0x21")];++e)d[_0x609d("0xe0")](90)[_0x609d("0x103")]().uint32(8)[_0x609d("0xe1")](_[e]),a.RoomSet.encode(x.Rooms[_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]()).ldelim()[_0x609d("0x105")]();if(null!=x[_0x609d("0x207")]&&x[_0x609d("0x1c")](_0x609d("0x207")))for(var _=Object[_0x609d("0x3e")](x.Facility),e=0;e<_.length;++e)d[_0x609d("0xe0")](98)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a.POISet[_0x609d("0x760")](x[_0x609d("0x207")][_[e]],d.uint32(18)[_0x609d("0x103")]())[_0x609d("0x105")]()[_0x609d("0x105")]();if(null!=x.Labels&&x[_0x609d("0x1c")](_0x609d("0x5de")))for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x5de")]),e=0;e<_[_0x609d("0x21")];++e)d[_0x609d("0xe0")](106)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x798")][_0x609d("0x760")](x[_0x609d("0x5de")][_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]())[_0x609d("0x105")]().ldelim();if(null!=x[_0x609d("0x5e1")]&&x.hasOwnProperty(_0x609d("0x5e1")))for(var _=Object.keys(x[_0x609d("0x5e1")]),e=0;e<_[_0x609d("0x21")];++e)d.uint32(114)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x799")].encode(x[_0x609d("0x5e1")][_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]())[_0x609d("0x105")]()[_0x609d("0x105")]();return null!=x.image&&x[_0x609d("0x1c")](_0x609d("0x209"))&&d.uint32(122)[_0x609d("0x54")](x[_0x609d("0x209")]),null!=x.imagesize&&x.hasOwnProperty(_0x609d("0x29e"))&&d[_0x609d("0xe0")](130)[_0x609d("0x54")](x[_0x609d("0x29e")]),null!=x.other1&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&d[_0x609d("0xe0")](138).string(x[_0x609d("0x75e")]),null!=x[_0x609d("0x75f")]&&x[_0x609d("0x1c")](_0x609d("0x75f"))&&d.uint32(146)[_0x609d("0x54")](x.other2),d},x.encodeDelimited=function(x,d){return this[_0x609d("0x760")](x,d).ldelim()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _,e=void 0===d?x[_0x609d("0xd9")]:x.pos+d,t=new a.FloorSet;x[_0x609d("0xd8")]<e;){var n=x[_0x609d("0xe0")]();switch(n>>>3){case 1:t[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 2:t[_0x609d("0x1fb")]=x[_0x609d("0xe1")]();break;case 3:t[_0x609d("0x797")]=x[_0x609d("0xe1")]();break;case 4:t[_0x609d("0x43")]=x[_0x609d("0x54")]();break;case 5:t[_0x609d("0x304")]=x[_0x609d("0x54")]();break;case 6:t.AS=x[_0x609d("0xe6")]();break;case 7:t[_0x609d("0x5a6")]=x.int32();break;case 8:t[_0x609d("0x23b")]=x[_0x609d("0xe1")]();break;case 9:t[_0x609d("0x5d5")]=x[_0x609d("0x54")]();break;case 10:t[_0x609d("0x394")]=x[_0x609d("0x54")]();break;case 11:x[_0x609d("0xea")]()[_0x609d("0xd8")]++,t[_0x609d("0x5d6")]===g[_0x609d("0x4c")]&&(t[_0x609d("0x5d6")]={}),_=x[_0x609d("0xe1")](),x[_0x609d("0xd8")]++,t[_0x609d("0x5d6")][_]=a[_0x609d("0x79a")][_0x609d("0x101")](x,x[_0x609d("0xe0")]());break;case 12:x[_0x609d("0xea")]()[_0x609d("0xd8")]++,t[_0x609d("0x207")]===g.emptyObject&&(t[_0x609d("0x207")]={}),_=x[_0x609d("0xe1")](),x[_0x609d("0xd8")]++,t[_0x609d("0x207")][_]=a.POISet.decode(x,x[_0x609d("0xe0")]());break;case 13:x[_0x609d("0xea")]()[_0x609d("0xd8")]++,t.Labels===g[_0x609d("0x4c")]&&(t[_0x609d("0x5de")]={}),_=x[_0x609d("0xe1")](),x[_0x609d("0xd8")]++,t[_0x609d("0x5de")][_]=a.POISet[_0x609d("0x101")](x,x[_0x609d("0xe0")]());break;case 14:x[_0x609d("0xea")]().pos++,t[_0x609d("0x5e1")]===g[_0x609d("0x4c")]&&(t[_0x609d("0x5e1")]={}),_=x.int32(),x[_0x609d("0xd8")]++,t.Lifts[_]=a.LiftSet[_0x609d("0x101")](x,x[_0x609d("0xe0")]());break;case 15:t.image=x[_0x609d("0x54")]();break;case 16:t.imagesize=x[_0x609d("0x54")]();break;case 17:t[_0x609d("0x75e")]=x[_0x609d("0x54")]();break;case 18:t[_0x609d("0x75f")]=x.string();break;default:x[_0x609d("0xeb")](7&n)}}return t},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x.verify=function(x){if(_0x609d("0x20")!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x)return _0x609d("0x79c");if(null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&!g.isInteger(x[_0x609d("0x418")]))return _0x609d("0x76d");if(null!=x[_0x609d("0x1fb")]&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&!g[_0x609d("0x50")](x[_0x609d("0x1fb")]))return _0x609d("0x79d");if(null!=x[_0x609d("0x797")]&&x[_0x609d("0x1c")](_0x609d("0x797"))&&!g[_0x609d("0x50")](x[_0x609d("0x797")]))return _0x609d("0x79e");if(null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&!g[_0x609d("0x53")](x[_0x609d("0x43")]))return _0x609d("0x76f");if(null!=x.NameEn&&x[_0x609d("0x1c")]("NameEn")&&!g[_0x609d("0x53")](x[_0x609d("0x304")]))return _0x609d("0x79f");if(null!=x.AS&&x[_0x609d("0x1c")]("AS")&&_0x609d("0x51")!=typeof x.AS)return _0x609d("0x7a0");if(null!=x.Height&&x.hasOwnProperty(_0x609d("0x5a6"))&&!g.isInteger(x[_0x609d("0x5a6")]))return _0x609d("0x7a1");if(null!=x[_0x609d("0x23b")]&&x[_0x609d("0x1c")](_0x609d("0x23b"))&&!g[_0x609d("0x50")](x[_0x609d("0x23b")]))return _0x609d("0x7a2");if(null!=x.Outline&&x[_0x609d("0x1c")](_0x609d("0x5d5"))&&!g[_0x609d("0x53")](x[_0x609d("0x5d5")]))return"Outline: string expected";if(null!=x[_0x609d("0x394")]&&x[_0x609d("0x1c")](_0x609d("0x394"))&&!g[_0x609d("0x53")](x[_0x609d("0x394")]))return"Alias: string expected";if(null!=x[_0x609d("0x5d6")]&&x[_0x609d("0x1c")](_0x609d("0x5d6"))){if(!g[_0x609d("0x55")](x[_0x609d("0x5d6")]))return _0x609d("0x7a3");for(var d=Object[_0x609d("0x3e")](x.Rooms),_=0;_<d[_0x609d("0x21")];++_){if(!g[_0x609d("0x62")].test(d[_]))return _0x609d("0x7a4");var t=a.RoomSet[_0x609d("0x76a")](x[_0x609d("0x5d6")][d[_]]);if(t)return _0x609d("0x7a5")+t}}if(null!=x[_0x609d("0x207")]&&x[_0x609d("0x1c")](_0x609d("0x207"))){if(!g[_0x609d("0x55")](x[_0x609d("0x207")]))return _0x609d("0x7a6");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x207")]),_=0;_<d[_0x609d("0x21")];++_){if(!g.key32Re[_0x609d("0x78")](d[_]))return _0x609d("0x7a7");var t=a.POISet.verify(x[_0x609d("0x207")][d[_]]);if(t)return _0x609d("0x7a8")+t}}if(null!=x.Labels&&x[_0x609d("0x1c")]("Labels")){if(!g[_0x609d("0x55")](x[_0x609d("0x5de")]))return"Labels: object expected";for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x5de")]),_=0;_<d[_0x609d("0x21")];++_){if(!g[_0x609d("0x62")][_0x609d("0x78")](d[_]))return"Labels: integer key{k:int32} expected";var t=a[_0x609d("0x798")].verify(x.Labels[d[_]]);if(t)return"Labels."+t}}if(null!=x[_0x609d("0x5e1")]&&x[_0x609d("0x1c")](_0x609d("0x5e1"))){if(!g[_0x609d("0x55")](x[_0x609d("0x5e1")]))return _0x609d("0x7a9");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x5e1")]),_=0;_<d[_0x609d("0x21")];++_){if(!g[_0x609d("0x62")][_0x609d("0x78")](d[_]))return"Lifts: integer key{k:int32} expected";var t=a[_0x609d("0x799")][_0x609d("0x76a")](x[_0x609d("0x5e1")][d[_]]);if(t)return _0x609d("0x7aa")+t}}return null!=x[_0x609d("0x209")]&&x[_0x609d("0x1c")](_0x609d("0x209"))&&!g[_0x609d("0x53")](x[_0x609d("0x209")])?_0x609d("0x7ab"):null!=x[_0x609d("0x29e")]&&x[_0x609d("0x1c")](_0x609d("0x29e"))&&!g.isString(x.imagesize)?_0x609d("0x7ac"):null!=x[_0x609d("0x75e")]&&x.hasOwnProperty(_0x609d("0x75e"))&&!g.isString(x[_0x609d("0x75e")])?_0x609d("0x78b"):null!=x[_0x609d("0x75f")]&&x[_0x609d("0x1c")](_0x609d("0x75f"))&&!g[_0x609d("0x53")](x[_0x609d("0x75f")])?"other2: string expected":null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x766")])return x;var d=new(a[_0x609d("0x766")]);if(null!=x[_0x609d("0x418")]&&(d[_0x609d("0x418")]=0|x[_0x609d("0x418")]),null!=x[_0x609d("0x1fb")]&&(d[_0x609d("0x1fb")]=0|x[_0x609d("0x1fb")]),null!=x[_0x609d("0x797")]&&(d[_0x609d("0x797")]=0|x.floornumtext),null!=x.name&&(d.name=String(x.name)),null!=x.NameEn&&(d[_0x609d("0x304")]=String(x[_0x609d("0x304")])),null!=x.AS&&(d.AS=Number(x.AS)),null!=x.Height&&(d[_0x609d("0x5a6")]=0|x[_0x609d("0x5a6")]),null!=x[_0x609d("0x23b")]&&(d[_0x609d("0x23b")]=0|x[_0x609d("0x23b")]),null!=x[_0x609d("0x5d5")]&&(d[_0x609d("0x5d5")]=String(x[_0x609d("0x5d5")])),null!=x[_0x609d("0x394")]&&(d.Alias=String(x.Alias)),x.Rooms){if(_0x609d("0x20")!==e(x[_0x609d("0x5d6")]))throw TypeError(_0x609d("0x7ad"));d[_0x609d("0x5d6")]={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x5d6")]),t=0;t<_[_0x609d("0x21")];++t){if(_0x609d("0x20")!==e(x[_0x609d("0x5d6")][_[t]]))throw TypeError(_0x609d("0x7ad"));d[_0x609d("0x5d6")][_[t]]=a[_0x609d("0x79a")].fromObject(x[_0x609d("0x5d6")][_[t]])}}if(x[_0x609d("0x207")]){if("object"!==e(x[_0x609d("0x207")]))throw TypeError(_0x609d("0x7ae"));d.Facility={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x207")]),t=0;t<_.length;++t){if(_0x609d("0x20")!==e(x[_0x609d("0x207")][_[t]]))throw TypeError(_0x609d("0x7ae"));d[_0x609d("0x207")][_[t]]=a[_0x609d("0x798")][_0x609d("0x78e")](x[_0x609d("0x207")][_[t]])}}if(x.Labels){if(_0x609d("0x20")!==e(x[_0x609d("0x5de")]))throw TypeError(_0x609d("0x7af"));d[_0x609d("0x5de")]={};for(var _=Object.keys(x.Labels),t=0;t<_[_0x609d("0x21")];++t){if(_0x609d("0x20")!==e(x[_0x609d("0x5de")][_[t]]))throw TypeError(".FloorSet.Labels: object expected");d[_0x609d("0x5de")][_[t]]=a[_0x609d("0x798")].fromObject(x.Labels[_[t]])}}if(x.Lifts){if(_0x609d("0x20")!==e(x[_0x609d("0x5e1")]))throw TypeError(_0x609d("0x7b0"));d[_0x609d("0x5e1")]={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x5e1")]),t=0;t<_.length;++t){if(_0x609d("0x20")!==e(x[_0x609d("0x5e1")][_[t]]))throw TypeError(".FloorSet.Lifts: object expected");d[_0x609d("0x5e1")][_[t]]=a.LiftSet[_0x609d("0x78e")](x[_0x609d("0x5e1")][_[t]])}}return null!=x.image&&(d[_0x609d("0x209")]=String(x[_0x609d("0x209")])),null!=x[_0x609d("0x29e")]&&(d[_0x609d("0x29e")]=String(x.imagesize)),null!=x[_0x609d("0x75e")]&&(d[_0x609d("0x75e")]=String(x.other1)),null!=x[_0x609d("0x75f")]&&(d[_0x609d("0x75f")]=String(x[_0x609d("0x75f")])),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};(d[_0x609d("0x7b1")]||d[_0x609d("0x794")])&&(_[_0x609d("0x5d6")]={},_[_0x609d("0x207")]={},_[_0x609d("0x5de")]={},_[_0x609d("0x5e1")]={}),d[_0x609d("0x794")]&&(_[_0x609d("0x418")]=0,_[_0x609d("0x1fb")]=0,_[_0x609d("0x797")]=0,_.name="",_[_0x609d("0x304")]="",_.AS=0,_[_0x609d("0x5a6")]=0,_[_0x609d("0x23b")]=0,_[_0x609d("0x5d5")]="",_[_0x609d("0x394")]="",_[_0x609d("0x209")]="",_[_0x609d("0x29e")]="",_[_0x609d("0x75e")]="",_[_0x609d("0x75f")]=""),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&(_[_0x609d("0x418")]=x[_0x609d("0x418")]),null!=x[_0x609d("0x1fb")]&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&(_[_0x609d("0x1fb")]=x[_0x609d("0x1fb")]),null!=x[_0x609d("0x797")]&&x[_0x609d("0x1c")]("floornumtext")&&(_[_0x609d("0x797")]=x[_0x609d("0x797")]),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&(_[_0x609d("0x43")]=x[_0x609d("0x43")]),null!=x.NameEn&&x[_0x609d("0x1c")](_0x609d("0x304"))&&(_[_0x609d("0x304")]=x[_0x609d("0x304")]),null!=x.AS&&x.hasOwnProperty("AS")&&(_.AS=x.AS),null!=x[_0x609d("0x5a6")]&&x[_0x609d("0x1c")](_0x609d("0x5a6"))&&(_[_0x609d("0x5a6")]=x[_0x609d("0x5a6")]),null!=x[_0x609d("0x23b")]&&x[_0x609d("0x1c")](_0x609d("0x23b"))&&(_[_0x609d("0x23b")]=x[_0x609d("0x23b")]),null!=x[_0x609d("0x5d5")]&&x.hasOwnProperty("Outline")&&(_[_0x609d("0x5d5")]=x[_0x609d("0x5d5")]),null!=x[_0x609d("0x394")]&&x[_0x609d("0x1c")](_0x609d("0x394"))&&(_[_0x609d("0x394")]=x[_0x609d("0x394")]);var e;if(x.Rooms&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x5d6")]))[_0x609d("0x21")]){_[_0x609d("0x5d6")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x5d6")][e[t]]=a[_0x609d("0x79a")][_0x609d("0x793")](x[_0x609d("0x5d6")][e[t]],d)}if(x[_0x609d("0x207")]&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x207")]))[_0x609d("0x21")]){_[_0x609d("0x207")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x207")][e[t]]=a[_0x609d("0x798")][_0x609d("0x793")](x[_0x609d("0x207")][e[t]],d)}if(x[_0x609d("0x5de")]&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x5de")]))[_0x609d("0x21")]){_[_0x609d("0x5de")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x5de")][e[t]]=a.POISet[_0x609d("0x793")](x[_0x609d("0x5de")][e[t]],d)}if(x.Lifts&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x5e1")]))[_0x609d("0x21")]){_[_0x609d("0x5e1")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_.Lifts[e[t]]=a.LiftSet[_0x609d("0x793")](x.Lifts[e[t]],d)}return null!=x[_0x609d("0x209")]&&x.hasOwnProperty(_0x609d("0x209"))&&(_[_0x609d("0x209")]=x[_0x609d("0x209")]),null!=x[_0x609d("0x29e")]&&x[_0x609d("0x1c")]("imagesize")&&(_[_0x609d("0x29e")]=x[_0x609d("0x29e")]),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&(_.other1=x[_0x609d("0x75e")]),null!=x[_0x609d("0x75f")]&&x[_0x609d("0x1c")](_0x609d("0x75f"))&&(_[_0x609d("0x75f")]=x[_0x609d("0x75f")]),_},x.prototype[_0x609d("0x793")]=function(x){return this[_0x609d("0x7c")][_0x609d("0x793")](this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a.RoomSet=function(){function x(x){if(x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d.length;++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")]._id=0,x.prototype[_0x609d("0x43")]="",x[_0x609d("0x1b")][_0x609d("0x304")]="",x[_0x609d("0x1b")][_0x609d("0x756")]="",x[_0x609d("0x1b")][_0x609d("0x208")]=0,x[_0x609d("0x1b")].RL="",x[_0x609d("0x1b")][_0x609d("0x5db")]="",x[_0x609d("0x1b")].BC=0,x[_0x609d("0x1b")].RC="",x[_0x609d("0x1b")].RH=0,x.prototype.RM="",x.prototype[_0x609d("0x5dc")]="",x.prototype[_0x609d("0x5dd")]="",x[_0x609d("0x1b")][_0x609d("0x5d9")]="",x[_0x609d("0x1b")].RS=0,x.prototype.SL=0,x[_0x609d("0x1b")][_0x609d("0x592")]=0,x[_0x609d("0x1b")][_0x609d("0x5d7")]=0,x[_0x609d("0x1b")].AS=0,x[_0x609d("0x1b")][_0x609d("0x5d5")]="",x[_0x609d("0x1b")][_0x609d("0x7b2")]=0,x[_0x609d("0x1b")].ShopID=0,x[_0x609d("0x1b")].FS=0,x[_0x609d("0x1b")].FC="",x[_0x609d("0x1b")].other1="",x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x418")]&&x.hasOwnProperty(_0x609d("0x418"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&x.hasOwnProperty(_0x609d("0x43"))&&d[_0x609d("0xe0")](18)[_0x609d("0x54")](x[_0x609d("0x43")]),null!=x[_0x609d("0x304")]&&x.hasOwnProperty(_0x609d("0x304"))&&d.uint32(26)[_0x609d("0x54")](x.NameEn),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")](_0x609d("0x756"))&&d[_0x609d("0xe0")](34)[_0x609d("0x54")](x[_0x609d("0x756")]),null!=x[_0x609d("0x208")]&&x[_0x609d("0x1c")]("Tid")&&d[_0x609d("0xe0")](40)[_0x609d("0xe1")](x[_0x609d("0x208")]),null!=x.RL&&x[_0x609d("0x1c")]("RL")&&d[_0x609d("0xe0")](50)[_0x609d("0x54")](x.RL),null!=x[_0x609d("0x5db")]&&x[_0x609d("0x1c")](_0x609d("0x5db"))&&d[_0x609d("0xe0")](58)[_0x609d("0x54")](x[_0x609d("0x5db")]),null!=x.BC&&x[_0x609d("0x1c")]("BC")&&d[_0x609d("0xe0")](64)[_0x609d("0xe1")](x.BC),null!=x.RC&&x[_0x609d("0x1c")]("RC")&&d.uint32(74).string(x.RC),null!=x.RH&&x[_0x609d("0x1c")]("RH")&&d.uint32(81).double(x.RH),null!=x.RM&&x[_0x609d("0x1c")]("RM")&&d[_0x609d("0xe0")](90).string(x.RM),null!=x[_0x609d("0x5dc")]&&x[_0x609d("0x1c")](_0x609d("0x5dc"))&&d[_0x609d("0xe0")](98)[_0x609d("0x54")](x[_0x609d("0x5dc")]),null!=x[_0x609d("0x5dd")]&&x[_0x609d("0x1c")](_0x609d("0x5dd"))&&d[_0x609d("0xe0")](106)[_0x609d("0x54")](x[_0x609d("0x5dd")]),null!=x[_0x609d("0x5d9")]&&x[_0x609d("0x1c")](_0x609d("0x5d9"))&&d[_0x609d("0xe0")](114).string(x.RMO),null!=x.RS&&x.hasOwnProperty("RS")&&d.uint32(120)[_0x609d("0xe1")](x.RS),null!=x.SL&&x[_0x609d("0x1c")]("SL")&&d[_0x609d("0xe0")](128)[_0x609d("0xe1")](x.SL),null!=x[_0x609d("0x592")]&&x[_0x609d("0x1c")](_0x609d("0x592"))&&d[_0x609d("0xe0")](137)[_0x609d("0xe6")](x[_0x609d("0x592")]),null!=x[_0x609d("0x5d7")]&&x[_0x609d("0x1c")](_0x609d("0x5d7"))&&d[_0x609d("0xe0")](145)[_0x609d("0xe6")](x[_0x609d("0x5d7")]),null!=x.AS&&x[_0x609d("0x1c")]("AS")&&d.uint32(153)[_0x609d("0xe6")](x.AS),null!=x[_0x609d("0x5d5")]&&x.hasOwnProperty(_0x609d("0x5d5"))&&d.uint32(162)[_0x609d("0x54")](x.Outline),null!=x.PointID&&x[_0x609d("0x1c")](_0x609d("0x7b2"))&&d[_0x609d("0xe0")](168)[_0x609d("0xe1")](x[_0x609d("0x7b2")]),null!=x[_0x609d("0x7b3")]&&x.hasOwnProperty(_0x609d("0x7b3"))&&d[_0x609d("0xe0")](176)[_0x609d("0xe1")](x[_0x609d("0x7b3")]),null!=x.FS&&x[_0x609d("0x1c")]("FS")&&d[_0x609d("0xe0")](184).int32(x.FS),null!=x.FC&&x[_0x609d("0x1c")]("FC")&&d[_0x609d("0xe0")](194)[_0x609d("0x54")](x.FC),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&d[_0x609d("0xe0")](202)[_0x609d("0x54")](x[_0x609d("0x75e")]),d},x.encodeDelimited=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x.decode=function(x,d){x instanceof i||(x=i.create(x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new a.RoomSet;x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 2:e[_0x609d("0x43")]=x[_0x609d("0x54")]();break;case 3:e[_0x609d("0x304")]=x[_0x609d("0x54")]();break;case 4:e[_0x609d("0x756")]=x[_0x609d("0x54")]();break;case 5:e[_0x609d("0x208")]=x[_0x609d("0xe1")]();break;case 6:e.RL=x[_0x609d("0x54")]();break;case 7:e[_0x609d("0x5db")]=x.string();break;case 8:e.BC=x[_0x609d("0xe1")]();break;case 9:e.RC=x[_0x609d("0x54")]();break;case 10:e.RH=x.double();break;case 11:e.RM=x[_0x609d("0x54")]();break;case 12:e[_0x609d("0x5dc")]=x[_0x609d("0x54")]();break;case 13:e[_0x609d("0x5dd")]=x[_0x609d("0x54")]();break;case 14:e[_0x609d("0x5d9")]=x[_0x609d("0x54")]();break;case 15:e.RS=x[_0x609d("0xe1")]();break;case 16:e.SL=x.int32();break;case 17:e[_0x609d("0x592")]=x[_0x609d("0xe6")]();break;case 18:e[_0x609d("0x5d7")]=x[_0x609d("0xe6")]();break;case 19:e.AS=x[_0x609d("0xe6")]();break;case 20:e.Outline=x[_0x609d("0x54")]();break;case 21:e[_0x609d("0x7b2")]=x[_0x609d("0xe1")]();break;case 22:e[_0x609d("0x7b3")]=x[_0x609d("0xe1")]();break;case 23:e.FS=x[_0x609d("0xe1")]();break;case 24:e.FC=x[_0x609d("0x54")]();break;case 25:e[_0x609d("0x75e")]=x[_0x609d("0x54")]();break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this.decode(x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){return _0x609d("0x20")!==("undefined"==typeof x?"undefined":e(x))||null===x?_0x609d("0x79c"):null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&!g[_0x609d("0x50")](x[_0x609d("0x418")])?_0x609d("0x76d"):null!=x.name&&x[_0x609d("0x1c")](_0x609d("0x43"))&&!g[_0x609d("0x53")](x[_0x609d("0x43")])?_0x609d("0x76f"):null!=x.NameEn&&x.hasOwnProperty(_0x609d("0x304"))&&!g[_0x609d("0x53")](x.NameEn)?_0x609d("0x79f"):null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")]("Brief")&&!g[_0x609d("0x53")](x[_0x609d("0x756")])?"Brief: string expected":null!=x[_0x609d("0x208")]&&x[_0x609d("0x1c")](_0x609d("0x208"))&&!g[_0x609d("0x50")](x[_0x609d("0x208")])?_0x609d("0x7b4"):null!=x.RL&&x[_0x609d("0x1c")]("RL")&&!g[_0x609d("0x53")](x.RL)?_0x609d("0x7b5"):null!=x[_0x609d("0x5db")]&&x.hasOwnProperty(_0x609d("0x5db"))&&!g[_0x609d("0x53")](x[_0x609d("0x5db")])?"RLSize: string expected":null!=x.BC&&x.hasOwnProperty("BC")&&!g[_0x609d("0x50")](x.BC)?_0x609d("0x7b6"):null!=x.RC&&x[_0x609d("0x1c")]("RC")&&!g.isString(x.RC)?_0x609d("0x7b7"):null!=x.RH&&x[_0x609d("0x1c")]("RH")&&_0x609d("0x51")!=typeof x.RH?_0x609d("0x7b8"):null!=x.RM&&x[_0x609d("0x1c")]("RM")&&!g[_0x609d("0x53")](x.RM)?_0x609d("0x7b9"):null!=x.RMS&&x[_0x609d("0x1c")](_0x609d("0x5dc"))&&!g[_0x609d("0x53")](x[_0x609d("0x5dc")])?_0x609d("0x7ba"):null!=x[_0x609d("0x5dd")]&&x.hasOwnProperty(_0x609d("0x5dd"))&&!g.isString(x[_0x609d("0x5dd")])?_0x609d("0x7bb"):null!=x[_0x609d("0x5d9")]&&x[_0x609d("0x1c")](_0x609d("0x5d9"))&&!g[_0x609d("0x53")](x.RMO)?"RMO: string expected":null!=x.RS&&x[_0x609d("0x1c")]("RS")&&!g[_0x609d("0x50")](x.RS)?_0x609d("0x7bc"):null!=x.SL&&x[_0x609d("0x1c")]("SL")&&!g[_0x609d("0x50")](x.SL)?_0x609d("0x7bd"):null!=x[_0x609d("0x592")]&&x.hasOwnProperty(_0x609d("0x592"))&&"number"!=typeof x[_0x609d("0x592")]?_0x609d("0x7be"):null!=x.CenY&&x[_0x609d("0x1c")]("CenY")&&_0x609d("0x51")!=typeof x[_0x609d("0x5d7")]?_0x609d("0x7bf"):null!=x.AS&&x[_0x609d("0x1c")]("AS")&&"number"!=typeof x.AS?_0x609d("0x7a0"):null!=x.Outline&&x[_0x609d("0x1c")](_0x609d("0x5d5"))&&!g[_0x609d("0x53")](x[_0x609d("0x5d5")])?_0x609d("0x7c0"):null!=x[_0x609d("0x7b2")]&&x[_0x609d("0x1c")](_0x609d("0x7b2"))&&!g[_0x609d("0x50")](x.PointID)?_0x609d("0x7c1"):null!=x[_0x609d("0x7b3")]&&x[_0x609d("0x1c")](_0x609d("0x7b3"))&&!g[_0x609d("0x50")](x[_0x609d("0x7b3")])?_0x609d("0x7c2"):null!=x.FS&&x[_0x609d("0x1c")]("FS")&&!g[_0x609d("0x50")](x.FS)?_0x609d("0x7c3"):null!=x.FC&&x[_0x609d("0x1c")]("FC")&&!g[_0x609d("0x53")](x.FC)?_0x609d("0x7c4"):null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&!g[_0x609d("0x53")](x[_0x609d("0x75e")])?_0x609d("0x78b"):null},x.fromObject=function(x){if(x instanceof a.RoomSet)return x;
var d=new(a[_0x609d("0x79a")]);return null!=x._id&&(d[_0x609d("0x418")]=0|x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&(d[_0x609d("0x43")]=String(x[_0x609d("0x43")])),null!=x[_0x609d("0x304")]&&(d[_0x609d("0x304")]=String(x[_0x609d("0x304")])),null!=x[_0x609d("0x756")]&&(d[_0x609d("0x756")]=String(x[_0x609d("0x756")])),null!=x[_0x609d("0x208")]&&(d[_0x609d("0x208")]=0|x[_0x609d("0x208")]),null!=x.RL&&(d.RL=String(x.RL)),null!=x[_0x609d("0x5db")]&&(d.RLSize=String(x[_0x609d("0x5db")])),null!=x.BC&&(d.BC=0|x.BC),null!=x.RC&&(d.RC=String(x.RC)),null!=x.RH&&(d.RH=Number(x.RH)),null!=x.RM&&(d.RM=String(x.RM)),null!=x[_0x609d("0x5dc")]&&(d[_0x609d("0x5dc")]=String(x[_0x609d("0x5dc")])),null!=x[_0x609d("0x5dd")]&&(d[_0x609d("0x5dd")]=String(x[_0x609d("0x5dd")])),null!=x[_0x609d("0x5d9")]&&(d[_0x609d("0x5d9")]=String(x[_0x609d("0x5d9")])),null!=x.RS&&(d.RS=0|x.RS),null!=x.SL&&(d.SL=0|x.SL),null!=x[_0x609d("0x592")]&&(d[_0x609d("0x592")]=Number(x[_0x609d("0x592")])),null!=x[_0x609d("0x5d7")]&&(d.CenY=Number(x[_0x609d("0x5d7")])),null!=x.AS&&(d.AS=Number(x.AS)),null!=x.Outline&&(d[_0x609d("0x5d5")]=String(x[_0x609d("0x5d5")])),null!=x[_0x609d("0x7b2")]&&(d[_0x609d("0x7b2")]=0|x[_0x609d("0x7b2")]),null!=x[_0x609d("0x7b3")]&&(d[_0x609d("0x7b3")]=0|x[_0x609d("0x7b3")]),null!=x.FS&&(d.FS=0|x.FS),null!=x.FC&&(d.FC=String(x.FC)),null!=x[_0x609d("0x75e")]&&(d[_0x609d("0x75e")]=String(x[_0x609d("0x75e")])),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d[_0x609d("0x794")]&&(_[_0x609d("0x418")]=0,_[_0x609d("0x43")]="",_.NameEn="",_[_0x609d("0x756")]="",_[_0x609d("0x208")]=0,_.RL="",_[_0x609d("0x5db")]="",_.BC=0,_.RC="",_.RH=0,_.RM="",_[_0x609d("0x5dc")]="",_.RMR="",_[_0x609d("0x5d9")]="",_.RS=0,_.SL=0,_[_0x609d("0x592")]=0,_[_0x609d("0x5d7")]=0,_.AS=0,_[_0x609d("0x5d5")]="",_[_0x609d("0x7b2")]=0,_[_0x609d("0x7b3")]=0,_.FS=0,_.FC="",_[_0x609d("0x75e")]=""),null!=x._id&&x[_0x609d("0x1c")](_0x609d("0x418"))&&(_._id=x._id),null!=x[_0x609d("0x43")]&&x.hasOwnProperty("name")&&(_[_0x609d("0x43")]=x.name),null!=x.NameEn&&x[_0x609d("0x1c")](_0x609d("0x304"))&&(_[_0x609d("0x304")]=x.NameEn),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")]("Brief")&&(_[_0x609d("0x756")]=x[_0x609d("0x756")]),null!=x.Tid&&x[_0x609d("0x1c")](_0x609d("0x208"))&&(_[_0x609d("0x208")]=x[_0x609d("0x208")]),null!=x.RL&&x[_0x609d("0x1c")]("RL")&&(_.RL=x.RL),null!=x.RLSize&&x[_0x609d("0x1c")](_0x609d("0x5db"))&&(_.RLSize=x[_0x609d("0x5db")]),null!=x.BC&&x[_0x609d("0x1c")]("BC")&&(_.BC=x.BC),null!=x.RC&&x.hasOwnProperty("RC")&&(_.RC=x.RC),null!=x.RH&&x[_0x609d("0x1c")]("RH")&&(_.RH=x.RH),null!=x.RM&&x[_0x609d("0x1c")]("RM")&&(_.RM=x.RM),null!=x[_0x609d("0x5dc")]&&x[_0x609d("0x1c")](_0x609d("0x5dc"))&&(_.RMS=x[_0x609d("0x5dc")]),null!=x[_0x609d("0x5dd")]&&x[_0x609d("0x1c")]("RMR")&&(_[_0x609d("0x5dd")]=x[_0x609d("0x5dd")]),null!=x[_0x609d("0x5d9")]&&x[_0x609d("0x1c")](_0x609d("0x5d9"))&&(_[_0x609d("0x5d9")]=x.RMO),null!=x.RS&&x[_0x609d("0x1c")]("RS")&&(_.RS=x.RS),null!=x.SL&&x.hasOwnProperty("SL")&&(_.SL=x.SL),null!=x[_0x609d("0x592")]&&x[_0x609d("0x1c")](_0x609d("0x592"))&&(_[_0x609d("0x592")]=x[_0x609d("0x592")]),null!=x[_0x609d("0x5d7")]&&x[_0x609d("0x1c")](_0x609d("0x5d7"))&&(_[_0x609d("0x5d7")]=x[_0x609d("0x5d7")]),null!=x.AS&&x[_0x609d("0x1c")]("AS")&&(_.AS=x.AS),null!=x.Outline&&x[_0x609d("0x1c")](_0x609d("0x5d5"))&&(_[_0x609d("0x5d5")]=x[_0x609d("0x5d5")]),null!=x.PointID&&x[_0x609d("0x1c")](_0x609d("0x7b2"))&&(_[_0x609d("0x7b2")]=x[_0x609d("0x7b2")]),null!=x[_0x609d("0x7b3")]&&x[_0x609d("0x1c")](_0x609d("0x7b3"))&&(_[_0x609d("0x7b3")]=x[_0x609d("0x7b3")]),null!=x.FS&&x[_0x609d("0x1c")]("FS")&&(_.FS=x.FS),null!=x.FC&&x[_0x609d("0x1c")]("FC")&&(_.FC=x.FC),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&(_[_0x609d("0x75e")]=x.other1),_},x[_0x609d("0x1b")][_0x609d("0x793")]=function(x){return this.constructor[_0x609d("0x793")](this,x)},x.prototype.toJSON=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a[_0x609d("0x798")]=function(){function x(x){if(x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x418")]=0,x[_0x609d("0x1b")][_0x609d("0x43")]="",x[_0x609d("0x1b")][_0x609d("0x304")]="",x[_0x609d("0x1b")][_0x609d("0x756")]="",x[_0x609d("0x1b")][_0x609d("0x208")]=0,x[_0x609d("0x1b")].X=0,x[_0x609d("0x1b")].Y=0,x[_0x609d("0x1b")].SL=0,x[_0x609d("0x1b")].SH=0,x[_0x609d("0x1b")].w=0,x[_0x609d("0x1b")].h=0,x[_0x609d("0x1b")][_0x609d("0x209")]="",x[_0x609d("0x1b")][_0x609d("0x5df")]=0,x[_0x609d("0x1b")].other1="",x.create=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x418")]&&x.hasOwnProperty(_0x609d("0x418"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x._id),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&d.uint32(18)[_0x609d("0x54")](x[_0x609d("0x43")]),null!=x[_0x609d("0x304")]&&x[_0x609d("0x1c")](_0x609d("0x304"))&&d[_0x609d("0xe0")](26).string(x.NameEn),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")](_0x609d("0x756"))&&d[_0x609d("0xe0")](34)[_0x609d("0x54")](x[_0x609d("0x756")]),null!=x[_0x609d("0x208")]&&x[_0x609d("0x1c")](_0x609d("0x208"))&&d[_0x609d("0xe0")](40)[_0x609d("0xe1")](x[_0x609d("0x208")]),null!=x.X&&x[_0x609d("0x1c")]("X")&&d[_0x609d("0xe0")](49).double(x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&d[_0x609d("0xe0")](57)[_0x609d("0xe6")](x.Y),null!=x.SL&&x[_0x609d("0x1c")]("SL")&&d[_0x609d("0xe0")](64)[_0x609d("0xe1")](x.SL),null!=x.SH&&x[_0x609d("0x1c")]("SH")&&d.uint32(77).float(x.SH),null!=x.w&&x.hasOwnProperty("w")&&d.uint32(85).float(x.w),null!=x.h&&x[_0x609d("0x1c")]("h")&&d[_0x609d("0xe0")](93)[_0x609d("0x46")](x.h),null!=x[_0x609d("0x209")]&&x[_0x609d("0x1c")](_0x609d("0x209"))&&d[_0x609d("0xe0")](98)[_0x609d("0x54")](x[_0x609d("0x209")]),null!=x[_0x609d("0x5df")]&&x[_0x609d("0x1c")](_0x609d("0x5df"))&&d.uint32(104)[_0x609d("0xe1")](x[_0x609d("0x5df")]),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")]("other1")&&d[_0x609d("0xe0")](114)[_0x609d("0x54")](x[_0x609d("0x75e")]),d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x798")]);x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e._id=x[_0x609d("0xe1")]();break;case 2:e[_0x609d("0x43")]=x.string();break;case 3:e[_0x609d("0x304")]=x[_0x609d("0x54")]();break;case 4:e.Brief=x[_0x609d("0x54")]();break;case 5:e[_0x609d("0x208")]=x[_0x609d("0xe1")]();break;case 6:e.X=x.double();break;case 7:e.Y=x[_0x609d("0xe6")]();break;case 8:e.SL=x[_0x609d("0xe1")]();break;case 9:e.SH=x.float();break;case 10:e.w=x[_0x609d("0x46")]();break;case 11:e.h=x[_0x609d("0x46")]();break;case 12:e[_0x609d("0x209")]=x.string();break;case 13:e[_0x609d("0x5df")]=x[_0x609d("0xe1")]();break;case 14:e[_0x609d("0x75e")]=x.string();break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){return"object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x?_0x609d("0x79c"):null!=x._id&&x[_0x609d("0x1c")](_0x609d("0x418"))&&!g.isInteger(x._id)?_0x609d("0x76d"):null!=x[_0x609d("0x43")]&&x.hasOwnProperty("name")&&!g[_0x609d("0x53")](x[_0x609d("0x43")])?"name: string expected":null!=x.NameEn&&x[_0x609d("0x1c")]("NameEn")&&!g[_0x609d("0x53")](x[_0x609d("0x304")])?"NameEn: string expected":null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")]("Brief")&&!g[_0x609d("0x53")](x.Brief)?"Brief: string expected":null!=x[_0x609d("0x208")]&&x[_0x609d("0x1c")](_0x609d("0x208"))&&!g[_0x609d("0x50")](x[_0x609d("0x208")])?_0x609d("0x7b4"):null!=x.X&&x[_0x609d("0x1c")]("X")&&_0x609d("0x51")!=typeof x.X?_0x609d("0x7c5"):null!=x.Y&&x.hasOwnProperty("Y")&&_0x609d("0x51")!=typeof x.Y?_0x609d("0x7c6"):null!=x.SL&&x[_0x609d("0x1c")]("SL")&&!g[_0x609d("0x50")](x.SL)?_0x609d("0x7bd"):null!=x.SH&&x[_0x609d("0x1c")]("SH")&&_0x609d("0x51")!=typeof x.SH?_0x609d("0x7c7"):null!=x.w&&x[_0x609d("0x1c")]("w")&&_0x609d("0x51")!=typeof x.w?"w: number expected":null!=x.h&&x[_0x609d("0x1c")]("h")&&_0x609d("0x51")!=typeof x.h?_0x609d("0x7c8"):null!=x[_0x609d("0x209")]&&x[_0x609d("0x1c")](_0x609d("0x209"))&&!g[_0x609d("0x53")](x[_0x609d("0x209")])?"image: string expected":null!=x[_0x609d("0x5df")]&&x[_0x609d("0x1c")]("FSId")&&!g[_0x609d("0x50")](x[_0x609d("0x5df")])?"FSId: integer expected":null!=x.other1&&x.hasOwnProperty(_0x609d("0x75e"))&&!g.isString(x[_0x609d("0x75e")])?_0x609d("0x78b"):null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x798")])return x;var d=new a.POISet;return null!=x[_0x609d("0x418")]&&(d._id=0|x[_0x609d("0x418")]),null!=x.name&&(d[_0x609d("0x43")]=String(x[_0x609d("0x43")])),null!=x[_0x609d("0x304")]&&(d[_0x609d("0x304")]=String(x[_0x609d("0x304")])),null!=x.Brief&&(d[_0x609d("0x756")]=String(x[_0x609d("0x756")])),null!=x[_0x609d("0x208")]&&(d[_0x609d("0x208")]=0|x[_0x609d("0x208")]),null!=x.X&&(d.X=Number(x.X)),null!=x.Y&&(d.Y=Number(x.Y)),null!=x.SL&&(d.SL=0|x.SL),null!=x.SH&&(d.SH=Number(x.SH)),null!=x.w&&(d.w=Number(x.w)),null!=x.h&&(d.h=Number(x.h)),null!=x[_0x609d("0x209")]&&(d[_0x609d("0x209")]=String(x[_0x609d("0x209")])),null!=x[_0x609d("0x5df")]&&(d[_0x609d("0x5df")]=0|x[_0x609d("0x5df")]),null!=x[_0x609d("0x75e")]&&(d[_0x609d("0x75e")]=String(x.other1)),d},x[_0x609d("0x65")]=x.fromObject,x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d.defaults&&(_[_0x609d("0x418")]=0,_[_0x609d("0x43")]="",_.NameEn="",_[_0x609d("0x756")]="",_[_0x609d("0x208")]=0,_.X=0,_.Y=0,_.SL=0,_.SH=0,_.w=0,_.h=0,_[_0x609d("0x209")]="",_.FSId=0,_.other1=""),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&(_._id=x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")]("name")&&(_[_0x609d("0x43")]=x[_0x609d("0x43")]),null!=x.NameEn&&x[_0x609d("0x1c")](_0x609d("0x304"))&&(_[_0x609d("0x304")]=x[_0x609d("0x304")]),null!=x[_0x609d("0x756")]&&x[_0x609d("0x1c")](_0x609d("0x756"))&&(_[_0x609d("0x756")]=x[_0x609d("0x756")]),null!=x[_0x609d("0x208")]&&x.hasOwnProperty(_0x609d("0x208"))&&(_[_0x609d("0x208")]=x.Tid),null!=x.X&&x[_0x609d("0x1c")]("X")&&(_.X=x.X),null!=x.Y&&x.hasOwnProperty("Y")&&(_.Y=x.Y),null!=x.SL&&x[_0x609d("0x1c")]("SL")&&(_.SL=x.SL),null!=x.SH&&x[_0x609d("0x1c")]("SH")&&(_.SH=x.SH),null!=x.w&&x[_0x609d("0x1c")]("w")&&(_.w=x.w),null!=x.h&&x[_0x609d("0x1c")]("h")&&(_.h=x.h),null!=x.image&&x[_0x609d("0x1c")](_0x609d("0x209"))&&(_[_0x609d("0x209")]=x[_0x609d("0x209")]),null!=x.FSId&&x.hasOwnProperty(_0x609d("0x5df"))&&(_.FSId=x[_0x609d("0x5df")]),null!=x[_0x609d("0x75e")]&&x.hasOwnProperty("other1")&&(_[_0x609d("0x75e")]=x[_0x609d("0x75e")]),_},x[_0x609d("0x1b")][_0x609d("0x793")]=function(x){return this[_0x609d("0x7c")].toObject(this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")].toJSONOptions)},x}(),a[_0x609d("0x799")]=function(){function x(x){if(x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d.length;++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x.prototype._id=0,x[_0x609d("0x1b")][_0x609d("0x43")]="",x[_0x609d("0x1b")][_0x609d("0x208")]=0,x[_0x609d("0x1b")].F1=0,x.prototype.F2=0,x[_0x609d("0x1b")].ST=0,x[_0x609d("0x1b")].LT=0,x.prototype.LH=0,x.prototype.LM="",x.prototype.LS="",x[_0x609d("0x1b")].LR="",x[_0x609d("0x1b")].LO="",x[_0x609d("0x1b")].X1=0,x[_0x609d("0x1b")].X2=0,x[_0x609d("0x1b")].Y1=0,x[_0x609d("0x1b")].Y2=0,x[_0x609d("0x1b")].O1="",x[_0x609d("0x1b")].O2="",x[_0x609d("0x1b")][_0x609d("0x75e")]="",x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x._id&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")](_0x609d("0x43"))&&d[_0x609d("0xe0")](18)[_0x609d("0x54")](x[_0x609d("0x43")]),null!=x.Tid&&x[_0x609d("0x1c")](_0x609d("0x208"))&&d[_0x609d("0xe0")](24).int32(x[_0x609d("0x208")]),null!=x.F1&&x[_0x609d("0x1c")]("F1")&&d[_0x609d("0xe0")](32)[_0x609d("0xe1")](x.F1),null!=x.F2&&x[_0x609d("0x1c")]("F2")&&d.uint32(40).int32(x.F2),null!=x.ST&&x[_0x609d("0x1c")]("ST")&&d[_0x609d("0xe0")](48)[_0x609d("0xe1")](x.ST),null!=x.LT&&x.hasOwnProperty("LT")&&d.uint32(56)[_0x609d("0xe1")](x.LT),null!=x.LH&&x[_0x609d("0x1c")]("LH")&&d.uint32(64)[_0x609d("0xe1")](x.LH),null!=x.LM&&x[_0x609d("0x1c")]("LM")&&d[_0x609d("0xe0")](74)[_0x609d("0x54")](x.LM),null!=x.LS&&x[_0x609d("0x1c")]("LS")&&d[_0x609d("0xe0")](82)[_0x609d("0x54")](x.LS),null!=x.LR&&x[_0x609d("0x1c")]("LR")&&d[_0x609d("0xe0")](90)[_0x609d("0x54")](x.LR),null!=x.LO&&x[_0x609d("0x1c")]("LO")&&d[_0x609d("0xe0")](98)[_0x609d("0x54")](x.LO),null!=x.X1&&x[_0x609d("0x1c")]("X1")&&d[_0x609d("0xe0")](105)[_0x609d("0xe6")](x.X1),null!=x.X2&&x.hasOwnProperty("X2")&&d[_0x609d("0xe0")](113)[_0x609d("0xe6")](x.X2),null!=x.Y1&&x[_0x609d("0x1c")]("Y1")&&d.uint32(121)[_0x609d("0xe6")](x.Y1),null!=x.Y2&&x[_0x609d("0x1c")]("Y2")&&d[_0x609d("0xe0")](129)[_0x609d("0xe6")](x.Y2),null!=x.O1&&x.hasOwnProperty("O1")&&d[_0x609d("0xe0")](138)[_0x609d("0x54")](x.O1),null!=x.O2&&x[_0x609d("0x1c")]("O2")&&d[_0x609d("0xe0")](146).string(x.O2),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&d[_0x609d("0xe0")](154).string(x.other1),d},x[_0x609d("0x769")]=function(x,d){return this.encode(x,d).ldelim()},x.decode=function(x,d){x instanceof i||(x=i.create(x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new a.LiftSet;x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 2:e[_0x609d("0x43")]=x.string();break;case 3:e[_0x609d("0x208")]=x[_0x609d("0xe1")]();break;case 4:e.F1=x[_0x609d("0xe1")]();break;case 5:e.F2=x[_0x609d("0xe1")]();break;case 6:e.ST=x[_0x609d("0xe1")]();break;case 7:e.LT=x[_0x609d("0xe1")]();break;case 8:e.LH=x[_0x609d("0xe1")]();break;case 9:e.LM=x[_0x609d("0x54")]();break;case 10:e.LS=x[_0x609d("0x54")]();break;case 11:e.LR=x[_0x609d("0x54")]();break;case 12:e.LO=x[_0x609d("0x54")]();break;case 13:e.X1=x[_0x609d("0xe6")]();break;case 14:e.X2=x[_0x609d("0xe6")]();break;case 15:e.Y1=x.double();break;case 16:e.Y2=x[_0x609d("0xe6")]();break;case 17:e.O1=x[_0x609d("0x54")]();break;case 18:e.O2=x.string();break;case 19:e[_0x609d("0x75e")]=x[_0x609d("0x54")]();break;default:x[_0x609d("0xeb")](7&t)}}return e},x.decodeDelimited=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){return _0x609d("0x20")!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x?"object expected":null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&!g.isInteger(x[_0x609d("0x418")])?_0x609d("0x76d"):null!=x[_0x609d("0x43")]&&x[_0x609d("0x1c")]("name")&&!g[_0x609d("0x53")](x.name)?_0x609d("0x76f"):null!=x[_0x609d("0x208")]&&x.hasOwnProperty(_0x609d("0x208"))&&!g[_0x609d("0x50")](x[_0x609d("0x208")])?"Tid: integer expected":null!=x.F1&&x[_0x609d("0x1c")]("F1")&&!g[_0x609d("0x50")](x.F1)?_0x609d("0x7c9"):null!=x.F2&&x[_0x609d("0x1c")]("F2")&&!g[_0x609d("0x50")](x.F2)?_0x609d("0x7ca"):null!=x.ST&&x[_0x609d("0x1c")]("ST")&&!g[_0x609d("0x50")](x.ST)?_0x609d("0x7cb"):null!=x.LT&&x[_0x609d("0x1c")]("LT")&&!g[_0x609d("0x50")](x.LT)?_0x609d("0x7cc"):null!=x.LH&&x.hasOwnProperty("LH")&&!g[_0x609d("0x50")](x.LH)?"LH: integer expected":null!=x.LM&&x[_0x609d("0x1c")]("LM")&&!g[_0x609d("0x53")](x.LM)?_0x609d("0x7cd"):null!=x.LS&&x[_0x609d("0x1c")]("LS")&&!g[_0x609d("0x53")](x.LS)?_0x609d("0x7ce"):null!=x.LR&&x[_0x609d("0x1c")]("LR")&&!g[_0x609d("0x53")](x.LR)?_0x609d("0x7cf"):null!=x.LO&&x[_0x609d("0x1c")]("LO")&&!g.isString(x.LO)?_0x609d("0x7d0"):null!=x.X1&&x.hasOwnProperty("X1")&&_0x609d("0x51")!=typeof x.X1?_0x609d("0x7d1"):null!=x.X2&&x[_0x609d("0x1c")]("X2")&&"number"!=typeof x.X2?_0x609d("0x7d2"):null!=x.Y1&&x[_0x609d("0x1c")]("Y1")&&_0x609d("0x51")!=typeof x.Y1?_0x609d("0x7d3"):null!=x.Y2&&x.hasOwnProperty("Y2")&&_0x609d("0x51")!=typeof x.Y2?_0x609d("0x7d4"):null!=x.O1&&x.hasOwnProperty("O1")&&!g[_0x609d("0x53")](x.O1)?_0x609d("0x7d5"):null!=x.O2&&x[_0x609d("0x1c")]("O2")&&!g[_0x609d("0x53")](x.O2)?_0x609d("0x7d6"):null!=x.other1&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&!g[_0x609d("0x53")](x[_0x609d("0x75e")])?_0x609d("0x78b"):null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x799")])return x;var d=new a.LiftSet;return null!=x[_0x609d("0x418")]&&(d[_0x609d("0x418")]=0|x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&(d[_0x609d("0x43")]=String(x[_0x609d("0x43")])),null!=x[_0x609d("0x208")]&&(d[_0x609d("0x208")]=0|x[_0x609d("0x208")]),null!=x.F1&&(d.F1=0|x.F1),null!=x.F2&&(d.F2=0|x.F2),null!=x.ST&&(d.ST=0|x.ST),null!=x.LT&&(d.LT=0|x.LT),null!=x.LH&&(d.LH=0|x.LH),null!=x.LM&&(d.LM=String(x.LM)),null!=x.LS&&(d.LS=String(x.LS)),null!=x.LR&&(d.LR=String(x.LR)),null!=x.LO&&(d.LO=String(x.LO)),null!=x.X1&&(d.X1=Number(x.X1)),null!=x.X2&&(d.X2=Number(x.X2)),null!=x.Y1&&(d.Y1=Number(x.Y1)),null!=x.Y2&&(d.Y2=Number(x.Y2)),null!=x.O1&&(d.O1=String(x.O1)),null!=x.O2&&(d.O2=String(x.O2)),null!=x[_0x609d("0x75e")]&&(d[_0x609d("0x75e")]=String(x.other1)),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d[_0x609d("0x794")]&&(_._id=0,_[_0x609d("0x43")]="",_[_0x609d("0x208")]=0,_.F1=0,_.F2=0,_.ST=0,_.LT=0,_.LH=0,_.LM="",_.LS="",_.LR="",_.LO="",_.X1=0,_.X2=0,_.Y1=0,_.Y2=0,_.O1="",_.O2="",_.other1=""),null!=x._id&&x.hasOwnProperty(_0x609d("0x418"))&&(_[_0x609d("0x418")]=x[_0x609d("0x418")]),null!=x[_0x609d("0x43")]&&x.hasOwnProperty(_0x609d("0x43"))&&(_[_0x609d("0x43")]=x.name),null!=x[_0x609d("0x208")]&&x[_0x609d("0x1c")]("Tid")&&(_[_0x609d("0x208")]=x[_0x609d("0x208")]),null!=x.F1&&x.hasOwnProperty("F1")&&(_.F1=x.F1),null!=x.F2&&x[_0x609d("0x1c")]("F2")&&(_.F2=x.F2),null!=x.ST&&x.hasOwnProperty("ST")&&(_.ST=x.ST),null!=x.LT&&x.hasOwnProperty("LT")&&(_.LT=x.LT),null!=x.LH&&x[_0x609d("0x1c")]("LH")&&(_.LH=x.LH),null!=x.LM&&x.hasOwnProperty("LM")&&(_.LM=x.LM),null!=x.LS&&x[_0x609d("0x1c")]("LS")&&(_.LS=x.LS),null!=x.LR&&x[_0x609d("0x1c")]("LR")&&(_.LR=x.LR),null!=x.LO&&x[_0x609d("0x1c")]("LO")&&(_.LO=x.LO),null!=x.X1&&x[_0x609d("0x1c")]("X1")&&(_.X1=x.X1),null!=x.X2&&x[_0x609d("0x1c")]("X2")&&(_.X2=x.X2),null!=x.Y1&&x[_0x609d("0x1c")]("Y1")&&(_.Y1=x.Y1),null!=x.Y2&&x[_0x609d("0x1c")]("Y2")&&(_.Y2=x.Y2),null!=x.O1&&x[_0x609d("0x1c")]("O1")&&(_.O1=x.O1),null!=x.O2&&x[_0x609d("0x1c")]("O2")&&(_.O2=x.O2),null!=x[_0x609d("0x75e")]&&x[_0x609d("0x1c")](_0x609d("0x75e"))&&(_[_0x609d("0x75e")]=x[_0x609d("0x75e")]),_},x.prototype[_0x609d("0x793")]=function(x){return this.constructor[_0x609d("0x793")](this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a[_0x609d("0x767")]=function(){function x(x){if(this[_0x609d("0x7d7")]={},this[_0x609d("0x7d8")]={},x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x.prototype[_0x609d("0x1fb")]=0,x.prototype.Nodes=g[_0x609d("0x4c")],x[_0x609d("0x1b")][_0x609d("0x7d8")]=g[_0x609d("0x4c")],x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){if(d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x1fb")]&&x.hasOwnProperty(_0x609d("0x1fb"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x1fb")]),null!=x.Nodes&&x[_0x609d("0x1c")]("Nodes"))for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")]),e=0;e<_[_0x609d("0x21")];++e)d[_0x609d("0xe0")](18)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x7d9")][_0x609d("0x760")](x.Nodes[_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]())[_0x609d("0x105")]()[_0x609d("0x105")]();if(null!=x[_0x609d("0x7d8")]&&x.hasOwnProperty("Lines"))for(var _=Object[_0x609d("0x3e")](x.Lines),e=0;e<_[_0x609d("0x21")];++e)d[_0x609d("0xe0")](26)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x7da")][_0x609d("0x760")](x.Lines[_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]())[_0x609d("0x105")]()[_0x609d("0x105")]();return d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _,e=void 0===d?x.len:x[_0x609d("0xd8")]+d,t=new(a[_0x609d("0x767")]);x[_0x609d("0xd8")]<e;){var n=x[_0x609d("0xe0")]();switch(n>>>3){case 1:t[_0x609d("0x1fb")]=x[_0x609d("0xe1")]();break;case 2:x[_0x609d("0xea")]().pos++,t.Nodes===g[_0x609d("0x4c")]&&(t[_0x609d("0x7d7")]={}),_=x[_0x609d("0xe1")](),x.pos++,t.Nodes[_]=a.NavNodeSet[_0x609d("0x101")](x,x.uint32());break;case 3:x.skip()[_0x609d("0xd8")]++,t[_0x609d("0x7d8")]===g[_0x609d("0x4c")]&&(t[_0x609d("0x7d8")]={}),_=x[_0x609d("0xe1")](),x[_0x609d("0xd8")]++,t.Lines[_]=a[_0x609d("0x7da")].decode(x,x[_0x609d("0xe0")]());break;default:x[_0x609d("0xeb")](7&n)}}return t},x.decodeDelimited=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x.uint32())},x[_0x609d("0x76a")]=function(x){if("object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x)return _0x609d("0x79c");if(null!=x.floornum&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&!g[_0x609d("0x50")](x[_0x609d("0x1fb")]))return _0x609d("0x79d");if(null!=x.Nodes&&x[_0x609d("0x1c")](_0x609d("0x7d7"))){if(!g[_0x609d("0x55")](x[_0x609d("0x7d7")]))return _0x609d("0x7db");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")]),_=0;_<d[_0x609d("0x21")];++_){if(!g.key32Re[_0x609d("0x78")](d[_]))return _0x609d("0x7dc");var t=a[_0x609d("0x7d9")][_0x609d("0x76a")](x[_0x609d("0x7d7")][d[_]]);if(t)return"Nodes."+t}}if(null!=x[_0x609d("0x7d8")]&&x[_0x609d("0x1c")](_0x609d("0x7d8"))){if(!g[_0x609d("0x55")](x[_0x609d("0x7d8")]))return _0x609d("0x7dd");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x7d8")]),_=0;_<d[_0x609d("0x21")];++_){if(!g[_0x609d("0x62")][_0x609d("0x78")](d[_]))return _0x609d("0x7de");var t=a[_0x609d("0x7da")][_0x609d("0x76a")](x[_0x609d("0x7d8")][d[_]]);if(t)return"Lines."+t}}return null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x767")])return x;var d=new(a[_0x609d("0x767")]);if(null!=x.floornum&&(d[_0x609d("0x1fb")]=0|x[_0x609d("0x1fb")]),x[_0x609d("0x7d7")]){if("object"!==e(x.Nodes))throw TypeError(_0x609d("0x7df"));d[_0x609d("0x7d7")]={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")]),t=0;t<_[_0x609d("0x21")];++t){if("object"!==e(x[_0x609d("0x7d7")][_[t]]))throw TypeError(".NavSet.Nodes: object expected");d.Nodes[_[t]]=a.NavNodeSet[_0x609d("0x78e")](x[_0x609d("0x7d7")][_[t]])}}if(x.Lines){if(_0x609d("0x20")!==e(x[_0x609d("0x7d8")]))throw TypeError(".NavSet.Lines: object expected");d[_0x609d("0x7d8")]={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x7d8")]),t=0;t<_.length;++t){if(_0x609d("0x20")!==e(x.Lines[_[t]]))throw TypeError(_0x609d("0x7e0"));d[_0x609d("0x7d8")][_[t]]=a[_0x609d("0x7da")][_0x609d("0x78e")](x[_0x609d("0x7d8")][_[t]])}}return d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};(d[_0x609d("0x7b1")]||d[_0x609d("0x794")])&&(_[_0x609d("0x7d7")]={},_[_0x609d("0x7d8")]={}),d[_0x609d("0x794")]&&(_[_0x609d("0x1fb")]=0),null!=x.floornum&&x.hasOwnProperty(_0x609d("0x1fb"))&&(_[_0x609d("0x1fb")]=x[_0x609d("0x1fb")]);var e;if(x.Nodes&&(e=Object[_0x609d("0x3e")](x.Nodes))[_0x609d("0x21")]){_.Nodes={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x7d7")][e[t]]=a[_0x609d("0x7d9")][_0x609d("0x793")](x[_0x609d("0x7d7")][e[t]],d)}if(x[_0x609d("0x7d8")]&&(e=Object.keys(x[_0x609d("0x7d8")])).length){_.Lines={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x7d8")][e[t]]=a[_0x609d("0x7da")][_0x609d("0x793")](x[_0x609d("0x7d8")][e[t]],d)}return _},x[_0x609d("0x1b")][_0x609d("0x793")]=function(x){return this[_0x609d("0x7c")][_0x609d("0x793")](this,x)},x[_0x609d("0x1b")].toJSON=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a[_0x609d("0x7d9")]=function(){function x(x){if(x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x418")]=0,x[_0x609d("0x1b")][_0x609d("0x7e1")]=0,x[_0x609d("0x1b")][_0x609d("0x7e2")]=0,x[_0x609d("0x1b")].X=0,x.prototype.Y=0,x[_0x609d("0x1b")][_0x609d("0x7e3")]=0,x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d.uint32(8)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x.tid&&x[_0x609d("0x1c")](_0x609d("0x7e1"))&&d.uint32(16)[_0x609d("0xe1")](x.tid),null!=x[_0x609d("0x7e2")]&&x[_0x609d("0x1c")](_0x609d("0x7e2"))&&d[_0x609d("0xe0")](24)[_0x609d("0xe1")](x[_0x609d("0x7e2")]),null!=x.X&&x[_0x609d("0x1c")]("X")&&d.uint32(33).double(x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&d[_0x609d("0xe0")](41)[_0x609d("0xe6")](x.Y),null!=x[_0x609d("0x7e3")]&&x[_0x609d("0x1c")](_0x609d("0x7e3"))&&d[_0x609d("0xe0")](48)[_0x609d("0xe1")](x.sid),d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d).ldelim()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x7d9")]);x[_0x609d("0xd8")]<_;){var t=x.uint32();switch(t>>>3){case 1:e[_0x609d("0x418")]=x.int32();break;case 2:e[_0x609d("0x7e1")]=x[_0x609d("0xe1")]();break;case 3:e.rid=x.int32();break;case 4:e.X=x.double();break;case 5:e.Y=x[_0x609d("0xe6")]();break;case 6:e[_0x609d("0x7e3")]=x[_0x609d("0xe1")]();break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x.uint32())},x[_0x609d("0x76a")]=function(x){return"object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x?_0x609d("0x79c"):null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&!g[_0x609d("0x50")](x._id)?_0x609d("0x76d"):null!=x[_0x609d("0x7e1")]&&x[_0x609d("0x1c")](_0x609d("0x7e1"))&&!g[_0x609d("0x50")](x[_0x609d("0x7e1")])?"tid: integer expected":null!=x[_0x609d("0x7e2")]&&x[_0x609d("0x1c")]("rid")&&!g[_0x609d("0x50")](x.rid)?_0x609d("0x7e4"):null!=x.X&&x[_0x609d("0x1c")]("X")&&_0x609d("0x51")!=typeof x.X?_0x609d("0x7c5"):null!=x.Y&&x[_0x609d("0x1c")]("Y")&&_0x609d("0x51")!=typeof x.Y?_0x609d("0x7c6"):null!=x[_0x609d("0x7e3")]&&x[_0x609d("0x1c")](_0x609d("0x7e3"))&&!g.isInteger(x[_0x609d("0x7e3")])?_0x609d("0x7e5"):null},x.fromObject=function(x){if(x instanceof a.NavNodeSet)return x;var d=new a.NavNodeSet;return null!=x[_0x609d("0x418")]&&(d[_0x609d("0x418")]=0|x._id),null!=x.tid&&(d.tid=0|x.tid),null!=x[_0x609d("0x7e2")]&&(d.rid=0|x[_0x609d("0x7e2")]),null!=x.X&&(d.X=Number(x.X)),null!=x.Y&&(d.Y=Number(x.Y)),null!=x[_0x609d("0x7e3")]&&(d[_0x609d("0x7e3")]=0|x[_0x609d("0x7e3")]),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d[_0x609d("0x794")]&&(_._id=0,_[_0x609d("0x7e1")]=0,_[_0x609d("0x7e2")]=0,_.X=0,_.Y=0,_[_0x609d("0x7e3")]=0),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&(_[_0x609d("0x418")]=x._id),null!=x[_0x609d("0x7e1")]&&x[_0x609d("0x1c")](_0x609d("0x7e1"))&&(_[_0x609d("0x7e1")]=x.tid),null!=x[_0x609d("0x7e2")]&&x[_0x609d("0x1c")](_0x609d("0x7e2"))&&(_[_0x609d("0x7e2")]=x[_0x609d("0x7e2")]),null!=x.X&&x[_0x609d("0x1c")]("X")&&(_.X=x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&(_.Y=x.Y),null!=x[_0x609d("0x7e3")]&&x[_0x609d("0x1c")](_0x609d("0x7e3"))&&(_[_0x609d("0x7e3")]=x.sid),_},x[_0x609d("0x1b")].toObject=function(x){return this[_0x609d("0x7c")][_0x609d("0x793")](this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t.util[_0x609d("0x75")])},x}(),a[_0x609d("0x7da")]=function(){function x(x){if(x)for(var d=Object.keys(x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x.prototype[_0x609d("0x418")]=0,x.prototype[_0x609d("0x7e3")]=0,x.prototype[_0x609d("0x7e6")]=0,x[_0x609d("0x1b")][_0x609d("0x7e7")]=0,x[_0x609d("0x1b")][_0x609d("0x7e8")]=0,x[_0x609d("0x1b")].length=0,x[_0x609d("0x1b")].direction="",x[_0x609d("0x1b")].bstair="",x[_0x609d("0xdc")]=function(d){return new x(d)},x.encode=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x7e3")]&&x[_0x609d("0x1c")](_0x609d("0x7e3"))&&d[_0x609d("0xe0")](16)[_0x609d("0xe1")](x[_0x609d("0x7e3")]),null!=x[_0x609d("0x7e6")]&&x[_0x609d("0x1c")](_0x609d("0x7e6"))&&d[_0x609d("0xe0")](24)[_0x609d("0xe1")](x.eid),null!=x[_0x609d("0x7e7")]&&x[_0x609d("0x1c")]("efnum")&&d[_0x609d("0xe0")](32)[_0x609d("0xe1")](x[_0x609d("0x7e7")]),null!=x.rank&&x[_0x609d("0x1c")]("rank")&&d.uint32(40)[_0x609d("0xe1")](x[_0x609d("0x7e8")]),null!=x.length&&x[_0x609d("0x1c")](_0x609d("0x21"))&&d[_0x609d("0xe0")](49).double(x.length),null!=x.direction&&x[_0x609d("0x1c")]("direction")&&d[_0x609d("0xe0")](58)[_0x609d("0x54")](x.direction),null!=x[_0x609d("0x7e9")]&&x.hasOwnProperty(_0x609d("0x7e9"))&&d[_0x609d("0xe0")](66)[_0x609d("0x54")](x.bstair),d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i.create(x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x7da")]);x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 2:e[_0x609d("0x7e3")]=x[_0x609d("0xe1")]();break;case 3:e[_0x609d("0x7e6")]=x.int32();break;case 4:e[_0x609d("0x7e7")]=x[_0x609d("0xe1")]();break;case 5:e[_0x609d("0x7e8")]=x[_0x609d("0xe1")]();break;case 6:e[_0x609d("0x21")]=x.double();break;case 7:e[_0x609d("0x3f3")]=x[_0x609d("0x54")]();break;case 8:e[_0x609d("0x7e9")]=x.string();break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){return"object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x?_0x609d("0x79c"):null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&!g[_0x609d("0x50")](x[_0x609d("0x418")])?_0x609d("0x76d"):null!=x[_0x609d("0x7e3")]&&x[_0x609d("0x1c")]("sid")&&!g[_0x609d("0x50")](x.sid)?_0x609d("0x7e5"):null!=x[_0x609d("0x7e6")]&&x[_0x609d("0x1c")](_0x609d("0x7e6"))&&!g[_0x609d("0x50")](x.eid)?"eid: integer expected":null!=x.efnum&&x[_0x609d("0x1c")](_0x609d("0x7e7"))&&!g[_0x609d("0x50")](x[_0x609d("0x7e7")])?_0x609d("0x7ea"):null!=x[_0x609d("0x7e8")]&&x.hasOwnProperty(_0x609d("0x7e8"))&&!g[_0x609d("0x50")](x.rank)?_0x609d("0x7eb"):null!=x.length&&x[_0x609d("0x1c")](_0x609d("0x21"))&&_0x609d("0x51")!=typeof x[_0x609d("0x21")]?_0x609d("0x7ec"):null!=x[_0x609d("0x3f3")]&&x[_0x609d("0x1c")](_0x609d("0x3f3"))&&!g[_0x609d("0x53")](x[_0x609d("0x3f3")])?_0x609d("0x7ed"):null!=x[_0x609d("0x7e9")]&&x[_0x609d("0x1c")](_0x609d("0x7e9"))&&!g[_0x609d("0x53")](x[_0x609d("0x7e9")])?_0x609d("0x7ee"):null},x[_0x609d("0x78e")]=function(x){if(x instanceof a.NavLineSet)return x;var d=new(a[_0x609d("0x7da")]);return null!=x._id&&(d[_0x609d("0x418")]=0|x[_0x609d("0x418")]),null!=x[_0x609d("0x7e3")]&&(d[_0x609d("0x7e3")]=0|x[_0x609d("0x7e3")]),null!=x[_0x609d("0x7e6")]&&(d[_0x609d("0x7e6")]=0|x.eid),null!=x[_0x609d("0x7e7")]&&(d[_0x609d("0x7e7")]=0|x[_0x609d("0x7e7")]),null!=x[_0x609d("0x7e8")]&&(d[_0x609d("0x7e8")]=0|x.rank),null!=x.length&&(d[_0x609d("0x21")]=Number(x.length)),null!=x[_0x609d("0x3f3")]&&(d[_0x609d("0x3f3")]=String(x[_0x609d("0x3f3")])),null!=x[_0x609d("0x7e9")]&&(d[_0x609d("0x7e9")]=String(x[_0x609d("0x7e9")])),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d[_0x609d("0x794")]&&(_[_0x609d("0x418")]=0,_[_0x609d("0x7e3")]=0,_[_0x609d("0x7e6")]=0,_.efnum=0,_[_0x609d("0x7e8")]=0,
_.length=0,_[_0x609d("0x3f3")]="",_.bstair=""),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&(_[_0x609d("0x418")]=x[_0x609d("0x418")]),null!=x[_0x609d("0x7e3")]&&x.hasOwnProperty(_0x609d("0x7e3"))&&(_[_0x609d("0x7e3")]=x.sid),null!=x[_0x609d("0x7e6")]&&x[_0x609d("0x1c")](_0x609d("0x7e6"))&&(_.eid=x.eid),null!=x[_0x609d("0x7e7")]&&x[_0x609d("0x1c")](_0x609d("0x7e7"))&&(_[_0x609d("0x7e7")]=x.efnum),null!=x[_0x609d("0x7e8")]&&x[_0x609d("0x1c")](_0x609d("0x7e8"))&&(_[_0x609d("0x7e8")]=x[_0x609d("0x7e8")]),null!=x[_0x609d("0x21")]&&x[_0x609d("0x1c")](_0x609d("0x21"))&&(_[_0x609d("0x21")]=x.length),null!=x[_0x609d("0x3f3")]&&x[_0x609d("0x1c")]("direction")&&(_[_0x609d("0x3f3")]=x[_0x609d("0x3f3")]),null!=x.bstair&&x[_0x609d("0x1c")]("bstair")&&(_[_0x609d("0x7e9")]=x[_0x609d("0x7e9")]),_},x.prototype[_0x609d("0x793")]=function(x){return this.constructor[_0x609d("0x793")](this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a.PicSet=function(){function x(x){if(this[_0x609d("0x7d7")]={},this[_0x609d("0x7ef")]={},x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x7f0")]="",x.prototype[_0x609d("0x7f1")]="",x.prototype[_0x609d("0x7f2")]=0,x[_0x609d("0x1b")][_0x609d("0x7f3")]="",x[_0x609d("0x1b")][_0x609d("0x7f4")]="",x[_0x609d("0x1b")][_0x609d("0x7d7")]=g[_0x609d("0x4c")],x[_0x609d("0x1b")].Infos=g[_0x609d("0x4c")],x[_0x609d("0xdc")]=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){if(d||(d=n[_0x609d("0xdc")]()),null!=x.serverurl&&x[_0x609d("0x1c")](_0x609d("0x7f0"))&&d.uint32(10)[_0x609d("0x54")](x[_0x609d("0x7f0")]),null!=x[_0x609d("0x7f1")]&&x[_0x609d("0x1c")](_0x609d("0x7f1"))&&d.uint32(18)[_0x609d("0x54")](x.bgaudio),null!=x.bgaudioplay&&x.hasOwnProperty(_0x609d("0x7f2"))&&d[_0x609d("0xe0")](24)[_0x609d("0xe1")](x[_0x609d("0x7f2")]),null!=x.picscale&&x[_0x609d("0x1c")](_0x609d("0x7f3"))&&d[_0x609d("0xe0")](34)[_0x609d("0x54")](x[_0x609d("0x7f3")]),null!=x[_0x609d("0x7f4")]&&x.hasOwnProperty("msgscale")&&d[_0x609d("0xe0")](42)[_0x609d("0x54")](x[_0x609d("0x7f4")]),null!=x[_0x609d("0x7d7")]&&x[_0x609d("0x1c")](_0x609d("0x7d7")))for(var _=Object[_0x609d("0x3e")](x.Nodes),e=0;e<_[_0x609d("0x21")];++e)d[_0x609d("0xe0")](50)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x7f5")][_0x609d("0x760")](x.Nodes[_[e]],d.uint32(18).fork())[_0x609d("0x105")]().ldelim();if(null!=x[_0x609d("0x7ef")]&&x[_0x609d("0x1c")](_0x609d("0x7ef")))for(var _=Object.keys(x.Infos),e=0;e<_[_0x609d("0x21")];++e)d.uint32(58)[_0x609d("0x103")]()[_0x609d("0xe0")](8)[_0x609d("0xe1")](_[e]),a[_0x609d("0x7f6")][_0x609d("0x760")](x[_0x609d("0x7ef")][_[e]],d[_0x609d("0xe0")](18)[_0x609d("0x103")]()).ldelim()[_0x609d("0x105")]();return d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i.create(x));for(var _,e=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,t=new(a[_0x609d("0x768")]);x[_0x609d("0xd8")]<e;){var n=x[_0x609d("0xe0")]();switch(n>>>3){case 1:t.serverurl=x[_0x609d("0x54")]();break;case 2:t[_0x609d("0x7f1")]=x[_0x609d("0x54")]();break;case 3:t[_0x609d("0x7f2")]=x[_0x609d("0xe1")]();break;case 4:t[_0x609d("0x7f3")]=x[_0x609d("0x54")]();break;case 5:t[_0x609d("0x7f4")]=x.string();break;case 6:x[_0x609d("0xea")]()[_0x609d("0xd8")]++,t[_0x609d("0x7d7")]===g.emptyObject&&(t[_0x609d("0x7d7")]={}),_=x.int32(),x[_0x609d("0xd8")]++,t[_0x609d("0x7d7")][_]=a[_0x609d("0x7f5")][_0x609d("0x101")](x,x[_0x609d("0xe0")]());break;case 7:x[_0x609d("0xea")]()[_0x609d("0xd8")]++,t[_0x609d("0x7ef")]===g[_0x609d("0x4c")]&&(t[_0x609d("0x7ef")]={}),_=x[_0x609d("0xe1")](),x[_0x609d("0xd8")]++,t.Infos[_]=a[_0x609d("0x7f6")][_0x609d("0x101")](x,x[_0x609d("0xe0")]());break;default:x[_0x609d("0xeb")](7&n)}}return t},x.decodeDelimited=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){if(_0x609d("0x20")!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x)return _0x609d("0x79c");if(null!=x[_0x609d("0x7f0")]&&x.hasOwnProperty(_0x609d("0x7f0"))&&!g[_0x609d("0x53")](x[_0x609d("0x7f0")]))return _0x609d("0x7f7");if(null!=x[_0x609d("0x7f1")]&&x.hasOwnProperty(_0x609d("0x7f1"))&&!g[_0x609d("0x53")](x[_0x609d("0x7f1")]))return _0x609d("0x7f8");if(null!=x[_0x609d("0x7f2")]&&x[_0x609d("0x1c")]("bgaudioplay")&&!g.isInteger(x[_0x609d("0x7f2")]))return"bgaudioplay: integer expected";if(null!=x[_0x609d("0x7f3")]&&x.hasOwnProperty(_0x609d("0x7f3"))&&!g.isString(x[_0x609d("0x7f3")]))return _0x609d("0x7f9");if(null!=x.msgscale&&x[_0x609d("0x1c")]("msgscale")&&!g[_0x609d("0x53")](x[_0x609d("0x7f4")]))return _0x609d("0x7fa");if(null!=x[_0x609d("0x7d7")]&&x[_0x609d("0x1c")](_0x609d("0x7d7"))){if(!g[_0x609d("0x55")](x.Nodes))return _0x609d("0x7db");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")]),_=0;_<d[_0x609d("0x21")];++_){if(!g[_0x609d("0x62")][_0x609d("0x78")](d[_]))return _0x609d("0x7dc");var t=a[_0x609d("0x7f5")].verify(x[_0x609d("0x7d7")][d[_]]);if(t)return"Nodes."+t}}if(null!=x.Infos&&x.hasOwnProperty(_0x609d("0x7ef"))){if(!g.isObject(x[_0x609d("0x7ef")]))return _0x609d("0x7fb");for(var d=Object[_0x609d("0x3e")](x[_0x609d("0x7ef")]),_=0;_<d.length;++_){if(!g[_0x609d("0x62")][_0x609d("0x78")](d[_]))return _0x609d("0x7fc");var t=a[_0x609d("0x7f6")][_0x609d("0x76a")](x[_0x609d("0x7ef")][d[_]]);if(t)return _0x609d("0x7fd")+t}}return null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x768")])return x;var d=new(a[_0x609d("0x768")]);if(null!=x[_0x609d("0x7f0")]&&(d[_0x609d("0x7f0")]=String(x[_0x609d("0x7f0")])),null!=x[_0x609d("0x7f1")]&&(d[_0x609d("0x7f1")]=String(x[_0x609d("0x7f1")])),null!=x[_0x609d("0x7f2")]&&(d[_0x609d("0x7f2")]=0|x[_0x609d("0x7f2")]),null!=x[_0x609d("0x7f3")]&&(d[_0x609d("0x7f3")]=String(x[_0x609d("0x7f3")])),null!=x[_0x609d("0x7f4")]&&(d[_0x609d("0x7f4")]=String(x[_0x609d("0x7f4")])),x[_0x609d("0x7d7")]){if(_0x609d("0x20")!==e(x[_0x609d("0x7d7")]))throw TypeError(_0x609d("0x7fe"));d[_0x609d("0x7d7")]={};for(var _=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")]),t=0;t<_.length;++t){if("object"!==e(x[_0x609d("0x7d7")][_[t]]))throw TypeError(_0x609d("0x7fe"));d[_0x609d("0x7d7")][_[t]]=a[_0x609d("0x7f5")][_0x609d("0x78e")](x.Nodes[_[t]])}}if(x.Infos){if("object"!==e(x[_0x609d("0x7ef")]))throw TypeError(_0x609d("0x7ff"));d[_0x609d("0x7ef")]={};for(var _=Object[_0x609d("0x3e")](x.Infos),t=0;t<_[_0x609d("0x21")];++t){if(_0x609d("0x20")!==e(x[_0x609d("0x7ef")][_[t]]))throw TypeError(".PicSet.Infos: object expected");d.Infos[_[t]]=a.PicClickSet.fromObject(x.Infos[_[t]])}}return d},x.from=x[_0x609d("0x78e")],x.toObject=function(x,d){d||(d={});var _={};(d.objects||d.defaults)&&(_[_0x609d("0x7d7")]={},_[_0x609d("0x7ef")]={}),d[_0x609d("0x794")]&&(_[_0x609d("0x7f0")]="",_[_0x609d("0x7f1")]="",_[_0x609d("0x7f2")]=0,_.picscale="",_[_0x609d("0x7f4")]=""),null!=x[_0x609d("0x7f0")]&&x[_0x609d("0x1c")](_0x609d("0x7f0"))&&(_[_0x609d("0x7f0")]=x[_0x609d("0x7f0")]),null!=x[_0x609d("0x7f1")]&&x[_0x609d("0x1c")](_0x609d("0x7f1"))&&(_[_0x609d("0x7f1")]=x[_0x609d("0x7f1")]),null!=x[_0x609d("0x7f2")]&&x[_0x609d("0x1c")](_0x609d("0x7f2"))&&(_[_0x609d("0x7f2")]=x[_0x609d("0x7f2")]),null!=x[_0x609d("0x7f3")]&&x[_0x609d("0x1c")]("picscale")&&(_[_0x609d("0x7f3")]=x[_0x609d("0x7f3")]),null!=x[_0x609d("0x7f4")]&&x[_0x609d("0x1c")](_0x609d("0x7f4"))&&(_[_0x609d("0x7f4")]=x[_0x609d("0x7f4")]);var e;if(x[_0x609d("0x7d7")]&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x7d7")])).length){_[_0x609d("0x7d7")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_.Nodes[e[t]]=a[_0x609d("0x7f5")][_0x609d("0x793")](x[_0x609d("0x7d7")][e[t]],d)}if(x[_0x609d("0x7ef")]&&(e=Object[_0x609d("0x3e")](x[_0x609d("0x7ef")]))[_0x609d("0x21")]){_[_0x609d("0x7ef")]={};for(var t=0;t<e[_0x609d("0x21")];++t)_[_0x609d("0x7ef")][e[t]]=a.PicClickSet.toObject(x.Infos[e[t]],d)}return _},x[_0x609d("0x1b")][_0x609d("0x793")]=function(x){return this.constructor[_0x609d("0x793")](this,x)},x.prototype[_0x609d("0x795")]=function(){return this[_0x609d("0x7c")].toObject(this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a[_0x609d("0x7f5")]=function(){function x(x){if(this[_0x609d("0x800")]=[],this[_0x609d("0x801")]=[],x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d.length;++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x1fb")]=0,x[_0x609d("0x1b")][_0x609d("0x418")]=0,x.prototype[_0x609d("0x94")]="",x[_0x609d("0x1b")][_0x609d("0x802")]=0,x[_0x609d("0x1b")].X=0,x.prototype.Y=0,x.prototype.idlist1=g[_0x609d("0x75c")],x[_0x609d("0x1b")][_0x609d("0x801")]=g[_0x609d("0x75c")],x.create=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){if(d||(d=n[_0x609d("0xdc")]()),null!=x[_0x609d("0x1fb")]&&x[_0x609d("0x1c")]("floornum")&&d[_0x609d("0xe0")](8).int32(x[_0x609d("0x1fb")]),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d[_0x609d("0xe0")](16)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x[_0x609d("0x94")]&&x.hasOwnProperty("url")&&d[_0x609d("0xe0")](26).string(x.url),null!=x.base&&x[_0x609d("0x1c")]("base")&&d[_0x609d("0xe0")](32)[_0x609d("0xe1")](x[_0x609d("0x802")]),null!=x.X&&x[_0x609d("0x1c")]("X")&&d.uint32(41)[_0x609d("0xe6")](x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&d[_0x609d("0xe0")](49)[_0x609d("0xe6")](x.Y),null!=x[_0x609d("0x800")]&&x.idlist1[_0x609d("0x21")]){d[_0x609d("0xe0")](58)[_0x609d("0x103")]();for(var _=0;_<x.idlist1[_0x609d("0x21")];++_)d.int32(x[_0x609d("0x800")][_]);d[_0x609d("0x105")]()}if(null!=x.idlist2&&x[_0x609d("0x801")][_0x609d("0x21")]){d[_0x609d("0xe0")](66)[_0x609d("0x103")]();for(var _=0;_<x[_0x609d("0x801")][_0x609d("0x21")];++_)d[_0x609d("0xe1")](x[_0x609d("0x801")][_]);d[_0x609d("0x105")]()}return d},x[_0x609d("0x769")]=function(x,d){return this.encode(x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x7f5")]);x[_0x609d("0xd8")]<_;){var t=x.uint32();switch(t>>>3){case 1:e.floornum=x.int32();break;case 2:e[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 3:e[_0x609d("0x94")]=x.string();break;case 4:e.base=x[_0x609d("0xe1")]();break;case 5:e.X=x[_0x609d("0xe6")]();break;case 6:e.Y=x[_0x609d("0xe6")]();break;case 7:if(e[_0x609d("0x800")]&&e.idlist1[_0x609d("0x21")]||(e[_0x609d("0x800")]=[]),2===(7&t))for(var n=x[_0x609d("0xe0")]()+x[_0x609d("0xd8")];x[_0x609d("0xd8")]<n;)e[_0x609d("0x800")][_0x609d("0x1a")](x[_0x609d("0xe1")]());else e.idlist1[_0x609d("0x1a")](x[_0x609d("0xe1")]());break;case 8:if(e[_0x609d("0x801")]&&e.idlist2.length||(e[_0x609d("0x801")]=[]),2===(7&t))for(var n=x[_0x609d("0xe0")]()+x[_0x609d("0xd8")];x[_0x609d("0xd8")]<n;)e[_0x609d("0x801")][_0x609d("0x1a")](x.int32());else e[_0x609d("0x801")][_0x609d("0x1a")](x[_0x609d("0xe1")]());break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this[_0x609d("0x101")](x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){if(_0x609d("0x20")!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x)return _0x609d("0x79c");if(null!=x[_0x609d("0x1fb")]&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&!g.isInteger(x[_0x609d("0x1fb")]))return"floornum: integer expected";if(null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&!g[_0x609d("0x50")](x[_0x609d("0x418")]))return _0x609d("0x76d");if(null!=x[_0x609d("0x94")]&&x[_0x609d("0x1c")](_0x609d("0x94"))&&!g[_0x609d("0x53")](x.url))return _0x609d("0x803");if(null!=x[_0x609d("0x802")]&&x[_0x609d("0x1c")](_0x609d("0x802"))&&!g[_0x609d("0x50")](x[_0x609d("0x802")]))return _0x609d("0x804");if(null!=x.X&&x.hasOwnProperty("X")&&_0x609d("0x51")!=typeof x.X)return"X: number expected";if(null!=x.Y&&x[_0x609d("0x1c")]("Y")&&_0x609d("0x51")!=typeof x.Y)return _0x609d("0x7c6");if(null!=x[_0x609d("0x800")]&&x.hasOwnProperty(_0x609d("0x800"))){if(!Array.isArray(x[_0x609d("0x800")]))return _0x609d("0x805");for(var d=0;d<x[_0x609d("0x800")][_0x609d("0x21")];++d)if(!g[_0x609d("0x50")](x[_0x609d("0x800")][d]))return _0x609d("0x806")}if(null!=x.idlist2&&x[_0x609d("0x1c")](_0x609d("0x801"))){if(!Array[_0x609d("0x57")](x[_0x609d("0x801")]))return _0x609d("0x807");for(var d=0;d<x.idlist2[_0x609d("0x21")];++d)if(!g[_0x609d("0x50")](x[_0x609d("0x801")][d]))return"idlist2: integer[] expected"}return null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x7f5")])return x;var d=new(a[_0x609d("0x7f5")]);if(null!=x[_0x609d("0x1fb")]&&(d[_0x609d("0x1fb")]=0|x[_0x609d("0x1fb")]),null!=x._id&&(d[_0x609d("0x418")]=0|x._id),null!=x.url&&(d[_0x609d("0x94")]=String(x[_0x609d("0x94")])),null!=x[_0x609d("0x802")]&&(d[_0x609d("0x802")]=0|x.base),null!=x.X&&(d.X=Number(x.X)),null!=x.Y&&(d.Y=Number(x.Y)),x[_0x609d("0x800")]){if(!Array[_0x609d("0x57")](x[_0x609d("0x800")]))throw TypeError(_0x609d("0x808"));d[_0x609d("0x800")]=[];for(var _=0;_<x[_0x609d("0x800")][_0x609d("0x21")];++_)d[_0x609d("0x800")][_]=0|x.idlist1[_]}if(x[_0x609d("0x801")]){if(!Array[_0x609d("0x57")](x[_0x609d("0x801")]))throw TypeError(_0x609d("0x809"));d[_0x609d("0x801")]=[];for(var _=0;_<x[_0x609d("0x801")][_0x609d("0x21")];++_)d[_0x609d("0x801")][_]=0|x[_0x609d("0x801")][_]}return d},x[_0x609d("0x65")]=x.fromObject,x.toObject=function(x,d){d||(d={});var _={};if((d[_0x609d("0x80a")]||d[_0x609d("0x794")])&&(_.idlist1=[],_[_0x609d("0x801")]=[]),d[_0x609d("0x794")]&&(_[_0x609d("0x1fb")]=0,_[_0x609d("0x418")]=0,_.url="",_[_0x609d("0x802")]=0,_.X=0,_.Y=0),null!=x.floornum&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&(_[_0x609d("0x1fb")]=x.floornum),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&(_[_0x609d("0x418")]=x[_0x609d("0x418")]),null!=x[_0x609d("0x94")]&&x[_0x609d("0x1c")](_0x609d("0x94"))&&(_[_0x609d("0x94")]=x[_0x609d("0x94")]),null!=x[_0x609d("0x802")]&&x[_0x609d("0x1c")](_0x609d("0x802"))&&(_.base=x[_0x609d("0x802")]),null!=x.X&&x[_0x609d("0x1c")]("X")&&(_.X=x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&(_.Y=x.Y),x[_0x609d("0x800")]&&x[_0x609d("0x800")].length){_[_0x609d("0x800")]=[];for(var e=0;e<x.idlist1.length;++e)_[_0x609d("0x800")][e]=x[_0x609d("0x800")][e]}if(x[_0x609d("0x801")]&&x[_0x609d("0x801")].length){_[_0x609d("0x801")]=[];for(var e=0;e<x[_0x609d("0x801")][_0x609d("0x21")];++e)_[_0x609d("0x801")][e]=x.idlist2[e]}return _},x.prototype.toObject=function(x){return this[_0x609d("0x7c")].toObject(this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),a[_0x609d("0x7f6")]=function(){function x(x){if(x)for(var d=Object[_0x609d("0x3e")](x),_=0;_<d[_0x609d("0x21")];++_)null!=x[d[_]]&&(this[d[_]]=x[d[_]])}return x[_0x609d("0x1b")][_0x609d("0x1fb")]=0,x[_0x609d("0x1b")]._id=0,x[_0x609d("0x1b")][_0x609d("0x80b")]="",x[_0x609d("0x1b")][_0x609d("0x80c")]="",x[_0x609d("0x1b")][_0x609d("0x80d")]="",x.prototype[_0x609d("0x80e")]="",x[_0x609d("0x1b")].X=0,x[_0x609d("0x1b")].Y=0,x[_0x609d("0x1b")].Z=0,x[_0x609d("0x1b")][_0x609d("0x80f")]="",x.prototype[_0x609d("0x810")]="",x.create=function(d){return new x(d)},x[_0x609d("0x760")]=function(x,d){return d||(d=n[_0x609d("0xdc")]()),null!=x.floornum&&x[_0x609d("0x1c")](_0x609d("0x1fb"))&&d[_0x609d("0xe0")](8)[_0x609d("0xe1")](x[_0x609d("0x1fb")]),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")](_0x609d("0x418"))&&d[_0x609d("0xe0")](16)[_0x609d("0xe1")](x[_0x609d("0x418")]),null!=x.purl&&x.hasOwnProperty(_0x609d("0x80b"))&&d.uint32(26)[_0x609d("0x54")](x.purl),null!=x[_0x609d("0x80c")]&&x.hasOwnProperty(_0x609d("0x80c"))&&d[_0x609d("0xe0")](34)[_0x609d("0x54")](x[_0x609d("0x80c")]),null!=x[_0x609d("0x80d")]&&x[_0x609d("0x1c")]("msgt")&&d.uint32(42)[_0x609d("0x54")](x.msgt),null!=x[_0x609d("0x80e")]&&x.hasOwnProperty(_0x609d("0x80e"))&&d[_0x609d("0xe0")](50)[_0x609d("0x54")](x.msgc),null!=x.X&&x[_0x609d("0x1c")]("X")&&d.uint32(57).double(x.X),null!=x.Y&&x.hasOwnProperty("Y")&&d[_0x609d("0xe0")](65)[_0x609d("0xe6")](x.Y),null!=x.Z&&x.hasOwnProperty("Z")&&d[_0x609d("0xe0")](73)[_0x609d("0xe6")](x.Z),null!=x[_0x609d("0x80f")]&&x[_0x609d("0x1c")](_0x609d("0x80f"))&&d[_0x609d("0xe0")](82).string(x[_0x609d("0x80f")]),null!=x.csize&&x.hasOwnProperty(_0x609d("0x810"))&&d[_0x609d("0xe0")](90)[_0x609d("0x54")](x[_0x609d("0x810")]),d},x[_0x609d("0x769")]=function(x,d){return this[_0x609d("0x760")](x,d)[_0x609d("0x105")]()},x[_0x609d("0x101")]=function(x,d){x instanceof i||(x=i[_0x609d("0xdc")](x));for(var _=void 0===d?x[_0x609d("0xd9")]:x[_0x609d("0xd8")]+d,e=new(a[_0x609d("0x7f6")]);x[_0x609d("0xd8")]<_;){var t=x[_0x609d("0xe0")]();switch(t>>>3){case 1:e[_0x609d("0x1fb")]=x.int32();break;case 2:e[_0x609d("0x418")]=x[_0x609d("0xe1")]();break;case 3:e[_0x609d("0x80b")]=x.string();break;case 4:e[_0x609d("0x80c")]=x[_0x609d("0x54")]();break;case 5:e[_0x609d("0x80d")]=x[_0x609d("0x54")]();break;case 6:e[_0x609d("0x80e")]=x[_0x609d("0x54")]();break;case 7:e.X=x.double();break;case 8:e.Y=x[_0x609d("0xe6")]();break;case 9:e.Z=x[_0x609d("0xe6")]();break;case 10:e.curl=x[_0x609d("0x54")]();break;case 11:e.csize=x[_0x609d("0x54")]();break;default:x[_0x609d("0xeb")](7&t)}}return e},x[_0x609d("0x79b")]=function(x){return x instanceof i||(x=i(x)),this.decode(x,x[_0x609d("0xe0")]())},x[_0x609d("0x76a")]=function(x){return"object"!==(_0x609d("0x8")==typeof x?_0x609d("0x8"):e(x))||null===x?_0x609d("0x79c"):null!=x[_0x609d("0x1fb")]&&x[_0x609d("0x1c")]("floornum")&&!g[_0x609d("0x50")](x[_0x609d("0x1fb")])?_0x609d("0x79d"):null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&!g.isInteger(x[_0x609d("0x418")])?_0x609d("0x76d"):null!=x[_0x609d("0x80b")]&&x.hasOwnProperty(_0x609d("0x80b"))&&!g[_0x609d("0x53")](x[_0x609d("0x80b")])?"purl: string expected":null!=x[_0x609d("0x80c")]&&x.hasOwnProperty(_0x609d("0x80c"))&&!g[_0x609d("0x53")](x[_0x609d("0x80c")])?_0x609d("0x811"):null!=x[_0x609d("0x80d")]&&x.hasOwnProperty("msgt")&&!g[_0x609d("0x53")](x[_0x609d("0x80d")])?_0x609d("0x812"):null!=x[_0x609d("0x80e")]&&x.hasOwnProperty(_0x609d("0x80e"))&&!g.isString(x[_0x609d("0x80e")])?"msgc: string expected":null!=x.X&&x[_0x609d("0x1c")]("X")&&_0x609d("0x51")!=typeof x.X?"X: number expected":null!=x.Y&&x[_0x609d("0x1c")]("Y")&&_0x609d("0x51")!=typeof x.Y?"Y: number expected":null!=x.Z&&x[_0x609d("0x1c")]("Z")&&_0x609d("0x51")!=typeof x.Z?_0x609d("0x813"):null!=x[_0x609d("0x80f")]&&x[_0x609d("0x1c")](_0x609d("0x80f"))&&!g[_0x609d("0x53")](x[_0x609d("0x80f")])?"curl: string expected":null!=x[_0x609d("0x810")]&&x[_0x609d("0x1c")](_0x609d("0x810"))&&!g.isString(x[_0x609d("0x810")])?_0x609d("0x814"):null},x[_0x609d("0x78e")]=function(x){if(x instanceof a[_0x609d("0x7f6")])return x;var d=new(a[_0x609d("0x7f6")]);return null!=x[_0x609d("0x1fb")]&&(d[_0x609d("0x1fb")]=0|x[_0x609d("0x1fb")]),null!=x[_0x609d("0x418")]&&(d[_0x609d("0x418")]=0|x._id),null!=x[_0x609d("0x80b")]&&(d.purl=String(x[_0x609d("0x80b")])),null!=x.aurl&&(d.aurl=String(x[_0x609d("0x80c")])),null!=x[_0x609d("0x80d")]&&(d[_0x609d("0x80d")]=String(x[_0x609d("0x80d")])),null!=x[_0x609d("0x80e")]&&(d[_0x609d("0x80e")]=String(x[_0x609d("0x80e")])),null!=x.X&&(d.X=Number(x.X)),null!=x.Y&&(d.Y=Number(x.Y)),null!=x.Z&&(d.Z=Number(x.Z)),null!=x[_0x609d("0x80f")]&&(d[_0x609d("0x80f")]=String(x[_0x609d("0x80f")])),null!=x[_0x609d("0x810")]&&(d.csize=String(x[_0x609d("0x810")])),d},x[_0x609d("0x65")]=x[_0x609d("0x78e")],x[_0x609d("0x793")]=function(x,d){d||(d={});var _={};return d[_0x609d("0x794")]&&(_[_0x609d("0x1fb")]=0,_[_0x609d("0x418")]=0,_.purl="",_[_0x609d("0x80c")]="",_[_0x609d("0x80d")]="",_[_0x609d("0x80e")]="",_.X=0,_.Y=0,_.Z=0,_[_0x609d("0x80f")]="",_[_0x609d("0x810")]=""),null!=x[_0x609d("0x1fb")]&&x.hasOwnProperty(_0x609d("0x1fb"))&&(_[_0x609d("0x1fb")]=x[_0x609d("0x1fb")]),null!=x[_0x609d("0x418")]&&x[_0x609d("0x1c")]("_id")&&(_._id=x._id),null!=x[_0x609d("0x80b")]&&x[_0x609d("0x1c")](_0x609d("0x80b"))&&(_[_0x609d("0x80b")]=x[_0x609d("0x80b")]),null!=x[_0x609d("0x80c")]&&x[_0x609d("0x1c")](_0x609d("0x80c"))&&(_.aurl=x[_0x609d("0x80c")]),null!=x.msgt&&x[_0x609d("0x1c")](_0x609d("0x80d"))&&(_[_0x609d("0x80d")]=x[_0x609d("0x80d")]),null!=x[_0x609d("0x80e")]&&x[_0x609d("0x1c")](_0x609d("0x80e"))&&(_[_0x609d("0x80e")]=x.msgc),null!=x.X&&x[_0x609d("0x1c")]("X")&&(_.X=x.X),null!=x.Y&&x[_0x609d("0x1c")]("Y")&&(_.Y=x.Y),null!=x.Z&&x.hasOwnProperty("Z")&&(_.Z=x.Z),null!=x[_0x609d("0x80f")]&&x[_0x609d("0x1c")]("curl")&&(_[_0x609d("0x80f")]=x[_0x609d("0x80f")]),null!=x[_0x609d("0x810")]&&x[_0x609d("0x1c")](_0x609d("0x810"))&&(_[_0x609d("0x810")]=x[_0x609d("0x810")]),_},x[_0x609d("0x1b")][_0x609d("0x793")]=function(x){return this[_0x609d("0x7c")][_0x609d("0x793")](this,x)},x[_0x609d("0x1b")][_0x609d("0x795")]=function(){return this[_0x609d("0x7c")][_0x609d("0x793")](this,t[_0x609d("0x796")][_0x609d("0x75")])},x}(),x[_0x609d("0x3a")]=a},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e.enumerable=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e.writable=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d.prototype,_),e&&x(d,e),d}}(),t=function(){function x(d,e,t){_(this,x),this[_0x609d("0x190")]=d,this.length=e,this[_0x609d("0x1b5")]=t}return e(x,[{key:"getFloorNum",value:function(){return this[_0x609d("0x190")]}},{key:_0x609d("0x815"),value:function(){return this[_0x609d("0x21")]}},{key:"getPointList",value:function(){for(var x=[],d=0,_=this[_0x609d("0x1b5")][_0x609d("0x21")];d<_;d++)x[_0x609d("0x1a")]({x:this[_0x609d("0x1b5")][d].x,y:this.pointList[d].y,fnum:this[_0x609d("0x190")]});return x}}]),x}();d[_0x609d("0x92")]=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=_0x609d("0x1f")==typeof Symbol&&_0x609d("0x7a")==typeof Symbol[_0x609d("0x7b")]?function(x){return typeof x}:function(x){return x&&"function"==typeof Symbol&&x[_0x609d("0x7c")]===Symbol&&x!==Symbol[_0x609d("0x1b")]?_0x609d("0x7a"):typeof x},t=function(){function x(x,d){for(var _=0;_<d.length;_++){var e=d[_];e[_0x609d("0x7d")]=e.enumerable||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),i=function(){function x(){_(this,x),this.nearbyLine={},this[_0x609d("0x816")]={},this[_0x609d("0x817")]={},this[_0x609d("0x818")]={},this[_0x609d("0x819")]={},this[_0x609d("0x81a")]={},this[_0x609d("0x2c5")]=!1,this.navdata=[],this[_0x609d("0x81b")]=[];for(var d=map[_0x609d("0x144")][_0x609d("0x1e5")][_0x609d("0x2ba")],e=0;e<d[_0x609d("0x21")];e++){var t=d[e].floornum;this[_0x609d("0x81c")][t]=d[e],this[_0x609d("0x81b")][t]=t}}return t(x,[{key:"preprocess",value:function(){this[_0x609d("0x2c5")]=!0;for(var x=[],d=[],_=1;_<this[_0x609d("0x81b")][_0x609d("0x21")];_++){var e=this[_0x609d("0x81b")][_],t=[],i=[],n=[],g=this[_0x609d("0x81c")][e],a=g.Nodes;for(var r in a){var A=a[r],I=A[_0x609d("0x7e3")]||0;this[_0x609d("0x38c")](t,I)||t.push(I);var C=A[_0x609d("0x7e1")]||0;if(0!=C){var o=I+1e4*e;if(this[_0x609d("0x818")][o])this.layerPoints[o][_0x609d("0x1a")](A._id);else{var s=[A[_0x609d("0x418")]];this.layerPoints[o]=s}}this[_0x609d("0x81d")][A[_0x609d("0x418")]]=[]}var c=g[_0x609d("0x7d8")];for(var r in c){var u=c[r],f=(u[_0x609d("0x7e9")]||0,u[_0x609d("0x3f3")]||0),l=u[_0x609d("0x7e3")],h=u[_0x609d("0x7e6")];if(a[l]&&a[h]){this[_0x609d("0x81d")][l][_0x609d("0x1a")](u._id),this[_0x609d("0x81d")][h][_0x609d("0x1a")](u[_0x609d("0x418")]);var b=u[_0x609d("0x7e8")]||1e3;1==b&&(0==f?n[_0x609d("0x1a")](u):i.push(u))}else 0==f?d[_0x609d("0x1a")](u):x[_0x609d("0x1a")](u)}this[_0x609d("0x81e")](a,n,i,t,e);var p=this[_0x609d("0x81f")](a,n,i,t);for(var v in p){for(var m=Number(v)+1e4*e,y=p[v],r=0;r<y[_0x609d("0x21")];r++){var w=y[r]+1e4*e;y[r]=w}this[_0x609d("0x816")][m]=y}}var E=this[_0x609d("0x820")](d);this.layerPToP=this[_0x609d("0x821")](E,x);for(var I in this.areaToAreas){var k=[];if(this[_0x609d("0x818")][I])for(var S=this[_0x609d("0x818")][I],v=0;v<S[_0x609d("0x21")];v++)for(var T=S[v],R=this[_0x609d("0x819")][T],_=0;_<R[_0x609d("0x21")];_++){var O=R[_],w=this[_0x609d("0x822")](O);k.push(w)}for(var _=0;_<k[_0x609d("0x21")];_++)this[_0x609d("0x816")][I][_0x609d("0x1a")](k[_])}this[_0x609d("0x823")]()}},{key:_0x609d("0x822"),value:function(x){for(var d=this[_0x609d("0x81b")],_=this.navdata,e=1;e<d[_0x609d("0x21")];e++){var t=d[e],i=_[t],n=i[_0x609d("0x7d7")];if(n[x]){var g=n[x],a=g[_0x609d("0x7e3")];return a+=1e4*t}}return-1}},{key:_0x609d("0x81e"),value:function(x,d,_,e,t){for(var i=0;i<e[_0x609d("0x21")];i++){var n=e[i],g=n+1e4*t;this[_0x609d("0x817")][g]=[]}for(var i=0;i<d[_0x609d("0x21")];i++){var a=d[i],r=a[_0x609d("0x7e3")],A=a[_0x609d("0x7e6")],I=x[r][_0x609d("0x7e3")]||0;I+=1e4*t;var C=x[A].sid||0;C+=1e4*t,this[_0x609d("0x817")][I][_0x609d("0x1a")](r),this[_0x609d("0x817")][C].push(A)}for(var i=0;i<_[_0x609d("0x21")];i++){var a=_[i],r=a.sid,I=x[r][_0x609d("0x7e3")]||0;I+=1e4*t,this[_0x609d("0x817")][I][_0x609d("0x1a")](r)}for(var i in this[_0x609d("0x817")]){var o=this[_0x609d("0x817")][i];0==o.length&&delete this.areaPoints.i}}},{key:_0x609d("0x81f"),value:function(x,d,_,e){for(var t={},i=0;i<e[_0x609d("0x21")];i++){var n=e[i],g=this[_0x609d("0x824")](x,n,d,_);t[n]=g}return t}},{key:_0x609d("0x824"),value:function(x,d,_,e){for(var t=[],i=0;i<_[_0x609d("0x21")];i++){var n=_[i],g=x[n[_0x609d("0x7e3")]][_0x609d("0x7e3")],a=x[n[_0x609d("0x7e6")]][_0x609d("0x7e3")];g!=a&&(g!=d||this[_0x609d("0x38c")](t,a)||t.push(a),a!=d||this[_0x609d("0x38c")](t,g)||t[_0x609d("0x1a")](g))}for(var i=0;i<e[_0x609d("0x21")];i++){var n=e[i],g=x[n[_0x609d("0x7e3")]][_0x609d("0x7e3")],a=x[n[_0x609d("0x7e6")]][_0x609d("0x7e3")];g!=a&&(g!=d||this[_0x609d("0x38c")](t,a)||t[_0x609d("0x1a")](a))}return t}},{key:"calculativeCrossLayerLine",value:function(x,d){var _={};if(0==d[_0x609d("0x21")])for(var e in this.layerPoints)for(var t=this[_0x609d("0x818")][e],i=0;i<t[_0x609d("0x21")];i++){var n=t[i],g=this[_0x609d("0x825")](n,x);_[n]=g}else{for(var a={},i=0;i<d[_0x609d("0x21")];i++){var r=d[i],A=r[_0x609d("0x7e3")],I=r.eid,C=[],o=-1;for(var s in x){var c=x[s],u=[];if(a[s]&&(u=a[s]),(this[_0x609d("0x38c")](c,A)||this[_0x609d("0x38c")](u,A))&&C[_0x609d("0x1a")](s),this[_0x609d("0x38c")](c,I)&&(o=s),0!=C.length){var u=[];x[I]?u=x[I]:u.push(I);for(var f=0;f<C[_0x609d("0x21")];f++){var l=C[f];if(a[l])for(var h=0;h<u[_0x609d("0x21")];h++)a[l][_0x609d("0x1a")](u[h]);else a[l]=u}}}}for(var e in this[_0x609d("0x818")])for(var t=this.layerPoints[e],i=0;i<t.length;i++){var n=t[i],g=this[_0x609d("0x826")](n,x,a);_[n]=g}}return _}},{key:_0x609d("0x826"),value:function(x,d,_){var e=[];for(var t in d){var i=d[t];if(this[_0x609d("0x38c")](i,x)){for(var n=0;n<i[_0x609d("0x21")];n++)i[n]!=x&&e[_0x609d("0x1a")](i[n]);if(_[t])for(var g=_[t],n=0;n<g[_0x609d("0x21")];n++)e[_0x609d("0x1a")](g[n])}}return e}},{key:_0x609d("0x825"),value:function(x,d){var _=[];for(var e in d){var t=d[e];if(this.exitInArray(t,x))for(var i=0;i<t[_0x609d("0x21")];i++)t[i]!=x&&_[_0x609d("0x1a")](t[i])}return _}},{key:"getLinePoint",value:function(x){for(var d={},_=1,e=0;e<x[_0x609d("0x21")];e++){var t=x[e];if(0==e){var i=[];i[_0x609d("0x1a")](t[_0x609d("0x7e3")]),i[_0x609d("0x1a")](t[_0x609d("0x7e6")]),d[_]=i}else{var n=!1;for(var g in d){var a=this[_0x609d("0x38c")](d[g],t[_0x609d("0x7e3")]),r=this[_0x609d("0x38c")](d[g],t[_0x609d("0x7e6")]);if(a&&!r){d[g][_0x609d("0x1a")](t.eid),n=!0;break}if(!a&&r){d[g].push(t[_0x609d("0x7e3")]),n=!0;break}}if(!n){_++;var i=[];i[_0x609d("0x1a")](t[_0x609d("0x7e3")]),i.push(t[_0x609d("0x7e6")]),d[_]=i}}}var A=[];for(var e in d){var I=d[e];this[_0x609d("0x827")](I,A)}d=[];for(var e=0;e<A[_0x609d("0x21")];e++)d[e]=A[e];return d}},{key:_0x609d("0x827"),value:function(x,d){for(var _=d[_0x609d("0x21")],e=-1,t=0;t<d.length;t++)if(e=this.getSameId(x,d[t]),e>0){_=t;break}if(_==d[_0x609d("0x21")])d[_0x609d("0x1a")](x);else for(var i=d[_],t=0;t<x[_0x609d("0x21")];t++){var n=x[t];n!=e&&i[_0x609d("0x1a")](n)}}},{key:_0x609d("0x828"),value:function(x,d){for(var _=-1,e=0;e<x[_0x609d("0x21")];e++){for(var t=x[e],i=0;i<d[_0x609d("0x21")];i++){var n=d[i];if(t==n){_=t;break}}if(_>0)break}return _}},{key:_0x609d("0x823"),value:function(){var x=[];for(var d in this.areaToAreas)x[_0x609d("0x1a")](d);for(var d=0;d<x[_0x609d("0x21")];d++)for(var _=x[d],e=0;e<x[_0x609d("0x21")];e++){var t=x[e];if(_!=t){var i=1e5*_+1*t;if(!this[_0x609d("0x81a")][i]){var n=this[_0x609d("0x829")](_,t);if(0!=n.length){this.crossScheme[i]=n;var g=this[_0x609d("0x82a")](n),a=1e5*t+1*_;this.crossScheme[a]=g;for(var r=[n],A=0;A<1e4&&(r=this[_0x609d("0x82b")](r),0!=r[_0x609d("0x21")])&&1!=r[0][_0x609d("0x21")];A++)for(var I=0;I<r[_0x609d("0x21")];I++){var C=r[I],o=C[0],s=C[C[_0x609d("0x21")]-1],c=1e5*o+1*s;if(this.crossScheme[c])r[_0x609d("0x25")](I,1),I--;else{this[_0x609d("0x81a")][c]=C;var u=this[_0x609d("0x82a")](C),f=1e5*s+1*o;this[_0x609d("0x81a")][f]=u}}}}}}}},{key:_0x609d("0x82a"),value:function(x){for(var d=[],_=x[_0x609d("0x21")]-1;_>=0;_--)d.push(x[_]);return d}},{key:_0x609d("0x82b"),value:function(x){for(var d=[],_=0;_<x.length;_++){for(var e=x[_],t=[],i=1;i<e[_0x609d("0x21")];i++)t.push(e[i]);for(var n=[],i=0;i<e[_0x609d("0x21")]-1;i++)n[_0x609d("0x1a")](e[i]);d.push(t),d[_0x609d("0x1a")](n)}return d}},{key:_0x609d("0x829"),value:function(x,d){var _=[x];if(x!=d){var e=[],t=[x],i=[],n=this[_0x609d("0x816")][x];if(n[d])_[_0x609d("0x1a")](d);else{for(var g=0;g<n[_0x609d("0x21")];g++){var a=n[g],r=[x,a];i[_0x609d("0x1a")](r),t[_0x609d("0x1a")](a)}for(var g=0;g<100;g++){if(i=this[_0x609d("0x82c")](i,t),0==i[_0x609d("0x21")])return[];for(var A=0;A<i[_0x609d("0x21")];A++){var I=i[A],C=I[I[_0x609d("0x21")]-1];C==d&&e[_0x609d("0x1a")](I)}if(0!=e.length){_=this[_0x609d("0x82d")](e);break}}}}for(var g=0;g<_[_0x609d("0x21")];g++)_[g]*=1;return _}},{key:_0x609d("0x82c"),value:function(x,d){for(var _=[],e=0;e<x[_0x609d("0x21")];e++)for(var t=x[e],i=t[t[_0x609d("0x21")]-1],n=this[_0x609d("0x816")][i],g=0;g<n.length;g++){var a=n[g];if(!this[_0x609d("0x38c")](d,a)){for(var r=[],A=0;A<t.length;A++)r[_0x609d("0x1a")](t[A]);r.push(a),_[_0x609d("0x1a")](r),d[_0x609d("0x1a")](a)}}return _}},{key:"getOptimutic",value:function(x){for(var d=x[0],_=this[_0x609d("0x82e")](d),e=1;e<x[_0x609d("0x21")];e++){var t=x[e],i=this[_0x609d("0x82e")](t);i<_&&(_=i,d=t)}return d}},{key:_0x609d("0x82e"),value:function(x){for(var d=0,_=0;_<x[_0x609d("0x21")]-1;_++){var e=x[_],t=x[_+1];Math[_0x609d("0x52")](e/1e4)==Math[_0x609d("0x52")](t/1e4)&&d++}return d}},{key:"getNaviResult",value:function(x,d,_,e,t){var i={};if(!this[_0x609d("0x81c")][x]||!this[_0x609d("0x81c")][d])return i.navidata=[],i[_0x609d("0x82f")]=[new(esmap[_0x609d("0x72d")])(x,0,[])],i;this.inited||this[_0x609d("0x830")]();var n=this.getNearestNode(x,_),g=this[_0x609d("0x831")](d,e),a=this[_0x609d("0x81c")][x][_0x609d("0x7d7")][n],r=this[_0x609d("0x81c")][d].Nodes[g];if(!a||!r)return void console[_0x609d("0x1f0")](_0x609d("0x832"));var A=[],I=a[_0x609d("0x7e3")]+1e4*x,C=r[_0x609d("0x7e3")]+1e4*d,o=[];if(I==C)o[_0x609d("0x1a")](I);else{var s=1e5*I+C;o=this[_0x609d("0x81a")][s]?this[_0x609d("0x81a")][s]:[]}if(0!=o[_0x609d("0x21")]){var c=this[_0x609d("0x833")](n,g,x,d,o);if(0!=c.length)if(2*o[_0x609d("0x21")]==c[_0x609d("0x21")])for(var u=0;u<o[_0x609d("0x21")];u++){var f=o[u],l=Math.floor(f/1e4),h=f%1e4,b=1*c[2*u],p=1*c[2*u+1],v=this.navdata[l][_0x609d("0x7d7")],m=this[_0x609d("0x81c")][l][_0x609d("0x7d8")],y=this[_0x609d("0x834")](v,m,b,p,h,l,t);if(!y||!y[_0x609d("0x835")]||0==y[_0x609d("0x835")].length){A=[];break}this[_0x609d("0x836")](l,y.walkPath),A[_0x609d("0x1a")](y)}else A=[]}if(0==A[_0x609d("0x21")])i=this.getNaviResult2(x,d,_,e,t);else{for(var w=[],E=0;E<A[_0x609d("0x21")];E++){
var k=A[E],S=k[_0x609d("0x190")];if(w[_0x609d("0x1a")](new(esmap[_0x609d("0x72d")])(S,k.costDistance,k[_0x609d("0x835")])),A[E+1]){var T=A[E+1][_0x609d("0x190")];T!=S&&w[_0x609d("0x1a")](new(esmap[_0x609d("0x72d")])(S,0,[k[_0x609d("0x835")][k[_0x609d("0x835")][_0x609d("0x21")]-1]]),new(esmap[_0x609d("0x72d")])(T,0,[A[E+1][_0x609d("0x835")][0]]))}}i[_0x609d("0x837")]=[this[_0x609d("0x81c")]],i[_0x609d("0x82f")]=w}return i}},{key:_0x609d("0x836"),value:function(x,d){for(var _=this.navdata[x][_0x609d("0x7d7")],e=0;e<d[_0x609d("0x21")];e++){var t=d[e],i=_[t],n={fnum:x,x:i.X,y:i.Y};d[e]=n}}},{key:_0x609d("0x833"),value:function(x,d,_,e,t){var i=[];if(1==t[_0x609d("0x21")])i[_0x609d("0x1a")](x),i[_0x609d("0x1a")](d);else{for(var n=[],g=0;g<t.length-1;g++){var a=t[g],r=Math[_0x609d("0x52")](a/1e4),A=t[g+1],I=Math[_0x609d("0x52")](A/1e4);if(r==I){var C=[],o=[];C[_0x609d("0x1a")](r),o[_0x609d("0x1a")](r);for(var s=this[_0x609d("0x817")][a],c=this[_0x609d("0x81c")][r][_0x609d("0x7d7")],u=this[_0x609d("0x81c")][r][_0x609d("0x7d8")],f=0;f<s.length;f++){var l=s[f],h=this[_0x609d("0x838")](l,A%1e4,u,c);0!=h.length&&(C[_0x609d("0x1a")](l),o[_0x609d("0x1a")](h[_0x609d("0x7e6")]))}if(0==C[_0x609d("0x21")])return[];n.push(C),n[_0x609d("0x1a")](o)}else{var C=[],o=[];C[_0x609d("0x1a")](r),o[_0x609d("0x1a")](I);for(var s=this[_0x609d("0x818")][a],b=this[_0x609d("0x818")][A],p=0;p<s[_0x609d("0x21")];p++)for(var l=s[p],v=this[_0x609d("0x819")][l],f=0;f<v.length;f++){var m=v[f];if(this[_0x609d("0x38c")](b,m)){C[_0x609d("0x1a")](l),o[_0x609d("0x1a")](m);break}}if(0==C[_0x609d("0x21")])return[];n[_0x609d("0x1a")](C),n[_0x609d("0x1a")](o)}}var y={},w=[];w[_0x609d("0x1a")](x),this[_0x609d("0x839")](n,0,0,w,y);var E={};for(var k in y){var S=y[k],c=this[_0x609d("0x81c")][e].Nodes,T=c[S[S.length-1]],R=c[d],O=this[_0x609d("0x681")](T,R);S[_0x609d("0x1a")](d),E[O+1*k]=S}var M=1e6;for(var L in E)parseInt(L)<parseInt(M)&&(M=L,i=E[L])}return i}},{key:_0x609d("0x838"),value:function(x,d,_,e){for(var t=this[_0x609d("0x81d")][x],i=0;i<t[_0x609d("0x21")];i++){var n=t[i],g=_[n];if(1==g[_0x609d("0x7e8")])if(g[_0x609d("0x7e3")]==x){var a=g[_0x609d("0x7e6")];if(e[a][_0x609d("0x7e3")]==d)return g}else{var r=g[_0x609d("0x7e3")];if(e[r][_0x609d("0x7e3")]==d){var A=this[_0x609d("0x1a8")](g);return A[_0x609d("0x7e3")]=g[_0x609d("0x7e6")],A[_0x609d("0x7e6")]=g.sid,A}}}return[]}},{key:"getDistance",value:function(x,d){var _=(x.X-d.X)*(x.X-d.X)+(x.Y-d.Y)*(x.Y-d.Y);return _}},{key:_0x609d("0x839"),value:function(x,d,_,e,t){if(x[_0x609d("0x21")]>d)for(var i=x[d],n=x[d+1],g=i[0],a=this[_0x609d("0x81c")][g].Nodes,r=1;r<i[_0x609d("0x21")];r++){var A=i[r],I=n[r],C=a[e[e[_0x609d("0x21")]-1]],o=a[A],s=this[_0x609d("0x681")](C,o);if(_+=s,e[_0x609d("0x1a")](A),e[_0x609d("0x1a")](I),this[_0x609d("0x839")](x,d+2,_,e,t),e.length==x.length+1){for(var c=[],u=0;u<e[_0x609d("0x21")];u++)c[_0x609d("0x1a")](e[u]);t[_]=c}e[_0x609d("0x25")](e.length-1,1),e[_0x609d("0x25")](e[_0x609d("0x21")]-1,1),_-=s}}},{key:_0x609d("0x834"),value:function(x,d,_,e,t,i,n){if(_==e)return void console[_0x609d("0x1f0")](_0x609d("0x83a"));var g={};g[_0x609d("0x83b")]=_,g[_0x609d("0x83c")]=0,g[_0x609d("0x835")]=[1*_];for(var a=[_],r=[],A=1;A<1e5;A++){for(var I=this[_0x609d("0x83d")](g,x,d,a,t,n),C=0;C<I[_0x609d("0x21")];C++)r[_0x609d("0x1a")](I[C]);if(r[_0x609d("0x83e")](this.compare(_0x609d("0x83c"))),0==r.length)return[];for(g=r[0];this[_0x609d("0x38c")](a,g[_0x609d("0x83b")]);)r[_0x609d("0x84")](),g=r[0];if(a.push(g[_0x609d("0x83b")]),r[_0x609d("0x84")](),g[_0x609d("0x83b")]==e)return g.fnum=i,g}return[]}},{key:_0x609d("0x83d"),value:function(x,d,_,e,t,i){var n=[],g=x[_0x609d("0x83b")];if(this[_0x609d("0x81d")][g])for(var a=this[_0x609d("0x81d")][g],r=0;r<a[_0x609d("0x21")];r++){var A=a[r],I=_[A],C=I[_0x609d("0x7e9")];if(1==i){if(5==C)continue}else if(1==C||2==C||3==C||6==C)continue;var o=I[_0x609d("0x7e6")];if(g==I[_0x609d("0x7e6")]){if(2==i&&"1"==I.direction)continue;o=I[_0x609d("0x7e3")]}if(!this[_0x609d("0x38c")](e,o)){var s=d[o][_0x609d("0x7e3")];if(s!=t)continue;var c=this[_0x609d("0x1a8")](x);c[_0x609d("0x83b")]=o,c[_0x609d("0x835")][_0x609d("0x1a")](o),c[_0x609d("0x83c")]+=I[_0x609d("0x21")],n[_0x609d("0x1a")](c)}}return n}},{key:_0x609d("0x83f"),value:function(x,d,_,e,t){for(var i=null,n={},g={},a={},r={},A=1;A<this[_0x609d("0x81b")][_0x609d("0x21")];A++){var I=this[_0x609d("0x81b")][A],C=this[_0x609d("0x81c")][I],o=C[_0x609d("0x7d7")];for(var s in o){var c=o[s];c[_0x609d("0x190")]=I,a[s]=c}var u=C[_0x609d("0x7d8")];for(var s in u)r[s]=u[s];for(var f in u){var l=u[f],h=l.sid,b=l[_0x609d("0x7e6")],p=f,v=l[_0x609d("0x7e9")];if(1==t){if(5==v)continue}else if(1==v||2==v||3==v||6==v)continue;if(o[h]&&o[b]){if(n[h])n[h][_0x609d("0x1a")](p);else{var m=[p];n[h]=m}if(n[b])n[b].push(p);else{var m=[p];n[b]=m}}else{if(g[h])g[h][_0x609d("0x1a")](p);else{var m=[p];g[h]=m}if(g[b])g[b][_0x609d("0x1a")](p);else{var m=[p];g[b]=m}}}}var y=this[_0x609d("0x831")](x,_),w=this.getNearestNode(d,e),E=this[_0x609d("0x840")](a,r,n,g,y,w,t);if(E&&E.walkPath&&0!=E[_0x609d("0x835")].length){for(var k=E[_0x609d("0x835")],S=E[_0x609d("0x83c")],T={x:a[k[0]].X,y:a[k[0]].Y,fnum:a[k[0]][_0x609d("0x190")],id:a[k[0]][_0x609d("0x418")]},R=[new(esmap[_0x609d("0x72d")])(x,S,[T])],A=0;A<k[_0x609d("0x21")]-1;A++){var O=a[k[A]],M=O[_0x609d("0x190")],L=a[k[A+1]],P=L[_0x609d("0x190")],j=R[R[_0x609d("0x21")]-1];if(M==P)j.pointList[_0x609d("0x1a")]({x:L.X,y:L.Y,fnum:L[_0x609d("0x190")],id:L[_0x609d("0x418")]});else{var N={x:O.X,y:O.Y,fnum:O.fnum,id:O[_0x609d("0x418")]},H={x:L.X,y:L.Y,fnum:L[_0x609d("0x190")],id:L[_0x609d("0x418")]};R.push(new(esmap[_0x609d("0x72d")])(M,0,[N]),new(esmap[_0x609d("0x72d")])(P,0,[H]),new(esmap[_0x609d("0x72d")])(P,S,[H]))}}i={navidata:[this[_0x609d("0x81c")]],result:R}}return i}},{key:_0x609d("0x840"),value:function(x,d,_,e,t,i,n){if(t==i)return void console[_0x609d("0x1f0")](_0x609d("0x83a"));var g={};g[_0x609d("0x83b")]=t,g[_0x609d("0x83c")]=0,g[_0x609d("0x835")]=[t];for(var a=[t],r=[],A=1;A<1e5;A++){for(var I=this.updateNewShortestPathList2(g,x,d,_,e,a,n),C=0;C<I[_0x609d("0x21")];C++)r[_0x609d("0x1a")](I[C]);if(0==r.length)return[];for(r[_0x609d("0x83e")](this.compare(_0x609d("0x83c"))),g=r[0];this[_0x609d("0x38c")](a,g.endPoint);)r.shift(),g=r[0];if(a[_0x609d("0x1a")](g[_0x609d("0x83b")]),r[_0x609d("0x84")](),g[_0x609d("0x83b")]==i)return g}return[]}},{key:_0x609d("0x841"),value:function(x,d,_,e,t,i,n){var g=[],a=x[_0x609d("0x83b")];if(e[a])for(var r=e[a],A=0;A<r[_0x609d("0x21")];A++){var I=r[A],C=_[I],o=C[_0x609d("0x7e6")];if(a==C[_0x609d("0x7e6")]){if(2==n&&"1"==C[_0x609d("0x3f3")])continue;o=C[_0x609d("0x7e3")]}if(!this.exitInArray(i,o)){var s=this.clone(x);s[_0x609d("0x83b")]=o,s[_0x609d("0x835")][_0x609d("0x1a")](o),s.costDistance+=C[_0x609d("0x21")],1==C[_0x609d("0x7e8")]&&(s[_0x609d("0x83c")]+=1e3),g.push(s)}}if(t[a])for(var r=t[a],A=0;A<r[_0x609d("0x21")];A++){var I=r[A],C=_[I],o=C[_0x609d("0x7e6")];if(a==C[_0x609d("0x7e6")]){if(2==n&&"1"==C[_0x609d("0x3f3")])continue;o=C[_0x609d("0x7e3")]}if(!this[_0x609d("0x38c")](i,o)){var s=this.clone(x);s[_0x609d("0x83b")]=o,s[_0x609d("0x835")][_0x609d("0x1a")](o),s[_0x609d("0x83c")]+=1e5,g[_0x609d("0x1a")](s)}}return g}},{key:_0x609d("0x831"),value:function(x,d){var _=this.navdata[x][_0x609d("0x7d7")],e=[1/0,0];for(var t in _){var i=_[t],n=Math[_0x609d("0x124")](Math[_0x609d("0x21e")](Math[_0x609d("0x113")](i.X-d.x,2)+Math[_0x609d("0x113")](i.Y-d.y,2)));n<e[0]&&(e[0]=n,e[1]=t)}return e[1]}},{key:_0x609d("0x842"),value:function(x){return function(d,_){var e=d[x],t=_[x];return e-t}}},{key:_0x609d("0x38c"),value:function(x,d){for(var _=0;_<x.length;_++)if(x[_]==d)return!0;return!1}},{key:_0x609d("0x1a8"),value:function(x){var d;if("object"==("undefined"==typeof x?_0x609d("0x8"):e(x)))if(null===x)d=null;else if(x instanceof Array){d=[];for(var _=0,t=x.length;_<t;_++)d[_0x609d("0x1a")](this[_0x609d("0x1a8")](x[_]))}else{d={};for(var i in x)d[i]=this[_0x609d("0x1a8")](x[i])}else d=x;return d}}]),x}();d[_0x609d("0x92")]=i},function(x,d,_){_0x609d("0x93"),Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=_(68),t=function(x){var d=this;em.Evento.convert(this),Object[_0x609d("0x348")](d,x),d._setDefaultValues({map:esmap[_0x609d("0x164")][_0x609d("0x165")],changeTiltAngle:!0,speed:4,followPosition:!0,followAngle:!1,followGap:3,isMultiFloors:1,inTime:1.2,tiltAngle:80,changeFloorTiltAngle:30,minScale:.2,scaleLevel:1,height:0,offsetHeight:1,directionAssert:10,combineAsset:5,autoClearNaviLine:!1,audioPlay:!1,mode_:1,lineStyle:{lineType:esmap[_0x609d("0x3dd")][_0x609d("0x3e4")],color:_0x609d("0x65e"),lineWidth:6,offsetHeight:0},maxEnd:.1,navidistance:0,scaleAnimate:!0,isAnimate:1}),d[_0x609d("0x843")]=null,d[_0x609d("0x844")]=null,d[_0x609d("0x845")]=null,d[_0x609d("0x846")]=null,d[_0x609d("0x847")]=null,d[_0x609d("0x848")]=new esmap.ESLayer(esmap.ESLayerType[_0x609d("0x16d")]),d[_0x609d("0x849")]=new(esmap[_0x609d("0x167")])(esmap[_0x609d("0x168")][_0x609d("0x16d")]),d._naviResult=null,d[_0x609d("0x84a")]=[],d[_0x609d("0x84b")]=[],d[_0x609d("0x15c")]=new(THREE[_0x609d("0x15d")]),d[_0x609d("0x84c")]=(new Date).getTime(),d.pause=!1,d[_0x609d("0x84d")]=!1,d.naviInfos={played:{nex:[],cur:[]}},d[_0x609d("0x84e")]={deviateCount:0,arrivalCount:0,backcount:0,surDistance:0},x.combineCopy=null};t[_0x609d("0x1b")]={constructor:t,get"locationMarker"(){return this[_0x609d("0x847")]||(this[_0x609d("0x847")]=new esmap.ESLocationMarker({id:_0x609d("0xb7"),url:this[_0x609d("0x84f")]||_0x609d("0x850"),size:this[_0x609d("0x851")]||150}),this.map[_0x609d("0x24c")](this._locMarker)),this[_0x609d("0x847")]},set"locationMarker"(x){x instanceof esmap[_0x609d("0x2ac")]&&(this[_0x609d("0x847")]=x,this[_0x609d("0xbc")].addLocationMarker(this[_0x609d("0x847")]))},get"navidata"(){return this[_0x609d("0x852")]},get"mode"(){return this[_0x609d("0x853")]},set"mode"(x){this[_0x609d("0x853")]!=x&&this[_0x609d("0x854")]&&this[_0x609d("0x843")]&&this[_0x609d("0x844")]&&this[_0x609d("0x855")]&&this[_0x609d("0x855")][_0x609d("0x182")][_0x609d("0x17e")]?(this[_0x609d("0x853")]=x,this[_0x609d("0x856")](),this._getNaviResult(),this[_0x609d("0x857")]=!0,this.drawNaviLine()):this[_0x609d("0x853")]=x},_setDefaultValues:function(x){var d=this,_=Object[_0x609d("0x3e")](x);_[_0x609d("0xc1")](function(_){void 0==d[_]&&(d[_]=x[_])})},_createMarker:function(x,d){var _=null,e=null;if(x[_0x609d("0x190")]){d?(this[_0x609d("0x845")]&&this[_0x609d("0x845")][_0x609d("0x24e")](),e=this[_0x609d("0x848")],_=x[_0x609d("0x94")]||_0x609d("0x858")):(this.endMarker&&this[_0x609d("0x846")][_0x609d("0x24e")](),e=this[_0x609d("0x849")],_=x.url||_0x609d("0x859"));var t=void 0==x.height?6:x[_0x609d("0x185")],i=new(esmap[_0x609d("0x726")])({x:x.x,y:x.y,url:_,height:t,size:x[_0x609d("0x26c")]||64,callback:function(){x[_0x609d("0x12e")]&&x.callback(i)}});e[_0x609d("0x3a8")](i),d?this[_0x609d("0x845")]=i:this[_0x609d("0x846")]=i;var n=this[_0x609d("0xbc")].getFloor(x[_0x609d("0x190")]);n[_0x609d("0x85a")](e)}},setStartPoint:function(x,d){this[_0x609d("0x856")](),this[_0x609d("0x85b")]&&this[_0x609d("0x367")](),this[_0x609d("0x843")]=Object.assign({},this[_0x609d("0x843")],x),!x[_0x609d("0x94")]||x.noMarker||d||this._createMarker(x,!0),this[_0x609d("0x85c")](),this[_0x609d("0x857")]=!0},setEndPoint:function(x,d){this[_0x609d("0x85b")]&&this.stop(),this[_0x609d("0x844")]=Object[_0x609d("0x348")]({},this[_0x609d("0x844")],x),!x[_0x609d("0x94")]||x[_0x609d("0x85d")]||d||this[_0x609d("0x85e")](x,!1),this[_0x609d("0x85c")](),this[_0x609d("0x857")]=!0},_getFloorsPoints:function(){var x=this.outcome.result;if(x){for(var d=[],_=null,e=null,t=0;t<x[_0x609d("0x21")];t++){var i=x[t],n=_==i[_0x609d("0x190")];0==i[_0x609d("0x21")]&&0!=t&&t!=x[_0x609d("0x21")]-1||(n||(_=i[_0x609d("0x190")],e&&d[_0x609d("0x1a")](e),e={fnum:i[_0x609d("0x190")],pointList:[]}),Array[_0x609d("0x1b")][_0x609d("0x1a")].apply(e[_0x609d("0x1b5")],i[_0x609d("0x1b5")]))}return e&&d[_0x609d("0x1a")](e),this[_0x609d("0x852")]=d,d}},_addZeroResult:function(x){for(var d=0;d<x[_0x609d("0x21")]-1;d++){var _=x[d];if(_[_0x609d("0x21")]){var t=_.pointList[_[_0x609d("0x1b5")][_0x609d("0x21")]-1],i=x[d+1][_0x609d("0x1b5")][0];(0,e.DistanceofTwoPts)(t,i)>.2&&_[_0x609d("0x1b5")].push(new(esmap[_0x609d("0x25b")])(i.x,i.y))}}},reset:function(){this._getNaviResult()},_getNaviResult:function(){if(this[_0x609d("0x843")]&&this.endData){var x=this[_0x609d("0x843")],d=this[_0x609d("0x844")],_=this[_0x609d("0x289")];if(this[_0x609d("0x85f")]||(this[_0x609d("0x85f")]=new(esmap[_0x609d("0x860")])),this[_0x609d("0x854")]=this[_0x609d("0x85f")][_0x609d("0x861")](x[_0x609d("0x190")],d[_0x609d("0x190")],x,d,_),!this.outcome)return void console.info(_0x609d("0x862"));this._naviResult=this.outcome.result,this[_0x609d("0x863")]();var e=this[_0x609d("0x864")](this[_0x609d("0x865")]);this[_0x609d("0x84a")]=e[0],this.naviDescriptionsData=e[1],this[_0x609d("0x866")]=e[2]}},clearLocationMarker:function(){this[_0x609d("0x847")]&&(this[_0x609d("0xbc")][_0x609d("0x24d")](this[_0x609d("0x847")]),this[_0x609d("0x847")]=null)},clearMarkers:function(){this[_0x609d("0x845")]&&(this[_0x609d("0x845")][_0x609d("0x24e")](),this[_0x609d("0x867")]=null,this[_0x609d("0x843")]=null),this[_0x609d("0x846")]&&(this[_0x609d("0x846")][_0x609d("0x24e")](),this[_0x609d("0x846")]=null,this[_0x609d("0x844")]=null),this[_0x609d("0x865")]=null},clearNaviLines:function(){this[_0x609d("0xbc")][_0x609d("0x17a")](_0x609d("0x868"))},clearAll:function(){this[_0x609d("0x367")](),this[_0x609d("0x869")](),this[_0x609d("0x856")](),this[_0x609d("0x86a")]()},_drawLinesByFloor:function(x,d){var _=this;_[_0x609d("0x268")].up=new(THREE[_0x609d("0x1b1")])(0,1,0),_[_0x609d("0x268")][_0x609d("0x3cd")]=!1,_[_0x609d("0x852")][_0x609d("0xc1")](function(e){if(e[_0x609d("0x190")]==x)return _[_0x609d("0x86b")]([e],d)})},_drawLines:function(x,d){function _(x){for(var d=0;d<t[_0x609d("0x21")];d++)if(t[d][_0x609d("0x190")]==x)return d;return-1}var e=this;d=void 0==d||d,d&&e[_0x609d("0x856")]();for(var t=[],i=0;i<x[_0x609d("0x21")];i++){var n=x[i][_0x609d("0x1e1")],g=x[i].fnum,a=_(g);a>-1?t[a][_0x609d("0x1b5")][_0x609d("0x1a")](n):t[_0x609d("0x1a")]({fnum:g,pointList:[n]})}e[_0x609d("0x86b")](t,d)},_drawlineByResults:function(x,d){d=void 0==d||d,d&&this[_0x609d("0x856")]();var _=new esmap.ESLineMarker(_0x609d("0x868"),x,this.lineStyle);this[_0x609d("0x855")]=_,_0x609d("0x3bd")==this[_0x609d("0x268")][_0x609d("0x4")]||_0x609d("0x3bf")==this[_0x609d("0x268")][_0x609d("0x4")]?this[_0x609d("0x268")][_0x609d("0x505")]=.3:this[_0x609d("0x268")][_0x609d("0x505")]=1,this[_0x609d("0xbc")][_0x609d("0x17d")](_)},drawNaviLine:function(x,d){if(this[_0x609d("0x843")]&&this[_0x609d("0x844")]&&this.outcome){this[_0x609d("0x857")]=!1,this.lineStyle.up=new(THREE[_0x609d("0x1b1")])(0,1,0),this.lineStyle[_0x609d("0x3cd")]=!1,!this.autoClearNaviLine&&d&&this[_0x609d("0x856")]();var _=null;return _=void 0==x||_0x609d("0x1fc")==x||0==x?this[_0x609d("0x86c")](this[_0x609d("0x86d")],this.autoClearNaviLine):this[_0x609d("0x86e")](x,this[_0x609d("0x86f")]),this[_0x609d("0x870")](),_}},_locMarkerToStartPoint:function(x){if(this[_0x609d("0x865")]){var d=this[_0x609d("0x865")][0][_0x609d("0x1b5")][0],_=this[_0x609d("0x865")][0][_0x609d("0x190")];x=void 0==x?3:x,this[_0x609d("0x560")][_0x609d("0x513")](d.x,d.y,_,x||1.01*this[_0x609d("0x187")])}},_moveTo:function(x,d,_){return void 0==d&&(d=0),this[_0x609d("0xbc")][_0x609d("0x336")]({x:x.x,y:x.y,time:d,FloorNum:x[_0x609d("0x190")],callback:_})},broadcast:function(x,d){var _=this,e=esmap[_0x609d("0x197")][_0x609d("0x607")];if(_.naviDescriptionsData[x]){var t=_[_0x609d("0x84b")][x][_0x609d("0x638")],i=_[_0x609d("0x871")];if(d<=3&&!i[_0x609d("0x872")].nex[_0x609d("0x621")](x)){var n=_[_0x609d("0x86d")][x+1][_0x609d("0x873")],g="",a=_[_0x609d("0xbc")].mapService[_0x609d("0x1e5")][_0x609d("0x762")]?_0x609d("0x874")+_[_0x609d("0xbc")][_0x609d("0x144")][_0x609d("0x1e5")][_0x609d("0x762")]+"导航":"";switch(n){case"左前":g=n+_0x609d("0x875");break;case"右前":g=n+_0x609d("0x875");break;case"左":g=n+"转";break;case"右":g=n+"转";break;case"终":g=_0x609d("0x876")+a}e(g),i.played.nex.push(x)}else if(t>8&&t-d>=1&&!i[_0x609d("0x872")].cur[_0x609d("0x621")](x)){var n=_[_0x609d("0x86d")][x+1].relDesc,r="终"==n?_0x609d("0x877"):"",A="直行"+parseInt(t-2*_[_0x609d("0x3e9")])+"米"+r;e(A),i[_0x609d("0x872")][_0x609d("0x878")][_0x609d("0x1a")](x)}}},walkingfunction:function(x,d){var _=this,e=_[_0x609d("0x84e")];if(x[_0x609d("0x1b3")]>8?e[_0x609d("0x879")]++:e.deviateCount=0,e[_0x609d("0x879")]>=3)return _[_0x609d("0x10c")](_0x609d("0x87a")),_[_0x609d("0x843")].x=d.x,_[_0x609d("0x843")].y=d.y,_[_0x609d("0x845")][_0x609d("0x336")](d),_[_0x609d("0x856")](),_._getNaviResult(),_[_0x609d("0x857")]=!0,_[_0x609d("0x87b")](),void(e[_0x609d("0x879")]=0);if(0!=e[_0x609d("0x87c")]&&e.surDistance<x[_0x609d("0x87d")]?e[_0x609d("0x87e")]++:e[_0x609d("0x87e")]=0,0==e[_0x609d("0x87e")]||e[_0x609d("0x87e")]>6){var t=_[_0x609d("0xbc")][_0x609d("0x1b6")](x[_0x609d("0x1e1")]);t[_0x609d("0x190")]=x[_0x609d("0x1e1")][_0x609d("0x190")],this._gps(t,x[_0x609d("0x35b")]),e[_0x609d("0x87c")]=x[_0x609d("0x87d")],x[_0x609d("0x87d")]<6?e.arrivalCount++:e.arrivalCount=0,e[_0x609d("0x87f")]>3&&(navi[_0x609d("0x10b")](_0x609d("0x880")),e[_0x609d("0x87f")]=0,_.emit(_0x609d("0xac")))}},walkTo:function(x,d){function _(){var d=e.naviConstraint(x),_={remain:d[_0x609d("0x87d")],walk:e[_0x609d("0x866")]-d[_0x609d("0x87d")],distanceToNext:d[_0x609d("0x881")],angle:d[_0x609d("0x35b")],point:d[_0x609d("0x419")],fnum:x[_0x609d("0x190")],index:d[_0x609d("0x882")],isReal:!0,offset:d.distance};e[_0x609d("0x10c")]("walking",_),e[_0x609d("0x883")]||(e[_0x609d("0x883")]=_[_0x609d("0x190")]),e[_0x609d("0x884")](_,x),e[_0x609d("0x885")]&&e[_0x609d("0x886")](d[_0x609d("0x882")],d[_0x609d("0x881")])}var e=this;e[_0x609d("0x887")]&&e[_0x609d("0x367")](),_()},naviConstraint:function(x){var d=this;if(d[_0x609d("0x843")]&&d[_0x609d("0x844")]){for(var _={coord:{fnum:x[_0x609d("0x190")]},distance:null,angle:0},t=d._analyse()[_0x609d("0xbc")](function(x){return{x:x.x,y:x.z,z:0,fnum:x[_0x609d("0x190")],index:x[_0x609d("0x888")]}}),i={},n=1;n<t[_0x609d("0x21")];n++){var g=t[n-1],a=t[n];if(g[_0x609d("0x190")]===x[_0x609d("0x190")]&&a[_0x609d("0x190")]===x[_0x609d("0x190")]){var r=(0,e.calcProjPoint)(x,g,a,i);(null==_.distance||r<_[_0x609d("0x638")])&&(_[_0x609d("0x638")]=r,Object[_0x609d("0x348")](_[_0x609d("0x419")],i),_[_0x609d("0x35b")]=d[_0x609d("0x62a")](g,a),_[_0x609d("0x882")]=g[_0x609d("0x882")],_[_0x609d("0x881")]=(0,e[_0x609d("0x704")])(i,a))}}if(null!=_[_0x609d("0x638")]){for(var A=0,n=t[_0x609d("0x21")]-1;n>_.index;n--)if(n-1>_[_0x609d("0x882")]){var g=t[n],a=t[n-1];A+=(0,e[_0x609d("0x704")])(g,a)}A+=(0,e[_0x609d("0x704")])(t[_.index+1],_[_0x609d("0x419")]),_[_0x609d("0x87d")]=A}return _}},getRouteAngle:function(x,d){var _=new(THREE[_0x609d("0x1b1")])(0,0,1),e=new(THREE[_0x609d("0x1b1")])(x.x,0,x.y),t=new THREE.Vector3(d.x,0,d.y),i=t[_0x609d("0x1a8")]()[_0x609d("0x246")](e)[_0x609d("0x287")](),n=i[_0x609d("0x4bb")](_)*THREE.Math[_0x609d("0x27e")];return i[_0x609d("0x1a8")]()[_0x609d("0x4ba")](_).y>0?360-n:n},_getTransformByLength:function(x,d){if(x){if(0==d)return x[0];for(var _,e,t,i=0,n=0,g=x[0],a=1;a<x[_0x609d("0x21")];a++)if(_=x[a],_[_0x609d("0x190")]==g[_0x609d("0x190")]){if(e=_[_0x609d("0x1a8")]()[_0x609d("0x246")](g),t=e[_0x609d("0x21")](),i+=t,i>=d){e[_0x609d("0x287")]();var r=g.clone()[_0x609d("0x82")](e[_0x609d("0x1a8")]()[_0x609d("0x288")](d-n));return r[_0x609d("0x190")]=_.fnum,r.index=_[_0x609d("0x888")],r}g=_.clone(),g[_0x609d("0x190")]=_[_0x609d("0x190")],g[_0x609d("0x882")]=_[_0x609d("0x888")],n=i}else g=_[_0x609d("0x1a8")](),g[_0x609d("0x190")]=_[_0x609d("0x190")],g[_0x609d("0x882")]=_[_0x609d("0x888")];var A=x[x.length-1];return A[_0x609d("0x882")]=A[_0x609d("0x888")],A}},getLadderType:function(x,d){return"梯"},_naviDescriptions:function(x){function d(x,d){var _=Math.PI/4,e=x/_,t=parseInt(e),i=e%1*_;return t%2==0?i>d&&(t+=1):i>=_-d&&(t+=1),t}function _(x,d){var _=d[_0x609d("0x4bb")](x),e=d[_0x609d("0x1a8")]()[_0x609d("0x4ba")](x);return e.y<0&&(_=2*Math.PI-_),_}function e(x,e){if(e==x.length-1)return{index:x[x[_0x609d("0x21")]-1][_0x609d("0x882")]};var t=new THREE.Vector3(0,0,1),i=0==e?t:x[e][_0x609d("0x1a8")]()[_0x609d("0x246")](x[e-1])[_0x609d("0x287")](),n=x[e+1][_0x609d("0x1a8")]()[_0x609d("0x246")](x[e]),a=n[_0x609d("0x21")](),r=n[_0x609d("0x287")](),A=(g[_0x609d("0x889")],THREE.Math[_0x609d("0x23f")],d(_(t,r),22.5*THREE[_0x609d("0x1bb")].DEG2RAD)),I=_(i,r),C=d(I,g[_0x609d("0x889")]*THREE[_0x609d("0x1bb")][_0x609d("0x23f")]);return{relField:C,relDesc:f[C],relAngle:I*THREE[_0x609d("0x1bb")].RAD2DEG,absField:A,absDesc:u[A],distance:a,index:x[e][_0x609d("0x882")]}}function t(x,d){for(var _=x.map(function(x,d){var _=g[_0x609d("0xbc")][_0x609d("0x1b6")](x);return _.index=d,_}),t=[],i=0;i<_[_0x609d("0x21")];i++){var n=e(_,i);n[_0x609d("0x1e1")]=x[i],n.fnum=d,t[_0x609d("0x1a")](n)}for(var a=[t[0]],i=1;i<t[_0x609d("0x21")];i++)t[i][_0x609d("0x88a")]<=g.combineAsset||360-t[i][_0x609d("0x88a")]<=g[_0x609d("0x88b")]?a[a[_0x609d("0x21")]-1][_0x609d("0x638")]+=t[i][_0x609d("0x638")]:a[_0x609d("0x1a")](t[i]);return a}function i(x,d,_,e){var t=x[d],i=x[d+1],n=l[i[_0x609d("0x88c")]];if(g[_0x609d("0x88d")]=0,!n||g[_0x609d("0x88d")])if(e){if(g[_0x609d("0x88d")]=!1,!n){var a=g[_0x609d("0x88e")](x[d+1][_0x609d("0x1e1")],_),r=e>_?"上行到达":_0x609d("0x88f"),A=g.map[_0x609d("0x19d")](e)[_0x609d("0x395")];n="乘"+a+" "+r+" "+A}}else g[_0x609d("0x88d")]&&(g._tailLen=i[_0x609d("0x638")]),n=_0x609d("0x877");var I=[];return 0==d?I[_0x609d("0x1a")](_0x609d("0x890"),Math[_0x609d("0x1bf")](t[_0x609d("0x638")]),_0x609d("0x891")+n):I[_0x609d("0x1a")](_0x609d("0x892"),Math[_0x609d("0x1bf")](t[_0x609d("0x638")]+(g[_0x609d("0x88d")]&&!e?i[_0x609d("0x638")]:0)),_0x609d("0x891")+n),I}function n(x,d,_,e){var t=x[d],i=x[d+1],n=l[x[d+1][_0x609d("0x88c")]];if(!n||g[_0x609d("0x88d")])if(e){var a=e>_?"上":"下";g[_0x609d("0xbc")][_0x609d("0x19d")](e).floorDesc,i.relDesc=a}else i[_0x609d("0x873")]="终";return{startPoint:t.point,startFloor:t[_0x609d("0x190")],startIndex:t[_0x609d("0x882")],endPoint:i[_0x609d("0x1e1")],endFloor:i[_0x609d("0x190")],endIndex:i[_0x609d("0x882")],startDirection:t[_0x609d("0x893")],endDirection:i[_0x609d("0x873")],distance:t[_0x609d("0x638")]+(g[_0x609d("0x88d")]&&!e?i[_0x609d("0x638")]:0)}}var g=this;g[_0x609d("0x86d")]=[],g[_0x609d("0x88d")]=!1,g[_0x609d("0x894")]=0;for(var a,r,A,I=[],C=[],o=null,s=0,c=[],u=["北","东北","东","东南","南","西南","西","西北","北"],f=["前","右前","右","右后","后","左后","左","左前","前"],l=[_0x609d("0x895"),_0x609d("0x896"),"右转",_0x609d("0x897"),"后退",_0x609d("0x898"),"左转",_0x609d("0x899"),_0x609d("0x895")],h=!1,b=null,p=(x[0].fnum,0);p<x[_0x609d("0x21")];p++)x[p+1]&&x[p][_0x609d("0x190")]==x[p+1][_0x609d("0x190")]&&1!=x[p][_0x609d("0x1b5")].length&&1!=x[p+1].pointList[_0x609d("0x21")]&&(x[p].length+=x[p+1][_0x609d("0x21")],x[p][_0x609d("0x1b5")]=x[p][_0x609d("0x1b5")].concat(x[p+1][_0x609d("0x1b5")]),x[_0x609d("0x25")](p+1,1),p--);for(var v=0;v<x[_0x609d("0x21")];v++){if(a=x[v],o=a[_0x609d("0x190")],A=null,v<x[_0x609d("0x21")]-1)for(var m=v;m<x.length;m++)if(x[m][_0x609d("0x190")]!=o){A=x[m][_0x609d("0x190")];break}r=a[_0x609d("0x1b5")];var y=t(r,o);if(y[_0x609d("0x21")]>1&&Array[_0x609d("0x1b")][_0x609d("0x1a")].apply(g[_0x609d("0x86d")],y),g[_0x609d("0x86d")][_0x609d("0x21")],1==y[_0x609d("0x21")]&&0!=a[_0x609d("0x21")]&&Array[_0x609d("0x1b")][_0x609d("0x1a")][_0x609d("0x36")](g[_0x609d("0x86d")],y),1==y[_0x609d("0x21")]){if(A||h){if(h)C.length&&(m==x[_0x609d("0x21")]-1&&(I[I[_0x609d("0x21")]-1]+=_0x609d("0x89a"),C[C[_0x609d("0x21")]-1][_0x609d("0x89b")]="终"),C[C.length-1].endPoint=r[0],C[C.length-1].endGID=o);else if(b==o||null==b){var w=A>o?"上行到达":_0x609d("0x88f"),E=g.map[_0x609d("0x19d")](A)[_0x609d("0x395")],k=[_0x609d("0x89c")+w+" "+E];I.push(k),C[_0x609d("0x1a")]({startPoint:r[0],startDirection:A>o?"上":"下",startFloor:o})}h=!h}}else{b=o;for(var S=0;S<y[_0x609d("0x21")]-1&&!g[_0x609d("0x88d")];S++)I[_0x609d("0x1a")](i(y,S,o,A)),C.push(n(y,S,o,A))}if(y[_0x609d("0x21")]>1){var T=y[_0x609d("0x3c4")](function(x,d){return x+(d[_0x609d("0x638")]||0)},0);c[_0x609d("0x1a")]({fnum:o,distance:T}),s+=T}}return[I,C,s,c]},_analyse:function(){if(this[_0x609d("0x843")]&&this[_0x609d("0x844")]){var x=-1,d=this[_0x609d("0x84b")][_0x609d("0xbc")](function(d,_){var e=new(THREE[_0x609d("0x1b1")])(d[_0x609d("0x424")].x,0,d[_0x609d("0x424")].y);return e[_0x609d("0x190")]=d[_0x609d("0x89d")],e[_0x609d("0x888")]=_,x=_,e}),_=this.naviDescriptionsData[this[_0x609d("0x84b")][_0x609d("0x21")]-1],e=new(THREE[_0x609d("0x1b1")])(_.endPoint.x,0,_[_0x609d("0x83b")].y);return e[_0x609d("0x190")]=_.endFloor,e[_0x609d("0x888")]=x+1,d[_0x609d("0x1a")](e),d}},_toPos:null,_toRot:null,_allLen:0,_preGid:0,_changeFnumIng:!1,_animID:null,_gps:function(x,d){var _=this;if(_._preGid!=x[_0x609d("0x190")]){_[_0x609d("0x883")]=x[_0x609d("0x190")],_[_0x609d("0x89e")]++,_[_0x609d("0x560")].visible=!1;var e={x:-x.x-_[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b2")],y:x.z+_[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b4")]};e[_0x609d("0x190")]=x[_0x609d("0x190")],_[_0x609d("0x4bd")]||_.audioPlay?(_._changeFnumIng=!0,_[_0x609d("0x89f")]&&(_[_0x609d("0x8a0")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](_[_0x609d("0xbc")],_[_0x609d("0x8a1")],{tiltAngle:_[_0x609d("0x8a2")]})),function(){if(!_.isMultiFloors){_.map.visibleFloorNums=[x[_0x609d("0x190")]];var d=_[_0x609d("0x560")][_0x609d("0x8a3")](),t=_[_0x609d("0x852")][_[_0x609d("0x89e")]];t&&t[_0x609d("0x1b5")]&&t[_0x609d("0x1b5")][_0x609d("0x21")]>0&&(d=_[_0x609d("0x852")][_[_0x609d("0x89e")]][_0x609d("0x1b5")][0]),d.fnum=x[_0x609d("0x190")];var i={x:-d.x-_[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b2")],y:d.y-_[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b4")]},n={x:x.x,y:x.z},g=_[_0x609d("0x62a")](i,n);_[_0x609d("0x560")][_0x609d("0x3f3")]=g,_[_0x609d("0x560")].setPosition({x:d.x,y:d.y,fnum:d[_0x609d("0x190")]})}_[_0x609d("0x4f8")]=_._moveTo(e,_[_0x609d("0x8a1")],function(){var d=_[_0x609d("0xbc")][_0x609d("0x159")][_[_0x609d("0x1f7")]]<.2?_.minScale:_[_0x609d("0xbc")][_0x609d("0x159")][_[_0x609d("0x1f7")]];_[_0x609d("0xbc")][_0x609d("0x1b8")](d,{time:_[_0x609d("0x8a1")],rawLevel:!0,callback:function(){_[_0x609d("0x8a4")]=!1}}),_[_0x609d("0x560")][_0x609d("0x190")]=x.fnum,_[_0x609d("0x560")][_0x609d("0x17e")]=!0,_.changeTiltAngle&&(_[_0x609d("0x8a0")]=THREE[_0x609d("0x12c")].action(_[_0x609d("0xbc")],_[_0x609d("0x8a1")],{tiltAngle:_[_0x609d("0x2b8")]}))})}(),_[_0x609d("0x8a5")]&&(_[_0x609d("0x8a6")]=_[_0x609d("0xbc")][_0x609d("0x1b8")](_[_0x609d("0x1f7")]+1,{time:_.inTime,callback:function(){if(!_.isMultiFloors){_.map.visibleFloorNums=[x[_0x609d("0x190")]];var d=_[_0x609d("0x560")].getPosition(),t=_[_0x609d("0x852")][_[_0x609d("0x89e")]];t&&t[_0x609d("0x1b5")]&&t[_0x609d("0x1b5")][_0x609d("0x21")]>0&&(d=_[_0x609d("0x852")][_[_0x609d("0x89e")]][_0x609d("0x1b5")][0]),d[_0x609d("0x190")]=x[_0x609d("0x190")],_[_0x609d("0x560")][_0x609d("0x513")]({x:d.x,y:d.y,fnum:d[_0x609d("0x190")]})}_[_0x609d("0xbc")][_0x609d("0x2a9")]=!0,_._moveToID=_[_0x609d("0x8a7")](e,_.inTime,function(){var d=_[_0x609d("0xbc")][_0x609d("0x159")][_[_0x609d("0x1f7")]]<.2?_[_0x609d("0x8a8")]:_[_0x609d("0xbc")].scaleLevels_[_[_0x609d("0x1f7")]];_.map[_0x609d("0x1b8")](d,{time:_[_0x609d("0x8a1")],rawLevel:!0,callback:function(){_._changeFnumIng=!1,_[_0x609d("0xbc")][_0x609d("0x2a9")]=!1}}),_[_0x609d("0x560")][_0x609d("0x190")]=x.fnum,_[_0x609d("0x560")][_0x609d("0x17e")]=!0,_[_0x609d("0x89f")]&&(_[_0x609d("0x8a0")]=THREE[_0x609d("0x12c")][_0x609d("0x4b3")](_.map,_.inTime,{tiltAngle:_.tiltAngle}))})}}))):_.linesVisible(),_[_0x609d("0x10c")](_0x609d("0x8a9"),x[_0x609d("0x190")])}if(void 0!=d){_._locMarker[_0x609d("0x123")](-d),_[_0x609d("0x4b7")]&&_[_0x609d("0xbc")][_0x609d("0x123")]({to:180-d,time:1});var t={x:-(x.x+_[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b2")]),y:_.map[_0x609d("0x141")][_0x609d("0x1b4")]+x.z,time:.2};_._locMarker[_0x609d("0x17e")]||(_[_0x609d("0x847")][_0x609d("0x17e")]=!0),_[_0x609d("0x847")][_0x609d("0x336")](t);var i=_[_0x609d("0x8aa")],n=(new Date)[_0x609d("0x1ef")]();n-_[_0x609d("0x84c")]>1e3*i&&(_[_0x609d("0x4bd")]&&_[_0x609d("0xbc")][_0x609d("0x336")]({x:t.x,y:t.y,FloorNum:x[_0x609d("0x190")],time:1},_[_0x609d("0x8aa")]?1:0),_[_0x609d("0x84c")]=n)}else{var g=_.locationMarker[_0x609d("0x182")].matrix[_0x609d("0x1a8")]();g[_0x609d("0x4bf")](_[_0x609d("0x560")].o3d_[_0x609d("0x186")],_[_0x609d("0x8ab")],_.locationMarker[_0x609d("0x182")].up),g[_0x609d("0x4c0")]((new THREE.Matrix4)[_0x609d("0x4c2")](new(THREE[_0x609d("0x4c3")])(Math.PI/2,0,Math.PI))),_[_0x609d("0x8ac")]=(new(THREE[_0x609d("0x4c4")]))[_0x609d("0x4c5")](g)}},_anim:function(){var x=this;x[_0x609d("0x8ad")]&&clearInterval(x[_0x609d("0x8ad")]);var d=x[_0x609d("0x8ae")]();x[_0x609d("0x15c")][_0x609d("0xc3")](),x[_0x609d("0x887")]=!0,x._isEnd_=!1,x[_0x609d("0x89e")]=0,x[_0x609d("0x894")]=0,x[_0x609d("0x8ad")]=setInterval(function(){if(!x[_0x609d("0x85b")]){var _=x[_0x609d("0x15c")][_0x609d("0x233")]();if(x.vvs=x[_0x609d("0x3e9")]*_,!x[_0x609d("0x8a4")]&&!x.pause&&(x[_0x609d("0x8af")]+=x[_0x609d("0x8b0")],0!=x[_0x609d("0x8af")])){var e=x[_0x609d("0x8b1")](d,x[_0x609d("0x8af")]),t=x[_0x609d("0x866")]-x[_0x609d("0x8af")],i=Object[_0x609d("0x348")]({},e),n=i.y;if(!e)return void(x[_0x609d("0x85b")]=!0);if(d[d[_0x609d("0x21")]-1].x-e.x==0&&d[d[_0x609d("0x21")]-1].z-e.z==0)return x[_0x609d("0x367")](),x.map[_0x609d("0x230")]=esmap[_0x609d("0x13d")].DEFAULT,void void x[_0x609d("0x10c")](_0x609d("0xac"));if(i.y=i.z,i.z=n,x[_0x609d("0x8b2")]={remain:t,walk:x[_0x609d("0x8af")],point:i,fnum:e[_0x609d("0x190")],index:e[_0x609d("0x882")]-1},e.x=-e.x-x[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b2")],e.y=x[_0x609d("0x560")][_0x609d("0x182")][_0x609d("0x186")].y,e.z-=x[_0x609d("0xbc")][_0x609d("0x141")][_0x609d("0x1b4")],x[_0x609d("0x8ab")]=e.clone(),!e||t<=x[_0x609d("0x894")])return void(x[_0x609d("0x85b")]=!0);x._preGid||(x[_0x609d("0x883")]=d[0].fnum),x.isSimulating&&x[_0x609d("0x8b3")](e)}}},1e3/30)},_animateFun:null,stop:function(){clearInterval(this[_0x609d("0x8ad")]),clearInterval(this[_0x609d("0x8a0")]),this[_0x609d("0x8a6")]&&clearInterval(this[_0x609d("0x8a6")]),clearInterval(this._moveToID),this[_0x609d("0x8b4")]&&this[_0x609d("0xbc")][_0x609d("0x10b")](_0x609d("0xc6"),this[_0x609d("0x8b4")]),this[_0x609d("0x8af")]=0,this[_0x609d("0x883")]=0,this._groupPointsIndex=0,this[_0x609d("0x8ab")]=this[_0x609d("0x8ac")]=null,this[_0x609d("0x15c")][_0x609d("0x367")](),this[_0x609d("0x887")]=!1,this[_0x609d("0x8b2")]=null,this.naviInfos={played:{nex:[],cur:[]}},this[_0x609d("0x86d")]=null},_animate:function(){var x=this;if(!x[_0x609d("0x8a4")]&&!x[_0x609d("0x8b5")]){if(x._toPos){var d=x[_0x609d("0x560")][_0x609d("0x182")][_0x609d("0x186")][_0x609d("0x1a8")]()[_0x609d("0x5ba")](x[_0x609d("0x8ab")],.2);(0,e[_0x609d("0x704")])(d,x[_0x609d("0x8ab")]),d.x=-d.x-x[_0x609d("0xbc")].mapScene[_0x609d("0x1b2")],d.y=d.z+x[_0x609d("0xbc")][_0x609d("0x141")].sceneZ_,d[_0x609d("0x190")]=x[_0x609d("0x560")][_0x609d("0x190")],x[_0x609d("0x560")][_0x609d("0x513")](d.x,d.y,x[_0x609d("0x883")],1.01*x[_0x609d("0x187")]);var _=(0,e[_0x609d("0x704")])(x[_0x609d("0x8b2")][_0x609d("0x1e1")],x[_0x609d("0x84b")][x[_0x609d("0x8b2")][_0x609d("0x882")]][_0x609d("0x83b")]);x[_0x609d("0x8b2")]&&x.emit(_0x609d("0x880"),Object.assign({},x[_0x609d("0x8b2")],{remain:x[_0x609d("0x8b2")][_0x609d("0x87d")],distanceToNext:_}));var t=x.followGap,i=(new Date)[_0x609d("0x1ef")]();i-x[_0x609d("0x84c")]>1e3*t&&(x[_0x609d("0x4bd")]&&(x[_0x609d("0x4f8")]=x._moveTo(d,x[_0x609d("0x8aa")]?1.2:0)),x.moveTimer=i);var n=(x[_0x609d("0x871")],x[_0x609d("0x8b2")][_0x609d("0x882")]);if(x.audioPlay&&x[_0x609d("0x886")](n,_),x[_0x609d("0x85b")]&&x[_0x609d("0x8b2")].remain<.5)return x[_0x609d("0x367")](),x[_0x609d("0xbc")][_0x609d("0x230")]=esmap.ESFrameLimit.DEFAULT,void x[_0x609d("0x10c")](_0x609d("0xac"));
}if(x._toRot){if(x[_0x609d("0x560")][_0x609d("0x182")][_0x609d("0x3f0")][_0x609d("0x4be")](x[_0x609d("0x8ac")],.2),!x[_0x609d("0x4b7")])return;var g=new(THREE[_0x609d("0x1b1")])(1,0,0),a=g.clone(),r=x[_0x609d("0x560")][_0x609d("0x182")][_0x609d("0x618")].clone();r[_0x609d("0x513")](new(THREE[_0x609d("0x1b1")])),a[_0x609d("0x4b9")](r);var A=a[_0x609d("0x1a8")]().cross(g),A=A.y<0?-1:1,I=g.angleTo(a),C=Math.PI-I*A;x[_0x609d("0xbc")][_0x609d("0x13a")][_0x609d("0x20")]instanceof THREE[_0x609d("0x4bc")]&&(C+=Math.PI),x[_0x609d("0xbc")][_0x609d("0x13a")][_0x609d("0xc6")]({forceTheta:C})}}},linesVisible:function(x){this[_0x609d("0xbc")].visibleFloorNums=x||this.map[_0x609d("0x189")]},moveToStart:function(x,d){this[_0x609d("0x8b6")](d,x)},onstartNavi:function(x,d){function _(){e.map.focusFloorNum={floornum:e[_0x609d("0x843")][_0x609d("0x190")],time:0},e.scaleAnimate&&e.changeTiltAngle&&(e._viewID=THREE[_0x609d("0x12c")].action(e[_0x609d("0xbc")],t,{tiltAngle:e[_0x609d("0x2b8")]}));var _=x[_0x609d("0x1f7")]||e.scaleLevel||0;e.scaleAnimate?e._scaleLevelToID=e[_0x609d("0xbc")][_0x609d("0x1b8")](_,{callback:d,rawLevel:!1,time:t}):d()}if(this[_0x609d("0x843")]&&this[_0x609d("0x844")]){x=x||{};var e=this,t=x[_0x609d("0x8a1")]||e[_0x609d("0x8a1")]||.7;e[_0x609d("0xbc")][_0x609d("0x230")]=esmap[_0x609d("0x13d")][_0x609d("0x8b7")],x.scaleLevel=x[_0x609d("0x1f7")]||e[_0x609d("0x1f7")]||0,e[_0x609d("0x8b8")](esmap[_0x609d("0x126")][_0x609d("0x85")].getValues(x,_0x609d("0x185"),_0x609d("0x3f5"),_0x609d("0x1b3"),1.01*e[_0x609d("0x187")])),(e[_0x609d("0x857")]||esmap[_0x609d("0x126")][_0x609d("0x85")][_0x609d("0x127")](x,_0x609d("0x641"),!1))&&e.drawNaviLine(null,!0),e[_0x609d("0x8b9")]||this[_0x609d("0x870")]([e[_0x609d("0x843")][_0x609d("0x190")]]),e.followPosition&&e[_0x609d("0x8a5")]?e._moveToID=e[_0x609d("0x8a7")](e[_0x609d("0x843")],t,function(){e[_0x609d("0x843")]&&_()}):_()}},simulate:function(x){function d(){_._anim(),_[_0x609d("0x8b4")]=_[_0x609d("0x8ba")][_0x609d("0xa2")](_),_[_0x609d("0xbc")].on("update",_[_0x609d("0x8b4")])}var _=this;this[_0x609d("0x8b6")](x,d)}},d.default=t},function(x,d){function _(x,d){if(!(x instanceof d))throw new TypeError(_0x609d("0xca"))}Object[_0x609d("0x1d")](d,_0x609d("0x79"),{value:!0});var e=function(){function x(x,d){for(var _=0;_<d[_0x609d("0x21")];_++){var e=d[_];e[_0x609d("0x7d")]=e[_0x609d("0x7d")]||!1,e[_0x609d("0x7e")]=!0,_0x609d("0x7f")in e&&(e[_0x609d("0x80")]=!0),Object[_0x609d("0x1d")](x,e[_0x609d("0xcb")],e)}}return function(d,_,e){return _&&x(d[_0x609d("0x1b")],_),e&&x(d,e),d}}(),t=function(){function x(d,e){_(this,x),this[_0x609d("0x356")]=d,this[_0x609d("0x475")](e),this[_0x609d("0x492")]={}}return e(x,[{key:_0x609d("0x476"),value:function(x){var d=this.map_[_0x609d("0x21f")]-this[_0x609d("0x356")][_0x609d("0x220")],_=this[_0x609d("0x356")].maxY-this[_0x609d("0x356")][_0x609d("0x222")],e={w:Math[_0x609d("0x110")](d),h:Math[_0x609d("0x110")](_)},t=esmap[_0x609d("0x197")][_0x609d("0x477")]();e.w=e.w*t[0]/10,e.h=e.h*t[1]/10;var i=1,n=x[_0x609d("0x478")]||2048;return(d>500||_>500)&&n>=8192&&(n=2048),(e.w>=n||e.h>=n)&&(e.w>=e.h?(i=e.h/e.w,e.w=n,e.h=n*i):(i=e.w/e.h,e.h=n,e.w=n*i)),e}},{key:_0x609d("0x479"),value:function(x,d){var _=(x-this[_0x609d("0x356")].minX)/(this[_0x609d("0x356")][_0x609d("0x21f")]-this[_0x609d("0x356")][_0x609d("0x220")]),e=(this.map_[_0x609d("0x221")]-this[_0x609d("0x356")][_0x609d("0x222")]-(d-this[_0x609d("0x356")][_0x609d("0x222")]))/(this[_0x609d("0x356")][_0x609d("0x221")]-this[_0x609d("0x356")][_0x609d("0x222")]),t={x:1-_,y:1-e};return t.x=t.x*this.options[_0x609d("0x2bb")],t.y=t.y*this[_0x609d("0x132")][_0x609d("0x185")],t}},{key:"config",value:function(x){var d=this,_=d.getDeviceWH(x),e=_.w,t=_.h;d[_0x609d("0x132")]={width:e,height:t,opacity:x[_0x609d("0x1c8")]?255*x[_0x609d("0x1c8")]:25500,radius:x[_0x609d("0x421")]?x[_0x609d("0x421")]:30,maxSize:x.maxSize||8192,points:{max:x[_0x609d("0x47a")]?x.max:100,data:[]}};var i=document[_0x609d("0x2")](_0x609d("0x2ee")),n=i[_0x609d("0x480")]("2d");i[_0x609d("0x2bb")]=e,i[_0x609d("0x185")]=t,d[_0x609d("0x132")][_0x609d("0x10d")]=n,d[_0x609d("0x132")][_0x609d("0x2ee")]=i,d[_0x609d("0x132")].ctx[_0x609d("0x4da")]=_0x609d("0x8bb")}},{key:"renderText",value:function(x,d,_,e){var t,i,n=this,g=n.options[_0x609d("0x10d")];switch(n.options[_0x609d("0x2ee")],1*e){case 180:t=-x,i=-d;break;case 90:t=d,i=-x}var a=g[_0x609d("0x4db")](_);g[_0x609d("0x4ed")](_,t-a[_0x609d("0x2bb")]/2,i+8)}},{key:_0x609d("0x38f"),value:function(x){var d=this,_=d.options[_0x609d("0x2ee")],e=new(THREE[_0x609d("0x3c8")])(_),t=d[_0x609d("0x356")][_0x609d("0x19d")](x),i=!1;x!=d.map_[_0x609d("0x20e")]&&d[_0x609d("0x356")][_0x609d("0x132")][_0x609d("0x216")]&&(i=!0);var n=t[_0x609d("0x389")]([_0x609d("0x361")]);n[_0x609d("0xc1")](function(x){if(x[_0x609d("0x180")].data_[_0x609d("0x378")]<9900||x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]>9999)if(x[_0x609d("0x194")]&&x.material.materials)for(var d=x[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")],_=0,t=3;_<d;){var n=x.material[_0x609d("0x195")][_];n[_0x609d("0xbc")]?(n[_0x609d("0xbc")][_0x609d("0x24e")](),n[_0x609d("0xbc")]=void 0):n[_0x609d("0x494")]=n[_0x609d("0x19b")][_0x609d("0x1a8")](),n[_0x609d("0xbc")]=e,n[_0x609d("0xbc")][_0x609d("0x8bc")]=!1,n[_0x609d("0x19b")][_0x609d("0x100")](16777215),n[_0x609d("0x3d0")]=!!i,n[_0x609d("0x495")]=!0,n[_0x609d("0xbc")].needsUpdate=!0,n[_0x609d("0x198")]=!0,t=0==_?3:2,_+=t}else{var g=x[_0x609d("0x194")],a=g[_0x609d("0x1a8")]();g[_0x609d("0xbc")]?(g[_0x609d("0xbc")][_0x609d("0x24e")](),g[_0x609d("0xbc")]=void 0):g[_0x609d("0x494")]=g[_0x609d("0x19b")][_0x609d("0x1a8")](),g.map=e,g.map[_0x609d("0x8bc")]=!1,g[_0x609d("0x19b")][_0x609d("0x100")](16777215),g[_0x609d("0x3d0")]=!!i,g[_0x609d("0x495")]=!0,g[_0x609d("0xbc")][_0x609d("0x198")]=!0,g[_0x609d("0x198")]=!0,x[_0x609d("0x194")]=new(THREE[_0x609d("0x1a7")])([g,a])}})}},{key:_0x609d("0x490"),value:function(x){var d=this;if(x){for(var _=d.map_[_0x609d("0x19d")](x),e=_[_0x609d("0x389")](_0x609d("0x48e")),t=0;t<e[_0x609d("0x21")];t++){var i=e[t];if(i[_0x609d("0x48f")]){i[_0x609d("0x48f")]=null;var n=i.material[_0x609d("0x195")][0],g=i[_0x609d("0x194")][_0x609d("0x195")][1];n[_0x609d("0xbc")]&&n[_0x609d("0xbc")][_0x609d("0x24e")](),n[_0x609d("0xbc")]=void 0;var a=n[_0x609d("0x491")];d.matInfos[a]?d.matInfos[a][_0x609d("0xbc")]?(n.map=d[_0x609d("0x492")][a][_0x609d("0xbc")],n[_0x609d("0xbc")][_0x609d("0x198")]=!0,n[_0x609d("0x3d0")]=!0,n[_0x609d("0x198")]=!0):(n&&n[_0x609d("0x24e")](),n=void 0,i[_0x609d("0x194")]=g,i[_0x609d("0x194")][_0x609d("0x3d0")]=!0,i[_0x609d("0x194")][_0x609d("0x198")]=!0):i[_0x609d("0x194")]=g;var r=_[_0x609d("0x389")]([_0x609d("0x361"),_0x609d("0x493")]);r[_0x609d("0xc1")](function(x){if(x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]<9900||x[_0x609d("0x180")][_0x609d("0x299")][_0x609d("0x378")]>9999)if(x[_0x609d("0x194")]&&x[_0x609d("0x194")].materials)for(var d=x[_0x609d("0x194")][_0x609d("0x195")][_0x609d("0x21")],_=0,e=3;_<d;){var t=x[_0x609d("0x194")][_0x609d("0x195")][_];t[_0x609d("0xbc")]&&t[_0x609d("0xbc")].dispose(),t[_0x609d("0xbc")]=void 0,t[_0x609d("0x19b")].copy(x[_0x609d("0x194")][_0x609d("0x195")][_][_0x609d("0x494")]),t[_0x609d("0x3d0")]=!0,t[_0x609d("0x198")]=!0,e=0==_?3:2,_+=e}else{var t=x.material;t[_0x609d("0xbc")]&&(t[_0x609d("0xbc")].dispose(),t[_0x609d("0xbc")]=void 0),t[_0x609d("0x19b")][_0x609d("0x23c")](t._color),t[_0x609d("0x3d0")]=!0,t[_0x609d("0x198")]=!0}})}}d[_0x609d("0x492")]={}}}},{key:_0x609d("0x499"),value:function(){this[_0x609d("0x132")].points[_0x609d("0x95")]=[],this[_0x609d("0x175")]()}},{key:_0x609d("0x8bd"),value:function(x,d,_,e){if(x&&d&&_){var t=this[_0x609d("0x479")](x,d);if(t){var i=this;i[_0x609d("0x8be")](t.x,t.y,_,e)}}}},{key:_0x609d("0x175"),value:function(){var x=this[_0x609d("0x132")].ctx;x[_0x609d("0x8bf")](0,0,this[_0x609d("0x132")].width,this[_0x609d("0x132")][_0x609d("0x185")])}}]),x}();d[_0x609d("0x92")]=t},function(x,d){THREE[_0x609d("0x33b")]=function(x,d){if(this.renderer=x,void 0===d){var _={minFilter:THREE[_0x609d("0x40b")],magFilter:THREE[_0x609d("0x40b")],format:THREE[_0x609d("0x8c0")],stencilBuffer:!1},e=x[_0x609d("0x23a")]();d=new(THREE[_0x609d("0x8c1")])(e[_0x609d("0x2bb")],e[_0x609d("0x185")],_)}this[_0x609d("0x345")]=d,this[_0x609d("0x8c2")]=d[_0x609d("0x1a8")](),this[_0x609d("0x8c3")]=this[_0x609d("0x345")],this[_0x609d("0x8c4")]=this[_0x609d("0x8c2")],this[_0x609d("0x8c5")]=[],void 0===THREE[_0x609d("0x8c6")],this.copyPass=new THREE.ShaderPass(THREE[_0x609d("0x8c6")])},Object[_0x609d("0x348")](THREE[_0x609d("0x33b")][_0x609d("0x1b")],{swapBuffers:function(){var x=this.readBuffer;this[_0x609d("0x8c4")]=this[_0x609d("0x8c3")],this[_0x609d("0x8c3")]=x},addPass:function(x){this.passes[_0x609d("0x1a")](x);var d=this[_0x609d("0x250")][_0x609d("0x23a")]();x[_0x609d("0x346")](d[_0x609d("0x2bb")],d[_0x609d("0x185")])},insertPass:function(x,d){this[_0x609d("0x8c5")][_0x609d("0x25")](d,0,x)},render:function(x){var d,_,e=!1,t=this[_0x609d("0x8c5")][_0x609d("0x21")];for(_=0;_<t;_++)if(d=this.passes[_],d.enabled!==!1){if(d[_0x609d("0x234")](this[_0x609d("0x250")],this[_0x609d("0x8c3")],this.readBuffer,x,e),d[_0x609d("0x8c7")]){if(e){var i=this[_0x609d("0x250")][_0x609d("0x4d9")];i[_0x609d("0x8c8")](i[_0x609d("0x8c9")],1,4294967295),this[_0x609d("0x8ca")].render(this[_0x609d("0x250")],this[_0x609d("0x8c3")],this.readBuffer,x),i[_0x609d("0x8c8")](i.EQUAL,1,4294967295)}this[_0x609d("0x8cb")]()}void 0!==THREE[_0x609d("0x8cc")]&&(d instanceof THREE[_0x609d("0x8cc")]?e=!0:d instanceof THREE[_0x609d("0x8cd")]&&(e=!1))}},reset:function(x){if(void 0===x){var d=this[_0x609d("0x250")][_0x609d("0x23a")]();x=this[_0x609d("0x345")][_0x609d("0x1a8")](),x[_0x609d("0x346")](d[_0x609d("0x2bb")],d[_0x609d("0x185")])}this[_0x609d("0x345")].dispose(),this[_0x609d("0x8c2")][_0x609d("0x24e")](),this[_0x609d("0x345")]=x,this[_0x609d("0x8c2")]=x[_0x609d("0x1a8")](),this[_0x609d("0x8c3")]=this[_0x609d("0x345")],this[_0x609d("0x8c4")]=this.renderTarget2},setSize:function(x,d){this[_0x609d("0x345")][_0x609d("0x346")](x,d),this.renderTarget2.setSize(x,d);for(var _=0;_<this[_0x609d("0x8c5")][_0x609d("0x21")];_++)this[_0x609d("0x8c5")][_][_0x609d("0x346")](x,d)}}),THREE[_0x609d("0x8ce")]=function(){this[_0x609d("0xbe")]=!0,this[_0x609d("0x8c7")]=!0,this[_0x609d("0x175")]=!1,this[_0x609d("0x33f")]=!1},Object[_0x609d("0x348")](THREE[_0x609d("0x8ce")][_0x609d("0x1b")],{setSize:function(x,d){},render:function(x,d,_,e,t){}})},function(x,d){_0x609d("0x93"),THREE[_0x609d("0x8cc")]=function(x,d){THREE[_0x609d("0x8ce")][_0x609d("0x15")](this),this[_0x609d("0x173")]=x,this[_0x609d("0x137")]=d,this[_0x609d("0x175")]=!0,this[_0x609d("0x8c7")]=!1,this.inverse=!1},THREE[_0x609d("0x8cc")][_0x609d("0x1b")]=Object[_0x609d("0x348")](Object[_0x609d("0xdc")](THREE[_0x609d("0x8ce")][_0x609d("0x1b")]),{constructor:THREE[_0x609d("0x8cc")],render:function(x,d,_,e,t){var i=x[_0x609d("0x4d9")],n=x[_0x609d("0x8cf")];n.buffers[_0x609d("0x19b")].setMask(!1),n[_0x609d("0x8d0")][_0x609d("0x742")][_0x609d("0x8d1")](!1),n[_0x609d("0x8d0")][_0x609d("0x19b")][_0x609d("0x8d2")](!0),n[_0x609d("0x8d0")][_0x609d("0x742")][_0x609d("0x8d2")](!0);var g,a;this[_0x609d("0x68f")]?(g=0,a=1):(g=1,a=0),n[_0x609d("0x8d0")][_0x609d("0x8d3")].setTest(!0),n[_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8d4")](i.REPLACE,i.REPLACE,i[_0x609d("0x8d5")]),n[_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8d6")](i[_0x609d("0x8d7")],g,4294967295),n[_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8d8")](a),x.render(this[_0x609d("0x173")],this[_0x609d("0x137")],_,this[_0x609d("0x175")]),x.render(this[_0x609d("0x173")],this[_0x609d("0x137")],d,this[_0x609d("0x175")]),n[_0x609d("0x8d0")].color[_0x609d("0x8d2")](!1),n[_0x609d("0x8d0")][_0x609d("0x742")][_0x609d("0x8d2")](!1),n[_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8d6")](i[_0x609d("0x8d9")],1,4294967295),n[_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8d4")](i[_0x609d("0x8da")],i[_0x609d("0x8da")],i[_0x609d("0x8da")])}}),THREE[_0x609d("0x8cd")]=function(){THREE.Pass.call(this),this[_0x609d("0x8c7")]=!1},THREE[_0x609d("0x8cd")].prototype=Object[_0x609d("0xdc")](THREE[_0x609d("0x8ce")][_0x609d("0x1b")]),Object.assign(THREE[_0x609d("0x8cd")][_0x609d("0x1b")],{render:function(x,d,_,e,t){x[_0x609d("0x8cf")][_0x609d("0x8d0")][_0x609d("0x8d3")][_0x609d("0x8db")](!1)}})},function(x,d){_0x609d("0x93"),THREE.RenderPass=function(x,d,_,e,t){THREE.Pass.call(this),this.scene=x,this.camera=d,this[_0x609d("0x8dc")]=_,this[_0x609d("0x8dd")]=e,this.clearAlpha=void 0!==t?t:0,this.clear=!0,this.clearDepth=!1,this[_0x609d("0x8c7")]=!1},THREE[_0x609d("0x33d")][_0x609d("0x1b")]=Object[_0x609d("0x348")](Object.create(THREE.Pass.prototype),{constructor:THREE.RenderPass,render:function(x,d,_,e,t){var i=x[_0x609d("0x641")];x[_0x609d("0x641")]=!1,this[_0x609d("0x173")].overrideMaterial=this[_0x609d("0x8dc")];var n,g;this[_0x609d("0x8dd")]&&(n=x[_0x609d("0x8de")]().getHex(),g=x[_0x609d("0x8df")](),x[_0x609d("0x2ad")](this[_0x609d("0x8dd")],this[_0x609d("0x8e0")])),this[_0x609d("0x657")]&&x.clearDepth(),x[_0x609d("0x234")](this[_0x609d("0x173")],this[_0x609d("0x137")],this[_0x609d("0x33f")]?null:_,this[_0x609d("0x175")]),this[_0x609d("0x8dd")]&&x[_0x609d("0x2ad")](n,g),this[_0x609d("0x173")].overrideMaterial=null,x[_0x609d("0x641")]=i}})},function(x,d){_0x609d("0x93"),THREE[_0x609d("0x33e")]=function(x,d){THREE[_0x609d("0x8ce")].call(this),this.textureID=void 0!==d?d:_0x609d("0x8e1"),x instanceof THREE[_0x609d("0x8e2")]?(this[_0x609d("0x8e3")]=x.uniforms,this.material=x):x&&(this[_0x609d("0x8e3")]=THREE[_0x609d("0x8e4")][_0x609d("0x1a8")](x[_0x609d("0x8e3")]),this[_0x609d("0x194")]=new(THREE[_0x609d("0x8e2")])({defines:x[_0x609d("0x8e5")]||{},uniforms:this[_0x609d("0x8e3")],vertexShader:x[_0x609d("0x8e6")],fragmentShader:x[_0x609d("0x8e7")]})),this[_0x609d("0x137")]=new THREE.OrthographicCamera(-1,1,1,-1,0,1),this[_0x609d("0x173")]=new(THREE[_0x609d("0x645")]),this[_0x609d("0x8e8")]=new(THREE[_0x609d("0x3d2")])(new(THREE[_0x609d("0x413")])(2,2),null),this[_0x609d("0x8e8")][_0x609d("0x8e9")]=!1,this[_0x609d("0x173")][_0x609d("0x82")](this[_0x609d("0x8e8")])},THREE[_0x609d("0x33e")][_0x609d("0x1b")]=Object[_0x609d("0x348")](Object[_0x609d("0xdc")](THREE.Pass[_0x609d("0x1b")]),{constructor:THREE[_0x609d("0x33e")],render:function(x,d,_,e,t){this[_0x609d("0x8e3")][this[_0x609d("0x8ea")]]&&(this[_0x609d("0x8e3")][this.textureID][_0x609d("0x7f")]=_[_0x609d("0x4e5")]),this[_0x609d("0x8e8")][_0x609d("0x194")]=this[_0x609d("0x194")],this[_0x609d("0x33f")]?x[_0x609d("0x234")](this[_0x609d("0x173")],this[_0x609d("0x137")]):x[_0x609d("0x234")](this[_0x609d("0x173")],this.camera,d,this[_0x609d("0x175")])}})},function(x,d){_0x609d("0x93"),THREE[_0x609d("0x8c6")]={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:[_0x609d("0x8eb"),"void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"][_0x609d("0x108")]("\n"),fragmentShader:["uniform float opacity;",_0x609d("0x8ec"),_0x609d("0x8eb"),_0x609d("0x8ed"),_0x609d("0x8ee"),_0x609d("0x8ef"),"}"][_0x609d("0x108")]("\n")}},function(x,d,_){_0x609d("0x93"),x.exports=_(84)},function(x,d,_){function e(){t.Reader[_0x609d("0x76")](t.BufferReader),t[_0x609d("0x796")]._configure()}var t=d;t[_0x609d("0x8f0")]="minimal",t[_0x609d("0x753")]=_(7),t[_0x609d("0x8f1")]=_(90),t[_0x609d("0x8f2")]=_(6),t[_0x609d("0x8f3")]=_(85),t[_0x609d("0x796")]=_(1),t.rpc=_(87),t[_0x609d("0x754")]=_(86),t[_0x609d("0x8f4")]=e,t[_0x609d("0x753")][_0x609d("0x76")](t[_0x609d("0x8f1")]),e()},function(x,d,_){function e(x){t[_0x609d("0x15")](this,x)}_0x609d("0x93"),x[_0x609d("0x3a")]=e;var t=_(6);(e[_0x609d("0x1b")]=Object.create(t[_0x609d("0x1b")]))[_0x609d("0x7c")]=e;var i=_(1);i[_0x609d("0x59")]&&(e[_0x609d("0x1b")][_0x609d("0xde")]=i.Buffer[_0x609d("0x1b")][_0x609d("0x29")]),e[_0x609d("0x1b")][_0x609d("0x54")]=function(){var x=this[_0x609d("0xe0")]();return this.buf.utf8Slice(this[_0x609d("0xd8")],this[_0x609d("0xd8")]=Math.min(this[_0x609d("0xd8")]+x,this[_0x609d("0xd9")]))}},function(x,d){_0x609d("0x93"),x[_0x609d("0x3a")]={}},function(x,d,_){_0x609d("0x93");var e=d;e[_0x609d("0x8f5")]=_(88)},function(x,d,_){function e(x,d,_){if(_0x609d("0x1f")!=typeof x)throw TypeError(_0x609d("0x8f6"));t[_0x609d("0x45")].call(this),this.rpcImpl=x,this.requestDelimited=Boolean(d),this[_0x609d("0x8f7")]=Boolean(_)}x[_0x609d("0x3a")]=e;var t=_(1);(e[_0x609d("0x1b")]=Object[_0x609d("0xdc")](t[_0x609d("0x45")][_0x609d("0x1b")])).constructor=e,e.prototype[_0x609d("0x8f8")]=function x(d,_,e,i,n){if(!i)throw TypeError(_0x609d("0x8f9"));var g=this;if(!n)return t[_0x609d("0x44")](x,g,d,_,e,i);if(!g.rpcImpl)return void setTimeout(function(){n(Error(_0x609d("0x8fa")))},0);try{return g[_0x609d("0x8fb")](d,_[_0x609d(g[_0x609d("0x8fc")]?"0x769":"0x760")](i)[_0x609d("0x106")](),function(x,_){if(x)return g[_0x609d("0x10c")]("error",x,d),n(x);if(null===_)return void g[_0x609d("0x155")](!0);if(!(_ instanceof e))try{_=e[_0x609d(g[_0x609d("0x8f7")]?"0x79b":"0x101")](_)}catch(x){return g.emit("error",x,d),n(x)}return g[_0x609d("0x10c")]("data",_,d),n(null,_)})}catch(x){return g.emit(_0x609d("0xaf"),x,d),void setTimeout(function(){n(x)},0)}},e[_0x609d("0x1b")][_0x609d("0x155")]=function(x){return this[_0x609d("0x8fb")]&&(x||this.rpcImpl(null,null,null),this[_0x609d("0x8fb")]=null,this[_0x609d("0x10c")](_0x609d("0x155"))[_0x609d("0x10b")]()),this}},function(x,d,_){function e(x,d){this.lo=x>>>0,this.hi=d>>>0}_0x609d("0x93"),x[_0x609d("0x3a")]=e;var t=_(1),i=e[_0x609d("0x8fd")]=new e(0,0);i[_0x609d("0x6b")]=function(){return 0},i[_0x609d("0xfa")]=i.zzDecode=function(){return this},i[_0x609d("0x21")]=function(){return 1};var n=e.zeroHash="\0\0\0\0\0\0\0\0";e[_0x609d("0xf6")]=function(x){if(0===x)return i;var d=x<0;d&&(x=-x);var _=x>>>0,t=(x-_)/4294967296>>>0;return d&&(t=~t>>>0,_=~_>>>0,++_>4294967295&&(_=0,++t>4294967295&&(t=0))),new e(_,t)},e[_0x609d("0x65")]=function(x){if(_0x609d("0x51")==typeof x)return e.fromNumber(x);if(t[_0x609d("0x53")](x)){if(!t.Long)return e[_0x609d("0xf6")](parseInt(x,10));x=t[_0x609d("0x5e")][_0x609d("0x8fe")](x)}return x[_0x609d("0x8ff")]||x[_0x609d("0x900")]?new e(x[_0x609d("0x8ff")]>>>0,x[_0x609d("0x900")]>>>0):i},e[_0x609d("0x1b")][_0x609d("0x6b")]=function(x){if(!x&&this.hi>>>31){var d=~this.lo+1>>>0,_=~this.hi>>>0;return d||(_=_+1>>>0),-(d+4294967296*_)}return this.lo+4294967296*this.hi},e[_0x609d("0x1b")][_0x609d("0xed")]=function(x){return t[_0x609d("0x5e")]?new(t[_0x609d("0x5e")])(0|this.lo,0|this.hi,Boolean(x)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(x)}};var g=String[_0x609d("0x1b")][_0x609d("0x118")];e[_0x609d("0x69")]=function(x){return x===n?i:new e((g.call(x,0)|g[_0x609d("0x15")](x,1)<<8|g.call(x,2)<<16|g[_0x609d("0x15")](x,3)<<24)>>>0,(g[_0x609d("0x15")](x,4)|g[_0x609d("0x15")](x,5)<<8|g.call(x,6)<<16|g[_0x609d("0x15")](x,7)<<24)>>>0)},e[_0x609d("0x1b")][_0x609d("0x66")]=function(){return String[_0x609d("0x107")](255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype[_0x609d("0xfa")]=function(){var x=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^x)>>>0,this.lo=(this.lo<<1^x)>>>0,this},e[_0x609d("0x1b")].zzDecode=function(){var x=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^x)>>>0,this.hi=(this.hi>>>1^x)>>>0,this},e[_0x609d("0x1b")].length=function(){var x=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return 0===_?0===d?x<16384?x<128?1:2:x<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:_<128?9:10}},function(x,d,_){function e(){i[_0x609d("0x15")](this)}function t(x,d,_){x[_0x609d("0x21")]<40?n.utf8.write(x,d,_):d[_0x609d("0x901")](x,_)}_0x609d("0x93"),x.exports=e;var i=_(7);(e[_0x609d("0x1b")]=Object[_0x609d("0xdc")](i.prototype))[_0x609d("0x7c")]=e;var n=_(1),g=n[_0x609d("0x59")];e[_0x609d("0xf3")]=function(x){return(e.alloc=n[_0x609d("0x5b")])(x)};var a=g&&g[_0x609d("0x1b")]instanceof Uint8Array&&_0x609d("0x100")===g.prototype[_0x609d("0x100")][_0x609d("0x43")]?function(x,d,_){d.set(x,_)}:function(x,d,_){if(x.copy)x[_0x609d("0x23c")](d,_,0,x[_0x609d("0x21")]);else for(var e=0;e<x[_0x609d("0x21")];)d[_++]=x[e++]};e[_0x609d("0x1b")][_0x609d("0xe8")]=function(x){n.isString(x)&&(x=n[_0x609d("0x5a")](x,"base64"));var d=x[_0x609d("0x21")]>>>0;return this.uint32(d),d&&this[_0x609d("0xf5")](a,d,x),this},e[_0x609d("0x1b")][_0x609d("0x54")]=function(x){var d=g[_0x609d("0x902")](x);return this[_0x609d("0xe0")](d),d&&this[_0x609d("0xf5")](t,d,x),this}}]);